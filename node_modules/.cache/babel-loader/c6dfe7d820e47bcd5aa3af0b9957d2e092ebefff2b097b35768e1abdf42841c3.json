{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom'; // Make sure this import is present\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RubricCreator = () => {\n  _s();\n  // Get shared context functions and state\n  const {\n    sharedRubric,\n    setSharedRubric,\n    transferRubricToGradingWithDetails,\n    activeTab\n  } = useAssessment();\n\n  // Default rubric levels (7-level system)\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // Initialize state from shared context or defaults\n  const [rubricData, setRubricData] = useState(() => {\n    if (sharedRubric) {\n      return sharedRubric;\n    }\n    return {\n      assignmentInfo: {\n        title: '',\n        description: '',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: [...defaultLevels],\n      criteria: [{\n        id: 'criterion-1',\n        name: '',\n        description: '',\n        maxPoints: 20,\n        weight: 20,\n        levels: {},\n        feedbackLibrary: {\n          strengths: [],\n          improvements: [],\n          general: []\n        }\n      }]\n    };\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [modalEdit, setModalEdit] = useState({\n    show: false,\n    content: '',\n    field: null,\n    onSave: null\n  });\n  const [richTextContent, setRichTextContent] = useState('');\n  const [modalPosition, setModalPosition] = useState({\n    top: '50%',\n    left: '50%'\n  });\n  const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n\n  // Auto-save to shared context whenever rubricData changes\n  useEffect(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout);\n    }\n    const timeoutId = setTimeout(() => {\n      setSharedRubric(rubricData);\n    }, 1000); // Auto-save after 1 second of inactivity\n\n    setAutoSaveTimeout(timeoutId);\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [rubricData, setSharedRubric]);\n\n  // Load shared rubric when it changes externally\n  useEffect(() => {\n    if (sharedRubric && activeTab === 'rubric-creator') {\n      setRubricData(sharedRubric);\n    }\n  }, [sharedRubric, activeTab]);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Open modal for text editing with enhanced positioning\n  const openModalEdit = (content, field, onSave, clickEvent = null) => {\n    console.log('openModalEdit called with:', {\n      content,\n      field\n    });\n    setRichTextContent(content || '');\n\n    // Calculate position based on clicked element if available\n    if (clickEvent && clickEvent.target) {\n      const rect = clickEvent.target.getBoundingClientRect();\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n\n      // Position modal near the clicked element but ensure it's visible\n      const modalTop = Math.max(50, rect.top + scrollTop - 100);\n      const modalLeft = Math.max(50, rect.left + scrollLeft - 200);\n      setModalPosition({\n        top: `${modalTop}px`,\n        left: `${modalLeft}px`\n      });\n    } else {\n      // Default to center\n      setModalPosition({\n        top: '50%',\n        left: '50%'\n      });\n    }\n    setModalEdit({\n      show: true,\n      content: content || '',\n      field,\n      onSave\n    });\n\n    // Prevent body scroll and ensure visibility\n    setTimeout(() => {\n      document.body.style.overflow = 'hidden';\n      // Scroll the clicked element into view if needed\n      if (clickEvent && clickEvent.target) {\n        clickEvent.target.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }, 100);\n  };\n\n  // Rich text editor functions\n  const handleRichTextCommand = (command, value = null) => {\n    document.execCommand(command, false, value);\n    const editor = document.getElementById('richTextEditor');\n    if (editor) {\n      setRichTextContent(editor.innerHTML);\n    }\n  };\n  const handleRichTextChange = () => {\n    const editor = document.getElementById('richTextEditor');\n    if (editor) {\n      setRichTextContent(editor.innerHTML);\n    }\n  };\n\n  // FIXED: Preserve rich text formatting instead of converting to plain text\n  const sanitizeHtmlContent = html => {\n    // Clean up the HTML but preserve formatting\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n\n    // Remove any script tags or other dangerous elements\n    const scripts = tempDiv.querySelectorAll('script');\n    scripts.forEach(script => script.remove());\n\n    // Return the cleaned HTML with preserved formatting\n    return tempDiv.innerHTML;\n  };\n\n  // Close modal and save with preserved formatting\n  const closeModalEdit = (save = false) => {\n    if (save && modalEdit.onSave) {\n      // FIXED: Preserve rich text formatting instead of converting to plain text\n      const cleanedHtml = sanitizeHtmlContent(richTextContent);\n      modalEdit.onSave(cleanedHtml);\n    }\n    setModalEdit({\n      show: false,\n      content: '',\n      field: null,\n      onSave: null\n    });\n    setRichTextContent('');\n\n    // Restore body scroll\n    document.body.style.overflow = 'auto';\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n\n  // Update assignment info and recalculate total points\n  const updateAssignmentInfo = (field, value) => {\n    setRubricData(prev => {\n      const updated = {\n        ...prev,\n        assignmentInfo: {\n          ...prev.assignmentInfo,\n          [field]: value\n        }\n      };\n\n      // Auto-calculate total points\n      if (field !== 'totalPoints') {\n        updated.assignmentInfo.totalPoints = calculateTotalPoints();\n      }\n      return updated;\n    });\n  };\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    if (!item || !item.trim()) return;\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], item.trim()]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as backup\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Prepare rubric data for export/transfer\n  const prepareRubricForExport = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Update total points\n    exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n    return exportData;\n  };\n\n  // Transfer to grading tool directly\n  const transferToGrading = () => {\n    const exportData = prepareRubricForExport();\n    transferRubricToGradingWithDetails(exportData);\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n\n          // Validate the imported data structure\n          if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n            setRubricData(importedData);\n          } else {\n            alert('Invalid rubric format. Please check the JSON structure.');\n          }\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n          console.error('Import error:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Reset to default rubric\n  const resetRubric = () => {\n    if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n      const defaultRubric = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100\n        },\n        rubricLevels: [...defaultLevels],\n        criteria: [{\n          id: 'criterion-1',\n          name: '',\n          description: '',\n          maxPoints: 20,\n          weight: 20,\n          levels: {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: []\n          }\n        }]\n      };\n      setRubricData(defaultRubric);\n    }\n  };\n\n  // FIXED: Export to HTML with proper text wrapping\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const totalPoints = calculateTotalPoints();\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { \n            font-family: 'Arial', sans-serif; \n            max-width: 1200px; \n            margin: 0 auto; \n            padding: 20px; \n            line-height: 1.4; \n        }\n        .header { \n            text-align: center; \n            margin-bottom: 30px; \n            padding-bottom: 20px; \n            border-bottom: 3px solid #1e40af; \n        }\n        .header h1 { \n            color: #1e40af; \n            margin-bottom: 10px; \n            word-wrap: break-word;\n        }\n        .assignment-info { \n            background: #f8fafc; \n            padding: 20px; \n            border-radius: 8px; \n            margin-bottom: 25px; \n            border: 1px solid #e2e8f0; \n        }\n        .rubric-table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 30px; \n            font-size: 0.85rem; \n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n            table-layout: fixed;\n        }\n        .rubric-table th, .rubric-table td { \n            border: 1px solid #ddd; \n            padding: 12px; \n            text-align: left; \n            vertical-align: top;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n            hyphens: auto;\n        }\n        .rubric-table th { \n            background: #1e40af; \n            color: white; \n            text-align: center; \n            font-weight: 600; \n        }\n        .criterion-name { \n            font-weight: bold; \n            background: #f8fafc; \n            padding: 15px;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n        .point-range { \n            text-align: center; \n            font-weight: bold; \n            color: #1e40af; \n            font-size: 1.1em; \n        }\n        .level-description { \n            font-size: 0.9rem; \n            line-height: 1.4;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n            white-space: normal;\n        }\n        .level-description p {\n            margin: 0.5em 0;\n        }\n        .level-description ul, .level-description ol {\n            margin: 0.5em 0;\n            padding-left: 1.5em;\n        }\n        .level-description li {\n            margin: 0.25em 0;\n        }\n        .overall-score { \n            background: #eff6ff; \n            padding: 25px; \n            border-radius: 8px; \n            margin-top: 30px; \n            border: 2px solid #bfdbfe; \n        }\n        .footer { \n            margin-top: 40px; \n            text-align: center; \n            font-size: 0.9rem; \n            color: #666; \n            border-top: 1px solid #e2e8f0; \n            padding-top: 20px; \n        }\n        .level-grid { \n            display: grid; \n            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); \n            gap: 15px; \n            margin-top: 20px; \n        }\n        .level-card { \n            text-align: center; \n            padding: 15px; \n            border-radius: 8px; \n            border: 2px solid; \n        }\n        \n        /* FIXED: Enhanced text wrapping for all content */\n        * {\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n        }\n        \n        @media print { \n            body { \n                margin: 0; \n                padding: 15px; \n            } \n            .level-grid { \n                break-inside: avoid; \n            }\n            .rubric-table {\n                font-size: 0.75rem;\n            }\n            .rubric-table th, .rubric-table td {\n                padding: 8px;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <div style=\"color: #64748b; font-size: 1.1em; word-wrap: break-word;\">${rubricData.assignmentInfo.description || 'No description provided'}</div>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em; word-wrap: break-word;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic; word-wrap: break-word;\">\n                            ${criterion.description || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => {\n      var _criterion$levels$lev3;\n      return `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Professional Rubric Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-200\",\n              children: \"Create comprehensive assessment rubrics with detailed criteria and feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetRubric,\n              className: \"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Reset to blank rubric\",\n              children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 33\n              }, this), \"Reset\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _importInputRef$curre;\n                return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n              },\n              className: \"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Import existing rubric JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 33\n              }, this), \"Import\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferToGrading,\n              className: \"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Transfer rubric directly to grading tool\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 33\n              }, this), \"Use for Grading\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveRubric,\n              className: \"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Save work in progress as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 33\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForGrading,\n              className: \"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export final rubric for grading template\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 33\n              }, this), \"Export JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              className: \"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export HTML version for distribution\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"Auto-saved - Ready for grading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 748,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Quick Start Guide & Button Functions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Building Your Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 768,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 770,\n                      columnNumber: 49\n                    }, this), \" Clear all data and start fresh\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 770,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 771,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated or existing rubric files\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Use for Grading:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 772,\n                      columnNumber: 49\n                    }, this), \" Send directly to grading tool\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 772,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 773,\n                      columnNumber: 49\n                    }, this), \" Download work-in-progress (JSON)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 773,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 774,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 774,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 775,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 775,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 769,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Step-by-Step Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 779,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment details and requirements\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add criteria using \\\"Add Criterion\\\" button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 782,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 783,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional but recommended)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Use \\\"Use for Grading\\\" to switch to grading tool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 785,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 786,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 780,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCA1 Tip:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 792,\n                  columnNumber: 41\n                }, this), \" Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCDD Rich Text Editor:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 41\n                }, this), \" Click the blue expand button (\\u2922) to open full-page rich text editor with formatting toolbar! Bold, italics, lists and more are preserved when saved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 804,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => updateAssignmentInfo('title', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project - Final Showcase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => updateAssignmentInfo('weight', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12 min-h-[80px] max-h-[200px] overflow-y-auto\",\n                  style: {\n                    minHeight: '80px',\n                    maxHeight: '200px',\n                    wordWrap: 'break-word',\n                    overflowWrap: 'break-word'\n                  },\n                  dangerouslySetInnerHTML: {\n                    __html: rubricData.assignmentInfo.description || '<span style=\"color: #9ca3af;\">Detailed description of assignment requirements and expectations...</span>'\n                  },\n                  onClick: e => {\n                    if (!rubricData.assignmentInfo.description) {\n                      openModalEdit('', 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), e);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 830,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: e => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    openModalEdit(rubricData.assignmentInfo.description, 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), e);\n                  },\n                  className: \"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                  title: \"Open rich text editor\",\n                  children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 865,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 850,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 829,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 869,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Auto-calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 894,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 897,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Automatic (Recommended):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 906,\n                  columnNumber: 37\n                }, this), \" Points calculated using level multipliers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 905,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 896,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 910,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Custom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 919,\n                  columnNumber: 37\n                }, this), \" Manually set point ranges for each level\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 918,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 909,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Assessment Criteria Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 928,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 935,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'HighLow' : 'LowHigh']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 938,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 927,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold\",\n                    style: {\n                      width: '200px'\n                    },\n                    children: [\"Criterion (\", rubricData.criteria.length, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 952,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      minWidth: '150px',\n                      border: `2px solid ${level.color}`\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-bold\",\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 966,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs font-normal mt-1 opacity-75\",\n                      children: level.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 967,\n                      columnNumber: 49\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 956,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      width: '80px'\n                    },\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 972,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 951,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 950,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map((criterion, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 bg-gray-50\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: criterion.name,\n                        onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                        className: \"w-full p-2 border rounded text-sm font-medium\",\n                        placeholder: `Criterion ${index + 1} name`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 983,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"relative\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 min-h-[48px] max-h-[200px] overflow-y-auto cursor-pointer\",\n                          style: {\n                            minHeight: '48px',\n                            maxHeight: '200px',\n                            wordWrap: 'break-word',\n                            overflowWrap: 'break-word'\n                          },\n                          dangerouslySetInnerHTML: {\n                            __html: criterion.description || '<span style=\"color: #9ca3af;\">Brief description of what this criterion measures</span>'\n                          },\n                          onClick: e => {\n                            if (!criterion.description) {\n                              openModalEdit('', `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), e);\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 991,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          onClick: e => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            openModalEdit(criterion.description, `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), e);\n                          },\n                          className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                          title: \"Open rich text editor\",\n                          children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1026,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1011,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 990,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex gap-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex-1\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            className: \"text-xs text-gray-600\",\n                            children: \"Max Points\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1031,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"number\",\n                            value: criterion.maxPoints,\n                            onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                            className: \"w-full p-1 border rounded text-sm\",\n                            min: \"0\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1032,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1030,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1029,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 982,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 981,\n                    columnNumber: 45\n                  }, this), getDisplayLevels().map(level => {\n                    var _criterion$levels$lev4, _criterion$levels$lev7;\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 align-top\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-bold text-sm px-2 py-1 rounded\",\n                            style: {\n                              color: level.color,\n                              backgroundColor: level.color + '20'\n                            },\n                            children: [calculatePointRange(criterion, level.level), \" pts\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1049,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1048,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"relative\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 min-h-[80px] max-h-[300px] overflow-y-auto cursor-pointer\",\n                            style: {\n                              minHeight: '80px',\n                              maxHeight: '300px',\n                              wordWrap: 'break-word',\n                              overflowWrap: 'break-word'\n                            },\n                            dangerouslySetInnerHTML: {\n                              __html: ((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || `<span style=\"color: #9ca3af;\">Describe ${level.name.toLowerCase()} performance...</span>`\n                            },\n                            onClick: e => {\n                              var _criterion$levels$lev5;\n                              if (!((_criterion$levels$lev5 = criterion.levels[level.level]) !== null && _criterion$levels$lev5 !== void 0 && _criterion$levels$lev5.description)) {\n                                openModalEdit('', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), e);\n                              }\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1060,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            onClick: e => {\n                              var _criterion$levels$lev6;\n                              e.preventDefault();\n                              e.stopPropagation();\n                              openModalEdit(((_criterion$levels$lev6 = criterion.levels[level.level]) === null || _criterion$levels$lev6 === void 0 ? void 0 : _criterion$levels$lev6.description) || '', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), e);\n                            },\n                            className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                            title: \"Open rich text editor\",\n                            children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 12\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1095,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1080,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1059,\n                          columnNumber: 57\n                        }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: ((_criterion$levels$lev7 = criterion.levels[level.level]) === null || _criterion$levels$lev7 === void 0 ? void 0 : _criterion$levels$lev7.pointRange) || '',\n                          onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                          className: \"w-full p-1 border rounded text-xs text-center\",\n                          placeholder: \"e.g., 18-20\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1099,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1047,\n                        columnNumber: 53\n                      }, this)\n                    }, level.level, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1046,\n                      columnNumber: 49\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeCriterion(criterion.id),\n                      className: \"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\",\n                      disabled: rubricData.criteria.length === 1,\n                      title: rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1119,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1113,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1112,\n                    columnNumber: 45\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 979,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 977,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 926,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"\\uD83D\\uDCDD Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-4\",\n            children: \"Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`, \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1142,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items stored\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1145,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1141,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1152,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1154,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1137,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category === 'strengths' ? ' Strengths' : category === 'improvements' ? ' Improvements' : ' General', \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1164,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: e => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          openModalEdit('', `New ${category} Comment`, newContent => {\n                            if (newContent !== null && newContent !== void 0 && newContent.trim()) {\n                              addFeedbackItem(criterion.id, category, newContent.trim());\n                            }\n                          }, e);\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium px-2 py-1 rounded\",\n                        title: \"Open rich text editor to add a comment\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1169,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1163,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border text-sm\",\n                          style: {\n                            wordWrap: 'break-word',\n                            overflowWrap: 'break-word'\n                          },\n                          dangerouslySetInnerHTML: {\n                            __html: item\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1194,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          onClick: e => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            openModalEdit(item, `${category} Comment`, newContent => {\n                              const updated = [...criterion.feedbackLibrary[category]];\n                              updated[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updated\n                                  }\n                                } : c)\n                              }));\n                            }, e);\n                          },\n                          className: \"p-1 hover:bg-gray-100 rounded\",\n                          title: \"Edit comment in rich text editor\",\n                          children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1235,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1203,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\",\n                          title: \"Remove this comment\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1243,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1238,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1193,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\",\n                        children: [\"No \", category, \" comments yet - click \\\"Add\\\" to create some\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1248,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1191,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1162,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1160,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1159,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1136,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1134,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"\\uD83D\\uDCCA Achievement Level Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1265,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1266,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\",\n            children: getDisplayLevels().map(level => {\n              const totalPoints = calculateTotalPoints();\n              const pointsForLevel = Math.round(totalPoints * level.multiplier);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\",\n                style: {\n                  borderColor: level.color,\n                  backgroundColor: level.color + '15'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-sm\",\n                  style: {\n                    color: level.color\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1283,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-bold mt-1\",\n                  style: {\n                    color: level.color\n                  },\n                  children: [pointsForLevel, \"+\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1286,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600\",\n                  children: totalPoints > 0 ? `${Math.round(pointsForLevel / totalPoints * 100)}%+` : '-%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1289,\n                  columnNumber: 41\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1275,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1270,\n            columnNumber: 25\n          }, this), calculateTotalPoints() === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-yellow-800 text-sm\",\n              children: \"Add criteria with point values to see the achievement level breakdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1299,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1298,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1264,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1308,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 13\n    }, this), modalEdit.show && /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-start p-4\",\n      style: {\n        zIndex: 10000,\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0\n      },\n      onClick: e => {\n        if (e.target === e.currentTarget) {\n          closeModalEdit(false);\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl flex flex-col\",\n        style: {\n          position: 'absolute',\n          top: modalPosition.top,\n          left: modalPosition.left,\n          transform: modalPosition.top === '50%' ? 'translate(-50%, -50%)' : 'none',\n          width: 'min(90vw, 1200px)',\n          height: 'min(90vh, 800px)',\n          maxHeight: '90vh',\n          maxWidth: '90vw'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n              size: 20,\n              className: \"text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1351,\n              columnNumber: 33\n            }, this), \"Rich Text Editor: \", modalEdit.field]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1350,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => closeModalEdit(true),\n              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1359,\n                columnNumber: 37\n              }, this), \"Save & Close\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1355,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => closeModalEdit(false),\n              className: \"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(X, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1366,\n                columnNumber: 37\n              }, this), \"Cancel\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1354,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1349,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b bg-gray-50 p-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex border-r border-gray-300 pr-2 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('bold'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Bold\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold\",\n                  children: \"B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1383,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1377,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('italic'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Italic\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"italic\",\n                  children: \"I\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1391,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1385,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('underline'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Underline\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"underline\",\n                  children: \"U\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1399,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1393,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1376,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex border-r border-gray-300 pr-2 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('insertUnorderedList'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Bullet List\",\n                children: \"\\u2022 List\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1405,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('insertOrderedList'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Numbered List\",\n                children: \"1. List\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1413,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1404,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex border-r border-gray-300 pr-2 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('justifyLeft'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Align Left\",\n                children: \"\\u2261\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1425,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('justifyCenter'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Align Center\",\n                children: \"\\u2261\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1433,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('justifyRight'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Align Right\",\n                children: \"\\u2261\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1441,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1424,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex border-r border-gray-300 pr-2 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('outdent'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Decrease Indent\",\n                children: \"\\u21E4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1453,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('indent'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Increase Indent\",\n                children: \"\\u21E5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1461,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1452,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleRichTextCommand('removeFormat'),\n                className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n                title: \"Clear Formatting\",\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1473,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1472,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1374,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1373,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 p-4 overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"richTextEditor\",\n            contentEditable: true,\n            dangerouslySetInnerHTML: {\n              __html: richTextContent\n            },\n            onInput: handleRichTextChange,\n            className: \"w-full h-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 overflow-y-auto\",\n            style: {\n              minHeight: '300px',\n              backgroundColor: '#fff',\n              fontSize: '14px',\n              lineHeight: '1.6',\n              wordWrap: 'break-word',\n              overflowWrap: 'break-word'\n            },\n            placeholder: \"Start typing your detailed description here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1487,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1486,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-green-500 rounded-full\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1510,\n                  columnNumber: 41\n                }, this), \"Rich Text Editor Active\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1509,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Bold, italic, lists and formatting preserved when saved\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1513,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1508,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Tip:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1516,\n                columnNumber: 37\n              }, this), \" Rich text formatting is preserved. Use toolbar for styling.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1515,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1507,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1506,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1335,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1319,\n      columnNumber: 17\n    }, this), document.body)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 682,\n    columnNumber: 9\n  }, this);\n};\n_s(RubricCreator, \"aG2toZ/fWZKq286YL9aBSS37k7Q=\", false, function () {\n  return [useAssessment];\n});\n_c = RubricCreator;\nexport default RubricCreator;\nvar _c;\n$RefreshReg$(_c, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactDOM","Plus","X","Upload","Download","Save","FileText","RotateCcw","ChevronDown","ChevronUp","Maximize2","ArrowRight","useAssessment","jsxDEV","_jsxDEV","RubricCreator","_s","sharedRubric","setSharedRubric","transferRubricToGradingWithDetails","activeTab","defaultLevels","level","name","description","color","multiplier","rubricData","setRubricData","assignmentInfo","title","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","maxPoints","levels","feedbackLibrary","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","modalEdit","setModalEdit","show","content","field","onSave","richTextContent","setRichTextContent","modalPosition","setModalPosition","top","left","autoSaveTimeout","setAutoSaveTimeout","importInputRef","clearTimeout","timeoutId","setTimeout","toggleFeedbackExpansion","criterionId","prev","openModalEdit","clickEvent","console","log","target","rect","getBoundingClientRect","scrollTop","window","pageYOffset","document","documentElement","scrollLeft","pageXOffset","modalTop","Math","max","modalLeft","body","style","overflow","scrollIntoView","behavior","block","handleRichTextCommand","command","value","execCommand","editor","getElementById","innerHTML","handleRichTextChange","sanitizeHtmlContent","html","tempDiv","createElement","scripts","querySelectorAll","forEach","script","remove","closeModalEdit","save","cleanedHtml","calculateTotalPoints","reduce","total","criterion","updateAssignmentInfo","updated","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","map","updateCriterionLevel","addFeedbackItem","category","item","trim","removeFeedbackItem","index","_","i","calculatePointRange","rubricLevel","find","l","points","round","toString","_criterion$levels$lev","pointRange","getDisplayLevels","reverse","saveRubric","dataStr","JSON","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","href","download","replace","toISOString","split","click","revokeObjectURL","exportForGrading","exportData","prepareRubricForExport","Object","fromEntries","_criterion$levels$lev2","transferToGrading","importRubric","event","file","files","reader","FileReader","onload","e","importedData","parse","result","alert","error","readAsText","resetRubric","confirm","defaultRubric","exportToHTML","displayLevels","htmlContent","length","join","_criterion$levels$lev3","toFixed","toLocaleDateString","weekday","year","month","day","hour","minute","htmlBlob","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_importInputRef$curre","current","onChange","placeholder","parseInt","min","minHeight","maxHeight","wordWrap","overflowWrap","dangerouslySetInnerHTML","__html","newContent","preventDefault","stopPropagation","disabled","checked","width","backgroundColor","minWidth","border","_criterion$levels$lev4","_criterion$levels$lev7","toLowerCase","_criterion$levels$lev5","_criterion$levels$lev6","indexOf","pointsForLevel","borderColor","ref","accept","createPortal","zIndex","position","right","bottom","currentTarget","transform","height","maxWidth","contentEditable","onInput","fontSize","lineHeight","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom'; // Make sure this import is present\r\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight } from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\n\r\nconst RubricCreator = () => {\r\n    // Get shared context functions and state\r\n    const {\r\n        sharedRubric,\r\n        setSharedRubric,\r\n        transferRubricToGradingWithDetails,\r\n        activeTab\r\n    } = useAssessment();\r\n\r\n    // Default rubric levels (7-level system)\r\n    const defaultLevels = [\r\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\r\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\r\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\r\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\r\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\r\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\r\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\r\n    ];\r\n\r\n    // Initialize state from shared context or defaults\r\n    const [rubricData, setRubricData] = useState(() => {\r\n        if (sharedRubric) {\r\n            return sharedRubric;\r\n        }\r\n        return {\r\n            assignmentInfo: {\r\n                title: '',\r\n                description: '',\r\n                weight: 25,\r\n                passingThreshold: 60,\r\n                totalPoints: 100\r\n            },\r\n            rubricLevels: [...defaultLevels],\r\n            criteria: [\r\n                {\r\n                    id: 'criterion-1',\r\n                    name: '',\r\n                    description: '',\r\n                    maxPoints: 20,\r\n                    weight: 20,\r\n                    levels: {},\r\n                    feedbackLibrary: {\r\n                        strengths: [],\r\n                        improvements: [],\r\n                        general: []\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n    });\r\n\r\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\r\n    const [reversedOrder, setReversedOrder] = useState(false);\r\n    const [showGuide, setShowGuide] = useState(false);\r\n    const [expandedFeedback, setExpandedFeedback] = useState({});\r\n    const [modalEdit, setModalEdit] = useState({ show: false, content: '', field: null, onSave: null });\r\n    const [richTextContent, setRichTextContent] = useState('');\r\n    const [modalPosition, setModalPosition] = useState({ top: '50%', left: '50%' });\r\n    const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\r\n\r\n    // Refs for file inputs\r\n    const importInputRef = useRef(null);\r\n\r\n    // Auto-save to shared context whenever rubricData changes\r\n    useEffect(() => {\r\n        if (autoSaveTimeout) {\r\n            clearTimeout(autoSaveTimeout);\r\n        }\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            setSharedRubric(rubricData);\r\n        }, 1000); // Auto-save after 1 second of inactivity\r\n\r\n        setAutoSaveTimeout(timeoutId);\r\n\r\n        return () => {\r\n            if (timeoutId) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n        };\r\n    }, [rubricData, setSharedRubric]);\r\n\r\n    // Load shared rubric when it changes externally\r\n    useEffect(() => {\r\n        if (sharedRubric && activeTab === 'rubric-creator') {\r\n            setRubricData(sharedRubric);\r\n        }\r\n    }, [sharedRubric, activeTab]);\r\n\r\n    // Toggle feedback section expansion\r\n    const toggleFeedbackExpansion = (criterionId) => {\r\n        setExpandedFeedback(prev => ({\r\n            ...prev,\r\n            [criterionId]: !prev[criterionId]\r\n        }));\r\n    };\r\n\r\n    // Open modal for text editing with enhanced positioning\r\n    const openModalEdit = (content, field, onSave, clickEvent = null) => {\r\n        console.log('openModalEdit called with:', { content, field });\r\n        setRichTextContent(content || '');\r\n\r\n        // Calculate position based on clicked element if available\r\n        if (clickEvent && clickEvent.target) {\r\n            const rect = clickEvent.target.getBoundingClientRect();\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\r\n\r\n            // Position modal near the clicked element but ensure it's visible\r\n            const modalTop = Math.max(50, rect.top + scrollTop - 100);\r\n            const modalLeft = Math.max(50, rect.left + scrollLeft - 200);\r\n\r\n            setModalPosition({\r\n                top: `${modalTop}px`,\r\n                left: `${modalLeft}px`\r\n            });\r\n        } else {\r\n            // Default to center\r\n            setModalPosition({ top: '50%', left: '50%' });\r\n        }\r\n\r\n        setModalEdit({\r\n            show: true,\r\n            content: content || '',\r\n            field,\r\n            onSave\r\n        });\r\n\r\n        // Prevent body scroll and ensure visibility\r\n        setTimeout(() => {\r\n            document.body.style.overflow = 'hidden';\r\n            // Scroll the clicked element into view if needed\r\n            if (clickEvent && clickEvent.target) {\r\n                clickEvent.target.scrollIntoView({\r\n                    behavior: 'smooth',\r\n                    block: 'center'\r\n                });\r\n            }\r\n        }, 100);\r\n    };\r\n\r\n    // Rich text editor functions\r\n    const handleRichTextCommand = (command, value = null) => {\r\n        document.execCommand(command, false, value);\r\n        const editor = document.getElementById('richTextEditor');\r\n        if (editor) {\r\n            setRichTextContent(editor.innerHTML);\r\n        }\r\n    };\r\n\r\n    const handleRichTextChange = () => {\r\n        const editor = document.getElementById('richTextEditor');\r\n        if (editor) {\r\n            setRichTextContent(editor.innerHTML);\r\n        }\r\n    };\r\n\r\n    // FIXED: Preserve rich text formatting instead of converting to plain text\r\n    const sanitizeHtmlContent = (html) => {\r\n        // Clean up the HTML but preserve formatting\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = html;\r\n\r\n        // Remove any script tags or other dangerous elements\r\n        const scripts = tempDiv.querySelectorAll('script');\r\n        scripts.forEach(script => script.remove());\r\n\r\n        // Return the cleaned HTML with preserved formatting\r\n        return tempDiv.innerHTML;\r\n    };\r\n\r\n    // Close modal and save with preserved formatting\r\n    const closeModalEdit = (save = false) => {\r\n        if (save && modalEdit.onSave) {\r\n            // FIXED: Preserve rich text formatting instead of converting to plain text\r\n            const cleanedHtml = sanitizeHtmlContent(richTextContent);\r\n            modalEdit.onSave(cleanedHtml);\r\n        }\r\n        setModalEdit({ show: false, content: '', field: null, onSave: null });\r\n        setRichTextContent('');\r\n\r\n        // Restore body scroll\r\n        document.body.style.overflow = 'auto';\r\n    };\r\n\r\n    // Calculate total points based on current settings\r\n    const calculateTotalPoints = () => {\r\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\r\n    };\r\n\r\n    // Update assignment info and recalculate total points\r\n    const updateAssignmentInfo = (field, value) => {\r\n        setRubricData(prev => {\r\n            const updated = {\r\n                ...prev,\r\n                assignmentInfo: { ...prev.assignmentInfo, [field]: value }\r\n            };\r\n\r\n            // Auto-calculate total points\r\n            if (field !== 'totalPoints') {\r\n                updated.assignmentInfo.totalPoints = calculateTotalPoints();\r\n            }\r\n\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    // Add new criterion\r\n    const addCriterion = () => {\r\n        const newCriterion = {\r\n            id: `criterion-${Date.now()}`,\r\n            name: '',\r\n            description: '',\r\n            maxPoints: 20,\r\n            weight: 20,\r\n            levels: {},\r\n            feedbackLibrary: {\r\n                strengths: [],\r\n                improvements: [],\r\n                general: []\r\n            }\r\n        };\r\n\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: [...prev.criteria, newCriterion]\r\n        }));\r\n    };\r\n\r\n    // Remove criterion\r\n    const removeCriterion = (criterionId) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\r\n        }));\r\n    };\r\n\r\n    // Update criterion\r\n    const updateCriterion = (criterionId, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? { ...criterion, [field]: value }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Update criterion level description\r\n    const updateCriterionLevel = (criterionId, level, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        levels: {\r\n                            ...criterion.levels,\r\n                            [level]: {\r\n                                ...criterion.levels[level],\r\n                                [field]: value\r\n                            }\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Add feedback item to criterion\r\n    const addFeedbackItem = (criterionId, category, item) => {\r\n        if (!item || !item.trim()) return;\r\n\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: [...criterion.feedbackLibrary[category], item.trim()]\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Remove feedback item\r\n    const removeFeedbackItem = (criterionId, category, index) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Calculate point range for a level\r\n    const calculatePointRange = (criterion, level) => {\r\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\r\n        if (!rubricLevel) return '0';\r\n\r\n        if (pointingSystem === 'multiplier') {\r\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\r\n            return level === 'incomplete' ? '0' : points.toString();\r\n        } else {\r\n            // Custom points would be entered directly\r\n            return criterion.levels[level]?.pointRange || '0';\r\n        }\r\n    };\r\n\r\n    // Get display levels (potentially reversed)\r\n    const getDisplayLevels = () => {\r\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\r\n    };\r\n\r\n    // Save rubric to JSON\r\n    const saveRubric = () => {\r\n        const dataStr = JSON.stringify(rubricData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Export rubric for grading template\r\n    const exportForGrading = () => {\r\n        const exportData = prepareRubricForExport();\r\n\r\n        // Save to shared context for grading tool\r\n        setSharedRubric(exportData);\r\n\r\n        // Also download as backup\r\n        const dataStr = JSON.stringify(exportData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Prepare rubric data for export/transfer\r\n    const prepareRubricForExport = () => {\r\n        const exportData = { ...rubricData };\r\n\r\n        // Ensure all criterion levels have proper point ranges\r\n        exportData.criteria = exportData.criteria.map(criterion => ({\r\n            ...criterion,\r\n            levels: Object.fromEntries(\r\n                rubricData.rubricLevels.map(level => [\r\n                    level.level,\r\n                    {\r\n                        pointRange: calculatePointRange(criterion, level.level),\r\n                        description: criterion.levels[level.level]?.description || ''\r\n                    }\r\n                ])\r\n            )\r\n        }));\r\n\r\n        // Update total points\r\n        exportData.assignmentInfo.totalPoints = calculateTotalPoints();\r\n\r\n        return exportData;\r\n    };\r\n\r\n    // Transfer to grading tool directly\r\n    const transferToGrading = () => {\r\n        const exportData = prepareRubricForExport();\r\n        transferRubricToGradingWithDetails(exportData);\r\n    };\r\n\r\n    // Import rubric data\r\n    const importRubric = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                try {\r\n                    const importedData = JSON.parse(e.target.result);\r\n\r\n                    // Validate the imported data structure\r\n                    if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\r\n                        setRubricData(importedData);\r\n                    } else {\r\n                        alert('Invalid rubric format. Please check the JSON structure.');\r\n                    }\r\n                } catch (error) {\r\n                    alert('Error loading rubric. Please check the JSON format.');\r\n                    console.error('Import error:', error);\r\n                }\r\n            };\r\n            reader.readAsText(file);\r\n        }\r\n        // Reset file input\r\n        event.target.value = '';\r\n    };\r\n\r\n    // Reset to default rubric\r\n    const resetRubric = () => {\r\n        if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\r\n            const defaultRubric = {\r\n                assignmentInfo: {\r\n                    title: '',\r\n                    description: '',\r\n                    weight: 25,\r\n                    passingThreshold: 60,\r\n                    totalPoints: 100\r\n                },\r\n                rubricLevels: [...defaultLevels],\r\n                criteria: [\r\n                    {\r\n                        id: 'criterion-1',\r\n                        name: '',\r\n                        description: '',\r\n                        maxPoints: 20,\r\n                        weight: 20,\r\n                        levels: {},\r\n                        feedbackLibrary: {\r\n                            strengths: [],\r\n                            improvements: [],\r\n                            general: []\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            setRubricData(defaultRubric);\r\n        }\r\n    };\r\n\r\n    // FIXED: Export to HTML with proper text wrapping\r\n    const exportToHTML = () => {\r\n        const displayLevels = getDisplayLevels();\r\n        const totalPoints = calculateTotalPoints();\r\n\r\n        const htmlContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\r\n    <style>\r\n        body { \r\n            font-family: 'Arial', sans-serif; \r\n            max-width: 1200px; \r\n            margin: 0 auto; \r\n            padding: 20px; \r\n            line-height: 1.4; \r\n        }\r\n        .header { \r\n            text-align: center; \r\n            margin-bottom: 30px; \r\n            padding-bottom: 20px; \r\n            border-bottom: 3px solid #1e40af; \r\n        }\r\n        .header h1 { \r\n            color: #1e40af; \r\n            margin-bottom: 10px; \r\n            word-wrap: break-word;\r\n        }\r\n        .assignment-info { \r\n            background: #f8fafc; \r\n            padding: 20px; \r\n            border-radius: 8px; \r\n            margin-bottom: 25px; \r\n            border: 1px solid #e2e8f0; \r\n        }\r\n        .rubric-table { \r\n            width: 100%; \r\n            border-collapse: collapse; \r\n            margin-bottom: 30px; \r\n            font-size: 0.85rem; \r\n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n            table-layout: fixed;\r\n        }\r\n        .rubric-table th, .rubric-table td { \r\n            border: 1px solid #ddd; \r\n            padding: 12px; \r\n            text-align: left; \r\n            vertical-align: top;\r\n            word-wrap: break-word;\r\n            overflow-wrap: break-word;\r\n            hyphens: auto;\r\n        }\r\n        .rubric-table th { \r\n            background: #1e40af; \r\n            color: white; \r\n            text-align: center; \r\n            font-weight: 600; \r\n        }\r\n        .criterion-name { \r\n            font-weight: bold; \r\n            background: #f8fafc; \r\n            padding: 15px;\r\n            word-wrap: break-word;\r\n            overflow-wrap: break-word;\r\n        }\r\n        .point-range { \r\n            text-align: center; \r\n            font-weight: bold; \r\n            color: #1e40af; \r\n            font-size: 1.1em; \r\n        }\r\n        .level-description { \r\n            font-size: 0.9rem; \r\n            line-height: 1.4;\r\n            word-wrap: break-word;\r\n            overflow-wrap: break-word;\r\n            white-space: normal;\r\n        }\r\n        .level-description p {\r\n            margin: 0.5em 0;\r\n        }\r\n        .level-description ul, .level-description ol {\r\n            margin: 0.5em 0;\r\n            padding-left: 1.5em;\r\n        }\r\n        .level-description li {\r\n            margin: 0.25em 0;\r\n        }\r\n        .overall-score { \r\n            background: #eff6ff; \r\n            padding: 25px; \r\n            border-radius: 8px; \r\n            margin-top: 30px; \r\n            border: 2px solid #bfdbfe; \r\n        }\r\n        .footer { \r\n            margin-top: 40px; \r\n            text-align: center; \r\n            font-size: 0.9rem; \r\n            color: #666; \r\n            border-top: 1px solid #e2e8f0; \r\n            padding-top: 20px; \r\n        }\r\n        .level-grid { \r\n            display: grid; \r\n            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); \r\n            gap: 15px; \r\n            margin-top: 20px; \r\n        }\r\n        .level-card { \r\n            text-align: center; \r\n            padding: 15px; \r\n            border-radius: 8px; \r\n            border: 2px solid; \r\n        }\r\n        \r\n        /* FIXED: Enhanced text wrapping for all content */\r\n        * {\r\n            word-wrap: break-word;\r\n            overflow-wrap: break-word;\r\n        }\r\n        \r\n        @media print { \r\n            body { \r\n                margin: 0; \r\n                padding: 15px; \r\n            } \r\n            .level-grid { \r\n                break-inside: avoid; \r\n            }\r\n            .rubric-table {\r\n                font-size: 0.75rem;\r\n            }\r\n            .rubric-table th, .rubric-table td {\r\n                padding: 8px;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\r\n        <div style=\"color: #64748b; font-size: 1.1em; word-wrap: break-word;\">${rubricData.assignmentInfo.description || 'No description provided'}</div>\r\n    </div>\r\n    \r\n    <div class=\"assignment-info\">\r\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\r\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\r\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\r\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\r\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\r\n        </div>\r\n    </div>\r\n    \r\n    <table class=\"rubric-table\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"width: 20%\">Criterion</th>\r\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${rubricData.criteria.map(criterion => `\r\n                <tr>\r\n                    <td class=\"criterion-name\">\r\n                        <strong style=\"color: #1e40af; font-size: 1.1em; word-wrap: break-word;\">${criterion.name || 'Unnamed Criterion'}</strong>\r\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic; word-wrap: break-word;\">\r\n                            ${criterion.description || 'No description provided'}\r\n                        </div>\r\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\r\n                            ${criterion.maxPoints} points\r\n                        </div>\r\n                    </td>\r\n                    ${displayLevels.map(level => `\r\n                        <td style=\"background-color: ${level.color}08;\">\r\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\r\n                                ${calculatePointRange(criterion, level.level)} pts\r\n                            </div>\r\n                            <div class=\"level-description\">\r\n                                ${criterion.levels[level.level]?.description || '<em>Not defined</em>'}\r\n                            </div>\r\n                        </td>\r\n                    `).join('')}\r\n                </tr>\r\n            `).join('')}\r\n        </tbody>\r\n    </table>\r\n    \r\n    <div class=\"overall-score\">\r\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\r\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\r\n        <div class=\"level-grid\">\r\n            ${displayLevels.map(level => `\r\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\r\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\r\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\r\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\r\n                    </div>\r\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\r\n                </div>\r\n            `).join('')}\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"footer\">\r\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        })}</p>\r\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(htmlBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\r\n                {/* Header */}\r\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl font-bold\">Professional Rubric Builder</h1>\r\n                            <p className=\"text-blue-200\">Create comprehensive assessment rubrics with detailed criteria and feedback</p>\r\n                        </div>\r\n                        <div className=\"flex gap-2 flex-wrap\">\r\n                            <button\r\n                                onClick={resetRubric}\r\n                                className=\"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Reset to blank rubric\"\r\n                            >\r\n                                <RotateCcw size={14} />\r\n                                Reset\r\n                            </button>\r\n                            <button\r\n                                onClick={() => importInputRef.current?.click()}\r\n                                className=\"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Import existing rubric JSON file\"\r\n                            >\r\n                                <Upload size={14} />\r\n                                Import\r\n                            </button>\r\n                            <button\r\n                                onClick={transferToGrading}\r\n                                className=\"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Transfer rubric directly to grading tool\"\r\n                            >\r\n                                <ArrowRight size={14} />\r\n                                Use for Grading\r\n                            </button>\r\n                            <button\r\n                                onClick={saveRubric}\r\n                                className=\"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Save work in progress as JSON file\"\r\n                            >\r\n                                <Save size={14} />\r\n                                Save Draft\r\n                            </button>\r\n                            <button\r\n                                onClick={exportForGrading}\r\n                                className=\"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export final rubric for grading template\"\r\n                            >\r\n                                <Download size={14} />\r\n                                Export JSON\r\n                            </button>\r\n                            <button\r\n                                onClick={exportToHTML}\r\n                                className=\"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export HTML version for distribution\"\r\n                            >\r\n                                <FileText size={14} />\r\n                                Export HTML\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    {/* Auto-save Indicator */}\r\n                    {sharedRubric && (\r\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\">\r\n                            <div className=\"flex items-center gap-2 text-green-800\">\r\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                                <span className=\"text-sm font-medium\">Auto-saved - Ready for grading tool</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Button Guide */}\r\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\r\n                        <button\r\n                            onClick={() => setShowGuide(!showGuide)}\r\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\r\n                        >\r\n                             Quick Start Guide & Button Functions\r\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}></span>\r\n                        </button>\r\n                        {showGuide && (\r\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\"> Building Your Rubric</h4>\r\n                                        <ul className=\"space-y-1 text-gray-700\">\r\n                                            <li><strong>Reset:</strong> Clear all data and start fresh</li>\r\n                                            <li><strong>Import:</strong> Load AI-generated or existing rubric files</li>\r\n                                            <li><strong>Use for Grading:</strong> Send directly to grading tool</li>\r\n                                            <li><strong>Save Draft:</strong> Download work-in-progress (JSON)</li>\r\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template</li>\r\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\r\n                                        </ul>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\"> Step-by-Step Process</h4>\r\n                                        <ol className=\"space-y-1 text-gray-700\">\r\n                                            <li>1. Fill in assignment details and requirements</li>\r\n                                            <li>2. Add criteria using \"Add Criterion\" button</li>\r\n                                            <li>3. Define level descriptions for each criterion</li>\r\n                                            <li>4. Add feedback library items (optional but recommended)</li>\r\n                                            <li>5. Use \"Use for Grading\" to switch to grading tool</li>\r\n                                            <li>6. Export HTML for student distribution</li>\r\n                                        </ol>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\r\n                                    <p className=\"text-blue-800 text-sm\">\r\n                                        <strong> Tip:</strong> Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\r\n                                    </p>\r\n                                    <p className=\"text-blue-800 text-sm mt-2\">\r\n                                        <strong> Rich Text Editor:</strong> Click the blue expand button () to open full-page rich text editor with formatting toolbar! Bold, italics, lists and more are preserved when saved.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Assignment Information */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={rubricData.assignmentInfo.title}\r\n                                    onChange={(e) => updateAssignmentInfo('title', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., Digital Portfolio Project - Final Showcase\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight (% of Final Grade)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.weight}\r\n                                    onChange={(e) => updateAssignmentInfo('weight', parseInt(e.target.value) || 0)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                                <div className=\"relative\">\r\n                                    <div\r\n                                        className=\"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12 min-h-[80px] max-h-[200px] overflow-y-auto\"\r\n                                        style={{\r\n                                            minHeight: '80px',\r\n                                            maxHeight: '200px',\r\n                                            wordWrap: 'break-word',\r\n                                            overflowWrap: 'break-word'\r\n                                        }}\r\n                                        dangerouslySetInnerHTML={{ __html: rubricData.assignmentInfo.description || '<span style=\"color: #9ca3af;\">Detailed description of assignment requirements and expectations...</span>' }}\r\n                                        onClick={(e) => {\r\n                                            if (!rubricData.assignmentInfo.description) {\r\n                                                openModalEdit(\r\n                                                    '',\r\n                                                    'Assignment Description',\r\n                                                    (newContent) => updateAssignmentInfo('description', newContent),\r\n                                                    e\r\n                                                );\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={(e) => {\r\n                                            e.preventDefault();\r\n                                            e.stopPropagation();\r\n                                            openModalEdit(\r\n                                                rubricData.assignmentInfo.description,\r\n                                                'Assignment Description',\r\n                                                (newContent) => updateAssignmentInfo('description', newContent),\r\n                                                e\r\n                                            );\r\n                                        }}\r\n                                        className=\"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                                        title=\"Open rich text editor\"\r\n                                    >\r\n                                        <Maximize2 size={14} />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Passing Threshold (%)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.passingThreshold}\r\n                                    onChange={(e) => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Points (Auto-calculated)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={calculateTotalPoints()}\r\n                                    disabled\r\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Point System Selection */}\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\r\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\r\n                        <div className=\"flex gap-6\">\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"multiplier\"\r\n                                    checked={pointingSystem === 'multiplier'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                <span className=\"text-sm\">\r\n                                    <strong>Automatic (Recommended):</strong> Points calculated using level multipliers\r\n                                </span>\r\n                            </label>\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"custom\"\r\n                                    checked={pointingSystem === 'custom'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                <span className=\"text-sm\">\r\n                                    <strong>Custom:</strong> Manually set point ranges for each level\r\n                                </span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Rubric Table */}\r\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6\">\r\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Assessment Criteria Matrix</h3>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setReversedOrder(!reversedOrder)}\r\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                    title=\"Switch between ascending and descending level order\"\r\n                                >\r\n                                    <RotateCcw size={14} />\r\n                                    {reversedOrder ? 'HighLow' : 'LowHigh'}\r\n                                </button>\r\n                                <button\r\n                                    onClick={addCriterion}\r\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\r\n                                >\r\n                                    <Plus size={16} />\r\n                                    Add Criterion\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full border-collapse\">\r\n                                <thead>\r\n                                    <tr className=\"bg-gray-100\">\r\n                                        <th className=\"border p-3 text-left font-semibold\" style={{ width: '200px' }}>\r\n                                            Criterion ({rubricData.criteria.length})\r\n                                        </th>\r\n                                        {getDisplayLevels().map((level) => (\r\n                                            <th\r\n                                                key={level.level}\r\n                                                className=\"border p-3 text-center font-semibold\"\r\n                                                style={{\r\n                                                    backgroundColor: level.color + '20',\r\n                                                    color: level.color,\r\n                                                    minWidth: '150px',\r\n                                                    border: `2px solid ${level.color}`\r\n                                                }}\r\n                                            >\r\n                                                <div className=\"font-bold\">{level.name}</div>\r\n                                                <div className=\"text-xs font-normal mt-1 opacity-75\">\r\n                                                    {level.description}\r\n                                                </div>\r\n                                            </th>\r\n                                        ))}\r\n                                        <th className=\"border p-3 text-center font-semibold\" style={{ width: '80px' }}>\r\n                                            Actions\r\n                                        </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {rubricData.criteria.map((criterion, index) => (\r\n                                        <tr key={criterion.id}>\r\n                                            {/* Criterion Column */}\r\n                                            <td className=\"border p-3 bg-gray-50\">\r\n                                                <div className=\"space-y-2\">\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={criterion.name}\r\n                                                        onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\r\n                                                        className=\"w-full p-2 border rounded text-sm font-medium\"\r\n                                                        placeholder={`Criterion ${index + 1} name`}\r\n                                                    />\r\n                                                    <div className=\"relative\">\r\n                                                        <div\r\n                                                            className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 min-h-[48px] max-h-[200px] overflow-y-auto cursor-pointer\"\r\n                                                            style={{\r\n                                                                minHeight: '48px',\r\n                                                                maxHeight: '200px',\r\n                                                                wordWrap: 'break-word',\r\n                                                                overflowWrap: 'break-word'\r\n                                                            }}\r\n                                                            dangerouslySetInnerHTML={{ __html: criterion.description || '<span style=\"color: #9ca3af;\">Brief description of what this criterion measures</span>' }}\r\n                                                            onClick={(e) => {\r\n                                                                if (!criterion.description) {\r\n                                                                    openModalEdit(\r\n                                                                        '',\r\n                                                                        `Criterion Description - ${criterion.name || 'Criterion'}`,\r\n                                                                        (newContent) => updateCriterion(criterion.id, 'description', newContent),\r\n                                                                        e\r\n                                                                    );\r\n                                                                }\r\n                                                            }}\r\n                                                        />\r\n                                                        <button\r\n                                                            type=\"button\"\r\n                                                            onClick={(e) => {\r\n                                                                e.preventDefault();\r\n                                                                e.stopPropagation();\r\n                                                                openModalEdit(\r\n                                                                    criterion.description,\r\n                                                                    `Criterion Description - ${criterion.name || 'Criterion'}`,\r\n                                                                    (newContent) => updateCriterion(criterion.id, 'description', newContent),\r\n                                                                    e\r\n                                                                );\r\n                                                            }}\r\n                                                            className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                                                            title=\"Open rich text editor\"\r\n                                                        >\r\n                                                            <Maximize2 size={12} />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <label className=\"text-xs text-gray-600\">Max Points</label>\r\n                                                            <input\r\n                                                                type=\"number\"\r\n                                                                value={criterion.maxPoints}\r\n                                                                onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\r\n                                                                className=\"w-full p-1 border rounded text-sm\"\r\n                                                                min=\"0\"\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n\r\n                                            {/* Level Columns */}\r\n                                            {getDisplayLevels().map((level) => (\r\n                                                <td key={level.level} className=\"border p-3 align-top\">\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <div className=\"text-center\">\r\n                                                            <div\r\n                                                                className=\"font-bold text-sm px-2 py-1 rounded\"\r\n                                                                style={{\r\n                                                                    color: level.color,\r\n                                                                    backgroundColor: level.color + '20'\r\n                                                                }}\r\n                                                            >\r\n                                                                {calculatePointRange(criterion, level.level)} pts\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"relative\">\r\n                                                            <div\r\n                                                                className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 min-h-[80px] max-h-[300px] overflow-y-auto cursor-pointer\"\r\n                                                                style={{\r\n                                                                    minHeight: '80px',\r\n                                                                    maxHeight: '300px',\r\n                                                                    wordWrap: 'break-word',\r\n                                                                    overflowWrap: 'break-word'\r\n                                                                }}\r\n                                                                dangerouslySetInnerHTML={{ __html: criterion.levels[level.level]?.description || `<span style=\"color: #9ca3af;\">Describe ${level.name.toLowerCase()} performance...</span>` }}\r\n                                                                onClick={(e) => {\r\n                                                                    if (!criterion.levels[level.level]?.description) {\r\n                                                                        openModalEdit(\r\n                                                                            '',\r\n                                                                            `${level.name} Level - ${criterion.name || 'Criterion'}`,\r\n                                                                            (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\r\n                                                                            e\r\n                                                                        );\r\n                                                                    }\r\n                                                                }}\r\n                                                            />\r\n                                                            <button\r\n                                                                type=\"button\"\r\n                                                                onClick={(e) => {\r\n                                                                    e.preventDefault();\r\n                                                                    e.stopPropagation();\r\n                                                                    openModalEdit(\r\n                                                                        criterion.levels[level.level]?.description || '',\r\n                                                                        `${level.name} Level - ${criterion.name || 'Criterion'}`,\r\n                                                                        (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\r\n                                                                        e\r\n                                                                    );\r\n                                                                }}\r\n                                                                className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                                                                title=\"Open rich text editor\"\r\n                                                            >\r\n                                                                <Maximize2 size={12} />\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        {pointingSystem === 'custom' && (\r\n                                                            <input\r\n                                                                type=\"text\"\r\n                                                                value={criterion.levels[level.level]?.pointRange || ''}\r\n                                                                onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\r\n                                                                className=\"w-full p-1 border rounded text-xs text-center\"\r\n                                                                placeholder=\"e.g., 18-20\"\r\n                                                            />\r\n                                                        )}\r\n                                                    </div>\r\n                                                </td>\r\n                                            ))}\r\n\r\n                                            {/* Actions Column */}\r\n                                            <td className=\"border p-3 text-center\">\r\n                                                <button\r\n                                                    onClick={() => removeCriterion(criterion.id)}\r\n                                                    className=\"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\"\r\n                                                    disabled={rubricData.criteria.length === 1}\r\n                                                    title={rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\"}\r\n                                                >\r\n                                                    <X size={16} />\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Feedback Library Management */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\"> Feedback Libraries</h3>\r\n                        <p className=\"text-sm text-gray-600 mb-4\">Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.</p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            {rubricData.criteria.map((criterion) => (\r\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\r\n                                    <button\r\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\r\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\r\n                                    >\r\n                                        <div>\r\n                                            <h4 className=\"font-semibold text-gray-800\">\r\n                                                {criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`} - Feedback Library\r\n                                            </h4>\r\n                                            <p className=\"text-sm text-gray-600 mt-1\">\r\n                                                {criterion.feedbackLibrary.strengths.length +\r\n                                                    criterion.feedbackLibrary.improvements.length +\r\n                                                    criterion.feedbackLibrary.general.length} feedback items stored\r\n                                            </p>\r\n                                        </div>\r\n                                        {expandedFeedback[criterion.id] ? (\r\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\r\n                                        ) : (\r\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\r\n                                        )}\r\n                                    </button>\r\n\r\n                                    {expandedFeedback[criterion.id] && (\r\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\r\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n                                                {['strengths', 'improvements', 'general'].map((category) => (\r\n                                                    <div key={category} className=\"space-y-3\">\r\n                                                        <div className=\"flex justify-between items-center\">\r\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\r\n                                                                {category === 'strengths' ? ' Strengths' :\r\n                                                                    category === 'improvements' ? ' Improvements' :\r\n                                                                        ' General'} Comments\r\n                                                            </label>\r\n                                                            <button\r\n                                                                type=\"button\"\r\n                                                                onClick={(e) => {\r\n                                                                    e.preventDefault();\r\n                                                                    e.stopPropagation();\r\n                                                                    openModalEdit(\r\n                                                                        '',\r\n                                                                        `New ${category} Comment`,\r\n                                                                        (newContent) => {\r\n                                                                            if (newContent?.trim()) {\r\n                                                                                addFeedbackItem(criterion.id, category, newContent.trim());\r\n                                                                            }\r\n                                                                        },\r\n                                                                        e\r\n                                                                    );\r\n                                                                }}\r\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium px-2 py-1 rounded\"\r\n                                                                title=\"Open rich text editor to add a comment\"\r\n                                                            >\r\n                                                                + Add\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\r\n                                                                <div key={index} className=\"flex items-center gap-2 text-xs\">\r\n                                                                    <div\r\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border text-sm\"\r\n                                                                        style={{\r\n                                                                            wordWrap: 'break-word',\r\n                                                                            overflowWrap: 'break-word'\r\n                                                                        }}\r\n                                                                        dangerouslySetInnerHTML={{ __html: item }}\r\n                                                                    />\r\n\r\n                                                                    <button\r\n                                                                        type=\"button\"\r\n                                                                        onClick={(e) => {\r\n                                                                            e.preventDefault();\r\n                                                                            e.stopPropagation();\r\n                                                                            openModalEdit(\r\n                                                                                item,\r\n                                                                                `${category} Comment`,\r\n                                                                                (newContent) => {\r\n                                                                                    const updated = [...criterion.feedbackLibrary[category]];\r\n                                                                                    updated[index] = newContent;\r\n                                                                                    setRubricData(prev => ({\r\n                                                                                        ...prev,\r\n                                                                                        criteria: prev.criteria.map(c =>\r\n                                                                                            c.id === criterion.id\r\n                                                                                                ? {\r\n                                                                                                    ...c,\r\n                                                                                                    feedbackLibrary: {\r\n                                                                                                        ...c.feedbackLibrary,\r\n                                                                                                        [category]: updated\r\n                                                                                                    }\r\n                                                                                                }\r\n                                                                                                : c\r\n                                                                                        )\r\n                                                                                    }));\r\n                                                                                },\r\n                                                                                e\r\n                                                                            );\r\n                                                                        }}\r\n                                                                        className=\"p-1 hover:bg-gray-100 rounded\"\r\n                                                                        title=\"Edit comment in rich text editor\"\r\n                                                                    >\r\n                                                                        <Maximize2 size={12} />\r\n                                                                    </button>\r\n\r\n                                                                    <button\r\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\r\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\"\r\n                                                                        title=\"Remove this comment\"\r\n                                                                    >\r\n                                                                        <X size={12} />\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            ))}\r\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\r\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\">\r\n                                                                    No {category} comments yet - click \"Add\" to create some\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Overall Score Preview */}\r\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\"> Achievement Level Preview</h3>\r\n                        <p className=\"text-gray-600 mb-4\">\r\n                            Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\r\n                        </p>\r\n\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\">\r\n                            {getDisplayLevels().map((level) => {\r\n                                const totalPoints = calculateTotalPoints();\r\n                                const pointsForLevel = Math.round(totalPoints * level.multiplier);\r\n                                return (\r\n                                    <div\r\n                                        key={level.level}\r\n                                        className=\"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\"\r\n                                        style={{\r\n                                            borderColor: level.color,\r\n                                            backgroundColor: level.color + '15'\r\n                                        }}\r\n                                    >\r\n                                        <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\r\n                                            {level.name}\r\n                                        </div>\r\n                                        <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\r\n                                            {pointsForLevel}+\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-600\">\r\n                                            {totalPoints > 0 ? `${Math.round((pointsForLevel / totalPoints) * 100)}%+` : '-%'}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n\r\n                        {calculateTotalPoints() === 0 && (\r\n                            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\">\r\n                                <p className=\"text-yellow-800 text-sm\">\r\n                                    Add criteria with point values to see the achievement level breakdown\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Hidden file inputs */}\r\n                <input\r\n                    ref={importInputRef}\r\n                    type=\"file\"\r\n                    accept=\".json\"\r\n                    onChange={importRubric}\r\n                    className=\"hidden\"\r\n                />\r\n            </div>\r\n\r\n            {/* Rich Text Editor Modal - Enhanced positioning */}\r\n            {modalEdit.show && ReactDOM.createPortal(\r\n                <div\r\n                    className=\"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-start p-4\"\r\n                    style={{\r\n                        zIndex: 10000,\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0\r\n                    }}\r\n                    onClick={(e) => {\r\n                        if (e.target === e.currentTarget) {\r\n                            closeModalEdit(false);\r\n                        }\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"bg-white rounded-lg shadow-xl flex flex-col\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: modalPosition.top,\r\n                            left: modalPosition.left,\r\n                            transform: modalPosition.top === '50%' ? 'translate(-50%, -50%)' : 'none',\r\n                            width: 'min(90vw, 1200px)',\r\n                            height: 'min(90vh, 800px)',\r\n                            maxHeight: '90vh',\r\n                            maxWidth: '90vw'\r\n                        }}\r\n                    >\r\n                        {/* Header */}\r\n                        <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-lg\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n                                <Maximize2 size={20} className=\"text-blue-600\" />\r\n                                Rich Text Editor: {modalEdit.field}\r\n                            </h3>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => closeModalEdit(true)}\r\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                >\r\n                                    <Save size={16} />\r\n                                    Save & Close\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => closeModalEdit(false)}\r\n                                    className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                >\r\n                                    <X size={16} />\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Rich Text Toolbar */}\r\n                        <div className=\"border-b bg-gray-50 p-3\">\r\n                            <div className=\"flex flex-wrap gap-1\">\r\n                                {/* Text Formatting */}\r\n                                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('bold')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Bold\"\r\n                                    >\r\n                                        <span className=\"font-bold\">B</span>\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('italic')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Italic\"\r\n                                    >\r\n                                        <span className=\"italic\">I</span>\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('underline')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Underline\"\r\n                                    >\r\n                                        <span className=\"underline\">U</span>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Lists */}\r\n                                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('insertUnorderedList')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Bullet List\"\r\n                                    >\r\n                                         List\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('insertOrderedList')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Numbered List\"\r\n                                    >\r\n                                        1. List\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Alignment */}\r\n                                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('justifyLeft')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Align Left\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('justifyCenter')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Align Center\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('justifyRight')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Align Right\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Indentation */}\r\n                                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('outdent')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Decrease Indent\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('indent')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Increase Indent\"\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Format Clear */}\r\n                                <div className=\"flex\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRichTextCommand('removeFormat')}\r\n                                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                                        title=\"Clear Formatting\"\r\n                                    >\r\n                                        Clear\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Editor Content */}\r\n                        <div className=\"flex-1 p-4 overflow-hidden\">\r\n                            <div\r\n                                id=\"richTextEditor\"\r\n                                contentEditable={true}\r\n                                dangerouslySetInnerHTML={{ __html: richTextContent }}\r\n                                onInput={handleRichTextChange}\r\n                                className=\"w-full h-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 overflow-y-auto\"\r\n                                style={{\r\n                                    minHeight: '300px',\r\n                                    backgroundColor: '#fff',\r\n                                    fontSize: '14px',\r\n                                    lineHeight: '1.6',\r\n                                    wordWrap: 'break-word',\r\n                                    overflowWrap: 'break-word'\r\n                                }}\r\n                                placeholder=\"Start typing your detailed description here...\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                                    <span className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                                        Rich Text Editor Active\r\n                                    </span>\r\n                                    <span>Bold, italic, lists and formatting preserved when saved</span>\r\n                                </div>\r\n                                <div className=\"text-xs text-gray-500\">\r\n                                    <strong>Tip:</strong> Rich text formatting is preserved. Use toolbar for styling.\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>,\r\n                document.body\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RubricCreator;"],"mappings":"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ACA,MAAM4F,WAAW,GAAGA,CAAA,KAAM;IACtB,IAAI9G,MAAM,CAAC+G,OAAO,CAAC,oFAAoF,CAAC,EAAE;MACtG,MAAMC,aAAa,GAAG;QAClBnK,cAAc,EAAE;UACZC,KAAK,EAAE,EAAE;UACTN,WAAW,EAAE,EAAE;UACfO,MAAM,EAAE,EAAE;UACVC,gBAAgB,EAAE,EAAE;UACpBC,WAAW,EAAE;QACjB,CAAC;QACDC,YAAY,EAAE,CAAC,GAAGb,aAAa,CAAC;QAChCc,QAAQ,EAAE,CACN;UACIC,EAAE,EAAE,aAAa;UACjBb,IAAI,EAAE,EAAE;UACRC,WAAW,EAAE,EAAE;UACfa,SAAS,EAAE,EAAE;UACbN,MAAM,EAAE,EAAE;UACVO,MAAM,EAAE,CAAC,CAAC;UACVC,eAAe,EAAE;YACbC,SAAS,EAAE,EAAE;YACbC,YAAY,EAAE,EAAE;YAChBC,OAAO,EAAE;UACb;QACJ,CAAC;MAET,CAAC;MACDd,aAAa,CAACoK,aAAa,CAAC;IAChC;EACJ,CAAC;;EAED;EACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACvB,MAAMC,aAAa,GAAG7C,gBAAgB,CAAC,CAAC;IACxC,MAAMpH,WAAW,GAAGmF,oBAAoB,CAAC,CAAC;IAE1C,MAAM+E,WAAW,GAAG;AAC5B;AACA;AACA;AACA;AACA,aAAaxK,UAAU,CAACE,cAAc,CAACC,KAAK,IAAI,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}