{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\n// Enhanced RubricCreator.js with complete class‑list integration and batch‑grading functionality\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAssessment } from './SharedContext';\nimport { ensureUniqueCriterionIds } from '../utils/ensureUniqueCriterionIds';\nimport { generateReportHeader, hasSchoolLogo } from './logoIntegrationUtility';\nimport { Plus, X, Save, Upload, Download, FileText, RotateCcw, Minimize2, ChevronUp, ChevronDown, Maximize2, ArrowRight, AlertTriangle, CheckCircle, Code, Settings } from 'lucide-react';\n\n// SimpleRichTextEditor component (assuming it exists)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimpleRichTextEditor = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  value,\n  onChange,\n  placeholder\n}, ref) => {\n  _s();\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.innerHTML = value || '';\n    }\n  }, [value, ref]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rich-text-editor\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref,\n      contentEditable: true,\n      onInput: e => onChange(e.target.innerHTML),\n      className: \"min-h-32 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n      style: {\n        minHeight: '120px'\n      },\n      dangerouslySetInnerHTML: {\n        __html: value || ''\n      },\n      placeholder: placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                [contenteditable]:empty:before {\n                    content: attr(placeholder);\n                    color: #9ca3af;\n                    font-style: italic;\n                }\n                [contenteditable] ul {\n                    list-style-type: disc;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] ol {\n                    list-style-type: decimal;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] li {\n                    margin-bottom: 0.25em;\n                }\n                [contenteditable] h3 {\n                    font-size: 1.25em;\n                    font-weight: bold;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p {\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p:last-child {\n                    margin-bottom: 0;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}, \"OD7bBpZva5O2jO+Puf00hKivP7c=\")), \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c2 = SimpleRichTextEditor;\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\n\n// CORRECTED: Complete Components for RubricCreator.js\n// Insert these components before \"const RubricCreator = () => {\"\n\n// JSON Paste Panel Component\n// JSON Paste Panel Component\nconst JSONPastePanel = /*#__PURE__*/_s2(/*#__PURE__*/React.forwardRef(_c3 = _s2(({\n  onImport,\n  isOpen,\n  onToggle\n}, ref) => {\n  _s2();\n  const [jsonInput, setJsonInput] = React.useState('');\n  const [error, setError] = React.useState('');\n  const handleImport = () => {\n    try {\n      const parsed = JSON.parse(jsonInput);\n\n      // Use the enhanced validation\n      const validation = validateRubricStructure(parsed);\n      if (!validation.isValid) {\n        setError('Invalid rubric structure:\\n' + validation.errors.join('\\n'));\n        return;\n      }\n      onImport(parsed);\n      setJsonInput('');\n      setError('');\n      onToggle(); // Close the panel\n    } catch (err) {\n      if (err instanceof SyntaxError) {\n        setError('Invalid JSON format. Please check your JSON syntax.');\n      } else {\n        setError(err.message);\n      }\n    }\n  };\n  const handleClear = () => {\n    setJsonInput('');\n    setError('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    className: \"border border-gray-200 rounded-lg mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onToggle,\n      className: \"w-full flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 transition-colors rounded-t-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(Code, {\n          className: \"text-purple-600\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold text-gray-800\",\n          children: \"\\uD83D\\uDCCB Paste JSON Rubric\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n        className: `text-gray-600 transition-transform ${isOpen ? 'rotate-180' : ''}`,\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600 mb-4\",\n        children: \"Paste a complete rubric JSON structure below. This is an alternative to file upload for quick importing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: jsonInput,\n        onChange: e => setJsonInput(e.target.value),\n        placeholder: `Paste your rubric JSON here, for example:\n{\n  \"assignmentInfo\": {\n    \"title\": \"Web Development Project\",\n    \"totalPoints\": 100\n  },\n  \"rubricLevels\": [...],\n  \"criteria\": [...]\n}`,\n        className: \"w-full h-48 p-3 border border-gray-300 rounded-lg font-mono text-sm resize-y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-sm\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleImport,\n          disabled: !jsonInput.trim(),\n          className: \"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 29\n          }, this), \"Import JSON\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClear,\n          className: \"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm\",\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n}, \"oYvaubR3YjAjlunLQ/GAcTGoBH4=\")), \"oYvaubR3YjAjlunLQ/GAcTGoBH4=\");\n\n// Add display name for debugging\n_c4 = JSONPastePanel;\nJSONPastePanel.displayName = 'JSONPastePanel';\n\n// Achievement Level Control Component\nconst AchievementLevelControl = ({\n  rubricData,\n  setRubricData\n}) => {\n  _s3();\n  const [levelCount, setLevelCount] = React.useState(rubricData.rubricLevels.length);\n\n  // Predefined level templates for different counts\n  const levelTemplates = {\n    2: [{\n      level: 'unacceptable',\n      name: 'Unacceptable',\n      description: 'Does not meet standards',\n      color: '#e74c3c',\n      multiplier: 0\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable',\n      description: 'Meets standards',\n      color: '#27ae60',\n      multiplier: 1.0\n    }],\n    3: [{\n      level: 'unacceptable',\n      name: 'Unacceptable',\n      description: 'Does not meet standards',\n      color: '#e74c3c',\n      multiplier: 0\n    }, {\n      level: 'developing',\n      name: 'Developing',\n      description: 'Approaching standards',\n      color: '#f39c12',\n      multiplier: 0.6\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable',\n      description: 'Meets standards',\n      color: '#27ae60',\n      multiplier: 1.0\n    }],\n    4: [{\n      level: 'incomplete',\n      name: 'Incomplete',\n      description: 'No submission',\n      color: '#95a5a6',\n      multiplier: 0\n    }, {\n      level: 'developing',\n      name: 'Developing',\n      description: 'Needs improvement',\n      color: '#f39c12',\n      multiplier: 0.5\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable',\n      description: 'Meets standards',\n      color: '#27ae60',\n      multiplier: 0.75\n    }, {\n      level: 'accomplished',\n      name: 'Accomplished',\n      description: 'Exceeds standards',\n      color: '#2980b9',\n      multiplier: 1.0\n    }],\n    5: [{\n      level: 'incomplete',\n      name: 'Incomplete',\n      description: 'No submission',\n      color: '#95a5a6',\n      multiplier: 0\n    }, {\n      level: 'unacceptable',\n      name: 'Unacceptable',\n      description: 'Below standards',\n      color: '#e74c3c',\n      multiplier: 0.3\n    }, {\n      level: 'developing',\n      name: 'Developing',\n      description: 'Approaching standards',\n      color: '#f39c12',\n      multiplier: 0.55\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable',\n      description: 'Meets standards',\n      color: '#27ae60',\n      multiplier: 0.75\n    }, {\n      level: 'accomplished',\n      name: 'Accomplished',\n      description: 'Exceeds standards',\n      color: '#2980b9',\n      multiplier: 1.0\n    }],\n    6: [{\n      level: 'incomplete',\n      name: 'Incomplete',\n      description: 'No submission',\n      color: '#95a5a6',\n      multiplier: 0\n    }, {\n      level: 'unacceptable',\n      name: 'Unacceptable',\n      description: 'Below standards',\n      color: '#e74c3c',\n      multiplier: 0.3\n    }, {\n      level: 'developing',\n      name: 'Developing',\n      description: 'Approaching standards',\n      color: '#f39c12',\n      multiplier: 0.55\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable',\n      description: 'Meets standards',\n      color: '#27ae60',\n      multiplier: 0.7\n    }, {\n      level: 'accomplished',\n      name: 'Accomplished',\n      description: 'Exceeds standards',\n      color: '#2980b9',\n      multiplier: 0.85\n    }, {\n      level: 'exceptional',\n      name: 'Exceptional',\n      description: 'Outstanding quality',\n      color: '#8e44ad',\n      multiplier: 1.0\n    }],\n    7: [{\n      level: 'incomplete',\n      name: 'Incomplete',\n      description: 'No submission or unusable',\n      color: '#95a5a6',\n      multiplier: 0\n    }, {\n      level: 'unacceptable',\n      name: 'Unacceptable',\n      description: 'Below minimum standards',\n      color: '#e74c3c',\n      multiplier: 0.3\n    }, {\n      level: 'developing',\n      name: 'Developing',\n      description: 'Approaching standards',\n      color: '#f39c12',\n      multiplier: 0.55\n    }, {\n      level: 'acceptable',\n      name: 'Acceptable (PASS)',\n      description: 'Meets minimum standards',\n      color: '#27ae60',\n      multiplier: 0.7\n    }, {\n      level: 'emerging',\n      name: 'Emerging',\n      description: 'Above standard expectations',\n      color: '#2980b9',\n      multiplier: 0.82\n    }, {\n      level: 'accomplished',\n      name: 'Accomplished',\n      description: 'Strong professional quality',\n      color: '#16a085',\n      multiplier: 0.92\n    }, {\n      level: 'exceptional',\n      name: 'Exceptional',\n      description: 'Outstanding professional quality',\n      color: '#8e44ad',\n      multiplier: 1.0\n    }]\n  };\n  const handleLevelCountChange = newCount => {\n    if (newCount < 2 || newCount > 7) return;\n    const template = levelTemplates[newCount];\n    setLevelCount(newCount);\n\n    // Update rubric data with new levels\n    setRubricData(prev => ({\n      ...prev,\n      rubricLevels: [...template],\n      // Update criteria to remove any level references that no longer exist\n      criteria: prev.criteria.map(criterion => ({\n        ...criterion,\n        levels: Object.fromEntries(template.map(level => [level.level, criterion.levels[level.level] || {\n          description: '',\n          pointRange: ''\n        }]))\n      }))\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-4 rounded-lg mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          className: \"text-blue-600\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), \"Achievement Level Configuration\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: [\"Current: \", levelCount, \" levels\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-6 gap-2 mb-4\",\n      children: [2, 3, 4, 5, 6, 7].map(count => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleLevelCountChange(count),\n        className: `px-3 py-2 rounded-lg text-sm font-medium transition-all ${levelCount === count ? 'bg-blue-600 text-white shadow-md' : 'bg-white text-gray-700 border border-gray-300 hover:bg-blue-50 hover:border-blue-300'}`,\n        children: [count, \" Levels\"]\n      }, count, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-600 space-y-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"2-3 Levels:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 20\n        }, this), \" Simple pass/fail or basic progression\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"4-5 Levels:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 20\n        }, this), \" Standard rubric with clear progression\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"6-7 Levels:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 20\n        }, this), \" Detailed assessment with fine-grained feedback\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 13\n    }, this), levelCount !== rubricData.rubricLevels.length && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm\",\n      children: \"\\u26A0\\uFE0F Changing level count will reset level descriptions for all criteria\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n};\n\n// Enhanced JSON validation function\n_s3(AchievementLevelControl, \"lBff8pQPGcGooRdYlqFSlfC5AvU=\");\n_c5 = AchievementLevelControl;\nconst validateRubricStructure = data => {\n  const errors = [];\n\n  // Check assignmentInfo\n  if (!data.assignmentInfo || typeof data.assignmentInfo !== 'object') {\n    errors.push('Missing or invalid assignmentInfo object');\n  } else {\n    // Validate required assignmentInfo fields\n    if (!data.assignmentInfo.hasOwnProperty('title')) {\n      errors.push('assignmentInfo.title is required');\n    }\n    if (!data.assignmentInfo.hasOwnProperty('weight')) {\n      errors.push('assignmentInfo.weight is required');\n    }\n    if (!data.assignmentInfo.hasOwnProperty('totalPoints')) {\n      errors.push('assignmentInfo.totalPoints is required');\n    }\n  }\n\n  // Check criteria - must be an array\n  if (!Array.isArray(data.criteria)) {\n    errors.push('criteria must be an array');\n  } else if (data.criteria.length === 0) {\n    errors.push('criteria array cannot be empty');\n  } else {\n    // Validate each criterion\n    data.criteria.forEach((criterion, index) => {\n      if (!criterion.id) {\n        errors.push(`Criterion ${index + 1}: missing id`);\n      }\n      if (!criterion.hasOwnProperty('maxPoints') || typeof criterion.maxPoints !== 'number') {\n        errors.push(`Criterion ${index + 1}: maxPoints must be a number`);\n      }\n      if (!criterion.feedbackLibrary || typeof criterion.feedbackLibrary !== 'object') {\n        errors.push(`Criterion ${index + 1}: missing feedbackLibrary object`);\n      } else {\n        // Ensure feedbackLibrary has required arrays\n        ['strengths', 'improvements', 'general'].forEach(category => {\n          if (!Array.isArray(criterion.feedbackLibrary[category])) {\n            criterion.feedbackLibrary[category] = [];\n          }\n        });\n      }\n      if (!criterion.levels || typeof criterion.levels !== 'object') {\n        criterion.levels = {};\n      }\n    });\n  }\n\n  // Check rubricLevels - must be an array\n  if (!Array.isArray(data.rubricLevels)) {\n    errors.push('rubricLevels must be an array');\n  } else if (data.rubricLevels.length === 0) {\n    errors.push('rubricLevels array cannot be empty');\n  } else {\n    // Validate each level\n    data.rubricLevels.forEach((level, index) => {\n      if (!level.level) {\n        errors.push(`Rubric level ${index + 1}: missing level identifier`);\n      }\n      if (!level.name) {\n        errors.push(`Rubric level ${index + 1}: missing name`);\n      }\n      if (!level.hasOwnProperty('multiplier') || typeof level.multiplier !== 'number') {\n        errors.push(`Rubric level ${index + 1}: multiplier must be a number`);\n      }\n    });\n  }\n  return {\n    isValid: errors.length === 0,\n    errors: errors,\n    data: data\n  };\n};\nconst RubricCreator = () => {\n  _s4();\n  var _classList$students, _classList$students2, _classList$students3, _classList$students4, _classList$students5;\n  // ENHANCED: Get shared context functions and state with class list access\n  const {\n    sharedRubric,\n    setSharedRubric,\n    transferRubricToGradingWithDetails,\n    setActiveTab,\n    classList,\n    // ADDED: Access to class list\n    initializeGradingSession,\n    // ADDED: Access to grading session function\n    activeTab\n  } = useAssessment();\n\n  // Default rubric levels (7-level system)\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // Initialize state from shared context or defaults\n  const [rubricData, setRubricData] = useState(() => {\n    if (sharedRubric) {\n      return sharedRubric;\n    }\n    return {\n      assignmentInfo: {\n        title: '',\n        description: '',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: [...defaultLevels],\n      criteria: [{\n        id: 'criterion-1',\n        name: '',\n        description: '',\n        maxPoints: 20,\n        weight: 20,\n        levels: {},\n        feedbackLibrary: {\n          strengths: [],\n          improvements: [],\n          general: []\n        }\n      }]\n    };\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [inlineEditor, setInlineEditor] = useState({\n    show: false,\n    content: '',\n    field: null,\n    onSave: null,\n    criterionId: null,\n    level: null,\n    type: null // 'assignment', 'criterion', 'level', or 'feedback'\n  });\n  const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n  const [showJSONPaste, setShowJSONPaste] = useState(false);\n\n  // Use refs to store editor content and DOM node\n  const richTextContentRef = useRef('');\n  const editorRef = useRef(null);\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n  const jsonPastePanelRef = useRef(null);\n  // Auto-save to shared context whenever rubricData changes\n  useEffect(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout);\n    }\n    const timeoutId = setTimeout(() => {\n      setSharedRubric(rubricData);\n    }, 1000); // Auto-save after 1 second of inactivity\n\n    setAutoSaveTimeout(timeoutId);\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [rubricData, setSharedRubric]);\n\n  // Load shared rubric when it changes externally\n  useEffect(() => {\n    if (sharedRubric && activeTab === 'rubric-creator') {\n      setRubricData(sharedRubric);\n    }\n  }, [sharedRubric, activeTab]);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Launch the inline rich text editor\n  const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\n    // Initialize the ref with current content\n    richTextContentRef.current = content || '';\n    setInlineEditor({\n      show: true,\n      content: content || '',\n      field,\n      onSave,\n      criterionId,\n      level,\n      type\n    });\n  };\n\n  // Helper function to safely render HTML content in textareas\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Create a temporary div to extract text while preserving some formatting\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlContent;\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // Helper function to convert formatted text back to HTML\n  const convertFormattedTextToHtml = text => {\n    if (!text) return '';\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>').replace(/_(.*?)_/g, '<u>$1</u>').replace(/### (.*?)\\n/g, '<h3>$1</h3>').replace(/• (.*?)\\n/g, '<li>$1</li>').replace(/\\n/g, '<br>').replace(/(<li>.*<\\/li>)/g, '<ul>$1</ul>');\n  };\n\n  // Toggle all textareas to expanded or collapsed state\n  const toggleAllTextareas = expand => {\n    const textareas = document.querySelectorAll('textarea');\n    textareas.forEach(textarea => {\n      if (expand) {\n        textarea.style.height = '200px';\n        textarea.style.maxHeight = '400px';\n      } else {\n        // Reset to default sizes based on context\n        if (textarea.closest('.assignment-info')) {\n          textarea.style.height = '80px';\n          textarea.style.maxHeight = '200px';\n        } else if (textarea.closest('td')) {\n          if (textarea.rows <= 2) {\n            textarea.style.height = '48px';\n            textarea.style.maxHeight = '200px';\n          } else {\n            textarea.style.height = '80px';\n            textarea.style.maxHeight = '300px';\n          }\n        }\n      }\n    });\n  };\n\n  // Close inline editor and optionally save\n  const closeInlineEditor = (save = false) => {\n    if (save && inlineEditor.onSave) {\n      // Get the current content from ref (most up-to-date)\n      const finalContent = richTextContentRef.current;\n      inlineEditor.onSave(finalContent);\n    }\n    setInlineEditor({\n      show: false,\n      content: '',\n      field: null,\n      onSave: null,\n      criterionId: null,\n      level: null,\n      type: null\n    });\n    richTextContentRef.current = '';\n  };\n\n  // Reset textarea sizes to original dimensions\n  const resetTextareaSizes = () => {\n    const textareas = document.querySelectorAll('textarea');\n    textareas.forEach(textarea => {\n      // Reset to default sizes based on context\n      if (textarea.closest('.assignment-info')) {\n        textarea.style.height = '80px';\n        textarea.style.maxHeight = '200px';\n      } else if (textarea.closest('td')) {\n        // Criterion or level descriptions\n        if (textarea.rows <= 2) {\n          textarea.style.height = '48px';\n          textarea.style.maxHeight = '200px';\n        } else {\n          textarea.style.height = '80px';\n          textarea.style.maxHeight = '300px';\n        }\n      }\n      textarea.style.width = '100%';\n    });\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n\n  // Update assignment info and recalculate total points\n  const updateAssignmentInfo = (field, value) => {\n    setRubricData(prev => {\n      const updated = {\n        ...prev,\n        assignmentInfo: {\n          ...prev.assignmentInfo,\n          [field]: value\n        }\n      };\n\n      // Auto-calculate total points\n      if (field !== 'totalPoints') {\n        updated.assignmentInfo.totalPoints = calculateTotalPoints();\n      }\n      return updated;\n    });\n  };\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    if (!item || !item.trim()) return;\n    const htmlItem = convertFormattedTextToHtml(item.trim());\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], htmlItem]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as backup\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Prepare rubric data for export/transfer\n  const prepareRubricForExport = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Update total points\n    exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n    return exportData;\n  };\n\n  // ENHANCED: Transfer to grading tool with class list validation and batch grading\n  const transferToGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // STEP 1: Check if class list is loaded and has course metadata\n    if (!classList || !classList.students || classList.students.length === 0) {\n      // If no class list, show confirmation dialog\n      const userChoice = window.confirm(\"No class list has been loaded yet.\\n\\n\" + \"Would you like to:\\n\" + \"• Click 'OK' to go to Class Manager to load a class list first\\n\" + \"• Click 'Cancel' to proceed to Grading Tool for individual grading\\n\\n\" + \"Note: Batch grading requires a loaded class list with course information.\");\n      if (userChoice) {\n        // User chose to load class list first\n        setSharedRubric(exportData);\n        setActiveTab('class-manager');\n        alert(\"Rubric saved! Please import your class list, then use 'Start Batch Grading' to begin.\");\n        return;\n      } else {\n        var _exportData$assignmen;\n        // User chose to proceed with individual grading\n        setSharedRubric(exportData);\n        setActiveTab('grading-tool');\n        console.log('✅ Rubric transferred for individual grading:', ((_exportData$assignmen = exportData.assignmentInfo) === null || _exportData$assignmen === void 0 ? void 0 : _exportData$assignmen.title) || 'Untitled');\n        return;\n      }\n    }\n\n    // STEP 2: Class list exists - proceed with batch grading setup\n    setSharedRubric(exportData);\n\n    // STEP 3: Enhanced initialization with course data verification\n    console.log('🔄 Initializing grading session with course metadata:', classList.courseMetadata);\n    const success = initializeGradingSession(classList);\n    if (success) {\n      var _exportData$assignmen2, _classList$students$, _exportData$assignmen3, _classList$students$2;\n      // STEP 4: Switch to grading tool\n      setActiveTab('grading-tool');\n\n      // STEP 5: Show enhanced success message with course info\n      const courseInfo = classList.courseMetadata || {};\n      const hasCompleteInfo = courseInfo.courseCode && courseInfo.courseName && (courseInfo.instructor || courseInfo.professors) && courseInfo.term;\n      alert(`🎯 Batch Grading Started!\\n\\n` + `Rubric: ${((_exportData$assignmen2 = exportData.assignmentInfo) === null || _exportData$assignmen2 === void 0 ? void 0 : _exportData$assignmen2.title) || 'Untitled'}\\n` + `Class: ${classList.students.length} students\\n` + `Starting with: ${((_classList$students$ = classList.students[0]) === null || _classList$students$ === void 0 ? void 0 : _classList$students$.name) || 'First Student'}\\n\\n` + `Course Information:\\n` + `• Code: ${courseInfo.courseCode || 'Not specified'}\\n` + `• Name: ${courseInfo.courseName || 'Not specified'}\\n` + `• Instructor: ${courseInfo.instructor || courseInfo.professors || 'Not specified'}\\n` + `• Term: ${courseInfo.term || 'Not specified'}\\n\\n` + `${hasCompleteInfo ? '✅ Course information has been automatically loaded from your class list.' : '⚠️ Some course information is missing. You can manually enter it in the grading tool or use the \"Pull Course Data\" button.'}`);\n      console.log('✅ Batch grading session started:', {\n        rubric: (_exportData$assignmen3 = exportData.assignmentInfo) === null || _exportData$assignmen3 === void 0 ? void 0 : _exportData$assignmen3.title,\n        students: classList.students.length,\n        firstStudent: (_classList$students$2 = classList.students[0]) === null || _classList$students$2 === void 0 ? void 0 : _classList$students$2.name,\n        courseMetadata: classList.courseMetadata\n      });\n    } else {\n      // Fallback if session initialization fails\n      setActiveTab('grading-tool');\n      alert('Rubric transferred, but batch grading session could not be initialized. You can grade individual students and manually enter course information.');\n    }\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n\n          // Validate the imported data structure\n          if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n            setRubricData(importedData);\n          } else {\n            alert('Invalid rubric format. Please check the JSON structure.');\n          }\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n          console.error('Import error:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Enhanced JSON validation function\n  const validateRubricStructure = data => {\n    const errors = [];\n\n    // Check assignmentInfo\n    if (!data.assignmentInfo || typeof data.assignmentInfo !== 'object') {\n      errors.push('Missing or invalid assignmentInfo object');\n    } else {\n      // Validate required assignmentInfo fields\n      if (!data.assignmentInfo.hasOwnProperty('title')) {\n        errors.push('assignmentInfo.title is required');\n      }\n      if (!data.assignmentInfo.hasOwnProperty('weight')) {\n        errors.push('assignmentInfo.weight is required');\n      }\n      if (!data.assignmentInfo.hasOwnProperty('totalPoints')) {\n        errors.push('assignmentInfo.totalPoints is required');\n      }\n    }\n\n    // Check criteria - must be an array\n    if (!Array.isArray(data.criteria)) {\n      errors.push('criteria must be an array');\n    } else if (data.criteria.length === 0) {\n      errors.push('criteria array cannot be empty');\n    } else {\n      // Validate each criterion\n      data.criteria.forEach((criterion, index) => {\n        if (!criterion.id) {\n          errors.push(`Criterion ${index + 1}: missing id`);\n        }\n        if (!criterion.hasOwnProperty('maxPoints') || typeof criterion.maxPoints !== 'number') {\n          errors.push(`Criterion ${index + 1}: maxPoints must be a number`);\n        }\n        if (!criterion.feedbackLibrary || typeof criterion.feedbackLibrary !== 'object') {\n          errors.push(`Criterion ${index + 1}: missing feedbackLibrary object`);\n        } else {\n          // Ensure feedbackLibrary has required arrays\n          ['strengths', 'improvements', 'general'].forEach(category => {\n            if (!Array.isArray(criterion.feedbackLibrary[category])) {\n              criterion.feedbackLibrary[category] = [];\n            }\n          });\n        }\n        if (!criterion.levels || typeof criterion.levels !== 'object') {\n          criterion.levels = {};\n        }\n      });\n    }\n\n    // Check rubricLevels - must be an array\n    if (!Array.isArray(data.rubricLevels)) {\n      errors.push('rubricLevels must be an array');\n    } else if (data.rubricLevels.length === 0) {\n      errors.push('rubricLevels array cannot be empty');\n    } else {\n      // Validate each level\n      data.rubricLevels.forEach((level, index) => {\n        if (!level.level) {\n          errors.push(`Rubric level ${index + 1}: missing level identifier`);\n        }\n        if (!level.name) {\n          errors.push(`Rubric level ${index + 1}: missing name`);\n        }\n        if (!level.hasOwnProperty('multiplier') || typeof level.multiplier !== 'number') {\n          errors.push(`Rubric level ${index + 1}: multiplier must be a number`);\n        }\n      });\n    }\n    return {\n      isValid: errors.length === 0,\n      errors: errors,\n      data: data\n    };\n  };\n\n  // Enhanced Import from JSON paste function\n  const importFromJSON = jsonData => {\n    try {\n      // Validate the structure\n      const validation = validateRubricStructure(jsonData);\n      if (!validation.isValid) {\n        const errorMessage = 'Invalid rubric structure:\\n' + validation.errors.join('\\n');\n        alert(errorMessage);\n        console.error('JSON validation errors:', validation.errors);\n        return;\n      }\n\n      // Ensure the data has default values for any missing optional fields\n      const processedData = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100,\n          ...jsonData.assignmentInfo\n        },\n        rubricLevels: [...jsonData.rubricLevels],\n        criteria: jsonData.criteria.map(criterion => ({\n          id: criterion.id || `criterion-${Date.now()}-${Math.random()}`,\n          name: criterion.name || '',\n          description: criterion.description || '',\n          maxPoints: criterion.maxPoints || 20,\n          weight: criterion.weight || 20,\n          levels: criterion.levels || {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: [],\n            ...criterion.feedbackLibrary\n          }\n        }))\n      };\n      setRubricData(processedData);\n      console.log('✅ Rubric imported successfully from JSON paste');\n    } catch (error) {\n      alert('Error processing JSON data: ' + error.message);\n      console.error('JSON import error:', error);\n    }\n  };\n\n  // Reset to default rubric\n  const resetRubric = () => {\n    if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n      const defaultRubric = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100\n        },\n        rubricLevels: [...defaultLevels],\n        criteria: [{\n          id: 'criterion-1',\n          name: '',\n          description: '',\n          maxPoints: 20,\n          weight: 20,\n          levels: {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: []\n          }\n        }]\n      };\n      setRubricData(defaultRubric);\n    }\n  };\n\n  // Fixed exportToHTML function for RubricCreator.js\n  // Replace the existing exportToHTML function with this corrected version\n\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const totalPoints = calculateTotalPoints();\n\n    // Generate header with logo\n    const reportData = {\n      title: `${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric`,\n      courseCode: '',\n      courseName: '',\n      section: '',\n      rubricTitle: ''\n    };\n    const headerHtml = generateReportHeader(reportData, {\n      maxHeight: 60\n    });\n\n    // FIXED: Generate dynamic CSS based on actual level colors instead of hardcoded classes\n    const generateLevelCSS = () => {\n      return displayLevels.map(level => {\n        // Convert hex color to RGB for transparency\n        const hexToRgb = hex => {\n          const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n          return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16)\n          } : null;\n        };\n        const rgb = hexToRgb(level.color);\n        const backgroundColor = rgb ? `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.1)` : `${level.color}20`;\n        return `\n        .level-${level.level} { \n            background: ${backgroundColor}; \n            border-left: 4px solid ${level.color}; \n        }`;\n      }).join('');\n    };\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { margin-bottom: 30px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #cbd5e1; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; font-weight: 600; }\n        .criterion-header { background: #f1f5f9; font-weight: 600; color: #334155; }\n        \n        /* FIXED: Dynamic level-specific CSS based on actual rubric data */\n        ${generateLevelCSS()}\n        \n        .points { font-weight: 600; color: #059669; text-align: center; }\n        .footer { margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; text-align: center; font-size: 0.875rem; color: #64748b; }\n        .school-logo, .report-logo, .assignment-logo { max-height: 60px; max-width: 200px; object-fit: contain; }\n        \n        @media print {\n            body { font-size: 10pt; background: white; }\n            .school-logo, .report-logo, .assignment-logo { max-height: 40px !important; }\n            table { page-break-inside: auto; }\n            tr { page-break-inside: avoid; page-break-after: auto; }\n            thead { display: table-header-group; }\n        }\n    </style>\n</head>\n<body>\n    ${headerHtml}\n\n    <div class=\"assignment-info\">\n        <h2 style=\"margin: 0 0 15px 0; color: #1e40af;\">Assignment Information</h2>\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.95rem;\">\n            <div><strong>Weight:</strong> ${rubricData.assignmentInfo.weight || 0}%</div>\n            <div><strong>Total Points:</strong> ${totalPoints}</div>\n            <div><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold || 60}%</div>\n        </div>\n        ${rubricData.assignmentInfo.description ? `<div style=\"margin-top: 15px;\"><strong>Description:</strong><br>${rubricData.assignmentInfo.description}</div>` : ''}\n    </div>\n\n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 15%;\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${85 / displayLevels.length}%;\">${level.name} (${level.level})</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map((criterion, index) => `\n                <tr>\n                    <td class=\"criterion-header\">\n                        <strong>${criterion.name || `Criterion ${index + 1}`}</strong>\n                        <div style=\"font-size: 0.8em; color: #64748b; margin-top: 5px;\">\n                            ${criterion.maxPoints || 0} points\n                        </div>\n                        ${criterion.description ? `<div style=\"font-size: 0.85em; margin-top: 8px; color: #475569;\">${criterion.description}</div>` : ''}\n                    </td>\n                    ${displayLevels.map(level => {\n      const levelData = criterion.levels[level.level] || {};\n      const points = calculatePointRange(criterion, level.level);\n      // FIXED: Use the actual level identifier from the rubric data\n      const levelClass = `level-${level.level}`;\n      return `\n                            <td class=\"${levelClass}\">\n                                <div class=\"points\" style=\"margin-bottom: 8px; font-size: 1.1em;\">\n                                    ${points} pts\n                                </div>\n                                <div style=\"font-size: 0.9em; line-height: 1.4;\">\n                                    ${levelData.description || `No description provided for ${level.name} level.`}\n                                </div>\n                            </td>\n                        `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n\n    <div class=\"footer\">\n        <p><strong>Assessment Rubric</strong></p>\n        <p>Generated on ${new Date().toLocaleDateString('en-CA')} at ${new Date().toLocaleTimeString('en-CA')}</p>\n        ${hasSchoolLogo() ? '<p>Generated with institutional branding</p>' : ''}\n    </div>\n</body>\n</html>`;\n    const blob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${(rubricData.assignmentInfo.title || 'assessment').replace(/\\s+/g, '_').toLowerCase()}_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-start mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Professional Rubric Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1235,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white\",\n              children: \"Create comprehensive assessment rubrics with detailed criteria and feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1236,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1234,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1233,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-semibold text-white uppercase tracking-wide mb-2\",\n              children: \"Primary Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1244,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: transferToGrading,\n                  className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg flex items-center gap-2 text-sm font-medium shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-105 w-full\",\n                  title: classList && (_classList$students = classList.students) !== null && _classList$students !== void 0 && _classList$students.length ? `Start batch grading with ${classList.students.length} students` : \"Transfer rubric to grading tool (individual grading)\",\n                  children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1258,\n                    columnNumber: 41\n                  }, this), \"Use for Grading\", classList && ((_classList$students2 = classList.students) === null || _classList$students2 === void 0 ? void 0 : _classList$students2.length) > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-auto bg-green-800 text-xs px-2 py-1 rounded-full\",\n                    children: [classList.students.length, \" students\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1261,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1250,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-1 text-xs text-white\",\n                  children: classList && ((_classList$students3 = classList.students) === null || _classList$students3 === void 0 ? void 0 : _classList$students3.length) > 0 ? `✅ Class list loaded (${classList.students.length} students) - Will start batch grading` : \"⚠️ No class list - Individual grading mode\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1268,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1249,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportForGrading,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 text-sm font-medium shadow-md transition-all duration-200\",\n                title: \"Export final rubric for grading template\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1281,\n                  columnNumber: 37\n                }, this), \"Export JSON\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1276,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1247,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-semibold text-white uppercase tracking-wide mb-2\",\n              children: \"File Operations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1289,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    var _importInputRef$curre;\n                    return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n                  },\n                  className: \"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\",\n                  title: \"Import existing rubric JSON file\",\n                  children: [/*#__PURE__*/_jsxDEV(Upload, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1300,\n                    columnNumber: 41\n                  }, this), \"Import File\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1295,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setShowJSONPaste(!showJSONPaste);\n                    // Scroll to JSON paste panel if opening it\n                    if (!showJSONPaste) {\n                      setTimeout(() => {\n                        if (jsonPastePanelRef.current) {\n                          jsonPastePanelRef.current.scrollIntoView({\n                            behavior: 'smooth',\n                            block: 'start',\n                            inline: 'nearest'\n                          });\n                        }\n                      }, 150); // Slightly longer delay to ensure panel is fully rendered\n                    }\n                  },\n                  className: `${showJSONPaste ? 'bg-indigo-700 hover:bg-indigo-800' : 'bg-indigo-600 hover:bg-indigo-700'} text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1`,\n                  title: \"Paste JSON rubric data directly\",\n                  children: [/*#__PURE__*/_jsxDEV(Code, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1325,\n                    columnNumber: 41\n                  }, this), \"Paste JSON\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1303,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1294,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: saveRubric,\n                  className: \"bg-teal-600 hover:bg-teal-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\",\n                  title: \"Save work in progress as JSON file\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1337,\n                    columnNumber: 41\n                  }, this), \"Save Draft\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1332,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: exportToHTML,\n                  className: \"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\",\n                  title: \"Export HTML version for distribution\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1345,\n                    columnNumber: 41\n                  }, this), \"Export HTML\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1340,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1331,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1292,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1288,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-semibold text-white uppercase tracking-wide mb-2\",\n              children: \"Utility Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1353,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: resetRubric,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\",\n                title: \"Reset to blank rubric\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1362,\n                  columnNumber: 37\n                }, this), \"Reset\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1357,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1370,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'High→Low' : 'Low→High']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1365,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => resetTextareaSizes(),\n                className: \"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\",\n                title: \"Reset all text boxes to original size\",\n                children: [/*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1378,\n                  columnNumber: 37\n                }, this), \"Reset Sizes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1373,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1356,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1352,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1241,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1232,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1391,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"Auto-saved - Ready for grading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1392,\n              columnNumber: 33\n            }, this), classList && ((_classList$students4 = classList.students) === null || _classList$students4 === void 0 ? void 0 : _classList$students4.length) > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-auto text-xs bg-green-100 px-2 py-1 rounded\",\n              children: [\"Class list ready: \", classList.students.length, \" students\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1394,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1390,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1389,\n          columnNumber: 25\n        }, this), !classList || !((_classList$students5 = classList.students) !== null && _classList$students5 !== void 0 && _classList$students5.length) ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-yellow-800\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1406,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"No Class List Loaded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1407,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1405,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-yellow-700\",\n            children: [\"For batch grading, load a class list first.\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab('class-manager'),\n              className: \"underline hover:no-underline font-medium\",\n              children: \"Go to Class Manager\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1411,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1409,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1404,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-blue-800\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1422,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Class List Ready\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1423,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1421,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-blue-700\",\n            children: [classList.students.length, \" students loaded.\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \" \\\"Use for Grading\\\"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1427,\n              columnNumber: 33\n            }, this), \" will start batch grading automatically.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1425,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1420,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Quick Start Guide & Button Functions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1439,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1434,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Building Your Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1445,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1447,\n                      columnNumber: 49\n                    }, this), \" Clear all data and start fresh\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1447,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset Sizes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1448,\n                      columnNumber: 49\n                    }, this), \" Return all text boxes to original size\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1448,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1449,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated or existing rubric files\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1449,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Use for Grading:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1450,\n                      columnNumber: 49\n                    }, this), \" Send directly to grading tool\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1450,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1451,\n                      columnNumber: 49\n                    }, this), \" Download work-in-progress (JSON)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1451,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1452,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1452,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1453,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1453,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1446,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1444,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Step-by-Step Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1457,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment details and requirements\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1459,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add criteria using \\\"Add Criterion\\\" button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1460,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1461,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional but recommended)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1462,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Use \\\"Use for Grading\\\" to switch to grading tool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1463,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1464,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1458,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1456,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1443,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCA1 Tip:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1470,\n                  columnNumber: 41\n                }, this), \" Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1469,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCDD Rich Text Editing:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1473,\n                  columnNumber: 41\n                }, this), \" Type directly in any description box for quick edits, or click the blue expand button (\\u2922) to open the full editor. Paste formatting from Word or the web is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1472,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1468,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1442,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1433,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1486,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1489,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => updateAssignmentInfo('title', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project - Final Showcase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1488,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1499,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => updateAssignmentInfo('weight', parseInt(e.target.value, 10) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: 0,\n                max: 100\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1502,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1498,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1514,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: renderFormattedContent(rubricData.assignmentInfo.description),\n                  onChange: e => updateAssignmentInfo('description', convertFormattedTextToHtml(e.target.value)),\n                  className: \"w-full p-3 border rounded-lg resize-y hover:border-blue-400 transition-all duration-200 pr-12\",\n                  rows: 3,\n                  placeholder: \"Detailed description of assignment requirements and expectations...\",\n                  title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                  style: {\n                    minHeight: '80px',\n                    maxHeight: '200px',\n                    resize: 'both'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1518,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: e => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    openInlineEditor(rubricData.assignmentInfo.description, 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), null, null, 'assignment');\n                  },\n                  className: \"absolute top-1 right-1 z-10 bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer opacity-70 hover:opacity-100 transition-opacity\",\n                  title: \"Open rich text editor\",\n                  children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1549,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1532,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1517,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1513,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1554,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => updateAssignmentInfo('passingThreshold', parseInt(e.target.value, 10) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: 0,\n                max: 100\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1557,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1553,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Auto-calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1569,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1572,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1568,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1487,\n            columnNumber: 25\n          }, this), inlineEditor.show && inlineEditor.type === 'assignment' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                  size: 20,\n                  className: \"text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1587,\n                  columnNumber: 41\n                }, this), \"Rich Text Editor: \", inlineEditor.field]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1586,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(true),\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1595,\n                    columnNumber: 45\n                  }, this), \"Save & Close\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1591,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(false),\n                  className: \"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1602,\n                    columnNumber: 45\n                  }, this), \"Cancel\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1598,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1590,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1585,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                ref: editorRef,\n                value: inlineEditor.content,\n                onChange: html => {\n                  richTextContentRef.current = html;\n                },\n                placeholder: \"Enter detailed assignment description...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1610,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1609,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4 text-sm text-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-green-500 rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1625,\n                      columnNumber: 49\n                    }, this), \"Rich Text Editor Active\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1624,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Paste rich text from other sources\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1628,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1623,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Features:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1631,\n                    columnNumber: 45\n                  }, this), \" Headers, Bold, Italic, Lists, Links, Colors\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1630,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1622,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1621,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1583,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1485,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1641,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Automatic (Recommended):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1653,\n                  columnNumber: 37\n                }, this), \" Points calculated using level multipliers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1652,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1643,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1657,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Custom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1666,\n                  columnNumber: 37\n                }, this), \" Manually set point ranges for each level\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1665,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1656,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1642,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1640,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(JSONPastePanel, {\n          ref: jsonPastePanelRef,\n          onImport: importFromJSON,\n          isOpen: showJSONPaste,\n          onToggle: () => setShowJSONPaste(!showJSONPaste)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1673,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AchievementLevelControl, {\n          rubricData: rubricData,\n          setRubricData: setRubricData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1681,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Assessment Criteria Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1689,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 text-white px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1696,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'High→Low' : 'Low→High']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1691,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: resetTextareaSizes,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Reset all textarea sizes to original dimensions\",\n                children: [/*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1704,\n                  columnNumber: 37\n                }, this), \"Reset Sizes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1699,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1711,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1707,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1690,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1688,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold\",\n                    style: {\n                      width: '200px'\n                    },\n                    children: [\"Criterion (\", rubricData.criteria.length, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1721,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      minWidth: '150px',\n                      border: `2px solid ${level.color}`\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-bold\",\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1735,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs font-normal mt-1 opacity-75\",\n                      children: level.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1736,\n                      columnNumber: 49\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1725,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      width: '80px'\n                    },\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1741,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1720,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1719,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map((criterion, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 bg-gray-50\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: criterion.name,\n                          onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                          className: \"w-full p-2 border rounded text-sm font-medium\",\n                          placeholder: `Criterion ${index + 1} name`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1753,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"relative\",\n                          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                            value: renderFormattedContent(criterion.description),\n                            onChange: e => updateCriterion(criterion.id, 'description', convertFormattedTextToHtml(e.target.value)),\n                            className: \"w-full p-2 border rounded text-xs resize-y hover:border-blue-400 transition-all duration-200 pr-8\",\n                            rows: \"2\",\n                            placeholder: \"Brief description of what this criterion measures\",\n                            title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                            style: {\n                              minHeight: '48px',\n                              maxHeight: '200px',\n                              resize: 'both'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1761,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            onClick: e => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              openInlineEditor(criterion.description, `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), criterion.id, null, 'criterion');\n                            },\n                            className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer\",\n                            title: \"Open rich text editor\",\n                            children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 12\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1787,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1770,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1760,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex gap-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex-1\",\n                            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                              className: \"text-xs text-gray-600\",\n                              children: \"Max Points\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1792,\n                              columnNumber: 65\n                            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                              type: \"number\",\n                              value: criterion.maxPoints,\n                              onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                              className: \"w-full p-1 border rounded text-sm\",\n                              min: \"0\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1793,\n                              columnNumber: 65\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1791,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1790,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1752,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1751,\n                      columnNumber: 49\n                    }, this), getDisplayLevels().map(level => {\n                      var _criterion$levels$lev3, _criterion$levels$lev5;\n                      return /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"border p-3 align-top\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"space-y-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-center\",\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"font-bold text-sm px-2 py-1 rounded\",\n                              style: {\n                                color: level.color,\n                                backgroundColor: level.color + '20'\n                              },\n                              children: [calculatePointRange(criterion, level.level), \" pts\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1810,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1809,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"relative\",\n                            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                              value: renderFormattedContent(((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || ''),\n                              onChange: e => updateCriterionLevel(criterion.id, level.level, 'description', convertFormattedTextToHtml(e.target.value)),\n                              className: \"w-full p-2 border rounded text-xs resize-y hover:border-blue-400 transition-all duration-200 pr-8\",\n                              rows: \"4\",\n                              placeholder: `Describe ${level.name.toLowerCase()} performance...`,\n                              title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                              style: {\n                                minHeight: '80px',\n                                maxHeight: '300px',\n                                resize: 'both'\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1821,\n                              columnNumber: 65\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              type: \"button\",\n                              onClick: e => {\n                                var _criterion$levels$lev4;\n                                e.preventDefault();\n                                e.stopPropagation();\n                                openInlineEditor(((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || '', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), criterion.id, level.level, 'level');\n                              },\n                              className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer\",\n                              title: \"Open rich text editor\",\n                              children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                                size: 12\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1847,\n                                columnNumber: 69\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1830,\n                              columnNumber: 65\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1820,\n                            columnNumber: 61\n                          }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            value: ((_criterion$levels$lev5 = criterion.levels[level.level]) === null || _criterion$levels$lev5 === void 0 ? void 0 : _criterion$levels$lev5.pointRange) || '',\n                            onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                            className: \"w-full p-1 border rounded text-xs text-center\",\n                            placeholder: \"e.g., 18-20\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1851,\n                            columnNumber: 65\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1808,\n                          columnNumber: 57\n                        }, this)\n                      }, level.level, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1807,\n                        columnNumber: 53\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 text-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => removeCriterion(criterion.id),\n                        className: \"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\",\n                        disabled: rubricData.criteria.length === 1,\n                        title: rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\",\n                        children: /*#__PURE__*/_jsxDEV(X, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1871,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1865,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1864,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1749,\n                    columnNumber: 45\n                  }, this), inlineEditor.show && inlineEditor.criterionId === criterion.id && (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: getDisplayLevels().length + 2,\n                      className: \"border-0 p-0\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                            className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 20,\n                              className: \"text-blue-600\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1886,\n                              columnNumber: 73\n                            }, this), \"Rich Text Editor: \", inlineEditor.field]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1885,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(true),\n                              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(Save, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1894,\n                                columnNumber: 77\n                              }, this), \"Save & Close\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1890,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(false),\n                              className: \"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(X, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1901,\n                                columnNumber: 77\n                              }, this), \"Cancel\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1897,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1889,\n                            columnNumber: 69\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1884,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4\",\n                          children: /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                            ref: editorRef,\n                            value: inlineEditor.content,\n                            onChange: html => {\n                              richTextContentRef.current = html;\n                            },\n                            placeholder: `Enter ${inlineEditor.type === 'criterion' ? 'criterion description' : 'level description'}...`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1909,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1908,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex justify-between items-center\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"flex items-center gap-4 text-sm text-gray-600\",\n                              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"flex items-center gap-2\",\n                                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"w-2 h-2 bg-green-500 rounded-full\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1924,\n                                  columnNumber: 81\n                                }, this), \"Rich Text Editor Active\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1923,\n                                columnNumber: 77\n                              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                children: \"Paste rich text from other sources\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1927,\n                                columnNumber: 77\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1922,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"text-xs text-gray-500\",\n                              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                                children: \"Features:\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1930,\n                                columnNumber: 77\n                              }, this), \" Headers, Bold, Italic, Lists, Links, Colors\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1929,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1921,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1920,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1882,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1881,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1880,\n                    columnNumber: 53\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1748,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1746,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1718,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1717,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1687,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"\\uD83D\\uDCDD Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1947,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-4\",\n            children: \"Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1948,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`, \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1958,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items stored\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1961,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1957,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1968,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1970,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1953,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category === 'strengths' ? '👍 Strengths' : category === 'improvements' ? '🔧 Improvements' : '💬 General', \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1980,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => {\n                          const newComment = prompt(`Add ${category} comment:`);\n                          if (newComment && newComment.trim()) {\n                            addFeedbackItem(criterion.id, category, newComment.trim());\n                          }\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1985,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1979,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-start gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\",\n                          onClick: () => {\n                            openInlineEditor(item, `${category} Comment`, newContent => {\n                              const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                              // Store formatted HTML so formatting persists in exports\n                              updatedFeedback[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updatedFeedback\n                                  }\n                                } : c)\n                              }));\n                            }, criterion.id, null, 'feedback');\n                          },\n                          title: \"Click to edit\",\n                          style: {\n                            resize: 'both',\n                            minHeight: '40px'\n                          },\n                          children: renderFormattedContent(item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2000,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\",\n                          title: \"Remove this comment\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2040,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2035,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1999,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\",\n                        children: [\"No \", category, \" comments yet - click \\\"Add\\\" to create some\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2045,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1997,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1978,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1976,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1975,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1952,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1950,\n            columnNumber: 25\n          }, this), inlineEditor.show && inlineEditor.type === 'feedback' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                  size: 20,\n                  className: \"text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2065,\n                  columnNumber: 41\n                }, this), \"Rich Text Editor: \", inlineEditor.field]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2064,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(true),\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2073,\n                    columnNumber: 45\n                  }, this), \"Save & Close\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2069,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(false),\n                  className: \"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2080,\n                    columnNumber: 45\n                  }, this), \"Cancel\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2076,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2068,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2063,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                ref: editorRef,\n                value: inlineEditor.content,\n                onChange: html => {\n                  richTextContentRef.current = html;\n                },\n                placeholder: \"Enter feedback comment...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2088,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2087,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4 text-sm text-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-green-500 rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2103,\n                      columnNumber: 49\n                    }, this), \"Rich Text Editor Active\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2102,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Paste rich text from other sources\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2106,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2101,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Features:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2109,\n                    columnNumber: 45\n                  }, this), \" Headers, Bold, Italic, Lists, Links, Colors\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2108,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2100,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2099,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2061,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1946,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"\\uD83D\\uDCCA Achievement Level Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: [\"Shows how total rubric scores map to achievement levels. Currently using \", rubricData.rubricLevels.length, \" levels. Each submission receives a level based on its total points.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `grid gap-3 ${rubricData.rubricLevels.length <= 4 ? `grid-cols-${rubricData.rubricLevels.length}` : rubricData.rubricLevels.length <= 6 ? 'grid-cols-3 md:grid-cols-6' : 'grid-cols-2 md:grid-cols-4 lg:grid-cols-7'}`,\n            children: getDisplayLevels().map(level => {\n              const totalPoints = calculateTotalPoints();\n              const pointsForLevel = Math.round(totalPoints * level.multiplier);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\",\n                style: {\n                  borderColor: level.color,\n                  backgroundColor: level.color + '15'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-sm\",\n                  style: {\n                    color: level.color\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2144,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-bold mt-1\",\n                  style: {\n                    color: level.color\n                  },\n                  children: [pointsForLevel, \"+\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2147,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600\",\n                  children: totalPoints > 0 ? `${Math.round(pointsForLevel / totalPoints * 100)}%+` : '-%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2150,\n                  columnNumber: 41\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2136,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2126,\n            columnNumber: 25\n          }, this), calculateTotalPoints() === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-yellow-800 text-sm\",\n              children: \"Add criteria with point values to see the achievement level breakdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2160,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2159,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1386,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2169,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1230,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1229,\n    columnNumber: 9\n  }, this);\n};\n_s4(RubricCreator, \"OKlFBdC42/WOawhANaKjdskJXds=\", false, function () {\n  return [useAssessment];\n});\n_c6 = RubricCreator;\nexport default RubricCreator;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"SimpleRichTextEditor$React.forwardRef\");\n$RefreshReg$(_c2, \"SimpleRichTextEditor\");\n$RefreshReg$(_c3, \"JSONPastePanel$React.forwardRef\");\n$RefreshReg$(_c4, \"JSONPastePanel\");\n$RefreshReg$(_c5, \"AchievementLevelControl\");\n$RefreshReg$(_c6, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAssessment","ensureUniqueCriterionIds","generateReportHeader","hasSchoolLogo","Plus","X","Save","Upload","Download","FileText","RotateCcw","Minimize2","ChevronUp","ChevronDown","Maximize2","ArrowRight","AlertTriangle","CheckCircle","Code","Settings","jsxDEV","_jsxDEV","SimpleRichTextEditor","_s","forwardRef","_c","value","onChange","placeholder","ref","current","innerHTML","className","children","contentEditable","onInput","e","target","style","minHeight","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","_c2","displayName","JSONPastePanel","_s2","_c3","onImport","isOpen","onToggle","jsonInput","setJsonInput","error","setError","handleImport","parsed","JSON","parse","validation","validateRubricStructure","isValid","errors","join","err","SyntaxError","message","handleClear","onClick","size","disabled","trim","_c4","AchievementLevelControl","rubricData","setRubricData","_s3","levelCount","setLevelCount","rubricLevels","length","levelTemplates","level","name","description","color","multiplier","handleLevelCountChange","newCount","template","prev","criteria","map","criterion","levels","Object","fromEntries","pointRange","count","_c5","data","assignmentInfo","push","hasOwnProperty","Array","isArray","forEach","index","id","maxPoints","feedbackLibrary","category","RubricCreator","_s4","_classList$students","_classList$students2","_classList$students3","_classList$students4","_classList$students5","sharedRubric","setSharedRubric","transferRubricToGradingWithDetails","setActiveTab","classList","initializeGradingSession","activeTab","defaultLevels","title","weight","passingThreshold","totalPoints","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","inlineEditor","setInlineEditor","show","content","field","onSave","criterionId","type","autoSaveTimeout","setAutoSaveTimeout","showJSONPaste","setShowJSONPaste","richTextContentRef","editorRef","importInputRef","jsonPastePanelRef","clearTimeout","timeoutId","setTimeout","toggleFeedbackExpansion","openInlineEditor","renderFormattedContent","htmlContent","tempDiv","document","createElement","textContent","replace","convertFormattedTextToHtml","text","toggleAllTextareas","expand","textareas","querySelectorAll","textarea","height","maxHeight","closest","rows","closeInlineEditor","save","finalContent","resetTextareaSizes","width","calculateTotalPoints","reduce","total","updateAssignmentInfo","updated","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","updateCriterionLevel","addFeedbackItem","item","htmlItem","removeFeedbackItem","_","i","calculatePointRange","rubricLevel","find","l","points","Math","round","toString","_criterion$levels$lev","getDisplayLevels","reverse","saveRubric","dataStr","stringify","dataBlob","Blob","url","URL","createObjectURL","link","href","download","toISOString","split","click","revokeObjectURL","exportForGrading","exportData","prepareRubricForExport","_criterion$levels$lev2","transferToGrading","students","userChoice","window","confirm","alert","_exportData$assignmen","console","log","courseMetadata","success","_exportData$assignmen2","_classList$students$","_exportData$assignmen3","_classList$students$2","courseInfo","hasCompleteInfo","courseCode","courseName","instructor","professors","term","rubric","firstStudent","importRubric","event","file","files","reader","FileReader","onload","importedData","result","readAsText","importFromJSON","jsonData","errorMessage","processedData","random","resetRubric","defaultRubric","exportToHTML","displayLevels","reportData","section","rubricTitle","headerHtml","generateLevelCSS","hexToRgb","hex","exec","r","parseInt","g","b","rgb","backgroundColor","levelData","levelClass","toLocaleDateString","toLocaleTimeString","blob","toLowerCase","_importInputRef$curre","scrollIntoView","behavior","block","inline","min","max","resize","preventDefault","stopPropagation","newContent","html","checked","minWidth","border","Fragment","_criterion$levels$lev3","_criterion$levels$lev5","_criterion$levels$lev4","colSpan","indexOf","newComment","prompt","updatedFeedback","pointsForLevel","borderColor","accept","_c6","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["// Enhanced RubricCreator.js with complete class‑list integration and batch‑grading functionality\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAssessment } from './SharedContext';\nimport { ensureUniqueCriterionIds } from '../utils/ensureUniqueCriterionIds';\nimport { generateReportHeader, hasSchoolLogo } from './logoIntegrationUtility';\n\n\nimport {\n    Plus,\n    X,\n    Save,\n    Upload,\n    Download,\n    FileText,\n    RotateCcw,\n    Minimize2,\n    ChevronUp,\n    ChevronDown,\n    Maximize2,\n    ArrowRight,\n    AlertTriangle,\n    CheckCircle,\n    Code,       \n    Settings\n} from 'lucide-react';\n\n\n// SimpleRichTextEditor component (assuming it exists)\nconst SimpleRichTextEditor = React.forwardRef(({ value, onChange, placeholder }, ref) => {\n    useEffect(() => {\n        if (ref.current) {\n            ref.current.innerHTML = value || '';\n        }\n    }, [value, ref]);\n\n    return (\n        <div className=\"rich-text-editor\">\n            <div\n                ref={ref}\n                contentEditable\n                onInput={(e) => onChange(e.target.innerHTML)}\n                className=\"min-h-32 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                style={{ minHeight: '120px' }}\n                dangerouslySetInnerHTML={{ __html: value || '' }}\n                placeholder={placeholder}\n            />\n            <style>{`\n                [contenteditable]:empty:before {\n                    content: attr(placeholder);\n                    color: #9ca3af;\n                    font-style: italic;\n                }\n                [contenteditable] ul {\n                    list-style-type: disc;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] ol {\n                    list-style-type: decimal;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] li {\n                    margin-bottom: 0.25em;\n                }\n                [contenteditable] h3 {\n                    font-size: 1.25em;\n                    font-weight: bold;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p {\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p:last-child {\n                    margin-bottom: 0;\n                }\n            `}</style>\n        </div>\n    );\n});\n\n\n\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\n\n// CORRECTED: Complete Components for RubricCreator.js\n// Insert these components before \"const RubricCreator = () => {\"\n\n// JSON Paste Panel Component\n// JSON Paste Panel Component\nconst JSONPastePanel = React.forwardRef(({ onImport, isOpen, onToggle }, ref) => {\n    const [jsonInput, setJsonInput] = React.useState('');\n    const [error, setError] = React.useState('');\n\n    const handleImport = () => {\n        try {\n            const parsed = JSON.parse(jsonInput);\n\n            // Use the enhanced validation\n            const validation = validateRubricStructure(parsed);\n\n            if (!validation.isValid) {\n                setError('Invalid rubric structure:\\n' + validation.errors.join('\\n'));\n                return;\n            }\n\n            onImport(parsed);\n            setJsonInput('');\n            setError('');\n            onToggle(); // Close the panel\n\n        } catch (err) {\n            if (err instanceof SyntaxError) {\n                setError('Invalid JSON format. Please check your JSON syntax.');\n            } else {\n                setError(err.message);\n            }\n        }\n    };\n\n    const handleClear = () => {\n        setJsonInput('');\n        setError('');\n    };\n\n    return (\n        <div ref={ref} className=\"border border-gray-200 rounded-lg mb-6\">\n            <button\n                onClick={onToggle}\n                className=\"w-full flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 transition-colors rounded-t-lg\"\n            >\n                <div className=\"flex items-center gap-3\">\n                    <Code className=\"text-purple-600\" size={20} />\n                    <span className=\"font-semibold text-gray-800\">📋 Paste JSON Rubric</span>\n                </div>\n                <ChevronDown\n                    className={`text-gray-600 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n                    size={20}\n                />\n            </button>\n\n            {isOpen && (\n                <div className=\"p-4 border-t border-gray-200\">\n                    <p className=\"text-sm text-gray-600 mb-4\">\n                        Paste a complete rubric JSON structure below. This is an alternative to file upload for quick importing.\n                    </p>\n\n                    <textarea\n                        value={jsonInput}\n                        onChange={(e) => setJsonInput(e.target.value)}\n                        placeholder={`Paste your rubric JSON here, for example:\n{\n  \"assignmentInfo\": {\n    \"title\": \"Web Development Project\",\n    \"totalPoints\": 100\n  },\n  \"rubricLevels\": [...],\n  \"criteria\": [...]\n}`}\n                        className=\"w-full h-48 p-3 border border-gray-300 rounded-lg font-mono text-sm resize-y\"\n                    />\n\n                    {error && (\n                        <div className=\"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-sm\">\n                            {error}\n                        </div>\n                    )}\n\n                    <div className=\"flex gap-2 mt-4\">\n                        <button\n                            onClick={handleImport}\n                            disabled={!jsonInput.trim()}\n                            className=\"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2\"\n                        >\n                            <Upload size={14} />\n                            Import JSON\n                        </button>\n                        <button\n                            onClick={handleClear}\n                            className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm\"\n                        >\n                            Clear\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n});\n\n// Add display name for debugging\nJSONPastePanel.displayName = 'JSONPastePanel';\n\n// Achievement Level Control Component\nconst AchievementLevelControl = ({ rubricData, setRubricData }) => {\n    const [levelCount, setLevelCount] = React.useState(rubricData.rubricLevels.length);\n\n    // Predefined level templates for different counts\n    const levelTemplates = {\n        2: [\n            { level: 'unacceptable', name: 'Unacceptable', description: 'Does not meet standards', color: '#e74c3c', multiplier: 0 },\n            { level: 'acceptable', name: 'Acceptable', description: 'Meets standards', color: '#27ae60', multiplier: 1.0 }\n        ],\n        3: [\n            { level: 'unacceptable', name: 'Unacceptable', description: 'Does not meet standards', color: '#e74c3c', multiplier: 0 },\n            { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.6 },\n            { level: 'acceptable', name: 'Acceptable', description: 'Meets standards', color: '#27ae60', multiplier: 1.0 }\n        ],\n        4: [\n            { level: 'incomplete', name: 'Incomplete', description: 'No submission', color: '#95a5a6', multiplier: 0 },\n            { level: 'developing', name: 'Developing', description: 'Needs improvement', color: '#f39c12', multiplier: 0.5 },\n            { level: 'acceptable', name: 'Acceptable', description: 'Meets standards', color: '#27ae60', multiplier: 0.75 },\n            { level: 'accomplished', name: 'Accomplished', description: 'Exceeds standards', color: '#2980b9', multiplier: 1.0 }\n        ],\n        5: [\n            { level: 'incomplete', name: 'Incomplete', description: 'No submission', color: '#95a5a6', multiplier: 0 },\n            { level: 'unacceptable', name: 'Unacceptable', description: 'Below standards', color: '#e74c3c', multiplier: 0.3 },\n            { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n            { level: 'acceptable', name: 'Acceptable', description: 'Meets standards', color: '#27ae60', multiplier: 0.75 },\n            { level: 'accomplished', name: 'Accomplished', description: 'Exceeds standards', color: '#2980b9', multiplier: 1.0 }\n        ],\n        6: [\n            { level: 'incomplete', name: 'Incomplete', description: 'No submission', color: '#95a5a6', multiplier: 0 },\n            { level: 'unacceptable', name: 'Unacceptable', description: 'Below standards', color: '#e74c3c', multiplier: 0.3 },\n            { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n            { level: 'acceptable', name: 'Acceptable', description: 'Meets standards', color: '#27ae60', multiplier: 0.7 },\n            { level: 'accomplished', name: 'Accomplished', description: 'Exceeds standards', color: '#2980b9', multiplier: 0.85 },\n            { level: 'exceptional', name: 'Exceptional', description: 'Outstanding quality', color: '#8e44ad', multiplier: 1.0 }\n        ],\n        7: [\n            { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\n            { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\n            { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n            { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\n            { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\n            { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\n            { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\n        ]\n    };\n\n    const handleLevelCountChange = (newCount) => {\n        if (newCount < 2 || newCount > 7) return;\n\n        const template = levelTemplates[newCount];\n        setLevelCount(newCount);\n\n        // Update rubric data with new levels\n        setRubricData(prev => ({\n            ...prev,\n            rubricLevels: [...template],\n            // Update criteria to remove any level references that no longer exist\n            criteria: prev.criteria.map(criterion => ({\n                ...criterion,\n                levels: Object.fromEntries(\n                    template.map(level => [level.level, criterion.levels[level.level] || { description: '', pointRange: '' }])\n                )\n            }))\n        }));\n    };\n\n    return (\n        <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-4 rounded-lg mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                    <Settings className=\"text-blue-600\" size={20} />\n                    Achievement Level Configuration\n                </h3>\n                <div className=\"text-sm text-gray-600\">\n                    Current: {levelCount} levels\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-6 gap-2 mb-4\">\n                {[2, 3, 4, 5, 6, 7].map(count => (\n                    <button\n                        key={count}\n                        onClick={() => handleLevelCountChange(count)}\n                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${levelCount === count\n                                ? 'bg-blue-600 text-white shadow-md'\n                                : 'bg-white text-gray-700 border border-gray-300 hover:bg-blue-50 hover:border-blue-300'\n                            }`}\n                    >\n                        {count} Levels\n                    </button>\n                ))}\n            </div>\n\n            <div className=\"text-sm text-gray-600 space-y-1\">\n                <p><strong>2-3 Levels:</strong> Simple pass/fail or basic progression</p>\n                <p><strong>4-5 Levels:</strong> Standard rubric with clear progression</p>\n                <p><strong>6-7 Levels:</strong> Detailed assessment with fine-grained feedback</p>\n            </div>\n\n            {levelCount !== rubricData.rubricLevels.length && (\n                <div className=\"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm\">\n                    ⚠️ Changing level count will reset level descriptions for all criteria\n                </div>\n            )}\n        </div>\n    );\n};\n\n\n// Enhanced JSON validation function\nconst validateRubricStructure = (data) => {\n    const errors = [];\n\n    // Check assignmentInfo\n    if (!data.assignmentInfo || typeof data.assignmentInfo !== 'object') {\n        errors.push('Missing or invalid assignmentInfo object');\n    } else {\n        // Validate required assignmentInfo fields\n        if (!data.assignmentInfo.hasOwnProperty('title')) {\n            errors.push('assignmentInfo.title is required');\n        }\n        if (!data.assignmentInfo.hasOwnProperty('weight')) {\n            errors.push('assignmentInfo.weight is required');\n        }\n        if (!data.assignmentInfo.hasOwnProperty('totalPoints')) {\n            errors.push('assignmentInfo.totalPoints is required');\n        }\n    }\n\n    // Check criteria - must be an array\n    if (!Array.isArray(data.criteria)) {\n        errors.push('criteria must be an array');\n    } else if (data.criteria.length === 0) {\n        errors.push('criteria array cannot be empty');\n    } else {\n        // Validate each criterion\n        data.criteria.forEach((criterion, index) => {\n            if (!criterion.id) {\n                errors.push(`Criterion ${index + 1}: missing id`);\n            }\n            if (!criterion.hasOwnProperty('maxPoints') || typeof criterion.maxPoints !== 'number') {\n                errors.push(`Criterion ${index + 1}: maxPoints must be a number`);\n            }\n            if (!criterion.feedbackLibrary || typeof criterion.feedbackLibrary !== 'object') {\n                errors.push(`Criterion ${index + 1}: missing feedbackLibrary object`);\n            } else {\n                // Ensure feedbackLibrary has required arrays\n                ['strengths', 'improvements', 'general'].forEach(category => {\n                    if (!Array.isArray(criterion.feedbackLibrary[category])) {\n                        criterion.feedbackLibrary[category] = [];\n                    }\n                });\n            }\n            if (!criterion.levels || typeof criterion.levels !== 'object') {\n                criterion.levels = {};\n            }\n        });\n    }\n\n    // Check rubricLevels - must be an array\n    if (!Array.isArray(data.rubricLevels)) {\n        errors.push('rubricLevels must be an array');\n    } else if (data.rubricLevels.length === 0) {\n        errors.push('rubricLevels array cannot be empty');\n    } else {\n        // Validate each level\n        data.rubricLevels.forEach((level, index) => {\n            if (!level.level) {\n                errors.push(`Rubric level ${index + 1}: missing level identifier`);\n            }\n            if (!level.name) {\n                errors.push(`Rubric level ${index + 1}: missing name`);\n            }\n            if (!level.hasOwnProperty('multiplier') || typeof level.multiplier !== 'number') {\n                errors.push(`Rubric level ${index + 1}: multiplier must be a number`);\n            }\n        });\n    }\n\n    return {\n        isValid: errors.length === 0,\n        errors: errors,\n        data: data\n    };\n};\n\nconst RubricCreator = () => {\n    // ENHANCED: Get shared context functions and state with class list access\n    const {\n        sharedRubric,\n        setSharedRubric,\n        transferRubricToGradingWithDetails,\n        setActiveTab,\n        classList, // ADDED: Access to class list\n        initializeGradingSession, // ADDED: Access to grading session function\n        activeTab\n    } = useAssessment();\n\n    // Default rubric levels (7-level system)\n    const defaultLevels = [\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\n    ];\n\n    // Initialize state from shared context or defaults\n    const [rubricData, setRubricData] = useState(() => {\n        if (sharedRubric) {\n            return sharedRubric;\n        }\n        return {\n            assignmentInfo: {\n                title: '',\n                description: '',\n                weight: 25,\n                passingThreshold: 60,\n                totalPoints: 100\n            },\n            rubricLevels: [...defaultLevels],\n            criteria: [\n                {\n                    id: 'criterion-1',\n                    name: '',\n                    description: '',\n                    maxPoints: 20,\n                    weight: 20,\n                    levels: {},\n                    feedbackLibrary: {\n                        strengths: [],\n                        improvements: [],\n                        general: []\n                    }\n                }\n            ]\n        };\n    });\n\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\n    const [reversedOrder, setReversedOrder] = useState(false);\n    const [showGuide, setShowGuide] = useState(false);\n    const [expandedFeedback, setExpandedFeedback] = useState({});\n    const [inlineEditor, setInlineEditor] = useState({\n        show: false,\n        content: '',\n        field: null,\n        onSave: null,\n        criterionId: null,\n        level: null,\n        type: null // 'assignment', 'criterion', 'level', or 'feedback'\n    });\n    const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n    const [showJSONPaste, setShowJSONPaste] = useState(false);\n\n    // Use refs to store editor content and DOM node\n    const richTextContentRef = useRef('');\n    const editorRef = useRef(null);\n\n    // Refs for file inputs\n    const importInputRef = useRef(null);\n    const jsonPastePanelRef = useRef(null);\n    // Auto-save to shared context whenever rubricData changes\n    useEffect(() => {\n        if (autoSaveTimeout) {\n            clearTimeout(autoSaveTimeout);\n        }\n\n        const timeoutId = setTimeout(() => {\n            setSharedRubric(rubricData);\n        }, 1000); // Auto-save after 1 second of inactivity\n\n        setAutoSaveTimeout(timeoutId);\n\n        return () => {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        };\n    }, [rubricData, setSharedRubric]);\n\n    // Load shared rubric when it changes externally\n    useEffect(() => {\n        if (sharedRubric && activeTab === 'rubric-creator') {\n            setRubricData(sharedRubric);\n        }\n    }, [sharedRubric, activeTab]);\n\n    // Toggle feedback section expansion\n    const toggleFeedbackExpansion = (criterionId) => {\n        setExpandedFeedback(prev => ({\n            ...prev,\n            [criterionId]: !prev[criterionId]\n        }));\n    };\n\n    // Launch the inline rich text editor\n    const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\n        // Initialize the ref with current content\n        richTextContentRef.current = content || '';\n\n        setInlineEditor({\n            show: true,\n            content: content || '',\n            field,\n            onSave,\n            criterionId,\n            level,\n            type\n        });\n    };\n\n    // Helper function to safely render HTML content in textareas\n    const renderFormattedContent = (htmlContent) => {\n        if (!htmlContent) return '';\n\n        // Create a temporary div to extract text while preserving some formatting\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = htmlContent;\n\n        // Convert basic HTML to readable text format\n        let textContent = htmlContent\n            .replace(/<br\\s*\\/?>/gi, '\\n')\n            .replace(/<\\/p>/gi, '\\n')\n            .replace(/<p[^>]*>/gi, '')\n            .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\n            .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\n            .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\n            .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\n            .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\n            .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\n            .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\n            .replace(/<\\/ul>/gi, '\\n')\n            .replace(/<ul[^>]*>/gi, '')\n            .replace(/<\\/ol>/gi, '\\n')\n            .replace(/<ol[^>]*>/gi, '')\n            .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n            .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n            .trim();\n\n        return textContent;\n    };\n\n    // Helper function to convert formatted text back to HTML\n    const convertFormattedTextToHtml = (text) => {\n        if (!text) return '';\n\n        return text\n            .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n            .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n            .replace(/_(.*?)_/g, '<u>$1</u>')\n            .replace(/### (.*?)\\n/g, '<h3>$1</h3>')\n            .replace(/• (.*?)\\n/g, '<li>$1</li>')\n            .replace(/\\n/g, '<br>')\n            .replace(/(<li>.*<\\/li>)/g, '<ul>$1</ul>');\n    };\n\n    // Toggle all textareas to expanded or collapsed state\n    const toggleAllTextareas = (expand) => {\n        const textareas = document.querySelectorAll('textarea');\n        textareas.forEach(textarea => {\n            if (expand) {\n                textarea.style.height = '200px';\n                textarea.style.maxHeight = '400px';\n            } else {\n                // Reset to default sizes based on context\n                if (textarea.closest('.assignment-info')) {\n                    textarea.style.height = '80px';\n                    textarea.style.maxHeight = '200px';\n                } else if (textarea.closest('td')) {\n                    if (textarea.rows <= 2) {\n                        textarea.style.height = '48px';\n                        textarea.style.maxHeight = '200px';\n                    } else {\n                        textarea.style.height = '80px';\n                        textarea.style.maxHeight = '300px';\n                    }\n                }\n            }\n        });\n    };\n\n    // Close inline editor and optionally save\n    const closeInlineEditor = (save = false) => {\n        if (save && inlineEditor.onSave) {\n            // Get the current content from ref (most up-to-date)\n            const finalContent = richTextContentRef.current;\n            inlineEditor.onSave(finalContent);\n        }\n\n        setInlineEditor({\n            show: false,\n            content: '',\n            field: null,\n            onSave: null,\n            criterionId: null,\n            level: null,\n            type: null\n        });\n        richTextContentRef.current = '';\n    };\n\n    // Reset textarea sizes to original dimensions\n    const resetTextareaSizes = () => {\n        const textareas = document.querySelectorAll('textarea');\n        textareas.forEach(textarea => {\n            // Reset to default sizes based on context\n            if (textarea.closest('.assignment-info')) {\n                textarea.style.height = '80px';\n                textarea.style.maxHeight = '200px';\n            } else if (textarea.closest('td')) {\n                // Criterion or level descriptions\n                if (textarea.rows <= 2) {\n                    textarea.style.height = '48px';\n                    textarea.style.maxHeight = '200px';\n                } else {\n                    textarea.style.height = '80px';\n                    textarea.style.maxHeight = '300px';\n                }\n            }\n            textarea.style.width = '100%';\n        });\n    };\n\n    // Calculate total points based on current settings\n    const calculateTotalPoints = () => {\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n    };\n\n    // Update assignment info and recalculate total points\n    const updateAssignmentInfo = (field, value) => {\n        setRubricData(prev => {\n            const updated = {\n                ...prev,\n                assignmentInfo: { ...prev.assignmentInfo, [field]: value }\n            };\n\n            // Auto-calculate total points\n            if (field !== 'totalPoints') {\n                updated.assignmentInfo.totalPoints = calculateTotalPoints();\n            }\n\n            return updated;\n        });\n    };\n\n    // Add new criterion\n    const addCriterion = () => {\n        const newCriterion = {\n            id: `criterion-${Date.now()}`,\n            name: '',\n            description: '',\n            maxPoints: 20,\n            weight: 20,\n            levels: {},\n            feedbackLibrary: {\n                strengths: [],\n                improvements: [],\n                general: []\n            }\n        };\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: [...prev.criteria, newCriterion]\n        }));\n    };\n\n    // Remove criterion\n    const removeCriterion = (criterionId) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\n        }));\n    };\n\n    // Update criterion\n    const updateCriterion = (criterionId, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? { ...criterion, [field]: value }\n                    : criterion\n            )\n        }));\n    };\n\n    // Update criterion level description\n    const updateCriterionLevel = (criterionId, level, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        levels: {\n                            ...criterion.levels,\n                            [level]: {\n                                ...criterion.levels[level],\n                                [field]: value\n                            }\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Add feedback item to criterion\n    const addFeedbackItem = (criterionId, category, item) => {\n        if (!item || !item.trim()) return;\n\n        const htmlItem = convertFormattedTextToHtml(item.trim());\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: [...criterion.feedbackLibrary[category], htmlItem]\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Remove feedback item\n    const removeFeedbackItem = (criterionId, category, index) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Calculate point range for a level\n    const calculatePointRange = (criterion, level) => {\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n        if (!rubricLevel) return '0';\n\n        if (pointingSystem === 'multiplier') {\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n            return level === 'incomplete' ? '0' : points.toString();\n        } else {\n            // Custom points would be entered directly\n            return criterion.levels[level]?.pointRange || '0';\n        }\n    };\n\n    // Get display levels (potentially reversed)\n    const getDisplayLevels = () => {\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n    };\n\n    // Save rubric to JSON\n    const saveRubric = () => {\n        const dataStr = JSON.stringify(rubricData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Export rubric for grading template\n    const exportForGrading = () => {\n        const exportData = prepareRubricForExport();\n\n        // Save to shared context for grading tool\n        setSharedRubric(exportData);\n\n        // Also download as backup\n        const dataStr = JSON.stringify(exportData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Prepare rubric data for export/transfer\n    const prepareRubricForExport = () => {\n        const exportData = { ...rubricData };\n\n        // Ensure all criterion levels have proper point ranges\n        exportData.criteria = exportData.criteria.map(criterion => ({\n            ...criterion,\n            levels: Object.fromEntries(\n                rubricData.rubricLevels.map(level => [\n                    level.level,\n                    {\n                        pointRange: calculatePointRange(criterion, level.level),\n                        description: criterion.levels[level.level]?.description || ''\n                    }\n                ])\n            )\n        }));\n\n        // Update total points\n        exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n\n        return exportData;\n    };\n\n    // ENHANCED: Transfer to grading tool with class list validation and batch grading\n    const transferToGrading = () => {\n        const exportData = prepareRubricForExport();\n\n        // STEP 1: Check if class list is loaded and has course metadata\n        if (!classList || !classList.students || classList.students.length === 0) {\n            // If no class list, show confirmation dialog\n            const userChoice = window.confirm(\n                \"No class list has been loaded yet.\\n\\n\" +\n                \"Would you like to:\\n\" +\n                \"• Click 'OK' to go to Class Manager to load a class list first\\n\" +\n                \"• Click 'Cancel' to proceed to Grading Tool for individual grading\\n\\n\" +\n                \"Note: Batch grading requires a loaded class list with course information.\"\n            );\n\n            if (userChoice) {\n                // User chose to load class list first\n                setSharedRubric(exportData);\n                setActiveTab('class-manager');\n                alert(\"Rubric saved! Please import your class list, then use 'Start Batch Grading' to begin.\");\n                return;\n            } else {\n                // User chose to proceed with individual grading\n                setSharedRubric(exportData);\n                setActiveTab('grading-tool');\n                console.log('✅ Rubric transferred for individual grading:', exportData.assignmentInfo?.title || 'Untitled');\n                return;\n            }\n        }\n\n        // STEP 2: Class list exists - proceed with batch grading setup\n        setSharedRubric(exportData);\n\n        // STEP 3: Enhanced initialization with course data verification\n        console.log('🔄 Initializing grading session with course metadata:', classList.courseMetadata);\n\n        const success = initializeGradingSession(classList);\n\n        if (success) {\n            // STEP 4: Switch to grading tool\n            setActiveTab('grading-tool');\n\n            // STEP 5: Show enhanced success message with course info\n            const courseInfo = classList.courseMetadata || {};\n            const hasCompleteInfo = courseInfo.courseCode && courseInfo.courseName &&\n                (courseInfo.instructor || courseInfo.professors) && courseInfo.term;\n\n            alert(\n                `🎯 Batch Grading Started!\\n\\n` +\n                `Rubric: ${exportData.assignmentInfo?.title || 'Untitled'}\\n` +\n                `Class: ${classList.students.length} students\\n` +\n                `Starting with: ${classList.students[0]?.name || 'First Student'}\\n\\n` +\n                `Course Information:\\n` +\n                `• Code: ${courseInfo.courseCode || 'Not specified'}\\n` +\n                `• Name: ${courseInfo.courseName || 'Not specified'}\\n` +\n                `• Instructor: ${courseInfo.instructor || courseInfo.professors || 'Not specified'}\\n` +\n                `• Term: ${courseInfo.term || 'Not specified'}\\n\\n` +\n                `${hasCompleteInfo ?\n                    '✅ Course information has been automatically loaded from your class list.' :\n                    '⚠️ Some course information is missing. You can manually enter it in the grading tool or use the \"Pull Course Data\" button.'}`\n            );\n\n            console.log('✅ Batch grading session started:', {\n                rubric: exportData.assignmentInfo?.title,\n                students: classList.students.length,\n                firstStudent: classList.students[0]?.name,\n                courseMetadata: classList.courseMetadata\n            });\n        } else {\n            // Fallback if session initialization fails\n            setActiveTab('grading-tool');\n            alert('Rubric transferred, but batch grading session could not be initialized. You can grade individual students and manually enter course information.');\n        }\n    };\n\n    // Import rubric data\n    const importRubric = (event) => {\n        const file = event.target.files[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                try {\n                    const importedData = JSON.parse(e.target.result);\n\n                    // Validate the imported data structure\n                    if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n                        setRubricData(importedData);\n                    } else {\n                        alert('Invalid rubric format. Please check the JSON structure.');\n                    }\n                } catch (error) {\n                    alert('Error loading rubric. Please check the JSON format.');\n                    console.error('Import error:', error);\n                }\n            };\n            reader.readAsText(file);\n        }\n        // Reset file input\n        event.target.value = '';\n    };\n\n    // Enhanced JSON validation function\n    const validateRubricStructure = (data) => {\n        const errors = [];\n\n        // Check assignmentInfo\n        if (!data.assignmentInfo || typeof data.assignmentInfo !== 'object') {\n            errors.push('Missing or invalid assignmentInfo object');\n        } else {\n            // Validate required assignmentInfo fields\n            if (!data.assignmentInfo.hasOwnProperty('title')) {\n                errors.push('assignmentInfo.title is required');\n            }\n            if (!data.assignmentInfo.hasOwnProperty('weight')) {\n                errors.push('assignmentInfo.weight is required');\n            }\n            if (!data.assignmentInfo.hasOwnProperty('totalPoints')) {\n                errors.push('assignmentInfo.totalPoints is required');\n            }\n        }\n\n        // Check criteria - must be an array\n        if (!Array.isArray(data.criteria)) {\n            errors.push('criteria must be an array');\n        } else if (data.criteria.length === 0) {\n            errors.push('criteria array cannot be empty');\n        } else {\n            // Validate each criterion\n            data.criteria.forEach((criterion, index) => {\n                if (!criterion.id) {\n                    errors.push(`Criterion ${index + 1}: missing id`);\n                }\n                if (!criterion.hasOwnProperty('maxPoints') || typeof criterion.maxPoints !== 'number') {\n                    errors.push(`Criterion ${index + 1}: maxPoints must be a number`);\n                }\n                if (!criterion.feedbackLibrary || typeof criterion.feedbackLibrary !== 'object') {\n                    errors.push(`Criterion ${index + 1}: missing feedbackLibrary object`);\n                } else {\n                    // Ensure feedbackLibrary has required arrays\n                    ['strengths', 'improvements', 'general'].forEach(category => {\n                        if (!Array.isArray(criterion.feedbackLibrary[category])) {\n                            criterion.feedbackLibrary[category] = [];\n                        }\n                    });\n                }\n                if (!criterion.levels || typeof criterion.levels !== 'object') {\n                    criterion.levels = {};\n                }\n            });\n        }\n\n        // Check rubricLevels - must be an array\n        if (!Array.isArray(data.rubricLevels)) {\n            errors.push('rubricLevels must be an array');\n        } else if (data.rubricLevels.length === 0) {\n            errors.push('rubricLevels array cannot be empty');\n        } else {\n            // Validate each level\n            data.rubricLevels.forEach((level, index) => {\n                if (!level.level) {\n                    errors.push(`Rubric level ${index + 1}: missing level identifier`);\n                }\n                if (!level.name) {\n                    errors.push(`Rubric level ${index + 1}: missing name`);\n                }\n                if (!level.hasOwnProperty('multiplier') || typeof level.multiplier !== 'number') {\n                    errors.push(`Rubric level ${index + 1}: multiplier must be a number`);\n                }\n            });\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors: errors,\n            data: data\n        };\n    };\n\n    // Enhanced Import from JSON paste function\n    const importFromJSON = (jsonData) => {\n        try {\n            // Validate the structure\n            const validation = validateRubricStructure(jsonData);\n\n            if (!validation.isValid) {\n                const errorMessage = 'Invalid rubric structure:\\n' + validation.errors.join('\\n');\n                alert(errorMessage);\n                console.error('JSON validation errors:', validation.errors);\n                return;\n            }\n\n            // Ensure the data has default values for any missing optional fields\n            const processedData = {\n                assignmentInfo: {\n                    title: '',\n                    description: '',\n                    weight: 25,\n                    passingThreshold: 60,\n                    totalPoints: 100,\n                    ...jsonData.assignmentInfo\n                },\n                rubricLevels: [...jsonData.rubricLevels],\n                criteria: jsonData.criteria.map(criterion => ({\n                    id: criterion.id || `criterion-${Date.now()}-${Math.random()}`,\n                    name: criterion.name || '',\n                    description: criterion.description || '',\n                    maxPoints: criterion.maxPoints || 20,\n                    weight: criterion.weight || 20,\n                    levels: criterion.levels || {},\n                    feedbackLibrary: {\n                        strengths: [],\n                        improvements: [],\n                        general: [],\n                        ...criterion.feedbackLibrary\n                    }\n                }))\n            };\n\n            setRubricData(processedData);\n            console.log('✅ Rubric imported successfully from JSON paste');\n\n        } catch (error) {\n            alert('Error processing JSON data: ' + error.message);\n            console.error('JSON import error:', error);\n        }\n    };\n\n    \n\n    // Reset to default rubric\n    const resetRubric = () => {\n        if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n            const defaultRubric = {\n                assignmentInfo: {\n                    title: '',\n                    description: '',\n                    weight: 25,\n                    passingThreshold: 60,\n                    totalPoints: 100\n                },\n                rubricLevels: [...defaultLevels],\n                criteria: [\n                    {\n                        id: 'criterion-1',\n                        name: '',\n                        description: '',\n                        maxPoints: 20,\n                        weight: 20,\n                        levels: {},\n                        feedbackLibrary: {\n                            strengths: [],\n                            improvements: [],\n                            general: []\n                        }\n                    }\n                ]\n            };\n            setRubricData(defaultRubric);\n        }\n    };\n\n    // Fixed exportToHTML function for RubricCreator.js\n    // Replace the existing exportToHTML function with this corrected version\n\n    const exportToHTML = () => {\n        const displayLevels = getDisplayLevels();\n        const totalPoints = calculateTotalPoints();\n\n        // Generate header with logo\n        const reportData = {\n            title: `${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric`,\n            courseCode: '',\n            courseName: '',\n            section: '',\n            rubricTitle: ''\n        };\n\n        const headerHtml = generateReportHeader(reportData, { maxHeight: 60 });\n\n        // FIXED: Generate dynamic CSS based on actual level colors instead of hardcoded classes\n        const generateLevelCSS = () => {\n            return displayLevels.map(level => {\n                // Convert hex color to RGB for transparency\n                const hexToRgb = (hex) => {\n                    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n                    return result ? {\n                        r: parseInt(result[1], 16),\n                        g: parseInt(result[2], 16),\n                        b: parseInt(result[3], 16)\n                    } : null;\n                };\n\n                const rgb = hexToRgb(level.color);\n                const backgroundColor = rgb ?\n                    `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.1)` :\n                    `${level.color}20`;\n\n                return `\n        .level-${level.level} { \n            background: ${backgroundColor}; \n            border-left: 4px solid ${level.color}; \n        }`;\n            }).join('');\n        };\n\n        const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { margin-bottom: 30px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #cbd5e1; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; font-weight: 600; }\n        .criterion-header { background: #f1f5f9; font-weight: 600; color: #334155; }\n        \n        /* FIXED: Dynamic level-specific CSS based on actual rubric data */\n        ${generateLevelCSS()}\n        \n        .points { font-weight: 600; color: #059669; text-align: center; }\n        .footer { margin-top: 30px; padding: 20px; background: #f8fafc; border-radius: 8px; text-align: center; font-size: 0.875rem; color: #64748b; }\n        .school-logo, .report-logo, .assignment-logo { max-height: 60px; max-width: 200px; object-fit: contain; }\n        \n        @media print {\n            body { font-size: 10pt; background: white; }\n            .school-logo, .report-logo, .assignment-logo { max-height: 40px !important; }\n            table { page-break-inside: auto; }\n            tr { page-break-inside: avoid; page-break-after: auto; }\n            thead { display: table-header-group; }\n        }\n    </style>\n</head>\n<body>\n    ${headerHtml}\n\n    <div class=\"assignment-info\">\n        <h2 style=\"margin: 0 0 15px 0; color: #1e40af;\">Assignment Information</h2>\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.95rem;\">\n            <div><strong>Weight:</strong> ${rubricData.assignmentInfo.weight || 0}%</div>\n            <div><strong>Total Points:</strong> ${totalPoints}</div>\n            <div><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold || 60}%</div>\n        </div>\n        ${rubricData.assignmentInfo.description ? `<div style=\"margin-top: 15px;\"><strong>Description:</strong><br>${rubricData.assignmentInfo.description}</div>` : ''}\n    </div>\n\n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 15%;\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${85 / displayLevels.length}%;\">${level.name} (${level.level})</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map((criterion, index) => `\n                <tr>\n                    <td class=\"criterion-header\">\n                        <strong>${criterion.name || `Criterion ${index + 1}`}</strong>\n                        <div style=\"font-size: 0.8em; color: #64748b; margin-top: 5px;\">\n                            ${criterion.maxPoints || 0} points\n                        </div>\n                        ${criterion.description ? `<div style=\"font-size: 0.85em; margin-top: 8px; color: #475569;\">${criterion.description}</div>` : ''}\n                    </td>\n                    ${displayLevels.map(level => {\n            const levelData = criterion.levels[level.level] || {};\n            const points = calculatePointRange(criterion, level.level);\n            // FIXED: Use the actual level identifier from the rubric data\n            const levelClass = `level-${level.level}`;\n\n            return `\n                            <td class=\"${levelClass}\">\n                                <div class=\"points\" style=\"margin-bottom: 8px; font-size: 1.1em;\">\n                                    ${points} pts\n                                </div>\n                                <div style=\"font-size: 0.9em; line-height: 1.4;\">\n                                    ${levelData.description || `No description provided for ${level.name} level.`}\n                                </div>\n                            </td>\n                        `;\n        }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n\n    <div class=\"footer\">\n        <p><strong>Assessment Rubric</strong></p>\n        <p>Generated on ${new Date().toLocaleDateString('en-CA')} at ${new Date().toLocaleTimeString('en-CA')}</p>\n        ${hasSchoolLogo() ? '<p>Generated with institutional branding</p>' : ''}\n    </div>\n</body>\n</html>`;\n\n        const blob = new Blob([htmlContent], { type: 'text/html' });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${(rubricData.assignmentInfo.title || 'assessment').replace(/\\s+/g, '_').toLowerCase()}_${new Date().toISOString().split('T')[0]}.html`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-6\">\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\n                {/* ENHANCED: Header with better organized button layout and class list status */}\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                        <div>\n                            <h1 className=\"text-2xl font-bold\">Professional Rubric Builder</h1>\n                            <p className=\"text-white\">Create comprehensive assessment rubrics with detailed criteria and feedback</p>\n                        </div>\n                    </div>\n\n                    {/* ENHANCED: Organized button layout with class list status indicators */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                        {/* Primary Actions */}\n                        <div>\n                            <h3 className=\"text-sm font-semibold text-white uppercase tracking-wide mb-2\">\n                                Primary Actions\n                            </h3>\n                            <div className=\"flex flex-col gap-2\">\n                                {/* ENHANCED: \"Use for Grading\" button with status indicator */}\n                                <div className=\"relative\">\n                                    <button\n                                        onClick={transferToGrading}\n                                        className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg flex items-center gap-2 text-sm font-medium shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-105 w-full\"\n                                        title={classList && classList.students?.length\n                                            ? `Start batch grading with ${classList.students.length} students`\n                                            : \"Transfer rubric to grading tool (individual grading)\"\n                                        }\n                                    >\n                                        <ArrowRight size={16} />\n                                        Use for Grading\n                                        {classList && classList.students?.length > 0 && (\n                                            <span className=\"ml-auto bg-green-800 text-xs px-2 py-1 rounded-full\">\n                                                {classList.students.length} students\n                                            </span>\n                                        )}\n                                    </button>\n\n                                    {/* Status indicator */}\n                                    <div className=\"mt-1 text-xs text-white\">\n                                        {classList && classList.students?.length > 0\n                                            ? `✅ Class list loaded (${classList.students.length} students) - Will start batch grading`\n                                            : \"⚠️ No class list - Individual grading mode\"\n                                        }\n                                    </div>\n                                </div>\n\n                                <button\n                                    onClick={exportForGrading}\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 text-sm font-medium shadow-md transition-all duration-200\"\n                                    title=\"Export final rubric for grading template\"\n                                >\n                                    <Download size={14} />\n                                    Export JSON\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* File Operations */}\n                        <div>\n                            <h3 className=\"text-sm font-semibold text-white uppercase tracking-wide mb-2\">\n                                File Operations\n                            </h3>\n                            <div className=\"flex flex-col gap-2\">\n                                {/* Import and Paste JSON buttons in one row */}\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={() => importInputRef.current?.click()}\n                                        className=\"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\"\n                                        title=\"Import existing rubric JSON file\"\n                                    >\n                                        <Upload size={14} />\n                                        Import File\n                                    </button>\n                                    <button\n                                        onClick={() => {\n                                            setShowJSONPaste(!showJSONPaste);\n                                            // Scroll to JSON paste panel if opening it\n                                            if (!showJSONPaste) {\n                                                setTimeout(() => {\n                                                    if (jsonPastePanelRef.current) {\n                                                        jsonPastePanelRef.current.scrollIntoView({\n                                                            behavior: 'smooth',\n                                                            block: 'start',\n                                                            inline: 'nearest'\n                                                        });\n                                                    }\n                                                }, 150); // Slightly longer delay to ensure panel is fully rendered\n                                            }\n                                        }}\n                                        className={`${showJSONPaste\n                                            ? 'bg-indigo-700 hover:bg-indigo-800'\n                                            : 'bg-indigo-600 hover:bg-indigo-700'\n                                            } text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1`}\n                                        title=\"Paste JSON rubric data directly\"\n                                    >\n                                        <Code size={14} />\n                                        Paste JSON\n                                    </button>\n                                </div>\n\n                                {/* Save and Export buttons in second row */}\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        onClick={saveRubric}\n                                        className=\"bg-teal-600 hover:bg-teal-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\"\n                                        title=\"Save work in progress as JSON file\"\n                                    >\n                                        <Save size={14} />\n                                        Save Draft\n                                    </button>\n                                    <button\n                                        onClick={exportToHTML}\n                                        className=\"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200 flex-1\"\n                                        title=\"Export HTML version for distribution\"\n                                    >\n                                        <FileText size={14} />\n                                        Export HTML\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        {/* Utility Actions */}\n                        <div>\n                            <h3 className=\"text-sm font-semibold text-white uppercase tracking-wide mb-2\">\n                                Utility Actions\n                            </h3>\n                            <div className=\"flex flex-col gap-2\">\n                                <button\n                                    onClick={resetRubric}\n                                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\"\n                                    title=\"Reset to blank rubric\"\n                                >\n                                    <RotateCcw size={14} />\n                                    Reset\n                                </button>\n                                <button\n                                    onClick={() => setReversedOrder(!reversedOrder)}\n                                    className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\"\n                                    title=\"Switch between ascending and descending level order\"\n                                >\n                                    <RotateCcw size={14} />\n                                    {reversedOrder ? 'High→Low' : 'Low→High'}\n                                </button>\n                                <button\n                                    onClick={() => resetTextareaSizes()}\n                                    className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm font-medium shadow-md transition-all duration-200\"\n                                    title=\"Reset all text boxes to original size\"\n                                >\n                                    <Minimize2 size={14} />\n                                    Reset Sizes\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6\">\n                    {/* Auto-save Indicator */}\n                    {sharedRubric && (\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\">\n                            <div className=\"flex items-center gap-2 text-green-800\">\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                                <span className=\"text-sm font-medium\">Auto-saved - Ready for grading tool</span>\n                                {classList && classList.students?.length > 0 && (\n                                    <span className=\"ml-auto text-xs bg-green-100 px-2 py-1 rounded\">\n                                        Class list ready: {classList.students.length} students\n                                    </span>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* ENHANCED: Add class list status notification */}\n                    {!classList || !classList.students?.length ? (\n                        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\n                            <div className=\"flex items-center gap-2 text-yellow-800\">\n                                <AlertTriangle size={20} />\n                                <span className=\"font-medium\">No Class List Loaded</span>\n                            </div>\n                            <p className=\"mt-1 text-yellow-700\">\n                                For batch grading, load a class list first.{' '}\n                                <button\n                                    onClick={() => setActiveTab('class-manager')}\n                                    className=\"underline hover:no-underline font-medium\"\n                                >\n                                    Go to Class Manager\n                                </button>\n                            </p>\n                        </div>\n                    ) : (\n                        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n                            <div className=\"flex items-center gap-2 text-blue-800\">\n                                <CheckCircle size={20} />\n                                <span className=\"font-medium\">Class List Ready</span>\n                            </div>\n                            <p className=\"mt-1 text-blue-700\">\n                                {classList.students.length} students loaded.\n                                <strong> \"Use for Grading\"</strong> will start batch grading automatically.\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Button Guide */}\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\n                        <button\n                            onClick={() => setShowGuide(!showGuide)}\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\n                        >\n                            📖 Quick Start Guide & Button Functions\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}>▼</span>\n                        </button>\n                        {showGuide && (\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">🔧 Building Your Rubric</h4>\n                                        <ul className=\"space-y-1 text-gray-700\">\n                                            <li><strong>Reset:</strong> Clear all data and start fresh</li>\n                                            <li><strong>Reset Sizes:</strong> Return all text boxes to original size</li>\n                                            <li><strong>Import:</strong> Load AI-generated or existing rubric files</li>\n                                            <li><strong>Use for Grading:</strong> Send directly to grading tool</li>\n                                            <li><strong>Save Draft:</strong> Download work-in-progress (JSON)</li>\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template</li>\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\n                                        </ul>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">📝 Step-by-Step Process</h4>\n                                        <ol className=\"space-y-1 text-gray-700\">\n                                            <li>1. Fill in assignment details and requirements</li>\n                                            <li>2. Add criteria using \"Add Criterion\" button</li>\n                                            <li>3. Define level descriptions for each criterion</li>\n                                            <li>4. Add feedback library items (optional but recommended)</li>\n                                            <li>5. Use \"Use for Grading\" to switch to grading tool</li>\n                                            <li>6. Export HTML for student distribution</li>\n                                        </ol>\n                                    </div>\n                                </div>\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\n                                    <p className=\"text-blue-800 text-sm\">\n                                        <strong>💡 Tip:</strong> Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\n                                    </p>\n                                    <p className=\"text-blue-800 text-sm mt-2\">\n                                        <strong>📝 Rich Text Editing:</strong> Type directly in any description box for quick edits, or click the blue expand button (⤢) to open the full editor. Paste formatting from Word or the web is preserved.\n                                    </p>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Rest of the component content (Assignment Information, Point System, Rubric Table, etc.) */}\n                    {/* ... keeping all the existing form content exactly as it was ... */}\n                    {/* This includes: Assignment Information, Point System Selection, Rubric Table, Feedback Library Management, Overall Score Preview */}\n\n                    {/* Assignment Information */}\n                    <div className=\"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\n                                <input\n                                    type=\"text\"\n                                    value={rubricData.assignmentInfo.title}\n                                    onChange={(e) => updateAssignmentInfo('title', e.target.value)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    placeholder=\"e.g., Digital Portfolio Project - Final Showcase\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    Weight (% of Final Grade)\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.weight}\n                                    onChange={(e) =>\n                                        updateAssignmentInfo('weight', parseInt(e.target.value, 10) || 0)\n                                    }\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min={0}\n                                    max={100}\n                                />\n                            </div>\n                            <div className=\"md:col-span-2\">\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    Description\n                                </label>\n                                <div className=\"relative\">\n                                    <textarea\n                                        value={renderFormattedContent(rubricData.assignmentInfo.description)}\n                                        onChange={(e) =>\n                                            updateAssignmentInfo(\n                                                'description',\n                                                convertFormattedTextToHtml(e.target.value)\n                                            )\n                                        }\n                                        className=\"w-full p-3 border rounded-lg resize-y hover:border-blue-400 transition-all duration-200 pr-12\"\n                                        rows={3}\n                                        placeholder=\"Detailed description of assignment requirements and expectations...\"\n                                        title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                        style={{ minHeight: '80px', maxHeight: '200px', resize: 'both' }}\n                                    />\n                                    <button\n                                        type=\"button\"\n                                        onClick={(e) => {\n                                            e.preventDefault();\n                                            e.stopPropagation();\n                                            openInlineEditor(\n                                                rubricData.assignmentInfo.description,\n                                                'Assignment Description',\n                                                (newContent) => updateAssignmentInfo('description', newContent),\n                                                null,\n                                                null,\n                                                'assignment'\n                                            );\n                                        }}\n                                        className=\"absolute top-1 right-1 z-10 bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer opacity-70 hover:opacity-100 transition-opacity\"\n                                        title=\"Open rich text editor\"\n                                    >\n                                        <Maximize2 size={14} />\n                                    </button>\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    Passing Threshold (%)\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.passingThreshold}\n                                    onChange={(e) =>\n                                        updateAssignmentInfo('passingThreshold', parseInt(e.target.value, 10) || 0)\n                                    }\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min={0}\n                                    max={100}\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    Total Points (Auto-calculated)\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    value={calculateTotalPoints()}\n                                    disabled\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Inline Rich Text Editor for Assignment */}\n                        {inlineEditor.show && inlineEditor.type === 'assignment' && (\n                            <div className=\"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\">\n                                {/* Editor Header */}\n                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                                        <Maximize2 size={20} className=\"text-blue-600\" />\n                                        Rich Text Editor: {inlineEditor.field}\n                                    </h4>\n                                    <div className=\"flex gap-2\">\n                                        <button\n                                            onClick={() => closeInlineEditor(true)}\n                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <Save size={16} />\n                                            Save & Close\n                                        </button>\n                                        <button\n                                            onClick={() => closeInlineEditor(false)}\n                                            className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <X size={16} />\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {/* Editor Content */}\n                                <div className=\"p-4\">\n                                    <SimpleRichTextEditor\n                                        ref={editorRef}\n                                        value={inlineEditor.content}\n                                        onChange={(html) => {\n                                            richTextContentRef.current = html;\n                                        }}\n                                        placeholder=\"Enter detailed assignment description...\"\n                                    />\n                                </div>\n\n                                {/* Footer */}\n                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\n                                    <div className=\"flex justify-between items-center\">\n                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                                            <span className=\"flex items-center gap-2\">\n                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                                Rich Text Editor Active\n                                            </span>\n                                            <span>Paste rich text from other sources</span>\n                                        </div>\n                                        <div className=\"text-xs text-gray-500\">\n                                            <strong>Features:</strong> Headers, Bold, Italic, Lists, Links, Colors\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Point System Selection */}\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\n                        <div className=\"flex gap-6\">\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"multiplier\"\n                                    checked={pointingSystem === 'multiplier'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Automatic (Recommended):</strong> Points calculated using level multipliers\n                                </span>\n                            </label>\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"custom\"\n                                    checked={pointingSystem === 'custom'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Custom:</strong> Manually set point ranges for each level\n                                </span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {/* JSON Paste Panel */}\n                    <JSONPastePanel\n                        ref={jsonPastePanelRef}\n                        onImport={importFromJSON}\n                        isOpen={showJSONPaste}\n                        onToggle={() => setShowJSONPaste(!showJSONPaste)}\n                    />\n\n                    {/* Achievement Level Configuration */}\n                    <AchievementLevelControl\n                        rubricData={rubricData}\n                        setRubricData={setRubricData}\n                    />\n\n                    {/* Rubric Table */}\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6\">\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Assessment Criteria Matrix</h3>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setReversedOrder(!reversedOrder)}\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 text-white px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                    title=\"Switch between ascending and descending level order\"\n                                >\n                                    <RotateCcw size={14} />\n                                    {reversedOrder ? 'High→Low' : 'Low→High'}\n                                </button>\n                                <button\n                                    onClick={resetTextareaSizes}\n                                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                    title=\"Reset all textarea sizes to original dimensions\"\n                                >\n                                    <Minimize2 size={14} />\n                                    Reset Sizes\n                                </button>\n                                <button\n                                    onClick={addCriterion}\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\n                                >\n                                    <Plus size={16} />\n                                    Add Criterion\n                                </button>\n                            </div>\n                        </div>\n\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"w-full border-collapse\">\n                                <thead>\n                                    <tr className=\"bg-gray-100\">\n                                        <th className=\"border p-3 text-left font-semibold\" style={{ width: '200px' }}>\n                                            Criterion ({rubricData.criteria.length})\n                                        </th>\n                                        {getDisplayLevels().map((level) => (\n                                            <th\n                                                key={level.level}\n                                                className=\"border p-3 text-center font-semibold\"\n                                                style={{\n                                                    backgroundColor: level.color + '20',\n                                                    color: level.color,\n                                                    minWidth: '150px',\n                                                    border: `2px solid ${level.color}`\n                                                }}\n                                            >\n                                                <div className=\"font-bold\">{level.name}</div>\n                                                <div className=\"text-xs font-normal mt-1 opacity-75\">\n                                                    {level.description}\n                                                </div>\n                                            </th>\n                                        ))}\n                                        <th className=\"border p-3 text-center font-semibold\" style={{ width: '80px' }}>\n                                            Actions\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {rubricData.criteria.map((criterion, index) => (\n                                        <React.Fragment key={criterion.id}>\n                                            <tr>\n                                                {/* Criterion Column */}\n                                                <td className=\"border p-3 bg-gray-50\">\n                                                    <div className=\"space-y-2\">\n                                                        <input\n                                                            type=\"text\"\n                                                            value={criterion.name}\n                                                            onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\n                                                            className=\"w-full p-2 border rounded text-sm font-medium\"\n                                                            placeholder={`Criterion ${index + 1} name`}\n                                                        />\n                                                        <div className=\"relative\">\n                                                            <textarea\n                                                                value={renderFormattedContent(criterion.description)}\n                                                                onChange={(e) => updateCriterion(criterion.id, 'description', convertFormattedTextToHtml(e.target.value))}\n                                                                className=\"w-full p-2 border rounded text-xs resize-y hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                                rows=\"2\"\n                                                                placeholder=\"Brief description of what this criterion measures\"\n                                                                title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                                style={{ minHeight: '48px', maxHeight: '200px', resize: 'both' }}\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={(e) => {\n                                                                    e.preventDefault();\n                                                                    e.stopPropagation();\n                                                                    openInlineEditor(\n                                                                        criterion.description,\n                                                                        `Criterion Description - ${criterion.name || 'Criterion'}`,\n                                                                        (newContent) => updateCriterion(criterion.id, 'description', newContent),\n                                                                        criterion.id,\n                                                                        null,\n                                                                        'criterion'\n                                                                    );\n                                                                }}\n                                                                className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer\"\n                                                                title=\"Open rich text editor\"\n                                                            >\n                                                                <Maximize2 size={12} />\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"flex gap-2\">\n                                                            <div className=\"flex-1\">\n                                                                <label className=\"text-xs text-gray-600\">Max Points</label>\n                                                                <input\n                                                                    type=\"number\"\n                                                                    value={criterion.maxPoints}\n                                                                    onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\n                                                                    className=\"w-full p-1 border rounded text-sm\"\n                                                                    min=\"0\"\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n\n                                                {/* Level Columns */}\n                                                {getDisplayLevels().map((level) => (\n                                                    <td key={level.level} className=\"border p-3 align-top\">\n                                                        <div className=\"space-y-2\">\n                                                            <div className=\"text-center\">\n                                                                <div\n                                                                    className=\"font-bold text-sm px-2 py-1 rounded\"\n                                                                    style={{\n                                                                        color: level.color,\n                                                                        backgroundColor: level.color + '20'\n                                                                    }}\n                                                                >\n                                                                    {calculatePointRange(criterion, level.level)} pts\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"relative\">\n                                                                <textarea\n                                                                    value={renderFormattedContent(criterion.levels[level.level]?.description || '')}\n                                                                    onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'description', convertFormattedTextToHtml(e.target.value))}\n                                                                    className=\"w-full p-2 border rounded text-xs resize-y hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                                    rows=\"4\"\n                                                                    placeholder={`Describe ${level.name.toLowerCase()} performance...`}\n                                                                    title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                                    style={{ minHeight: '80px', maxHeight: '300px', resize: 'both' }}\n                                                                />\n                                                                <button\n                                                                    type=\"button\"\n                                                                    onClick={(e) => {\n                                                                        e.preventDefault();\n                                                                        e.stopPropagation();\n                                                                        openInlineEditor(\n                                                                            criterion.levels[level.level]?.description || '',\n                                                                            `${level.name} Level - ${criterion.name || 'Criterion'}`,\n                                                                            (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\n                                                                            criterion.id,\n                                                                            level.level,\n                                                                            'level'\n                                                                        );\n                                                                    }}\n                                                                    className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-700 cursor-pointer\"\n                                                                    title=\"Open rich text editor\"\n                                                                >\n                                                                    <Maximize2 size={12} />\n                                                                </button>\n                                                            </div>\n                                                            {pointingSystem === 'custom' && (\n                                                                <input\n                                                                    type=\"text\"\n                                                                    value={criterion.levels[level.level]?.pointRange || ''}\n                                                                    onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\n                                                                    className=\"w-full p-1 border rounded text-xs text-center\"\n                                                                    placeholder=\"e.g., 18-20\"\n                                                                />\n                                                            )}\n                                                        </div>\n                                                    </td>\n                                                ))}\n\n                                                {/* Actions Column */}\n                                                <td className=\"border p-3 text-center\">\n                                                    <button\n                                                        onClick={() => removeCriterion(criterion.id)}\n                                                        className=\"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\"\n                                                        disabled={rubricData.criteria.length === 1}\n                                                        title={rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\"}\n                                                    >\n                                                        <X size={16} />\n                                                    </button>\n                                                </td>\n                                            </tr>\n\n                                            {/* Inline Rich Text Editor for Criterion or Level */}\n                                            {inlineEditor.show &&\n                                                inlineEditor.criterionId === criterion.id &&\n                                                (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && (\n                                                    <tr>\n                                                        <td colSpan={getDisplayLevels().length + 2} className=\"border-0 p-0\">\n                                                            <div className=\"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\">\n                                                                {/* Editor Header */}\n                                                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n                                                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                                                                        <Maximize2 size={20} className=\"text-blue-600\" />\n                                                                        Rich Text Editor: {inlineEditor.field}\n                                                                    </h4>\n                                                                    <div className=\"flex gap-2\">\n                                                                        <button\n                                                                            onClick={() => closeInlineEditor(true)}\n                                                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                                                        >\n                                                                            <Save size={16} />\n                                                                            Save & Close\n                                                                        </button>\n                                                                        <button\n                                                                            onClick={() => closeInlineEditor(false)}\n                                                                            className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                                                        >\n                                                                            <X size={16} />\n                                                                            Cancel\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n\n                                                                {/* Editor Content */}\n                                                                <div className=\"p-4\">\n                                                                    <SimpleRichTextEditor\n                                                                        ref={editorRef}\n                                                                        value={inlineEditor.content}\n                                                                        onChange={(html) => {\n                                                                            richTextContentRef.current = html;\n                                                                        }}\n                                                                        placeholder={`Enter ${inlineEditor.type === 'criterion' ? 'criterion description' : 'level description'}...`}\n                                                                    />\n                                                                </div>\n\n                                                                {/* Footer */}\n                                                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\n                                                                    <div className=\"flex justify-between items-center\">\n                                                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                                                                            <span className=\"flex items-center gap-2\">\n                                                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                                                                Rich Text Editor Active\n                                                                            </span>\n                                                                            <span>Paste rich text from other sources</span>\n                                                                        </div>\n                                                                        <div className=\"text-xs text-gray-500\">\n                                                                            <strong>Features:</strong> Headers, Bold, Italic, Lists, Links, Colors\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                )}\n                                        </React.Fragment>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n\n                    {/* Feedback Library Management */}\n                    <div className=\"mb-6\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">📝 Feedback Libraries</h3>\n                        <p className=\"text-sm text-gray-600 mb-4\">Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.</p>\n\n                        <div className=\"space-y-4\">\n                            {rubricData.criteria.map((criterion) => (\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\n                                    <button\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\n                                    >\n                                        <div>\n                                            <h4 className=\"font-semibold text-gray-800\">\n                                                {criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`} - Feedback Library\n                                            </h4>\n                                            <p className=\"text-sm text-gray-600 mt-1\">\n                                                {criterion.feedbackLibrary.strengths.length +\n                                                    criterion.feedbackLibrary.improvements.length +\n                                                    criterion.feedbackLibrary.general.length} feedback items stored\n                                            </p>\n                                        </div>\n                                        {expandedFeedback[criterion.id] ? (\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\n                                        ) : (\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\n                                        )}\n                                    </button>\n\n                                    {expandedFeedback[criterion.id] && (\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                                                {['strengths', 'improvements', 'general'].map((category) => (\n                                                    <div key={category} className=\"space-y-3\">\n                                                        <div className=\"flex justify-between items-center\">\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\n                                                                {category === 'strengths' ? '👍 Strengths' :\n                                                                    category === 'improvements' ? '🔧 Improvements' :\n                                                                        '💬 General'} Comments\n                                                            </label>\n                                                            <button\n                                                                onClick={() => {\n                                                                    const newComment = prompt(`Add ${category} comment:`);\n                                                                    if (newComment && newComment.trim()) {\n                                                                        addFeedbackItem(criterion.id, category, newComment.trim());\n                                                                    }\n                                                                }}\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\"\n                                                            >\n                                                                + Add\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\n                                                                <div key={index} className=\"flex items-start gap-2 text-xs\">\n                                                                    <span\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\"\n                                                                        onClick={() => {\n                                                                            openInlineEditor(\n                                                                                item,\n                                                                                `${category} Comment`,\n                                                                                (newContent) => {\n                                                                                    const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                                                                                    // Store formatted HTML so formatting persists in exports\n                                                                                    updatedFeedback[index] = newContent;\n                                                                                    setRubricData(prev => ({\n                                                                                        ...prev,\n                                                                                        criteria: prev.criteria.map(c =>\n                                                                                            c.id === criterion.id\n                                                                                                ? {\n                                                                                                    ...c,\n                                                                                                    feedbackLibrary: {\n                                                                                                        ...c.feedbackLibrary,\n                                                                                                        [category]: updatedFeedback\n                                                                                                    }\n                                                                                                }\n                                                                                                : c\n                                                                                        )\n                                                                                    }));\n                                                                                },\n                                                                                criterion.id,\n                                                                                null,\n                                                                                'feedback'\n                                                                            );\n                                                                        }}\n                                                                        title=\"Click to edit\"\n                                                                        style={{ resize: 'both', minHeight: '40px' }}\n                                                                    >\n                                                                        {renderFormattedContent(item)}\n                                                                    </span>\n                                                                    <button\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\"\n                                                                        title=\"Remove this comment\"\n                                                                    >\n                                                                        <X size={12} />\n                                                                    </button>\n                                                                </div>\n                                                            ))}\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\">\n                                                                    No {category} comments yet - click \"Add\" to create some\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* Inline Rich Text Editor for Feedback */}\n                        {inlineEditor.show && inlineEditor.type === 'feedback' && (\n                            <div className=\"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\">\n                                {/* Editor Header */}\n                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                                        <Maximize2 size={20} className=\"text-blue-600\" />\n                                        Rich Text Editor: {inlineEditor.field}\n                                    </h4>\n                                    <div className=\"flex gap-2\">\n                                        <button\n                                            onClick={() => closeInlineEditor(true)}\n                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <Save size={16} />\n                                            Save & Close\n                                        </button>\n                                        <button\n                                            onClick={() => closeInlineEditor(false)}\n                                            className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <X size={16} />\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {/* Editor Content */}\n                                <div className=\"p-4\">\n                                    <SimpleRichTextEditor\n                                        ref={editorRef}\n                                        value={inlineEditor.content}\n                                        onChange={(html) => {\n                                            richTextContentRef.current = html;\n                                        }}\n                                        placeholder=\"Enter feedback comment...\"\n                                    />\n                                </div>\n\n                                {/* Footer */}\n                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\n                                    <div className=\"flex justify-between items-center\">\n                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                                            <span className=\"flex items-center gap-2\">\n                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                                Rich Text Editor Active\n                                            </span>\n                                            <span>Paste rich text from other sources</span>\n                                        </div>\n                                        <div className=\"text-xs text-gray-500\">\n                                            <strong>Features:</strong> Headers, Bold, Italic, Lists, Links, Colors\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Overall Score Preview */}\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">📊 Achievement Level Preview</h3>\n                        <p className=\"text-gray-600 mb-4\">\n                            Shows how total rubric scores map to achievement levels.\n                            Currently using {rubricData.rubricLevels.length} levels.\n                            Each submission receives a level based on its total points.\n                        </p>\n\n                        <div className={`grid gap-3 ${rubricData.rubricLevels.length <= 4\n                                ? `grid-cols-${rubricData.rubricLevels.length}`\n                                : rubricData.rubricLevels.length <= 6\n                                    ? 'grid-cols-3 md:grid-cols-6'\n                                    : 'grid-cols-2 md:grid-cols-4 lg:grid-cols-7'\n                            }`}>\n                            {getDisplayLevels().map((level) => {\n                                const totalPoints = calculateTotalPoints();\n                                const pointsForLevel = Math.round(totalPoints * level.multiplier);\n                                return (\n                                    <div\n                                        key={level.level}\n                                        className=\"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\"\n                                        style={{\n                                            borderColor: level.color,\n                                            backgroundColor: level.color + '15'\n                                        }}\n                                    >\n                                        <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\n                                            {level.name}\n                                        </div>\n                                        <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\n                                            {pointsForLevel}+\n                                        </div>\n                                        <div className=\"text-xs text-gray-600\">\n                                            {totalPoints > 0 ? `${Math.round((pointsForLevel / totalPoints) * 100)}%+` : '-%'}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n\n                        {calculateTotalPoints() === 0 && (\n                            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\">\n                                <p className=\"text-yellow-800 text-sm\">\n                                    Add criteria with point values to see the achievement level breakdown\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Hidden file inputs */}\n                <input\n                    ref={importInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    onChange={importRubric}\n                    className=\"hidden\"\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default RubricCreator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}