{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\ClassListManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot, ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle, CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\n\n// Sample comprehensive rubric from the PDF\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst sampleRubric = {\n  assignmentInfo: {\n    title: \"Digital Portfolio Project - Final Showcase\",\n    description: \"Students will create a comprehensive digital portfolio showcasing their best work from the semester, including 5-7 completed projects with professional presentation, artist statements, and technical documentation. The portfolio must demonstrate growth, technical proficiency, and creative vision suitable for industry presentation.\",\n    weight: 30,\n    passingThreshold: 65,\n    totalPoints: 120\n  },\n  rubricLevels: [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }],\n  criteria: [{\n    id: 'technical-proficiency',\n    name: 'Technical Proficiency & Craft',\n    description: 'Demonstration of technical skills, software mastery, and attention to detail in execution',\n    maxPoints: 35,\n    weight: 29,\n    levels: {\n      incomplete: {\n        description: 'No technical work submitted or files corrupted/unusable.',\n        pointRange: '0'\n      },\n      unacceptable: {\n        description: 'Severe technical issues: poor resolution, improper file formats, broken links, or significant software handling problems that interfere with viewing work.',\n        pointRange: '8-12'\n      },\n      developing: {\n        description: 'Basic technical competency shown but with noticeable issues: inconsistent quality, some resolution problems, or workflow inefficiencies. Software use shows beginner-level understanding.',\n        pointRange: '16-21'\n      },\n      acceptable: {\n        description: 'Solid technical foundation with appropriate file formats, good resolution, and functional navigation. Demonstrates competent use of course software with minimal technical distractions.',\n        pointRange: '22-26'\n      },\n      emerging: {\n        description: 'Strong technical execution with excellent file management, optimized formats, and smooth user experience. Shows advanced software techniques and professional workflow habits.',\n        pointRange: '27-30'\n      },\n      accomplished: {\n        description: 'High-level technical mastery with innovative use of tools, excellent optimization, and seamless integration of multiple software platforms. Technical choices enhance artistic vision.',\n        pointRange: '31-33'\n      },\n      exceptional: {\n        description: 'Exceptional technical virtuosity demonstrating mastery of advanced techniques, custom solutions, and industry-standard workflows. Technical execution elevates the artistic content to professional levels.',\n        pointRange: '34-35'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Excellent file management and organization', 'Professional-quality technical execution', 'Innovative use of software tools', 'Seamless integration across platforms'],\n      improvements: ['Optimize file sizes for web delivery', 'Improve resolution consistency', 'Review proper file naming conventions', 'Consider mobile responsiveness'],\n      general: ['Technical skills show strong development', 'Consider exploring advanced techniques', 'Portfolio demonstrates software competency']\n    }\n  }, {\n    id: 'creative-vision',\n    name: 'Creative Vision & Artistic Development',\n    description: 'Originality, artistic voice, conceptual depth, and evolution of creative ideas',\n    maxPoints: 30,\n    weight: 25,\n    levels: {\n      incomplete: {\n        description: 'No creative work presented or completely derivative.',\n        pointRange: '0'\n      },\n      unacceptable: {\n        description: 'Limited creativity with heavy reliance on tutorials or templates. Little evidence of personal artistic voice or original thinking.',\n        pointRange: '7-10'\n      },\n      developing: {\n        description: 'Some original ideas present but inconsistent development. Creative choices show potential but lack depth or coherent vision.',\n        pointRange: '13-17'\n      },\n      acceptable: {\n        description: 'Clear creative direction with personal style emerging. Shows good problem-solving and conceptual thinking with adequate originality.',\n        pointRange: '18-22'\n      },\n      emerging: {\n        description: 'Strong creative vision with distinctive personal style. Demonstrates innovative thinking and sophisticated conceptual development.',\n        pointRange: '23-26'\n      },\n      accomplished: {\n        description: 'Exceptional creative development with unique artistic voice. Shows mastery of design principles and innovative approaches to visual communication.',\n        pointRange: '27-29'\n      },\n      exceptional: {\n        description: 'Outstanding creative vision that pushes boundaries and demonstrates professional-level artistic development. Highly original and conceptually sophisticated.',\n        pointRange: '30'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Strong personal artistic voice', 'Innovative conceptual approaches', 'Excellent visual storytelling', 'Distinctive creative style'],\n      improvements: ['Develop concepts more thoroughly', 'Push creative boundaries further', 'Strengthen visual hierarchy', 'Consider audience engagement'],\n      general: ['Creative development shows strong growth', 'Portfolio demonstrates artistic maturity', 'Conceptual thinking is well-developed']\n    }\n  }, {\n    id: 'portfolio-presentation',\n    name: 'Portfolio Presentation & Organization',\n    description: 'Professional presentation, layout design, navigation, and overall user experience',\n    maxPoints: 25,\n    weight: 21,\n    levels: {\n      incomplete: {\n        description: 'No organized presentation or completely inaccessible.',\n        pointRange: '0'\n      },\n      unacceptable: {\n        description: 'Poor organization with confusing navigation, inconsistent layout, or significant usability issues.',\n        pointRange: '6-9'\n      },\n      developing: {\n        description: 'Basic organization present but with layout inconsistencies or navigation problems. Shows understanding of presentation but needs refinement.',\n        pointRange: '11-15'\n      },\n      acceptable: {\n        description: 'Well-organized portfolio with clear navigation and consistent presentation. Professional appearance with good user experience.',\n        pointRange: '16-19'\n      },\n      emerging: {\n        description: 'Excellent presentation with sophisticated layout design, intuitive navigation, and engaging user interface.',\n        pointRange: '20-22'\n      },\n      accomplished: {\n        description: 'Exceptional presentation quality with innovative design solutions and seamless user experience. Portfolio itself demonstrates design mastery.',\n        pointRange: '23-24'\n      },\n      exceptional: {\n        description: 'Outstanding presentation that sets new standards for portfolio design. Every aspect contributes to a cohesive, professional brand experience.',\n        pointRange: '25'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Excellent visual hierarchy', 'Professional layout design', 'Intuitive navigation system', 'Consistent branding throughout'],\n      improvements: ['Improve loading times', 'Enhance mobile responsiveness', 'Clarify navigation structure', 'Strengthen visual consistency'],\n      general: ['Portfolio presentation is professional', 'Layout demonstrates design understanding', 'User experience is well-considered']\n    }\n  }, {\n    id: 'written-reflection',\n    name: 'Written Reflection & Artist Statements',\n    description: 'Quality of written analysis, self-reflection, and articulation of artistic process',\n    maxPoints: 20,\n    weight: 17,\n    levels: {\n      incomplete: {\n        description: 'No written reflection provided.',\n        pointRange: '0'\n      },\n      unacceptable: {\n        description: 'Minimal or superficial writing with poor grammar and little insight into artistic process.',\n        pointRange: '5-7'\n      },\n      developing: {\n        description: 'Basic reflection with some insight but lacking depth or clear articulation of artistic development.',\n        pointRange: '9-12'\n      },\n      acceptable: {\n        description: 'Good written reflection that demonstrates understanding of artistic process and clear communication of ideas.',\n        pointRange: '13-15'\n      },\n      emerging: {\n        description: 'Strong written analysis with thoughtful reflection on artistic growth and articulate discussion of creative decisions.',\n        pointRange: '16-17'\n      },\n      accomplished: {\n        description: 'Exceptional written work that demonstrates deep understanding of artistic practice and sophisticated communication skills.',\n        pointRange: '18-19'\n      },\n      exceptional: {\n        description: 'Outstanding written reflection that contributes significantly to understanding of artistic development and creative practice.',\n        pointRange: '20'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Thoughtful artistic reflection', 'Clear communication of ideas', 'Strong analytical thinking', 'Professional writing quality'],\n      improvements: ['Develop ideas more thoroughly', 'Improve grammar and syntax', 'Add more specific examples', 'Strengthen conclusion'],\n      general: ['Written work shows good reflection', 'Communication skills are developing', 'Artistic awareness is evident']\n    }\n  }, {\n    id: 'professional-readiness',\n    name: 'Professional Readiness & Industry Standards',\n    description: 'Adherence to professional standards, industry practices, and career preparation',\n    maxPoints: 10,\n    weight: 8,\n    levels: {\n      incomplete: {\n        description: 'No evidence of professional preparation.',\n        pointRange: '0'\n      },\n      unacceptable: {\n        description: 'Little attention to professional standards or industry expectations.',\n        pointRange: '2-3'\n      },\n      developing: {\n        description: 'Some awareness of professional practices but inconsistent application.',\n        pointRange: '4-6'\n      },\n      acceptable: {\n        description: 'Good understanding of professional standards with appropriate presentation for industry viewing.',\n        pointRange: '7-8'\n      },\n      emerging: {\n        description: 'Strong professional preparation with portfolio ready for industry presentation.',\n        pointRange: '8-9'\n      },\n      accomplished: {\n        description: 'Exceptional professional readiness exceeding industry standards.',\n        pointRange: '9-10'\n      },\n      exceptional: {\n        description: 'Outstanding professional preparation that demonstrates career readiness.',\n        pointRange: '10'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Industry-ready presentation', 'Professional attention to detail', 'Strong career preparation', 'Excellent professional standards'],\n      improvements: ['Research industry standards', 'Improve professional presentation', 'Add career preparation elements', 'Consider industry feedback'],\n      general: ['Shows strong professional development', 'Portfolio demonstrates career readiness', 'Professional standards are evident']\n    }\n  }]\n};\nconst GradingTemplate = () => {\n  _s();\n  var _sharedGradingData$co, _sharedGradingData$co2, _sharedGradingData$co3, _sharedGradingData$co4, _classList$students;\n  // Get shared context - ENHANCED with new functions\n  const {\n    sharedRubric,\n    sharedCourseDetails,\n    setSharedCourseDetails,\n    gradingData: sharedGradingData,\n    setGradingData: setSharedGradingData,\n    updateStudentInfo,\n    updateCourseInfo,\n    updateAssignmentInfo,\n    clearGradingFormData,\n    classList,\n    setClassList,\n    setCurrentStudent,\n    gradingSession,\n    setGradingSession,\n    nextStudentInSession,\n    previousStudentInSession,\n    updateGradingSession,\n    initializeGradingSession,\n    setActiveTab,\n    currentStudent,\n    saveDraft,\n    loadDraft,\n    // NEW: Add the draft/final grade functions\n    saveFinalGrade,\n    loadFinalGrade,\n    finalGrades,\n    getGradeStatus\n  } = useAssessment();\n\n  // Helper function to convert HTML content to readable text format\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // State for all grading data - initialize from shared context or defaults\n  const [localGradingData, setLocalGradingData] = useState(() => {\n    // 1) Try loading a saved draft first\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      const draft = loadDraft(currentStudent.id);\n      if (draft) {\n        return draft;\n      }\n    }\n    // 2) If rubric was just transferred, use that\n    if (sharedGradingData) {\n      return {\n        ...sharedGradingData,\n        student: currentStudent || sharedGradingData.student\n      };\n    }\n    // 3) Otherwise, start fresh for this student\n    return {\n      student: currentStudent || {\n        name: '',\n        id: '',\n        email: ''\n      },\n      course: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) || {\n        code: '',\n        name: '',\n        instructor: '',\n        term: ''\n      },\n      assignment: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) || {\n        name: '',\n        dueDate: '',\n        maxPoints: 100\n      },\n      feedback: {\n        general: '',\n        strengths: '',\n        improvements: ''\n      },\n      attachments: [],\n      videoLinks: [],\n      latePolicy: {\n        level: 'none',\n        penaltyApplied: false\n      },\n      metadata: {\n        gradedBy: '',\n        gradedDate: '',\n        aiAssisted: false,\n        rubricIntegrated: false\n      },\n      rubricGrading: {}\n    };\n  });\n\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\n  const gradingData = localGradingData;\n  const setGradingData = setLocalGradingData;\n\n  // Rubric-specific state\n  const [loadedRubric, setLoadedRubric] = useState(() => {\n    return sharedRubric || sampleRubric;\n  });\n  const [showRubricComments, setShowRubricComments] = useState({});\n  const [showHeaderGuide, setShowHeaderGuide] = useState(false);\n  const fileInputRef = useRef(null);\n  const moduleInputRef = useRef(null);\n  const rubricInputRef = useRef(null);\n\n  // Video link management\n  const [videoLinkInput, setVideoLinkInput] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n\n  // **FIXED: Enhanced shared data synchronization**\n  // Sync with sharedGradingData (updated by initializeGradingSession)\n  useEffect(() => {\n    if (!sharedGradingData) return;\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\n\n    // Only update course info if it's not empty and different from current\n    if (sharedGradingData.course && (sharedGradingData.course.code || sharedGradingData.course.name || sharedGradingData.course.instructor || sharedGradingData.course.term)) {\n      const needsSync = sharedGradingData.course.code !== localGradingData.course.code || sharedGradingData.course.name !== localGradingData.course.name || sharedGradingData.course.instructor !== localGradingData.course.instructor || sharedGradingData.course.term !== localGradingData.course.term;\n      if (needsSync) {\n        console.log('✅ Syncing course data from shared context to local state');\n        setLocalGradingData(prev => ({\n          ...prev,\n          course: {\n            code: sharedGradingData.course.code || prev.course.code,\n            name: sharedGradingData.course.name || prev.course.name,\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\n            term: sharedGradingData.course.term || prev.course.term\n          }\n        }));\n      }\n    }\n  }, [sharedGradingData === null || sharedGradingData === void 0 ? void 0 : (_sharedGradingData$co = sharedGradingData.course) === null || _sharedGradingData$co === void 0 ? void 0 : _sharedGradingData$co.code, sharedGradingData === null || sharedGradingData === void 0 ? void 0 : (_sharedGradingData$co2 = sharedGradingData.course) === null || _sharedGradingData$co2 === void 0 ? void 0 : _sharedGradingData$co2.name, sharedGradingData === null || sharedGradingData === void 0 ? void 0 : (_sharedGradingData$co3 = sharedGradingData.course) === null || _sharedGradingData$co3 === void 0 ? void 0 : _sharedGradingData$co3.instructor, sharedGradingData === null || sharedGradingData === void 0 ? void 0 : (_sharedGradingData$co4 = sharedGradingData.course) === null || _sharedGradingData$co4 === void 0 ? void 0 : _sharedGradingData$co4.term]);\n\n  // Auto-save to shared context whenever gradingData changes (with debounce)\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setSharedGradingData(gradingData);\n      setSharedCourseDetails({\n        student: gradingData.student,\n        course: gradingData.course,\n        assignment: gradingData.assignment\n      });\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\n\n  // ── When we get new sharedCourseDetails, merge them in\n  useEffect(() => {\n    if (!sharedCourseDetails) return;\n    setLocalGradingData(prev => ({\n      ...prev,\n      student: sharedCourseDetails.student || prev.student,\n      course: sharedCourseDetails.course || prev.course,\n      assignment: sharedCourseDetails.assignment || prev.assignment\n    }));\n  }, [sharedCourseDetails]);\n\n  // Load shared data when available\n  useEffect(() => {\n    if (sharedRubric) {\n      setLoadedRubric(sharedRubric);\n    }\n  }, [sharedRubric]);\n\n  // ── When student changes, load any saved draft/final but keep course+assignment\n  useEffect(() => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) return;\n    const status = getGradeStatus(currentStudent.id);\n    let saved = null;\n    if (status === 'final' && loadFinalGrade) {\n      saved = loadFinalGrade(currentStudent.id);\n    } else if (status === 'draft') {\n      saved = loadDraft(currentStudent.id);\n    }\n    if (saved) {\n      setLocalGradingData(prev => ({\n        ...saved,\n        student: currentStudent,\n        course: prev.course,\n        assignment: prev.assignment,\n        metadata: prev.metadata\n      }));\n      setVideoLinkInput('');\n      setVideoTitle('');\n    } else {\n      resetGradingForm();\n    }\n  }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\n\n  // Late Policy Levels\n  const latePolicyLevels = {\n    none: {\n      name: 'On Time',\n      multiplier: 1.0,\n      description: 'Assignment submitted on or before due date and time - marked out of 100%',\n      color: '#16a34a'\n    },\n    within24: {\n      name: '1-24 Hours Late',\n      multiplier: 0.8,\n      description: 'Assignment received within 24 hours of due date - 20% reduction (marked out of 80%)',\n      color: '#ea580c'\n    },\n    after24: {\n      name: 'More than 24 Hours Late',\n      multiplier: 0.0,\n      description: 'Assignment received after 24 hours from due date - mark of zero (0)',\n      color: '#dc2626'\n    }\n  };\n  useEffect(() => {\n    if (loadedRubric) {\n      const initialGrading = {};\n      loadedRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setLocalGradingData(prevData => {\n        var _loadedRubric$assignm, _loadedRubric$assignm2;\n        return {\n          ...prevData,\n          assignment: {\n            ...prevData.assignment,\n            name: ((_loadedRubric$assignm = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm === void 0 ? void 0 : _loadedRubric$assignm.title) || prevData.assignment.name,\n            maxPoints: ((_loadedRubric$assignm2 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm2 === void 0 ? void 0 : _loadedRubric$assignm2.totalPoints) || prevData.assignment.maxPoints\n          },\n          rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\n          metadata: {\n            ...prevData.metadata,\n            rubricIntegrated: true\n          }\n        };\n      });\n    }\n  }, [loadedRubric]);\n  useEffect(() => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('🔍 Loading data for student:', currentStudent.name);\n      const gradeStatus = getGradeStatus(currentStudent.id);\n      console.log('📊 Grade status:', gradeStatus);\n      let savedData = null;\n      if (gradeStatus === 'final') {\n        savedData = loadFinalGrade ? loadFinalGrade(currentStudent.id) : null;\n        console.log('📋 Loading final grade data:', savedData ? 'FOUND' : 'NOT FOUND');\n      } else if (gradeStatus === 'draft') {\n        savedData = loadDraft(currentStudent.id);\n        console.log('📝 Loading draft data:', savedData ? 'FOUND' : 'NOT FOUND');\n      }\n      if (savedData) {\n        console.log('✅ Successfully loaded saved grade data');\n        setLocalGradingData(prevData => ({\n          ...savedData,\n          course: prevData.course,\n          assignment: prevData.assignment,\n          student: currentStudent,\n          metadata: prevData.metadata\n        }));\n        setVideoLinkInput('');\n        setVideoTitle('');\n      } else {\n        console.log('🆕 No saved data found, starting fresh');\n        resetGradingForm();\n      }\n    }\n  }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\n  const calculateTotalScore = () => {\n    let rawScore = 0;\n    if (loadedRubric && gradingData.rubricGrading) {\n      rawScore = Object.values(gradingData.rubricGrading).reduce((total, grading) => {\n        const criterion = loadedRubric.criteria.find(c => c.id === grading.criterionId);\n        if (criterion && grading.selectedLevel) {\n          const level = loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel);\n          if (level) {\n            return total + criterion.maxPoints * level.multiplier;\n          }\n        }\n        return total;\n      }, 0);\n    }\n    const latePolicyLevel = latePolicyLevels[gradingData.latePolicy.level];\n    const finalScore = rawScore * latePolicyLevel.multiplier;\n    return {\n      rawScore: rawScore,\n      finalScore: finalScore,\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\n      latePolicyDescription: latePolicyLevel.description\n    };\n  };\n  const updateLatePolicy = level => {\n    setGradingData(prevData => ({\n      ...prevData,\n      latePolicy: {\n        level: level,\n        penaltyApplied: level !== 'none'\n      }\n    }));\n  };\n  const updateRubricGrading = (criterionId, level, comments = null) => {\n    setLocalGradingData(prevData => {\n      const existingGrading = prevData.rubricGrading[criterionId];\n      const existingComments = (existingGrading === null || existingGrading === void 0 ? void 0 : existingGrading.customComments) || '';\n      const newRubricState = {\n        ...prevData.rubricGrading,\n        [criterionId]: {\n          criterionId,\n          selectedLevel: level,\n          customComments: comments !== null ? comments : existingComments\n        }\n      };\n      return {\n        ...prevData,\n        rubricGrading: newRubricState\n      };\n    });\n  };\n  const addCriterionFeedback = (criterionId, comment) => {\n    setLocalGradingData(prevData => {\n      const currentGrading = prevData.rubricGrading[criterionId];\n      const currentComments = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '';\n      const newComments = currentComments ? `${currentComments}\\n• ${comment}` : `• ${comment}`;\n      const newRubricState = {\n        ...prevData.rubricGrading,\n        [criterionId]: {\n          ...currentGrading,\n          criterionId,\n          selectedLevel: (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) || null,\n          customComments: newComments\n        }\n      };\n      return {\n        ...prevData,\n        rubricGrading: newRubricState\n      };\n    });\n  };\n  const toggleRubricComments = criterionId => {\n    setShowRubricComments(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n  const addVideoLink = () => {\n    if (videoLinkInput.trim()) {\n      setGradingData(prevData => ({\n        ...prevData,\n        videoLinks: [...prevData.videoLinks, {\n          id: Date.now(),\n          url: videoLinkInput.trim(),\n          title: videoTitle.trim() || 'Video Link'\n        }]\n      }));\n      setVideoLinkInput('');\n      setVideoTitle('');\n    }\n  };\n  const removeVideoLink = id => {\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: prevData.videoLinks.filter(link => link.id !== id)\n    }));\n  };\n  const handleFileUpload = files => {\n    const newAttachments = Array.from(files).map(file => ({\n      id: Date.now() + Math.random(),\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      file: file\n    }));\n    Promise.all(newAttachments.map(attachment => {\n      return new Promise(resolve => {\n        if (attachment.type.startsWith('image/')) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            attachment.base64Data = e.target.result;\n            resolve(attachment);\n          };\n          reader.readAsDataURL(attachment.file);\n        } else {\n          resolve(attachment);\n        }\n      });\n    })).then(processedAttachments => {\n      setGradingData(prevData => ({\n        ...prevData,\n        attachments: [...prevData.attachments, ...processedAttachments]\n      }));\n    });\n  };\n  const removeAttachment = id => {\n    setGradingData(prevData => ({\n      ...prevData,\n      attachments: prevData.attachments.filter(att => att.id !== id)\n    }));\n  };\n  const handleNextStudent = () => {\n    handleNextStudentAsDraft();\n  };\n  const handleNextStudentAsDraft = () => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('💾 Saving as draft for student:', currentStudent.name);\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('draft');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Draft saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const handleNextStudentAsFinal = () => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('✅ Finalizing grade for student:', currentStudent.name);\n      saveFinalGrade(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('final');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const resetGradingForm = () => {\n    const initialRubricGrading = {};\n    if (loadedRubric) {\n      loadedRubric.criteria.forEach(criterion => {\n        initialRubricGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n    }\n    setLocalGradingData(prev => {\n      var _sharedCourseDetails$, _sharedCourseDetails$2;\n      return {\n        ...prev,\n        course: (_sharedCourseDetails$ = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) !== null && _sharedCourseDetails$ !== void 0 ? _sharedCourseDetails$ : prev.course,\n        assignment: (_sharedCourseDetails$2 = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) !== null && _sharedCourseDetails$2 !== void 0 ? _sharedCourseDetails$2 : prev.assignment,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: initialRubricGrading\n      };\n    });\n  };\n  const handlePreviousStudent = () => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = previousStudentInSession();\n    if (!success) {\n      console.log('Already at first student or no active session');\n    }\n  };\n  const getCurrentStudentInfo = () => {\n    if (!classList || !(gradingSession !== null && gradingSession !== void 0 && gradingSession.active) || !gradingSession.currentStudent) {\n      return null;\n    }\n    const currentIndex = gradingSession.currentStudentIndex;\n    const totalStudents = classList.students.length;\n    const student = gradingSession.currentStudent;\n    return {\n      student,\n      position: currentIndex + 1,\n      total: totalStudents,\n      isFirst: currentIndex === 0,\n      isLast: currentIndex === totalStudents - 1\n    };\n  };\n  const currentStudentInfo = getCurrentStudentInfo();\n\n  // --- START: CODE FIX ---\n\n  // Helper function to generate the student report HTML. This avoids code duplication.\n  const generateStudentReportHTML = () => {\n    const scoreCalculation = calculateTotalScore();\n    const totalScore = scoreCalculation.finalScore;\n    const rawScore = scoreCalculation.rawScore;\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = (totalScore / (maxPoints || 1) * 100).toFixed(1);\n    const penaltyApplied = scoreCalculation.penaltyApplied;\n    const attachmentsHTML = gradingData.attachments.map((att, index) => {\n      if (att.base64Data) {\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\n      } else {\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\n      }\n    }).join('');\n    const videoLinksHTML = gradingData.videoLinks.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('');\n    const rubricTableHTML = loadedRubric ? `\n      <div class=\"rubric-section\" style=\"margin-top: 30px;\">\n          <h3>📋 Detailed Rubric Assessment</h3>\n          <div style=\"background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;\">\n              <strong>Assignment:</strong> ${loadedRubric.assignmentInfo.title}<br>\n              <strong>Description:</strong> ${renderFormattedContent(loadedRubric.assignmentInfo.description)}<br>\n              <strong>Weight:</strong> ${loadedRubric.assignmentInfo.weight}% of Final Grade<br>\n              <strong>Passing Threshold:</strong> ${loadedRubric.assignmentInfo.passingThreshold}%  \n          </div>\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.9rem;\">\n              <thead><tr style=\"background: #2c3e50; color: white;\"><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Max Points</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Level Achieved</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Points Earned</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Assessment & Comments</th></tr></thead>\n              <tbody>\n                  ${loadedRubric.criteria.map(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      const level = grading !== null && grading !== void 0 && grading.selectedLevel ? loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel) : null;\n      const points = level ? (criterion.maxPoints * level.multiplier).toFixed(1) : '0';\n      const levelDescription = level && criterion.levels[level.level] ? renderFormattedContent(criterion.levels[level.level].description) : '';\n      const additionalComments = (grading === null || grading === void 0 ? void 0 : grading.customComments) || '';\n      return `<tr><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\"><strong style=\"color: #2c3e50;\">${criterion.name}</strong><br><small style=\"color: #666; font-style: italic;\">${renderFormattedContent(criterion.description)}</small></td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold;\">${criterion.maxPoints}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; ${level ? `background-color: ${level.color}15; color: ${level.color}; font-weight: bold;` : ''}\">${level ? level.name : 'Not Assessed'}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}${!levelDescription && !additionalComments ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}</td></tr>`;\n    }).join('')}\n              </tbody>\n          </table>\n          <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\"><h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4><div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\"><div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div><div><strong>Grade Status:</strong><span style=\"color: ${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}</div></div>\n      </div>` : '';\n    const htmlContent = `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Grade Report - ${gradingData.student.name}</title><style>body{font-family:Arial,sans-serif;max-width:800px;margin:20px auto;padding:20px;line-height:1.6}.header{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:30px}.score-summary{background:#e8f5e8;border:2px solid #4caf50;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.late-policy-section{margin:30px 0;background:#fff5f5;border:1px solid #f87171;border-radius:8px;padding:20px}.feedback-section{margin:20px 0;padding:15px;background:#f9f9f9;border-radius:8px}.attachments{margin:30px 0}.attachment-item{display:inline-block;text-align:center;margin:1rem;padding:1rem;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);max-width:250px;vertical-align:top}.clickable-image{cursor:pointer;transition:all .3s ease;position:relative}.clickable-image:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.2)}.video-links{margin:30px 0}.video-link-item{margin-bottom:1rem}.video-link-item a{color:#007bff;text-decoration:none}.video-link-item a:hover{text-decoration:underline}h1,h2,h3{color:#333}.image-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);animation:fadeIn .3s ease}.image-modal.show{display:flex;align-items:center;justify-content:center}.modal-content{max-width:95%;max-height:95%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);animation:zoomIn .3s ease}.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:40px;font-weight:700;cursor:pointer;z-index:1001;background:rgba(0,0,0,.5);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;line-height:1}.close-modal:hover{background:rgba(0,0,0,.8)}.modal-caption{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.7);padding:10px 20px;border-radius:6px;text-align:center;max-width:80%}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes zoomIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@media print{.attachment-item,.video-link-item{break-inside:avoid}.image-modal{display:none!important}}</style></head><body><div class=\"header\"><h1>📋 Grade Report</h1><p><strong>Student:</strong> ${gradingData.student.name} (${gradingData.student.id})</p><p><strong>Course:</strong> ${gradingData.course.code} - ${gradingData.course.name}</p><p><strong>Assignment:</strong> ${gradingData.assignment.name}</p><p><strong>Instructor:</strong> ${gradingData.course.instructor}</p><p><strong>Term:</strong> ${gradingData.course.term}</p></div><div class=\"score-summary\"><h2>📊 Final Score</h2><div style=\"font-size:2rem;font-weight:700;color:#2e7d32;margin:15px 0\">${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)</div><p style=\"margin:10px 0;color:#555\">${loadedRubric ? `Rubric: ${loadedRubric.assignmentInfo.title}` : \"\"}${penaltyApplied ? ` | Late Policy: ${latePolicyLevels[gradingData.latePolicy.level].name}` : \"\"}</p></div>${penaltyApplied ? `<div class=\"late-policy-section\"><h3 style=\"color:#dc2626\">📅 Late Submission Policy Applied</h3><p><strong>Policy Status:</strong> ${latePolicyLevels[gradingData.latePolicy.level].name}</p><p>${latePolicyLevels[gradingData.latePolicy.level].description}</p><p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p></div>` : \"\"}${rubricTableHTML}${Object.entries(gradingData.feedback).filter(([e, t]) => t).map(([e, t]) => `<div class=\"feedback-section\"><h3>${e.charAt(0).toUpperCase() + e.slice(1)} Feedback</h3><p>${t.replace(/\\n/g, \"<br>\")}</p></div>`).join(\"\")}${attachmentsHTML ? `<div class=\"attachments\"><h3>📎 File Attachments</h3><div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">${attachmentsHTML}</div></div>` : \"\"}${videoLinksHTML ? `<div class=\"video-links\"><h3>🎥 Video Review Links</h3>${videoLinksHTML}</div>` : \"\"}<p style=\"margin-top:40px;text-align:center;color:#666;font-size:.9rem\">Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p><div id=\"imageModal\" class=\"image-modal\"><span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span><img class=\"modal-content\" id=\"modalImage\"><div class=\"modal-caption\" id=\"modalCaption\"></div></div><script>const attachmentData=${JSON.stringify(gradingData.attachments)};function openImageModal(e,t){const n=document.getElementById(\"imageModal\"),o=document.getElementById(\"modalImage\"),a=document.getElementById(\"modalCaption\");n.classList.add(\"show\"),o.src=e,a.textContent=t,document.body.style.overflow=\"hidden\"}function closeImageModal(){document.getElementById(\"imageModal\").classList.remove(\"show\"),document.body.style.overflow=\"auto\"}document.addEventListener(\"DOMContentLoaded\",function(){document.querySelectorAll(\".clickable-image\").forEach(e=>{e.addEventListener(\"click\",function(){const e=parseInt(this.getAttribute(\"data-index\")),t=attachmentData[e];t&&t.base64Data&&openImageModal(t.base64Data,t.name)})}),document.getElementById(\"imageModal\").addEventListener(\"click\",function(e){e.target===this&&closeImageModal()}),document.addEventListener(\"keydown\",function(e){\"Escape\"===e.key&&closeImageModal()})})</script></body></html>`;\n    return htmlContent;\n  };\n\n  // Function to export student grade data for AI feedback generation\n  const exportAIFeedbackData = () => {\n    var _localGradingData$stu, _loadedRubric$assignm3, _loadedRubric$assignm4, _loadedRubric$assignm5, _loadedRubric$assignm6, _loadedRubric$assignm7;\n    if (!((_localGradingData$stu = localGradingData.student) !== null && _localGradingData$stu !== void 0 && _localGradingData$stu.name)) {\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\n      return;\n    }\n\n    // Calculate scores\n    const scoreCalculation = calculateTotalScore();\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = maxPoints > 0 ? Math.round(scoreCalculation.finalScore / maxPoints * 100) : 0;\n\n    // Determine letter grade\n    const getLetterGrade = percentage => {\n      if (percentage >= 90) return 'A';\n      if (percentage >= 80) return 'B';\n      if (percentage >= 70) return 'C';\n      if (percentage >= 60) return 'D';\n      return 'F';\n    };\n\n    // Build criteria performance data\n    const criteriaPerformance = [];\n    if (loadedRubric && localGradingData.rubricGrading) {\n      loadedRubric.criteria.forEach(criterion => {\n        const grading = localGradingData.rubricGrading[criterion.id];\n        if (grading && grading.selectedLevel) {\n          const level = loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel);\n          const earnedPoints = criterion.maxPoints * ((level === null || level === void 0 ? void 0 : level.multiplier) || 0);\n          const criterionPercentage = Math.round(earnedPoints / criterion.maxPoints * 100);\n          criteriaPerformance.push({\n            name: criterion.name,\n            description: criterion.description,\n            maxPoints: criterion.maxPoints,\n            earnedPoints: Math.round(earnedPoints * 10) / 10,\n            level: grading.selectedLevel,\n            levelName: (level === null || level === void 0 ? void 0 : level.name) || 'Unknown',\n            levelDescription: (level === null || level === void 0 ? void 0 : level.description) || '',\n            percentage: criterionPercentage,\n            customComments: grading.customComments || ''\n          });\n        }\n      });\n    }\n\n    // Create the structured data for AI\n    const aiGradeData = {\n      student: {\n        firstName: localGradingData.student.name.split(' ')[0] || localGradingData.student.name,\n        lastName: localGradingData.student.name.split(' ').slice(1).join(' ') || '',\n        fullName: localGradingData.student.name,\n        id: localGradingData.student.id,\n        email: localGradingData.student.email\n      },\n      course: {\n        code: localGradingData.course.code,\n        name: localGradingData.course.name,\n        instructor: localGradingData.course.instructor,\n        term: localGradingData.course.term\n      },\n      assignment: {\n        title: localGradingData.assignment.name || (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm3 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm3 === void 0 ? void 0 : _loadedRubric$assignm3.title),\n        description: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm4 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm4 === void 0 ? void 0 : _loadedRubric$assignm4.description) || '',\n        totalPoints: maxPoints,\n        passingThreshold: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm5 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm5 === void 0 ? void 0 : _loadedRubric$assignm5.passingThreshold) || 60,\n        dueDate: localGradingData.assignment.dueDate\n      },\n      gradeData: {\n        overallScore: Math.round(scoreCalculation.finalScore * 10) / 10,\n        rawScore: Math.round(scoreCalculation.rawScore * 10) / 10,\n        overallPercentage: percentage,\n        letterGrade: getLetterGrade(percentage),\n        passed: percentage >= ((loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm6 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm6 === void 0 ? void 0 : _loadedRubric$assignm6.passingThreshold) || 60),\n        latePenaltyApplied: scoreCalculation.penaltyApplied,\n        latePolicyDescription: scoreCalculation.latePolicyDescription,\n        criteria: criteriaPerformance\n      },\n      existingFeedback: {\n        general: localGradingData.feedback.general || '',\n        strengths: localGradingData.feedback.strengths || '',\n        improvements: localGradingData.feedback.improvements || ''\n      },\n      metadata: {\n        gradedDate: new Date().toISOString(),\n        rubricUsed: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm7 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm7 === void 0 ? void 0 : _loadedRubric$assignm7.title) || 'Custom Rubric',\n        totalCriteria: criteriaPerformance.length,\n        exportedForAI: true\n      }\n    };\n\n    // Export as JSON file\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n    return aiGradeData;\n  };\n\n  // Updated function to generate concise AI feedback prompt\n  const generateAIFeedbackPrompt = () => {\n    const gradeData = exportAIFeedbackData();\n    if (!gradeData) return;\n    const studentFirstName = gradeData.student.firstName;\n    const courseName = gradeData.course.name || 'this course';\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\n\n    // Determine student level context\n    const getStudentLevel = () => {\n      const courseCode = gradeData.course.code.toUpperCase();\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\n      return 'undergraduate';\n    };\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\n\nSTUDENT GRADE DATA:\n${JSON.stringify(gradeData, null, 2)}\n\nWrite feedback in this exact structure:\n\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\n\n**Key Observations:**\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\n• Their strongest performance area (mention specific criteria that scored highest)\n• One area showing good progress or solid competency  \n• One specific area for improvement with a concrete suggestion\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\n• One forward-looking suggestion for growth in ${courseName}\n\n**Conclusion:**\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\n\n**Final Note:**\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\n\n**WRITING STYLE:**\n- Conversational and personal, like speaking directly to ${studentFirstName}\n- Specific to their actual performance levels and criteria\n- Encouraging but honest\n- Professional yet warm\n- Use their actual criterion names and performance levels from the data\n- Keep each bullet point to 1-2 sentences maximum\n\n**Context:**\n- Student: ${gradeData.student.fullName}\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\n- Assignment: ${assignmentTitle}\n- Instructor: ${gradeData.course.instructor}\n\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\n\n    // Export prompt as text file\n    const promptBlob = new Blob([prompt], {\n      type: 'text/plain'\n    });\n    const url = URL.createObjectURL(promptBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n    console.log('AI Feedback Prompt Generated:', prompt);\n    return prompt;\n  };\n\n  // Combined function to export both files at once\n  const exportForAIFeedback = () => {\n    try {\n      // First export the grade data\n      const gradeData = exportAIFeedbackData();\n      if (!gradeData) return;\n\n      // Then generate and export the prompt\n      setTimeout(() => {\n        generateAIFeedbackPrompt();\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\n      }, 500); // Small delay to ensure first download completes\n    } catch (error) {\n      console.error('Error exporting AI feedback data:', error);\n      alert('Error exporting AI feedback data. Please check the console for details.');\n    }\n  };\n  const exportToHTML = () => {\n    const htmlContent = generateStudentReportHTML();\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportToPDF = () => {\n    const html = generateStudentReportHTML();\n    const printWindow = window.open('', '_blank');\n    printWindow.document.open();\n    printWindow.document.write(html);\n    printWindow.document.close();\n    printWindow.focus();\n    printWindow.print();\n  };\n\n  // --- END: CODE FIX ---\n\n  // NEW HELPER FUNCTIONS FOR COURSE INFO\n  const getEffectiveCourseData = () => {\n    const course = gradingData.course;\n    const metadata = classList === null || classList === void 0 ? void 0 : classList.courseMetadata;\n    return {\n      code: course.code || (metadata === null || metadata === void 0 ? void 0 : metadata.courseCode) || '',\n      name: course.name || (metadata === null || metadata === void 0 ? void 0 : metadata.courseName) || '',\n      instructor: course.instructor || (metadata === null || metadata === void 0 ? void 0 : metadata.instructor) || (metadata === null || metadata === void 0 ? void 0 : metadata.professors) || '',\n      term: course.term || (metadata === null || metadata === void 0 ? void 0 : metadata.term) || ''\n    };\n  };\n  const pullCourseDataFromClassList = () => {\n    if (!(classList !== null && classList !== void 0 && classList.courseMetadata)) {\n      alert('No class list course metadata available to pull from.');\n      return;\n    }\n    const courseMetadata = classList.courseMetadata;\n    const newCourseInfo = {\n      code: courseMetadata.courseCode || '',\n      name: courseMetadata.courseName || '',\n      instructor: courseMetadata.instructor || courseMetadata.professors || '',\n      term: courseMetadata.term || ''\n    };\n\n    // Update both local and shared state\n    setGradingData(prevData => ({\n      ...prevData,\n      course: newCourseInfo\n    }));\n    updateCourseInfo(newCourseInfo);\n    console.log('📥 Pulled course data from class list:', newCourseInfo);\n    alert(`Course information updated!\\n\\nCode: ${newCourseInfo.code}\\nName: ${newCourseInfo.name}\\nInstructor: ${newCourseInfo.instructor}\\nTerm: ${newCourseInfo.term}`);\n  };\n  const isCourseDataMissing = () => {\n    const course = gradingData.course;\n    return !course.code && !course.name && !course.instructor && !course.term;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      background: '#f9fafb',\n      padding: '1.5rem'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: '80rem',\n        margin: '0 auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)',\n          color: 'white',\n          padding: '1.5rem',\n          borderRadius: '0.5rem 0.5rem 0 0',\n          boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                fontSize: '1.875rem',\n                fontWeight: '700',\n                margin: '0 0 0.5rem 0'\n              },\n              children: \"\\uD83D\\uDCCB Professional Grading Interface\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#bfdbfe',\n                margin: 0\n              },\n              children: loadedRubric ? 'Comprehensive rubric-based assessment' : 'Streamlined grading with flexible assessment options'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1050,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1046,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.75rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                background: '#16a34a',\n                color: 'white',\n                padding: '0.5rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FileDown, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1070,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1055,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: exportToPDF,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                backgroundColor: '#dc2626',\n                color: '#ffffff',\n                padding: '0.5rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1089,\n                columnNumber: 33\n              }, this), \"Export PDF\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1073,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForAIFeedback,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                background: '#7c3aed',\n                color: 'white',\n                padding: '0.5rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem'\n              },\n              title: \"Export grade data and AI prompt for generating personalized feedback\",\n              children: [/*#__PURE__*/_jsxDEV(Bot, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 33\n              }, this), \"Export for AI Feedback\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1054,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1045,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1038,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          borderRadius: '0 0 0.5rem 0.5rem',\n          boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '1.5rem'\n          },\n          children: [currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\n              border: '1px solid #0284c7',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '40px',\n                    height: '40px',\n                    background: '#0284c7',\n                    borderRadius: '50%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    color: 'white',\n                    fontSize: '1.2rem',\n                    fontWeight: 'bold'\n                  },\n                  children: currentStudentInfo.position\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1130,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    style: {\n                      margin: 0,\n                      fontSize: '1.5rem',\n                      fontWeight: '700',\n                      color: '#0c4a6e'\n                    },\n                    children: currentStudentInfo.student.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1145,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0,\n                      color: '#0369a1',\n                      fontSize: '0.875rem'\n                    },\n                    children: [\"Student ID: \", currentStudentInfo.student.id, \" | Email: \", currentStudentInfo.student.email]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1148,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1144,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1129,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: 'center',\n                    color: '#0369a1'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '1.25rem',\n                      fontWeight: 'bold'\n                    },\n                    children: [currentStudentInfo.position, \"/\", currentStudentInfo.total]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1156,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '0.75rem'\n                    },\n                    children: \"Progress\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1159,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1155,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: '0.5rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handlePreviousStudent,\n                    disabled: currentStudentInfo.isFirst,\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      background: currentStudentInfo.isFirst ? '#94a3b8' : '#3b82f6',\n                      color: 'white',\n                      padding: '0.75rem 1rem',\n                      borderRadius: '0.5rem',\n                      border: 'none',\n                      cursor: currentStudentInfo.isFirst ? 'not-allowed' : 'pointer',\n                      fontSize: '0.875rem',\n                      fontWeight: '500'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1180,\n                      columnNumber: 49\n                    }, this), \"Previous\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1163,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      updateGradingSession({\n                        active: false\n                      });\n                      setActiveTab('class-manager');\n                    },\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      background: '#f59e0b',\n                      color: 'white',\n                      padding: '0.75rem 1rem',\n                      borderRadius: '0.5rem',\n                      border: 'none',\n                      cursor: 'pointer',\n                      fontSize: '0.875rem',\n                      fontWeight: '500'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Pause, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1203,\n                      columnNumber: 49\n                    }, this), \"Pause Session\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1184,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleNextStudent,\n                    disabled: currentStudentInfo.isLast,\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      background: currentStudentInfo.isLast ? '#94a3b8' : '#10b981',\n                      color: 'white',\n                      padding: '0.75rem 1rem',\n                      borderRadius: '0.5rem',\n                      border: 'none',\n                      cursor: currentStudentInfo.isLast ? 'not-allowed' : 'pointer',\n                      fontSize: '0.875rem',\n                      fontWeight: '500'\n                    },\n                    children: currentStudentInfo.isLast ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1226,\n                        columnNumber: 57\n                      }, this), \"Complete Session\"]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [\"Next\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1232,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1207,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1162,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1154,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1128,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: '100%',\n                background: '#e0f2fe',\n                borderRadius: '0.5rem',\n                height: '8px',\n                overflow: 'hidden'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: `${currentStudentInfo.position / currentStudentInfo.total * 100}%`,\n                  background: 'linear-gradient(90deg, #0284c7 0%, #0ea5e9 100%)',\n                  height: '100%',\n                  transition: 'width 0.5s ease'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1248,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1241,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1121,\n            columnNumber: 29\n          }, this), sharedGradingData && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n              border: '1px solid #bbf7d0',\n              borderRadius: '0.5rem',\n              padding: '0.75rem',\n              marginBottom: '1.5rem'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#15803d'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '8px',\n                  height: '8px',\n                  background: '#16a34a',\n                  borderRadius: '50%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1268,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '0.875rem',\n                  fontWeight: '500'\n                },\n                children: \"Auto-saved - Work preserved across tabs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1269,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1267,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1260,\n            columnNumber: 29\n          }, this), !currentStudentInfo && classList && ((_classList$students = classList.students) === null || _classList$students === void 0 ? void 0 : _classList$students.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\n              border: '1px solid #fbbf24',\n              borderRadius: '0.5rem',\n              padding: '1rem',\n              marginBottom: '1.5rem'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  style: {\n                    margin: '0 0 0.5rem 0',\n                    color: '#92400e',\n                    fontSize: '1.125rem',\n                    fontWeight: '600'\n                  },\n                  children: \"Class List Available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1285,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0,\n                    color: '#b45309',\n                    fontSize: '0.875rem'\n                  },\n                  children: [classList.students.length, \" students ready for grading. Start a batch session to grade efficiently.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1288,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1284,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  initializeGradingSession(classList);\n                  setActiveTab('grading-tool');\n                },\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  background: '#d97706',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '0.5rem',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: '500'\n                },\n                children: [/*#__PURE__*/_jsxDEV(PlayCircle, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1311,\n                  columnNumber: 41\n                }, this), \"Start Batch Grading\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1292,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1283,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1276,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  fontSize: '1.25rem',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: \"Course Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1321,\n                columnNumber: 33\n              }, this), isCourseDataMissing() && (classList === null || classList === void 0 ? void 0 : classList.courseMetadata) && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: pullCourseDataFromClassList,\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  background: '#3b82f6',\n                  color: 'white',\n                  padding: '0.5rem 1rem',\n                  borderRadius: '0.5rem',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: '500'\n                },\n                title: \"Pull course information from imported class list\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1344,\n                  columnNumber: 41\n                }, this), \"Pull Course Data\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1327,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1320,\n              columnNumber: 29\n            }, this), (() => {\n              const effectiveData = getEffectiveCourseData();\n              if (effectiveData.code || effectiveData.name) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    background: '#f0f9ff',\n                    border: '1px solid #0ea5e9',\n                    borderRadius: '0.5rem',\n                    padding: '0.75rem',\n                    marginBottom: '1rem',\n                    fontSize: '0.875rem',\n                    color: '#0369a1'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1365,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"Course information loaded \", gradingData.course.code ? 'from grading session' : 'from class list metadata']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1366,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1364,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1355,\n                  columnNumber: 41\n                }, this);\n              }\n              return null;\n            })(), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n                gap: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Course Code (e.g., ART101)\",\n                value: getEffectiveCourseData().code,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    course: {\n                      ...prevData.course,\n                      code: newValue\n                    }\n                  }));\n                  updateCourseInfo({\n                    code: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: getEffectiveCourseData().code && !gradingData.course.code ? '#f9fafb' : 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1375,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Course Name\",\n                value: getEffectiveCourseData().name,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    course: {\n                      ...prevData.course,\n                      name: newValue\n                    }\n                  }));\n                  updateCourseInfo({\n                    name: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: getEffectiveCourseData().name && !gradingData.course.name ? '#f9fafb' : 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1396,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Instructor Name\",\n                value: getEffectiveCourseData().instructor,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    course: {\n                      ...prevData.course,\n                      instructor: newValue\n                    }\n                  }));\n                  updateCourseInfo({\n                    instructor: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: getEffectiveCourseData().instructor && !gradingData.course.instructor ? '#f9fafb' : 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1417,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Term (e.g., Fall 2024)\",\n                value: getEffectiveCourseData().term,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    course: {\n                      ...prevData.course,\n                      term: newValue\n                    }\n                  }));\n                  updateCourseInfo({\n                    term: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: getEffectiveCourseData().term && !gradingData.course.term ? '#f9fafb' : 'white'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1438,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1374,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1319,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '0.75rem',\n                color: '#374151'\n              },\n              children: \"Student Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1464,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n                gap: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Student Name\",\n                value: (currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.name) || gradingData.student.name,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    student: {\n                      ...prevData.student,\n                      name: newValue\n                    }\n                  }));\n                  updateStudentInfo({\n                    name: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  background: currentStudentInfo ? '#f3f4f6' : 'white'\n                },\n                readOnly: !!currentStudentInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1468,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Student ID\",\n                value: (currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.id) || gradingData.student.id,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    student: {\n                      ...prevData.student,\n                      id: newValue\n                    }\n                  }));\n                  updateStudentInfo({\n                    id: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  background: currentStudentInfo ? '#f3f4f6' : 'white'\n                },\n                readOnly: !!currentStudentInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                placeholder: \"Student Email\",\n                value: (currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.email) || gradingData.student.email,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    student: {\n                      ...prevData.student,\n                      email: newValue\n                    }\n                  }));\n                  updateStudentInfo({\n                    email: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  background: currentStudentInfo ? '#f3f4f6' : 'white'\n                },\n                readOnly: !!currentStudentInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1512,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1467,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1463,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '0.75rem',\n                color: '#374151'\n              },\n              children: \"Assignment Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1539,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n                gap: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Assignment Name\",\n                value: gradingData.assignment.name,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    assignment: {\n                      ...prevData.assignment,\n                      name: newValue\n                    }\n                  }));\n                  updateAssignmentInfo({\n                    name: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1543,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                placeholder: \"Due Date\",\n                value: gradingData.assignment.dueDate,\n                onChange: e => {\n                  const newValue = e.target.value;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    assignment: {\n                      ...prevData.assignment,\n                      dueDate: newValue\n                    }\n                  }));\n                  updateAssignmentInfo({\n                    dueDate: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Max Points\",\n                value: gradingData.assignment.maxPoints,\n                onChange: e => {\n                  const newValue = parseInt(e.target.value) || 0;\n                  setGradingData(prevData => ({\n                    ...prevData,\n                    assignment: {\n                      ...prevData.assignment,\n                      maxPoints: newValue\n                    }\n                  }));\n                  updateAssignmentInfo({\n                    maxPoints: newValue\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1583,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1542,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1538,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%)',\n              border: '1px solid #fed7aa',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '1rem',\n                color: '#9a3412'\n              },\n              children: \"\\uD83D\\uDCC5 Late Submission Policy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1614,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: 'white',\n                border: '1px solid #fed7aa',\n                borderRadius: '0.5rem',\n                padding: '1rem',\n                marginBottom: '1.25rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontWeight: '500',\n                  marginBottom: '0.5rem',\n                  color: '#9a3412'\n                },\n                children: \"Institutional Late Assignment Policy:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1624,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                style: {\n                  paddingLeft: '1.25rem',\n                  fontSize: '0.875rem',\n                  color: '#7c2d12'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"On Time:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1628,\n                    columnNumber: 43\n                  }, this), \" Assignments submitted on or before due date and time are marked out of 100%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1628,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"1-24 Hours Late:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1629,\n                    columnNumber: 43\n                  }, this), \" Assignments receive a 20% reduction and are marked out of 80%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1629,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"After 24 Hours:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1630,\n                    columnNumber: 43\n                  }, this), \" Assignments receive a mark of zero (0)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1630,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1627,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1617,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '500',\n                  marginBottom: '0.75rem',\n                  color: '#9a3412'\n                },\n                children: \"Select submission status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1635,\n                columnNumber: 33\n              }, this), Object.entries(latePolicyLevels).map(([level, policy]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => updateLatePolicy(level),\n                style: {\n                  background: 'white',\n                  border: `2px solid ${gradingData.latePolicy.level === level ? policy.color : '#d1d5db'}`,\n                  borderRadius: '0.75rem',\n                  padding: '1rem',\n                  marginBottom: '0.75rem',\n                  cursor: 'pointer',\n                  transition: 'all 0.3s ease',\n                  transform: gradingData.latePolicy.level === level ? 'translateY(-2px)' : 'none',\n                  boxShadow: gradingData.latePolicy.level === level ? '0 8px 25px rgba(0, 0, 0, 0.15)' : '0 1px 3px rgba(0, 0, 0, 0.1)',\n                  backgroundColor: gradingData.latePolicy.level === level ? `linear-gradient(135deg, ${policy.color}15 0%, ${policy.color}25 100%)` : 'white'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.75rem',\n                    marginBottom: '0.75rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: '16px',\n                      height: '16px',\n                      borderRadius: '50%',\n                      backgroundColor: policy.color,\n                      flexShrink: 0\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1657,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    style: {\n                      fontWeight: '600',\n                      fontSize: '1.1rem',\n                      margin: 0,\n                      flex: 1,\n                      color: policy.color\n                    },\n                    children: policy.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1664,\n                    columnNumber: 45\n                  }, this), level !== 'none' && /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '0.9rem',\n                      opacity: 0.8,\n                      fontWeight: '500',\n                      color: policy.color\n                    },\n                    children: [\"(\\xD7\", policy.multiplier === 0 ? '0' : policy.multiplier, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1674,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1656,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '0.9rem',\n                    lineHeight: 1.5,\n                    margin: 0,\n                    color: '#6b7280'\n                  },\n                  children: policy.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1684,\n                  columnNumber: 41\n                }, this)]\n              }, level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1640,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1634,\n              columnNumber: 29\n            }, this), calculateTotalScore().penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: '#fef2f2',\n                border: '1px solid #fecaca',\n                borderRadius: '0.5rem',\n                padding: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  fontWeight: '500',\n                  color: '#991b1b',\n                  marginBottom: '0.5rem'\n                },\n                children: \"\\u26A0\\uFE0F Late Penalty Calculation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1703,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#7f1d1d'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    marginBottom: '0.25rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Raw Score:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1708,\n                    columnNumber: 45\n                  }, this), \" \", Math.round(calculateTotalScore().rawScore * 10) / 10, \" / \", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1707,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    marginBottom: '0.25rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Late Penalty:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1711,\n                    columnNumber: 45\n                  }, this), \" \\xD7\", latePolicyLevels[gradingData.latePolicy.level].multiplier]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    margin: 0\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Final Score:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1714,\n                    columnNumber: 45\n                  }, this), \" \", Math.round(calculateTotalScore().finalScore * 10) / 10, \" / \", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1713,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1706,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1697,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1607,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n              border: '1px solid #bbf7d0',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#15803d',\n                marginBottom: '1rem'\n              },\n              children: \"\\uD83D\\uDCCA Final Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1730,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '3rem',\n                fontWeight: '700',\n                color: '#16a34a',\n                marginBottom: '1rem'\n              },\n              children: [Math.round(calculateTotalScore().finalScore * 10) / 10, /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '1.5rem',\n                  color: '#6b7280'\n                },\n                children: [\"/ \", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1735,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1733,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.25rem',\n                color: '#6b7280',\n                marginBottom: '1rem'\n              },\n              children: [\"(\", Math.round(calculateTotalScore().finalScore / (loadedRubric ? loadedRubric.assignmentInfo.totalPoints || 1 : gradingData.assignment.maxPoints || 1) * 1000) / 10, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1739,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'center',\n                gap: '1rem',\n                flexWrap: 'wrap'\n              },\n              children: [loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  background: '#dcfce7',\n                  color: '#15803d',\n                  padding: '0.25rem 0.75rem',\n                  borderRadius: '1rem'\n                },\n                children: \"\\uD83D\\uDCCB Rubric Assessment Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1744,\n                columnNumber: 37\n              }, this), calculateTotalScore().penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  background: '#fee2e2',\n                  color: '#dc2626',\n                  padding: '0.25rem 0.75rem',\n                  borderRadius: '1rem'\n                },\n                children: \"\\u23F0 Late Penalty Applied\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1755,\n                columnNumber: 37\n              }, this), currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  background: '#dbeafe',\n                  color: '#2563eb',\n                  padding: '0.25rem 0.75rem',\n                  borderRadius: '1rem'\n                },\n                children: \"\\uD83D\\uDC65 Batch Session Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1766,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1742,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1722,\n            columnNumber: 25\n          }, this), currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\n              border: '1px solid #f59e0b',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '2rem',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#92400e',\n                marginBottom: '0.75rem'\n              },\n              children: \"\\uD83D\\uDCBE Save Your Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1789,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#a16207',\n                marginBottom: '1.5rem',\n                fontSize: '0.875rem'\n              },\n              children: \"Save your current grading progress as a draft. You can return to complete it later.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1792,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n                  saveDraft(currentStudent.id, localGradingData);\n                  // Show success feedback\n                  const button = document.activeElement;\n                  const originalText = button.innerHTML;\n                  const originalBg = button.style.background;\n                  button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\n                  button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\n                  setTimeout(() => {\n                    button.innerHTML = originalText;\n                    button.style.background = originalBg;\n                  }, 2000);\n                }\n              },\n              disabled: !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id),\n              style: {\n                display: 'inline-flex',\n                alignItems: 'center',\n                gap: '0.75rem',\n                background: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\n                color: 'white',\n                padding: '1rem 2rem',\n                borderRadius: '0.75rem',\n                border: 'none',\n                cursor: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'pointer' : 'not-allowed',\n                fontSize: '1rem',\n                fontWeight: '600',\n                boxShadow: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\n                transform: 'translateY(0)',\n                transition: 'all 0.2s ease'\n              },\n              onMouseOver: e => {\n                if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n                  e.currentTarget.style.transform = 'translateY(-2px)';\n                  e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\n                }\n              },\n              onMouseOut: e => {\n                if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\n                }\n              },\n              title: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'Save current grading progress' : 'No student selected to save',\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1842,\n                columnNumber: 37\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1795,\n              columnNumber: 33\n            }, this), !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id) && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: '0.75rem',\n                fontSize: '0.75rem',\n                color: '#6b7280'\n              },\n              children: \"Select a student from the Class Manager to enable draft saving\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1846,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1781,\n            columnNumber: 29\n          }, this), loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n              border: '1px solid #bbf7d0',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start',\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  style: {\n                    fontSize: '1.25rem',\n                    fontWeight: '700',\n                    color: '#15803d',\n                    marginBottom: '0.5rem'\n                  },\n                  children: \"\\uD83D\\uDCCB Active Assignment Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1864,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#16a34a',\n                    fontWeight: '600',\n                    fontSize: '1.1rem'\n                  },\n                  children: loadedRubric.assignmentInfo.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1867,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    color: '#059669'\n                  },\n                  children: renderFormattedContent(loadedRubric.assignmentInfo.description)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1870,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1863,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'right'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    color: '#059669'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0.25rem 0'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Weight:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1877,\n                      columnNumber: 49\n                    }, this), \" \", loadedRubric.assignmentInfo.weight, \"% of Final Grade\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1876,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0.25rem 0'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Passing:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1880,\n                      columnNumber: 49\n                    }, this), \" \", loadedRubric.assignmentInfo.passingThreshold, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1879,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: '0.25rem 0'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Total Points:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1883,\n                      columnNumber: 49\n                    }, this), \" \", loadedRubric.assignmentInfo.totalPoints]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1882,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1875,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1874,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1862,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '1.5rem'\n              },\n              children: loadedRubric.criteria.map(criterion => {\n                var _loadedRubric$rubricL, _criterion$levels$cur, _criterion$levels$cur2;\n                const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\n                const showComments = showRubricComments[criterion.id];\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    background: 'white',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    padding: '1.25rem',\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'flex-start',\n                      marginBottom: '1rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        flex: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        style: {\n                          fontSize: '1.125rem',\n                          fontWeight: '600',\n                          color: '#374151'\n                        },\n                        children: [criterion.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                          style: {\n                            color: '#3b82f6',\n                            marginLeft: '0.5rem'\n                          },\n                          children: [\"(\", criterion.maxPoints, \" pts)\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1907,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1905,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          fontSize: '0.875rem',\n                          color: '#6b7280',\n                          marginTop: '0.25rem'\n                        },\n                        children: renderFormattedContent(criterion.description)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1911,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1904,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => toggleRubricComments(criterion.id),\n                      style: {\n                        color: '#3b82f6',\n                        background: 'none',\n                        border: 'none',\n                        fontSize: '0.875rem',\n                        textDecoration: 'underline',\n                        cursor: 'pointer',\n                        marginLeft: '1rem'\n                      },\n                      children: [showComments ? 'Hide' : 'Show', \" Level Details\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1915,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1903,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'grid',\n                      gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n                      gap: '0.5rem',\n                      marginBottom: '1rem'\n                    },\n                    children: loadedRubric.rubricLevels.map(level => {\n                      const isSelected = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) === level.level;\n                      const points = Math.round(criterion.maxPoints * level.multiplier);\n                      return /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => updateRubricGrading(criterion.id, level.level),\n                        style: {\n                          padding: '0.75rem',\n                          borderRadius: '0.5rem',\n                          border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          cursor: 'pointer',\n                          transition: 'all 0.2s ease',\n                          backgroundColor: isSelected ? level.color : 'white',\n                          color: isSelected ? 'white' : '#374151',\n                          transform: isSelected ? 'scale(1.05)' : 'none',\n                          textAlign: 'center'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            fontWeight: '600'\n                          },\n                          children: level.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1960,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            fontSize: '0.75rem',\n                            marginTop: '0.25rem'\n                          },\n                          children: [level.level === 'incomplete' ? '0' : points, \" pts\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1961,\n                          columnNumber: 65\n                        }, this)]\n                      }, level.level, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1943,\n                        columnNumber: 61\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1932,\n                    columnNumber: 49\n                  }, this), showComments && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      background: '#f9fafb',\n                      borderRadius: '0.5rem',\n                      padding: '1rem',\n                      marginBottom: '1rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      style: {\n                        fontWeight: '600',\n                        color: '#374151',\n                        marginBottom: '0.75rem'\n                      },\n                      children: \"Level Descriptions:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1977,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'grid',\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n                        gap: '0.75rem'\n                      },\n                      children: loadedRubric.rubricLevels.map(level => {\n                        var _criterion$levels$lev, _criterion$levels$lev2;\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            background: 'white',\n                            borderRadius: '0.25rem',\n                            border: '1px solid #d1d5db',\n                            borderLeft: `4px solid ${level.color}`,\n                            padding: '0.75rem'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontWeight: '500',\n                              fontSize: '0.875rem',\n                              color: level.color\n                            },\n                            children: level.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1996,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '0.75rem',\n                              color: '#6b7280',\n                              marginBottom: '0.5rem'\n                            },\n                            children: [(_criterion$levels$lev = criterion.levels[level.level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange, \" pts\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1999,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '0.75rem',\n                              color: '#374151'\n                            },\n                            children: renderFormattedContent((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2002,\n                            columnNumber: 69\n                          }, this)]\n                        }, level.level, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1986,\n                          columnNumber: 65\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1980,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1971,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        display: 'block',\n                        fontSize: '0.875rem',\n                        fontWeight: '500',\n                        color: '#374151',\n                        marginBottom: '0.5rem'\n                      },\n                      children: \"Additional Comments:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2013,\n                      columnNumber: 53\n                    }, this), criterion.feedbackLibrary && /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        gap: '0.5rem',\n                        marginBottom: '0.75rem',\n                        flexWrap: 'wrap'\n                      },\n                      children: Object.entries(criterion.feedbackLibrary).map(([category, comments]) => /*#__PURE__*/_jsxDEV(\"select\", {\n                        onChange: e => {\n                          if (e.target.value) {\n                            addCriterionFeedback(criterion.id, e.target.value);\n                            e.target.value = '';\n                          }\n                        },\n                        defaultValue: \"\",\n                        style: {\n                          padding: '0.5rem',\n                          border: '1px solid #d1d5db',\n                          borderRadius: '0.25rem',\n                          fontSize: '0.75rem',\n                          cursor: 'pointer'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: [\"Add \", category, \"...\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2044,\n                          columnNumber: 69\n                        }, this), comments.map((comment, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: comment,\n                          children: renderFormattedContent(comment)\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2046,\n                          columnNumber: 73\n                        }, this))]\n                      }, category, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2027,\n                        columnNumber: 65\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2025,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      value: (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '',\n                      onChange: e => updateRubricGrading(criterion.id, currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel, e.target.value),\n                      style: {\n                        width: '100%',\n                        padding: '0.75rem',\n                        border: '1px solid #d1d5db',\n                        borderRadius: '0.5rem',\n                        fontSize: '0.875rem',\n                        resize: 'none',\n                        minHeight: '80px'\n                      },\n                      rows: \"3\",\n                      placeholder: \"Add specific feedback for this criterion...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2053,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2012,\n                    columnNumber: 49\n                  }, this), (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      marginTop: '0.75rem',\n                      padding: '0.75rem',\n                      background: '#eff6ff',\n                      borderRadius: '0.25rem',\n                      border: '1px solid #bfdbfe'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.875rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Selected Level:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2080,\n                        columnNumber: 61\n                      }, this), \" \", (_loadedRubric$rubricL = loadedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)) === null || _loadedRubric$rubricL === void 0 ? void 0 : _loadedRubric$rubricL.name, ' ', \"(\", (_criterion$levels$cur = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur === void 0 ? void 0 : _criterion$levels$cur.pointRange, \" pts)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2079,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.875rem',\n                        color: '#374151',\n                        marginTop: '0.25rem'\n                      },\n                      children: renderFormattedContent((_criterion$levels$cur2 = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur2 === void 0 ? void 0 : _criterion$levels$cur2.description)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2083,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2072,\n                    columnNumber: 53\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1896,\n                  columnNumber: 45\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1890,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '1.5rem',\n                background: 'white',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                padding: '1rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    style: {\n                      fontSize: '1.125rem',\n                      fontWeight: '600',\n                      color: '#374151'\n                    },\n                    children: \"Rubric Score Summary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2103,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      fontSize: '0.875rem',\n                      color: '#6b7280'\n                    },\n                    children: \"Based on selected levels across all criteria\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2106,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2102,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: 'right'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '1.5rem',\n                      fontWeight: '700',\n                      color: '#3b82f6'\n                    },\n                    children: [Math.round(calculateTotalScore().finalScore * 10) / 10, \"/\", loadedRubric.assignmentInfo.totalPoints]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2111,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '1.125rem',\n                      color: '#6b7280'\n                    },\n                    children: [\"(\", Math.round(calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 1000) / 10, \"%)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2114,\n                    columnNumber: 45\n                  }, this), calculateTotalScore().penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '0.875rem',\n                      color: '#dc2626',\n                      marginTop: '0.25rem'\n                    },\n                    children: [\"Raw: \", Math.round(calculateTotalScore().rawScore * 10) / 10, \" (Late Penalty Applied)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2118,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      color: calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 100 >= loadedRubric.assignmentInfo.passingThreshold ? '#16a34a' : '#dc2626'\n                    },\n                    children: calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 100 >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2122,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2110,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2101,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2094,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1855,\n            columnNumber: 29\n          }, this), loadedRubric && currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\n              border: '2px solid #10b981',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginTop: '2rem',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.25rem',\n                fontWeight: '600',\n                color: '#047857',\n                marginBottom: '1rem'\n              },\n              children: \"Ready to move to the next student?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2147,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#065f46',\n                marginBottom: '1.5rem',\n                fontSize: '0.875rem'\n              },\n              children: \"Choose how to save the current grading before proceeding.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2150,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '1rem',\n                justifyContent: 'center',\n                flexWrap: 'wrap'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleNextStudentAsDraft,\n                style: {\n                  display: 'inline-flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '0.5rem',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: '600',\n                  boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\n                  transition: 'all 0.2s ease'\n                },\n                onMouseOver: e => {\n                  e.target.style.transform = 'translateY(-2px)';\n                  e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n                },\n                onMouseOut: e => {\n                  e.target.style.transform = 'translateY(0)';\n                  e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '1.1rem'\n                  },\n                  children: \"\\uD83D\\uDCDD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2182,\n                  columnNumber: 41\n                }, this), \"Save & Grade Next Student\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2156,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleNextStudentAsFinal,\n                style: {\n                  display: 'inline-flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '0.5rem',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: '600',\n                  boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n                  transition: 'all 0.2s ease'\n                },\n                onMouseOver: e => {\n                  e.target.style.transform = 'translateY(-2px)';\n                  e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\n                },\n                onMouseOut: e => {\n                  e.target.style.transform = 'translateY(0)';\n                  e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '1.1rem'\n                  },\n                  children: \"\\u2705\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2213,\n                  columnNumber: 41\n                }, this), \"Finalize & Grade Next Student\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2187,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2154,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '1rem',\n                padding: '0.75rem',\n                background: 'rgba(255, 255, 255, 0.6)',\n                borderRadius: '0.375rem',\n                fontSize: '0.75rem',\n                color: '#065f46'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Draft:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2226,\n                columnNumber: 37\n              }, this), \" Save progress, can edit later \\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Finalize:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2226,\n                columnNumber: 93\n              }, this), \" Complete grading, ready for student/LMS\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2218,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2139,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '1rem',\n                color: '#374151'\n              },\n              children: \"\\uD83D\\uDCDD General Feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2233,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.75rem',\n                padding: '1.5rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: '1fr',\n                  gap: '1.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      color: '#374151',\n                      marginBottom: '0.5rem'\n                    },\n                    children: \"Overall Comments\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2244,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: gradingData.feedback.general,\n                    onChange: e => setGradingData(prevData => ({\n                      ...prevData,\n                      feedback: {\n                        ...prevData.feedback,\n                        general: e.target.value\n                      }\n                    })),\n                    style: {\n                      width: '100%',\n                      padding: '0.75rem',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.5rem',\n                      fontSize: '0.875rem',\n                      resize: 'none',\n                      minHeight: '100px'\n                    },\n                    rows: \"4\",\n                    placeholder: \"General comments about the assignment...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2253,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2243,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: '1fr 1fr',\n                    gap: '1rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        display: 'block',\n                        fontSize: '0.875rem',\n                        fontWeight: '500',\n                        color: '#374151',\n                        marginBottom: '0.5rem'\n                      },\n                      children: \"Strengths\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2275,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      value: gradingData.feedback.strengths,\n                      onChange: e => setGradingData(prevData => ({\n                        ...prevData,\n                        feedback: {\n                          ...prevData.feedback,\n                          strengths: e.target.value\n                        }\n                      })),\n                      style: {\n                        width: '100%',\n                        padding: '0.75rem',\n                        border: '1px solid #d1d5db',\n                        borderRadius: '0.5rem',\n                        fontSize: '0.875rem',\n                        resize: 'none',\n                        minHeight: '100px'\n                      },\n                      rows: \"4\",\n                      placeholder: \"What the student did well...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2284,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2274,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      style: {\n                        display: 'block',\n                        fontSize: '0.875rem',\n                        fontWeight: '500',\n                        color: '#374151',\n                        marginBottom: '0.5rem'\n                      },\n                      children: \"Areas for Improvement\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2305,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      value: gradingData.feedback.improvements,\n                      onChange: e => setGradingData(prevData => ({\n                        ...prevData,\n                        feedback: {\n                          ...prevData.feedback,\n                          improvements: e.target.value\n                        }\n                      })),\n                      style: {\n                        width: '100%',\n                        padding: '0.75rem',\n                        border: '1px solid #d1d5db',\n                        borderRadius: '0.5rem',\n                        fontSize: '0.875rem',\n                        resize: 'none',\n                        minHeight: '100px'\n                      },\n                      rows: \"4\",\n                      placeholder: \"Suggestions for improvement...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2314,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2304,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2273,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2242,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2236,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2232,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '1rem',\n                color: '#374151'\n              },\n              children: \"\\uD83D\\uDCCE File Attachments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2340,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '2px dashed #d1d5db',\n                borderRadius: '0.5rem',\n                padding: '1.5rem',\n                textAlign: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileInputRef,\n                type: \"file\",\n                multiple: true,\n                onChange: e => handleFileUpload(e.target.files),\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2349,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  background: '#3b82f6',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '0.5rem',\n                  border: 'none',\n                  cursor: 'pointer',\n                  margin: '0 auto'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2371,\n                  columnNumber: 37\n                }, this), \"Add Files\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2356,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: '#6b7280',\n                  marginTop: '0.5rem',\n                  fontSize: '0.875rem'\n                },\n                children: \"Upload images, documents, or other files relevant to the assignment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2374,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2343,\n              columnNumber: 29\n            }, this), gradingData.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  color: '#374151',\n                  marginBottom: '0.75rem'\n                },\n                children: [\"Uploaded Files (\", gradingData.attachments.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2381,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n                  gap: '1rem'\n                },\n                children: gradingData.attachments.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    overflow: 'hidden',\n                    background: 'white'\n                  },\n                  children: [file.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      position: 'relative'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: file.base64Data || URL.createObjectURL(file.file),\n                      alt: file.name,\n                      style: {\n                        width: '100%',\n                        height: '150px',\n                        objectFit: 'cover'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2398,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeAttachment(file.id),\n                      style: {\n                        position: 'absolute',\n                        top: '0.5rem',\n                        right: '0.5rem',\n                        background: '#dc2626',\n                        color: 'white',\n                        borderRadius: '50%',\n                        width: '24px',\n                        height: '24px',\n                        border: 'none',\n                        cursor: 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 12\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2425,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2407,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2397,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      padding: '1rem'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(FileText, {\n                      size: 40,\n                      style: {\n                        color: '#6b7280',\n                        margin: '0 auto 0.5rem auto',\n                        display: 'block'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2430,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2429,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      padding: '0.75rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        fontWeight: '500',\n                        fontSize: '0.875rem',\n                        marginBottom: '0.25rem'\n                      },\n                      children: file.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2434,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        fontSize: '0.75rem',\n                        color: '#6b7280'\n                      },\n                      children: [(file.size / 1024).toFixed(1), \" KB\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2437,\n                      columnNumber: 53\n                    }, this), !file.type.startsWith('image/') && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeAttachment(file.id),\n                      style: {\n                        marginTop: '0.5rem',\n                        color: '#dc2626',\n                        background: 'none',\n                        border: 'none',\n                        fontSize: '0.75rem',\n                        cursor: 'pointer'\n                      },\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2441,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2433,\n                    columnNumber: 49\n                  }, this)]\n                }, file.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2390,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2384,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2380,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                marginBottom: '1rem',\n                color: '#374151'\n              },\n              children: \"\\uD83C\\uDFA5 Video Review Links\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2465,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: 'linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)',\n                border: '1px solid #e9d5ff',\n                borderRadius: '0.5rem',\n                padding: '1.5rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '1rem',\n                  marginBottom: '1rem',\n                  flexWrap: 'wrap'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 1,\n                    minWidth: '200px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      color: '#374151',\n                      marginBottom: '0.25rem'\n                    },\n                    children: \"Video URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2476,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"url\",\n                    value: videoLinkInput,\n                    onChange: e => setVideoLinkInput(e.target.value),\n                    placeholder: \"https://example.com/video...\",\n                    style: {\n                      width: '100%',\n                      padding: '0.75rem',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.5rem',\n                      fontSize: '0.875rem'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2485,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2475,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    minWidth: '150px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      color: '#374151',\n                      marginBottom: '0.25rem'\n                    },\n                    children: \"Title (Optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2500,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: videoTitle,\n                    onChange: e => setVideoTitle(e.target.value),\n                    placeholder: \"Video title\",\n                    style: {\n                      width: '100%',\n                      padding: '0.75rem',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.5rem',\n                      fontSize: '0.875rem'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2509,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2499,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'end'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: addVideoLink,\n                    disabled: !videoLinkInput.trim(),\n                    style: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      background: videoLinkInput.trim() ? '#7c3aed' : '#9ca3af',\n                      color: 'white',\n                      padding: '0.75rem 1rem',\n                      borderRadius: '0.5rem',\n                      border: 'none',\n                      cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Plus, {\n                      size: 18\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2539,\n                      columnNumber: 45\n                    }, this), \"Add Video\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2524,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2523,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2474,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2468,\n              columnNumber: 29\n            }, this), gradingData.videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontWeight: '600',\n                  color: '#374151',\n                  marginBottom: '0.75rem'\n                },\n                children: [\"Added Video Links (\", gradingData.videoLinks.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2548,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: '1rem'\n                },\n                children: gradingData.videoLinks.map(videoLink => /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    overflow: 'hidden'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      background: '#f9fafb',\n                      padding: '1rem',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.75rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          width: '32px',\n                          height: '32px',\n                          background: '#7c3aed',\n                          borderRadius: '0.25rem',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Video, {\n                          size: 16,\n                          style: {\n                            color: 'white'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2575,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2566,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          style: {\n                            fontWeight: '500',\n                            color: '#374151'\n                          },\n                          children: videoLink.title\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2578,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          style: {\n                            fontSize: '0.875rem',\n                            color: '#6b7280'\n                          },\n                          children: \"External Link\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2579,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2577,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2565,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.5rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                        href: videoLink.url,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        style: {\n                          background: '#3b82f6',\n                          color: 'white',\n                          padding: '0.25rem 0.75rem',\n                          borderRadius: '0.25rem',\n                          fontSize: '0.875rem',\n                          textDecoration: 'none'\n                        },\n                        children: \"Open Link\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2583,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => removeVideoLink(videoLink.id),\n                        style: {\n                          color: '#dc2626',\n                          background: 'none',\n                          border: 'none',\n                          cursor: 'pointer',\n                          padding: '0.25rem'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(X, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2608,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2598,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2582,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2558,\n                    columnNumber: 49\n                  }, this)\n                }, videoLink.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2553,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2551,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2547,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2464,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1036,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1035,\n    columnNumber: 9\n  }, this);\n};\n_s(GradingTemplate, \"QBSa1nxBSL+BXZHaE2wcQOBCTZQ=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Upload","FileText","Video","Plus","X","Save","FileDown","Bot","ChevronDown","ChevronUp","ArrowLeft","ArrowRight","Users","PlayCircle","CheckCircle","Clock","SkipForward","SkipBack","Pause","RotateCcw","useAssessment","jsxDEV","_jsxDEV","Fragment","_Fragment","sampleRubric","assignmentInfo","title","description","weight","passingThreshold","totalPoints","rubricLevels","level","name","color","multiplier","criteria","id","maxPoints","levels","incomplete","pointRange","unacceptable","developing","acceptable","emerging","accomplished","exceptional","feedbackLibrary","strengths","improvements","general","GradingTemplate","_s","_sharedGradingData$co","_sharedGradingData$co2","_sharedGradingData$co3","_sharedGradingData$co4","_classList$students","sharedRubric","sharedCourseDetails","setSharedCourseDetails","gradingData","sharedGradingData","setGradingData","setSharedGradingData","updateStudentInfo","updateCourseInfo","updateAssignmentInfo","clearGradingFormData","classList","setClassList","setCurrentStudent","gradingSession","setGradingSession","nextStudentInSession","previousStudentInSession","updateGradingSession","initializeGradingSession","setActiveTab","currentStudent","saveDraft","loadDraft","saveFinalGrade","loadFinalGrade","finalGrades","getGradeStatus","renderFormattedContent","htmlContent","textContent","replace","trim","localGradingData","setLocalGradingData","draft","student","email","course","code","instructor","term","assignment","dueDate","feedback","attachments","videoLinks","latePolicy","penaltyApplied","metadata","gradedBy","gradedDate","aiAssisted","rubricIntegrated","rubricGrading","loadedRubric","setLoadedRubric","showRubricComments","setShowRubricComments","showHeaderGuide","setShowHeaderGuide","fileInputRef","moduleInputRef","rubricInputRef","videoLinkInput","setVideoLinkInput","videoTitle","setVideoTitle","console","log","needsSync","prev","timeoutId","setTimeout","clearTimeout","status","saved","resetGradingForm","latePolicyLevels","none","within24","after24","initialGrading","forEach","criterion","criterionId","selectedLevel","customComments","prevData","_loadedRubric$assignm","_loadedRubric$assignm2","Object","keys","length","gradeStatus","savedData","calculateTotalScore","rawScore","values","reduce","total","grading","find","c","l","latePolicyLevel","finalScore","latePolicyDescription","updateLatePolicy","updateRubricGrading","comments","existingGrading","existingComments","newRubricState","addCriterionFeedback","comment","currentGrading","currentComments","newComments","toggleRubricComments","addVideoLink","Date","now","url","removeVideoLink","filter","link","handleFileUpload","files","newAttachments","Array","from","map","file","Math","random","size","type","Promise","all","attachment","resolve","startsWith","reader","FileReader","onload","e","base64Data","target","result","readAsDataURL","then","processedAttachments","removeAttachment","att","handleNextStudent","handleNextStudentAsDraft","success","alert","window","scrollTo","top","behavior","handleNextStudentAsFinal","initialRubricGrading","_sharedCourseDetails$","_sharedCourseDetails$2","handlePreviousStudent","getCurrentStudentInfo","active","currentIndex","currentStudentIndex","totalStudents","students","position","isFirst","isLast","currentStudentInfo","generateStudentReportHTML","scoreCalculation","totalScore","percentage","toFixed","attachmentsHTML","index","join","videoLinksHTML","rubricTableHTML","points","levelDescription","additionalComments","round","entries","t","charAt","toUpperCase","slice","toLocaleDateString","toLocaleTimeString","JSON","stringify","exportAIFeedbackData","_localGradingData$stu","_loadedRubric$assignm3","_loadedRubric$assignm4","_loadedRubric$assignm5","_loadedRubric$assignm6","_loadedRubric$assignm7","getLetterGrade","criteriaPerformance","earnedPoints","criterionPercentage","push","levelName","aiGradeData","firstName","split","lastName","fullName","gradeData","overallScore","overallPercentage","letterGrade","passed","latePenaltyApplied","existingFeedback","toISOString","rubricUsed","totalCriteria","exportedForAI","dataStr","dataBlob","Blob","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","generateAIFeedbackPrompt","studentFirstName","courseName","assignmentTitle","getStudentLevel","courseCode","includes","prompt","promptBlob","exportForAIFeedback","error","exportToHTML","htmlBlob","exportToPDF","html","printWindow","open","write","close","focus","print","getEffectiveCourseData","courseMetadata","professors","pullCourseDataFromClassList","newCourseInfo","isCourseDataMissing","style","minHeight","background","padding","children","maxWidth","margin","borderRadius","boxShadow","display","justifyContent","alignItems","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","gap","onClick","border","cursor","backgroundColor","marginBottom","width","height","textAlign","disabled","overflow","transition","effectiveData","gridTemplateColumns","placeholder","value","onChange","newValue","readOnly","parseInt","paddingLeft","policy","transform","flexShrink","flex","opacity","lineHeight","flexWrap","button","activeElement","originalText","innerHTML","originalBg","onMouseOver","currentTarget","onMouseOut","marginTop","flexDirection","_loadedRubric$rubricL","_criterion$levels$cur","_criterion$levels$cur2","showComments","marginLeft","textDecoration","isSelected","_criterion$levels$lev","_criterion$levels$lev2","borderLeft","category","defaultValue","idx","resize","rows","ref","multiple","_fileInputRef$current","current","src","alt","objectFit","right","minWidth","videoLink","rel","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/ClassListManager.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n    Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot,\r\n    ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle,\r\n    CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw\r\n} from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\n\r\n// Sample comprehensive rubric from the PDF\r\nconst sampleRubric = {\r\n    assignmentInfo: {\r\n        title: \"Digital Portfolio Project - Final Showcase\",\r\n        description: \"Students will create a comprehensive digital portfolio showcasing their best work from the semester, including 5-7 completed projects with professional presentation, artist statements, and technical documentation. The portfolio must demonstrate growth, technical proficiency, and creative vision suitable for industry presentation.\",\r\n        weight: 30,\r\n        passingThreshold: 65,\r\n        totalPoints: 120\r\n    },\r\n    rubricLevels: [\r\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\r\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\r\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\r\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\r\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\r\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\r\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\r\n    ],\r\n    criteria: [\r\n        {\r\n            id: 'technical-proficiency',\r\n            name: 'Technical Proficiency & Craft',\r\n            description: 'Demonstration of technical skills, software mastery, and attention to detail in execution',\r\n            maxPoints: 35,\r\n            weight: 29,\r\n            levels: {\r\n                incomplete: { description: 'No technical work submitted or files corrupted/unusable.', pointRange: '0' },\r\n                unacceptable: { description: 'Severe technical issues: poor resolution, improper file formats, broken links, or significant software handling problems that interfere with viewing work.', pointRange: '8-12' },\r\n                developing: { description: 'Basic technical competency shown but with noticeable issues: inconsistent quality, some resolution problems, or workflow inefficiencies. Software use shows beginner-level understanding.', pointRange: '16-21' },\r\n                acceptable: { description: 'Solid technical foundation with appropriate file formats, good resolution, and functional navigation. Demonstrates competent use of course software with minimal technical distractions.', pointRange: '22-26' },\r\n                emerging: { description: 'Strong technical execution with excellent file management, optimized formats, and smooth user experience. Shows advanced software techniques and professional workflow habits.', pointRange: '27-30' },\r\n                accomplished: { description: 'High-level technical mastery with innovative use of tools, excellent optimization, and seamless integration of multiple software platforms. Technical choices enhance artistic vision.', pointRange: '31-33' },\r\n                exceptional: { description: 'Exceptional technical virtuosity demonstrating mastery of advanced techniques, custom solutions, and industry-standard workflows. Technical execution elevates the artistic content to professional levels.', pointRange: '34-35' }\r\n            },\r\n            feedbackLibrary: {\r\n                strengths: [\r\n                    'Excellent file management and organization',\r\n                    'Professional-quality technical execution',\r\n                    'Innovative use of software tools',\r\n                    'Seamless integration across platforms'\r\n                ],\r\n                improvements: [\r\n                    'Optimize file sizes for web delivery',\r\n                    'Improve resolution consistency',\r\n                    'Review proper file naming conventions',\r\n                    'Consider mobile responsiveness'\r\n                ],\r\n                general: [\r\n                    'Technical skills show strong development',\r\n                    'Consider exploring advanced techniques',\r\n                    'Portfolio demonstrates software competency'\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            id: 'creative-vision',\r\n            name: 'Creative Vision & Artistic Development',\r\n            description: 'Originality, artistic voice, conceptual depth, and evolution of creative ideas',\r\n            maxPoints: 30,\r\n            weight: 25,\r\n            levels: {\r\n                incomplete: { description: 'No creative work presented or completely derivative.', pointRange: '0' },\r\n                unacceptable: { description: 'Limited creativity with heavy reliance on tutorials or templates. Little evidence of personal artistic voice or original thinking.', pointRange: '7-10' },\r\n                developing: { description: 'Some original ideas present but inconsistent development. Creative choices show potential but lack depth or coherent vision.', pointRange: '13-17' },\r\n                acceptable: { description: 'Clear creative direction with personal style emerging. Shows good problem-solving and conceptual thinking with adequate originality.', pointRange: '18-22' },\r\n                emerging: { description: 'Strong creative vision with distinctive personal style. Demonstrates innovative thinking and sophisticated conceptual development.', pointRange: '23-26' },\r\n                accomplished: { description: 'Exceptional creative development with unique artistic voice. Shows mastery of design principles and innovative approaches to visual communication.', pointRange: '27-29' },\r\n                exceptional: { description: 'Outstanding creative vision that pushes boundaries and demonstrates professional-level artistic development. Highly original and conceptually sophisticated.', pointRange: '30' }\r\n            },\r\n            feedbackLibrary: {\r\n                strengths: [\r\n                    'Strong personal artistic voice',\r\n                    'Innovative conceptual approaches',\r\n                    'Excellent visual storytelling',\r\n                    'Distinctive creative style'\r\n                ],\r\n                improvements: [\r\n                    'Develop concepts more thoroughly',\r\n                    'Push creative boundaries further',\r\n                    'Strengthen visual hierarchy',\r\n                    'Consider audience engagement'\r\n                ],\r\n                general: [\r\n                    'Creative development shows strong growth',\r\n                    'Portfolio demonstrates artistic maturity',\r\n                    'Conceptual thinking is well-developed'\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            id: 'portfolio-presentation',\r\n            name: 'Portfolio Presentation & Organization',\r\n            description: 'Professional presentation, layout design, navigation, and overall user experience',\r\n            maxPoints: 25,\r\n            weight: 21,\r\n            levels: {\r\n                incomplete: { description: 'No organized presentation or completely inaccessible.', pointRange: '0' },\r\n                unacceptable: { description: 'Poor organization with confusing navigation, inconsistent layout, or significant usability issues.', pointRange: '6-9' },\r\n                developing: { description: 'Basic organization present but with layout inconsistencies or navigation problems. Shows understanding of presentation but needs refinement.', pointRange: '11-15' },\r\n                acceptable: { description: 'Well-organized portfolio with clear navigation and consistent presentation. Professional appearance with good user experience.', pointRange: '16-19' },\r\n                emerging: { description: 'Excellent presentation with sophisticated layout design, intuitive navigation, and engaging user interface.', pointRange: '20-22' },\r\n                accomplished: { description: 'Exceptional presentation quality with innovative design solutions and seamless user experience. Portfolio itself demonstrates design mastery.', pointRange: '23-24' },\r\n                exceptional: { description: 'Outstanding presentation that sets new standards for portfolio design. Every aspect contributes to a cohesive, professional brand experience.', pointRange: '25' }\r\n            },\r\n            feedbackLibrary: {\r\n                strengths: [\r\n                    'Excellent visual hierarchy',\r\n                    'Professional layout design',\r\n                    'Intuitive navigation system',\r\n                    'Consistent branding throughout'\r\n                ],\r\n                improvements: [\r\n                    'Improve loading times',\r\n                    'Enhance mobile responsiveness',\r\n                    'Clarify navigation structure',\r\n                    'Strengthen visual consistency'\r\n                ],\r\n                general: [\r\n                    'Portfolio presentation is professional',\r\n                    'Layout demonstrates design understanding',\r\n                    'User experience is well-considered'\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            id: 'written-reflection',\r\n            name: 'Written Reflection & Artist Statements',\r\n            description: 'Quality of written analysis, self-reflection, and articulation of artistic process',\r\n            maxPoints: 20,\r\n            weight: 17,\r\n            levels: {\r\n                incomplete: { description: 'No written reflection provided.', pointRange: '0' },\r\n                unacceptable: { description: 'Minimal or superficial writing with poor grammar and little insight into artistic process.', pointRange: '5-7' },\r\n                developing: { description: 'Basic reflection with some insight but lacking depth or clear articulation of artistic development.', pointRange: '9-12' },\r\n                acceptable: { description: 'Good written reflection that demonstrates understanding of artistic process and clear communication of ideas.', pointRange: '13-15' },\r\n                emerging: { description: 'Strong written analysis with thoughtful reflection on artistic growth and articulate discussion of creative decisions.', pointRange: '16-17' },\r\n                accomplished: { description: 'Exceptional written work that demonstrates deep understanding of artistic practice and sophisticated communication skills.', pointRange: '18-19' },\r\n                exceptional: { description: 'Outstanding written reflection that contributes significantly to understanding of artistic development and creative practice.', pointRange: '20' }\r\n            },\r\n            feedbackLibrary: {\r\n                strengths: [\r\n                    'Thoughtful artistic reflection',\r\n                    'Clear communication of ideas',\r\n                    'Strong analytical thinking',\r\n                    'Professional writing quality'\r\n                ],\r\n                improvements: [\r\n                    'Develop ideas more thoroughly',\r\n                    'Improve grammar and syntax',\r\n                    'Add more specific examples',\r\n                    'Strengthen conclusion'\r\n                ],\r\n                general: [\r\n                    'Written work shows good reflection',\r\n                    'Communication skills are developing',\r\n                    'Artistic awareness is evident'\r\n                ]\r\n            }\r\n        },\r\n        {\r\n            id: 'professional-readiness',\r\n            name: 'Professional Readiness & Industry Standards',\r\n            description: 'Adherence to professional standards, industry practices, and career preparation',\r\n            maxPoints: 10,\r\n            weight: 8,\r\n            levels: {\r\n                incomplete: { description: 'No evidence of professional preparation.', pointRange: '0' },\r\n                unacceptable: { description: 'Little attention to professional standards or industry expectations.', pointRange: '2-3' },\r\n                developing: { description: 'Some awareness of professional practices but inconsistent application.', pointRange: '4-6' },\r\n                acceptable: { description: 'Good understanding of professional standards with appropriate presentation for industry viewing.', pointRange: '7-8' },\r\n                emerging: { description: 'Strong professional preparation with portfolio ready for industry presentation.', pointRange: '8-9' },\r\n                accomplished: { description: 'Exceptional professional readiness exceeding industry standards.', pointRange: '9-10' },\r\n                exceptional: { description: 'Outstanding professional preparation that demonstrates career readiness.', pointRange: '10' }\r\n            },\r\n            feedbackLibrary: {\r\n                strengths: [\r\n                    'Industry-ready presentation',\r\n                    'Professional attention to detail',\r\n                    'Strong career preparation',\r\n                    'Excellent professional standards'\r\n                ],\r\n                improvements: [\r\n                    'Research industry standards',\r\n                    'Improve professional presentation',\r\n                    'Add career preparation elements',\r\n                    'Consider industry feedback'\r\n                ],\r\n                general: [\r\n                    'Shows strong professional development',\r\n                    'Portfolio demonstrates career readiness',\r\n                    'Professional standards are evident'\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n};\r\n\r\nconst GradingTemplate = () => {\r\n    // Get shared context - ENHANCED with new functions\r\n    const {\r\n        sharedRubric,\r\n        sharedCourseDetails,\r\n        setSharedCourseDetails,\r\n        gradingData: sharedGradingData,\r\n        setGradingData: setSharedGradingData,\r\n        updateStudentInfo,\r\n        updateCourseInfo,\r\n        updateAssignmentInfo,\r\n        clearGradingFormData,\r\n        classList,\r\n        setClassList,\r\n        setCurrentStudent,\r\n        gradingSession,\r\n        setGradingSession,\r\n        nextStudentInSession,\r\n        previousStudentInSession,\r\n        updateGradingSession,\r\n        initializeGradingSession,\r\n        setActiveTab,\r\n        currentStudent,\r\n        saveDraft,\r\n        loadDraft,\r\n        // NEW: Add the draft/final grade functions\r\n        saveFinalGrade,\r\n        loadFinalGrade,\r\n        finalGrades,\r\n        getGradeStatus\r\n    } = useAssessment();\r\n\r\n    // Helper function to convert HTML content to readable text format\r\n    const renderFormattedContent = (htmlContent) => {\r\n        if (!htmlContent) return '';\r\n\r\n        // Convert basic HTML to readable text format\r\n        let textContent = htmlContent\r\n            .replace(/<br\\s*\\/?>/gi, '\\n')\r\n            .replace(/<\\/p>/gi, '\\n')\r\n            .replace(/<p[^>]*>/gi, '')\r\n            .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\r\n            .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\r\n            .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\r\n            .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\r\n            .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\r\n            .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\r\n            .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\r\n            .replace(/<\\/ul>/gi, '\\n')\r\n            .replace(/<ul[^>]*>/gi, '')\r\n            .replace(/<\\/ol>/gi, '\\n')\r\n            .replace(/<ol[^>]*>/gi, '')\r\n            .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\r\n            .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\r\n            .trim();\r\n\r\n        return textContent;\r\n    };\r\n\r\n    // State for all grading data - initialize from shared context or defaults\r\n    const [localGradingData, setLocalGradingData] = useState(() => {\r\n        // 1) Try loading a saved draft first\r\n        if (currentStudent?.id) {\r\n            const draft = loadDraft(currentStudent.id);\r\n            if (draft) {\r\n                return draft;\r\n            }\r\n        }\r\n        // 2) If rubric was just transferred, use that\r\n        if (sharedGradingData) {\r\n            return { ...sharedGradingData, student: currentStudent || sharedGradingData.student };\r\n        }\r\n        // 3) Otherwise, start fresh for this student\r\n        return {\r\n            student: currentStudent || { name: '', id: '', email: '' },\r\n            course: sharedCourseDetails?.course || { code: '', name: '', instructor: '', term: '' },\r\n            assignment: sharedCourseDetails?.assignment || { name: '', dueDate: '', maxPoints: 100 },\r\n            feedback: { general: '', strengths: '', improvements: '' },\r\n            attachments: [],\r\n            videoLinks: [],\r\n            latePolicy: { level: 'none', penaltyApplied: false },\r\n            metadata: {\r\n                gradedBy: '',\r\n                gradedDate: '',\r\n                aiAssisted: false,\r\n                rubricIntegrated: false\r\n            },\r\n            rubricGrading: {}\r\n        };\r\n    });\r\n\r\n    // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\r\n    const gradingData = localGradingData;\r\n    const setGradingData = setLocalGradingData;\r\n\r\n    // Rubric-specific state\r\n    const [loadedRubric, setLoadedRubric] = useState(() => {\r\n        return sharedRubric || sampleRubric;\r\n    });\r\n    const [showRubricComments, setShowRubricComments] = useState({});\r\n    const [showHeaderGuide, setShowHeaderGuide] = useState(false);\r\n\r\n    const fileInputRef = useRef(null);\r\n    const moduleInputRef = useRef(null);\r\n    const rubricInputRef = useRef(null);\r\n\r\n    // Video link management\r\n    const [videoLinkInput, setVideoLinkInput] = useState('');\r\n    const [videoTitle, setVideoTitle] = useState('');\r\n\r\n    // **FIXED: Enhanced shared data synchronization**\r\n    // Sync with sharedGradingData (updated by initializeGradingSession)\r\n    useEffect(() => {\r\n        if (!sharedGradingData) return;\r\n\r\n        console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\r\n\r\n        // Only update course info if it's not empty and different from current\r\n        if (sharedGradingData.course &&\r\n            (sharedGradingData.course.code || sharedGradingData.course.name ||\r\n                sharedGradingData.course.instructor || sharedGradingData.course.term)) {\r\n\r\n            const needsSync =\r\n                sharedGradingData.course.code !== localGradingData.course.code ||\r\n                sharedGradingData.course.name !== localGradingData.course.name ||\r\n                sharedGradingData.course.instructor !== localGradingData.course.instructor ||\r\n                sharedGradingData.course.term !== localGradingData.course.term;\r\n\r\n            if (needsSync) {\r\n                console.log('✅ Syncing course data from shared context to local state');\r\n                setLocalGradingData(prev => ({\r\n                    ...prev,\r\n                    course: {\r\n                        code: sharedGradingData.course.code || prev.course.code,\r\n                        name: sharedGradingData.course.name || prev.course.name,\r\n                        instructor: sharedGradingData.course.instructor || prev.course.instructor,\r\n                        term: sharedGradingData.course.term || prev.course.term\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n    }, [sharedGradingData?.course?.code, sharedGradingData?.course?.name,\r\n    sharedGradingData?.course?.instructor, sharedGradingData?.course?.term]);\r\n\r\n    // Auto-save to shared context whenever gradingData changes (with debounce)\r\n    useEffect(() => {\r\n        const timeoutId = setTimeout(() => {\r\n            setSharedGradingData(gradingData);\r\n            setSharedCourseDetails({\r\n                student: gradingData.student,\r\n                course: gradingData.course,\r\n                assignment: gradingData.assignment\r\n            });\r\n        }, 1000);\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\r\n\r\n    // ── When we get new sharedCourseDetails, merge them in\r\n    useEffect(() => {\r\n        if (!sharedCourseDetails) return;\r\n        setLocalGradingData(prev => ({\r\n            ...prev,\r\n            student: sharedCourseDetails.student || prev.student,\r\n            course: sharedCourseDetails.course || prev.course,\r\n            assignment: sharedCourseDetails.assignment || prev.assignment\r\n        }));\r\n    }, [sharedCourseDetails]);\r\n\r\n    // Load shared data when available\r\n    useEffect(() => {\r\n        if (sharedRubric) {\r\n            setLoadedRubric(sharedRubric);\r\n        }\r\n    }, [sharedRubric]);\r\n\r\n    // ── When student changes, load any saved draft/final but keep course+assignment\r\n    useEffect(() => {\r\n        if (!currentStudent?.id) return;\r\n\r\n        const status = getGradeStatus(currentStudent.id);\r\n        let saved = null;\r\n        if (status === 'final' && loadFinalGrade) {\r\n            saved = loadFinalGrade(currentStudent.id);\r\n        } else if (status === 'draft') {\r\n            saved = loadDraft(currentStudent.id);\r\n        }\r\n\r\n        if (saved) {\r\n            setLocalGradingData(prev => ({\r\n                ...saved,\r\n                student: currentStudent,\r\n                course: prev.course,\r\n                assignment: prev.assignment,\r\n                metadata: prev.metadata\r\n            }));\r\n            setVideoLinkInput('');\r\n            setVideoTitle('');\r\n        } else {\r\n            resetGradingForm();\r\n        }\r\n    }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\r\n\r\n\r\n    // Late Policy Levels\r\n    const latePolicyLevels = {\r\n        none: {\r\n            name: 'On Time',\r\n            multiplier: 1.0,\r\n            description: 'Assignment submitted on or before due date and time - marked out of 100%',\r\n            color: '#16a34a'\r\n        },\r\n        within24: {\r\n            name: '1-24 Hours Late',\r\n            multiplier: 0.8,\r\n            description: 'Assignment received within 24 hours of due date - 20% reduction (marked out of 80%)',\r\n            color: '#ea580c'\r\n        },\r\n        after24: {\r\n            name: 'More than 24 Hours Late',\r\n            multiplier: 0.0,\r\n            description: 'Assignment received after 24 hours from due date - mark of zero (0)',\r\n            color: '#dc2626'\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (loadedRubric) {\r\n            const initialGrading = {};\r\n            loadedRubric.criteria.forEach(criterion => {\r\n                initialGrading[criterion.id] = {\r\n                    criterionId: criterion.id,\r\n                    selectedLevel: null,\r\n                    customComments: ''\r\n                };\r\n            });\r\n\r\n            setLocalGradingData(prevData => ({\r\n                ...prevData,\r\n                assignment: {\r\n                    ...prevData.assignment,\r\n                    name: loadedRubric.assignmentInfo?.title || prevData.assignment.name,\r\n                    maxPoints: loadedRubric.assignmentInfo?.totalPoints || prevData.assignment.maxPoints\r\n                },\r\n                rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\r\n                metadata: {\r\n                    ...prevData.metadata,\r\n                    rubricIntegrated: true\r\n                }\r\n            }));\r\n        }\r\n    }, [loadedRubric]);\r\n\r\n    useEffect(() => {\r\n        if (currentStudent?.id) {\r\n            console.log('🔍 Loading data for student:', currentStudent.name);\r\n            const gradeStatus = getGradeStatus(currentStudent.id);\r\n            console.log('📊 Grade status:', gradeStatus);\r\n            let savedData = null;\r\n\r\n            if (gradeStatus === 'final') {\r\n                savedData = loadFinalGrade ? loadFinalGrade(currentStudent.id) : null;\r\n                console.log('📋 Loading final grade data:', savedData ? 'FOUND' : 'NOT FOUND');\r\n            } else if (gradeStatus === 'draft') {\r\n                savedData = loadDraft(currentStudent.id);\r\n                console.log('📝 Loading draft data:', savedData ? 'FOUND' : 'NOT FOUND');\r\n            }\r\n\r\n            if (savedData) {\r\n                console.log('✅ Successfully loaded saved grade data');\r\n                setLocalGradingData(prevData => ({\r\n                    ...savedData,\r\n                    course: prevData.course,\r\n                    assignment: prevData.assignment,\r\n                    student: currentStudent,\r\n                    metadata: prevData.metadata\r\n                }));\r\n                setVideoLinkInput('');\r\n                setVideoTitle('');\r\n            } else {\r\n                console.log('🆕 No saved data found, starting fresh');\r\n                resetGradingForm();\r\n            }\r\n        }\r\n    }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\r\n\r\n\r\n    const calculateTotalScore = () => {\r\n        let rawScore = 0;\r\n        if (loadedRubric && gradingData.rubricGrading) {\r\n            rawScore = Object.values(gradingData.rubricGrading).reduce((total, grading) => {\r\n                const criterion = loadedRubric.criteria.find(c => c.id === grading.criterionId);\r\n                if (criterion && grading.selectedLevel) {\r\n                    const level = loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel);\r\n                    if (level) {\r\n                        return total + (criterion.maxPoints * level.multiplier);\r\n                    }\r\n                }\r\n                return total;\r\n            }, 0);\r\n        }\r\n        const latePolicyLevel = latePolicyLevels[gradingData.latePolicy.level];\r\n        const finalScore = rawScore * latePolicyLevel.multiplier;\r\n        return {\r\n            rawScore: rawScore,\r\n            finalScore: finalScore,\r\n            penaltyApplied: gradingData.latePolicy.level !== 'none',\r\n            latePolicyDescription: latePolicyLevel.description\r\n        };\r\n    };\r\n\r\n    const updateLatePolicy = (level) => {\r\n        setGradingData(prevData => ({\r\n            ...prevData,\r\n            latePolicy: {\r\n                level: level,\r\n                penaltyApplied: level !== 'none'\r\n            }\r\n        }));\r\n    };\r\n\r\n    const updateRubricGrading = (criterionId, level, comments = null) => {\r\n        setLocalGradingData(prevData => {\r\n            const existingGrading = prevData.rubricGrading[criterionId];\r\n            const existingComments = existingGrading?.customComments || '';\r\n            const newRubricState = {\r\n                ...prevData.rubricGrading,\r\n                [criterionId]: {\r\n                    criterionId,\r\n                    selectedLevel: level,\r\n                    customComments: comments !== null ? comments : existingComments\r\n                }\r\n            };\r\n            return {\r\n                ...prevData,\r\n                rubricGrading: newRubricState\r\n            };\r\n        });\r\n    };\r\n\r\n    const addCriterionFeedback = (criterionId, comment) => {\r\n        setLocalGradingData(prevData => {\r\n            const currentGrading = prevData.rubricGrading[criterionId];\r\n            const currentComments = currentGrading?.customComments || '';\r\n            const newComments = currentComments ? `${currentComments}\\n• ${comment}` : `• ${comment}`;\r\n            const newRubricState = {\r\n                ...prevData.rubricGrading,\r\n                [criterionId]: {\r\n                    ...currentGrading,\r\n                    criterionId,\r\n                    selectedLevel: currentGrading?.selectedLevel || null,\r\n                    customComments: newComments\r\n                }\r\n            };\r\n            return {\r\n                ...prevData,\r\n                rubricGrading: newRubricState\r\n            };\r\n        });\r\n    };\r\n\r\n    const toggleRubricComments = (criterionId) => {\r\n        setShowRubricComments(prev => ({\r\n            ...prev,\r\n            [criterionId]: !prev[criterionId]\r\n        }));\r\n    };\r\n\r\n    const addVideoLink = () => {\r\n        if (videoLinkInput.trim()) {\r\n            setGradingData(prevData => ({\r\n                ...prevData,\r\n                videoLinks: [...prevData.videoLinks, {\r\n                    id: Date.now(),\r\n                    url: videoLinkInput.trim(),\r\n                    title: videoTitle.trim() || 'Video Link'\r\n                }]\r\n            }));\r\n            setVideoLinkInput('');\r\n            setVideoTitle('');\r\n        }\r\n    };\r\n\r\n    const removeVideoLink = (id) => {\r\n        setGradingData(prevData => ({\r\n            ...prevData,\r\n            videoLinks: prevData.videoLinks.filter(link => link.id !== id)\r\n        }));\r\n    };\r\n\r\n    const handleFileUpload = (files) => {\r\n        const newAttachments = Array.from(files).map(file => ({\r\n            id: Date.now() + Math.random(),\r\n            name: file.name,\r\n            size: file.size,\r\n            type: file.type,\r\n            file: file\r\n        }));\r\n\r\n        Promise.all(newAttachments.map(attachment => {\r\n            return new Promise((resolve) => {\r\n                if (attachment.type.startsWith('image/')) {\r\n                    const reader = new FileReader();\r\n                    reader.onload = (e) => {\r\n                        attachment.base64Data = e.target.result;\r\n                        resolve(attachment);\r\n                    };\r\n                    reader.readAsDataURL(attachment.file);\r\n                } else {\r\n                    resolve(attachment);\r\n                }\r\n            });\r\n        })).then(processedAttachments => {\r\n            setGradingData(prevData => ({\r\n                ...prevData,\r\n                attachments: [...prevData.attachments, ...processedAttachments]\r\n            }));\r\n        });\r\n    };\r\n\r\n    const removeAttachment = (id) => {\r\n        setGradingData(prevData => ({\r\n            ...prevData,\r\n            attachments: prevData.attachments.filter(att => att.id !== id)\r\n        }));\r\n    };\r\n\r\n    const handleNextStudent = () => {\r\n        handleNextStudentAsDraft();\r\n    };\r\n\r\n    const handleNextStudentAsDraft = () => {\r\n        if (currentStudent?.id) {\r\n            console.log('💾 Saving as draft for student:', currentStudent.name);\r\n            saveDraft(currentStudent.id, localGradingData);\r\n        }\r\n        const success = nextStudentInSession('draft');\r\n        if (!success) {\r\n            alert('Grading session completed! All students have been graded.');\r\n            setActiveTab('class-manager');\r\n        } else {\r\n            resetGradingForm();\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            console.log('✅ Draft saved, moved to next student (and scrolled to top)');\r\n        }\r\n    };\r\n\r\n    const handleNextStudentAsFinal = () => {\r\n        if (currentStudent?.id) {\r\n            console.log('✅ Finalizing grade for student:', currentStudent.name);\r\n            saveFinalGrade(currentStudent.id, localGradingData);\r\n        }\r\n        const success = nextStudentInSession('final');\r\n        if (!success) {\r\n            alert('Grading session completed! All students have been graded.');\r\n            setActiveTab('class-manager');\r\n        } else {\r\n            resetGradingForm();\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\r\n        }\r\n    };\r\n\r\n    const resetGradingForm = () => {\r\n        const initialRubricGrading = {};\r\n        if (loadedRubric) {\r\n            loadedRubric.criteria.forEach(criterion => {\r\n                initialRubricGrading[criterion.id] = {\r\n                    criterionId: criterion.id,\r\n                    selectedLevel: null,\r\n                    customComments: ''\r\n                };\r\n            });\r\n        }\r\n        setLocalGradingData(prev => ({\r\n            ...prev,\r\n            course: sharedCourseDetails?.course ?? prev.course,\r\n            assignment: sharedCourseDetails?.assignment ?? prev.assignment,\r\n            feedback: { general: '', strengths: '', improvements: '' },\r\n            attachments: [],\r\n            videoLinks: [],\r\n            latePolicy: { level: 'none', penaltyApplied: false },\r\n            rubricGrading: initialRubricGrading\r\n        }));\r\n    };\r\n\r\n    const handlePreviousStudent = () => {\r\n        if (currentStudent?.id) {\r\n            saveDraft(currentStudent.id, localGradingData);\r\n        }\r\n        const success = previousStudentInSession();\r\n        if (!success) {\r\n            console.log('Already at first student or no active session');\r\n        }\r\n    };\r\n\r\n    const getCurrentStudentInfo = () => {\r\n        if (!classList || !gradingSession?.active || !gradingSession.currentStudent) {\r\n            return null;\r\n        }\r\n        const currentIndex = gradingSession.currentStudentIndex;\r\n        const totalStudents = classList.students.length;\r\n        const student = gradingSession.currentStudent;\r\n        return {\r\n            student,\r\n            position: currentIndex + 1,\r\n            total: totalStudents,\r\n            isFirst: currentIndex === 0,\r\n            isLast: currentIndex === totalStudents - 1\r\n        };\r\n    };\r\n\r\n    const currentStudentInfo = getCurrentStudentInfo();\r\n\r\n    // --- START: CODE FIX ---\r\n\r\n    // Helper function to generate the student report HTML. This avoids code duplication.\r\n    const generateStudentReportHTML = () => {\r\n        const scoreCalculation = calculateTotalScore();\r\n        const totalScore = scoreCalculation.finalScore;\r\n        const rawScore = scoreCalculation.rawScore;\r\n        const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n        const percentage = ((totalScore / (maxPoints || 1)) * 100).toFixed(1);\r\n        const penaltyApplied = scoreCalculation.penaltyApplied;\r\n\r\n        const attachmentsHTML = gradingData.attachments.map((att, index) => {\r\n            if (att.base64Data) {\r\n                return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\r\n            } else {\r\n                return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\r\n            }\r\n        }).join('');\r\n\r\n        const videoLinksHTML = gradingData.videoLinks.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('');\r\n\r\n        const rubricTableHTML = loadedRubric ? `\r\n      <div class=\"rubric-section\" style=\"margin-top: 30px;\">\r\n          <h3>📋 Detailed Rubric Assessment</h3>\r\n          <div style=\"background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;\">\r\n              <strong>Assignment:</strong> ${loadedRubric.assignmentInfo.title}<br>\r\n              <strong>Description:</strong> ${renderFormattedContent(loadedRubric.assignmentInfo.description)}<br>\r\n              <strong>Weight:</strong> ${loadedRubric.assignmentInfo.weight}% of Final Grade<br>\r\n              <strong>Passing Threshold:</strong> ${loadedRubric.assignmentInfo.passingThreshold}%  \r\n          </div>\r\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.9rem;\">\r\n              <thead><tr style=\"background: #2c3e50; color: white;\"><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Max Points</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Level Achieved</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Points Earned</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Assessment & Comments</th></tr></thead>\r\n              <tbody>\r\n                  ${loadedRubric.criteria.map(criterion => {\r\n            const grading = gradingData.rubricGrading[criterion.id];\r\n            const level = grading?.selectedLevel ? loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel) : null;\r\n            const points = level ? (criterion.maxPoints * level.multiplier).toFixed(1) : '0';\r\n            const levelDescription = level && criterion.levels[level.level] ? renderFormattedContent(criterion.levels[level.level].description) : '';\r\n            const additionalComments = grading?.customComments || '';\r\n            return `<tr><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\"><strong style=\"color: #2c3e50;\">${criterion.name}</strong><br><small style=\"color: #666; font-style: italic;\">${renderFormattedContent(criterion.description)}</small></td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold;\">${criterion.maxPoints}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; ${level ? `background-color: ${level.color}15; color: ${level.color}; font-weight: bold;` : ''}\">${level ? level.name : 'Not Assessed'}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}${(!levelDescription && !additionalComments) ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}</td></tr>`;\r\n        }).join('')}\r\n              </tbody>\r\n          </table>\r\n          <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\"><h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4><div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\"><div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div><div><strong>Grade Status:</strong><span style=\"color: ${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}</div></div>\r\n      </div>` : '';\r\n\r\n        const htmlContent = `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Grade Report - ${gradingData.student.name}</title><style>body{font-family:Arial,sans-serif;max-width:800px;margin:20px auto;padding:20px;line-height:1.6}.header{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:30px}.score-summary{background:#e8f5e8;border:2px solid #4caf50;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.late-policy-section{margin:30px 0;background:#fff5f5;border:1px solid #f87171;border-radius:8px;padding:20px}.feedback-section{margin:20px 0;padding:15px;background:#f9f9f9;border-radius:8px}.attachments{margin:30px 0}.attachment-item{display:inline-block;text-align:center;margin:1rem;padding:1rem;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);max-width:250px;vertical-align:top}.clickable-image{cursor:pointer;transition:all .3s ease;position:relative}.clickable-image:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.2)}.video-links{margin:30px 0}.video-link-item{margin-bottom:1rem}.video-link-item a{color:#007bff;text-decoration:none}.video-link-item a:hover{text-decoration:underline}h1,h2,h3{color:#333}.image-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);animation:fadeIn .3s ease}.image-modal.show{display:flex;align-items:center;justify-content:center}.modal-content{max-width:95%;max-height:95%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);animation:zoomIn .3s ease}.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:40px;font-weight:700;cursor:pointer;z-index:1001;background:rgba(0,0,0,.5);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;line-height:1}.close-modal:hover{background:rgba(0,0,0,.8)}.modal-caption{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.7);padding:10px 20px;border-radius:6px;text-align:center;max-width:80%}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes zoomIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@media print{.attachment-item,.video-link-item{break-inside:avoid}.image-modal{display:none!important}}</style></head><body><div class=\"header\"><h1>📋 Grade Report</h1><p><strong>Student:</strong> ${gradingData.student.name} (${gradingData.student.id})</p><p><strong>Course:</strong> ${gradingData.course.code} - ${gradingData.course.name}</p><p><strong>Assignment:</strong> ${gradingData.assignment.name}</p><p><strong>Instructor:</strong> ${gradingData.course.instructor}</p><p><strong>Term:</strong> ${gradingData.course.term}</p></div><div class=\"score-summary\"><h2>📊 Final Score</h2><div style=\"font-size:2rem;font-weight:700;color:#2e7d32;margin:15px 0\">${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)</div><p style=\"margin:10px 0;color:#555\">${loadedRubric ? `Rubric: ${loadedRubric.assignmentInfo.title}` : \"\"}${penaltyApplied ? ` | Late Policy: ${latePolicyLevels[gradingData.latePolicy.level].name}` : \"\"}</p></div>${penaltyApplied ? `<div class=\"late-policy-section\"><h3 style=\"color:#dc2626\">📅 Late Submission Policy Applied</h3><p><strong>Policy Status:</strong> ${latePolicyLevels[gradingData.latePolicy.level].name}</p><p>${latePolicyLevels[gradingData.latePolicy.level].description}</p><p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p></div>` : \"\"}${rubricTableHTML}${Object.entries(gradingData.feedback).filter(([e, t]) => t).map(([e, t]) => `<div class=\"feedback-section\"><h3>${e.charAt(0).toUpperCase() + e.slice(1)} Feedback</h3><p>${t.replace(/\\n/g, \"<br>\")}</p></div>`).join(\"\")}${attachmentsHTML ? `<div class=\"attachments\"><h3>📎 File Attachments</h3><div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">${attachmentsHTML}</div></div>` : \"\"}${videoLinksHTML ? `<div class=\"video-links\"><h3>🎥 Video Review Links</h3>${videoLinksHTML}</div>` : \"\"}<p style=\"margin-top:40px;text-align:center;color:#666;font-size:.9rem\">Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p><div id=\"imageModal\" class=\"image-modal\"><span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span><img class=\"modal-content\" id=\"modalImage\"><div class=\"modal-caption\" id=\"modalCaption\"></div></div><script>const attachmentData=${JSON.stringify(gradingData.attachments)};function openImageModal(e,t){const n=document.getElementById(\"imageModal\"),o=document.getElementById(\"modalImage\"),a=document.getElementById(\"modalCaption\");n.classList.add(\"show\"),o.src=e,a.textContent=t,document.body.style.overflow=\"hidden\"}function closeImageModal(){document.getElementById(\"imageModal\").classList.remove(\"show\"),document.body.style.overflow=\"auto\"}document.addEventListener(\"DOMContentLoaded\",function(){document.querySelectorAll(\".clickable-image\").forEach(e=>{e.addEventListener(\"click\",function(){const e=parseInt(this.getAttribute(\"data-index\")),t=attachmentData[e];t&&t.base64Data&&openImageModal(t.base64Data,t.name)})}),document.getElementById(\"imageModal\").addEventListener(\"click\",function(e){e.target===this&&closeImageModal()}),document.addEventListener(\"keydown\",function(e){\"Escape\"===e.key&&closeImageModal()})})</script></body></html>`;\r\n\r\n        return htmlContent;\r\n    };\r\n\r\n    // Function to export student grade data for AI feedback generation\r\n    const exportAIFeedbackData = () => {\r\n        if (!localGradingData.student?.name) {\r\n            alert('Please ensure student information is loaded before exporting for AI feedback.');\r\n            return;\r\n        }\r\n\r\n        // Calculate scores\r\n        const scoreCalculation = calculateTotalScore();\r\n        const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n        const percentage = maxPoints > 0 ? Math.round((scoreCalculation.finalScore / maxPoints) * 100) : 0;\r\n\r\n        // Determine letter grade\r\n        const getLetterGrade = (percentage) => {\r\n            if (percentage >= 90) return 'A';\r\n            if (percentage >= 80) return 'B';\r\n            if (percentage >= 70) return 'C';\r\n            if (percentage >= 60) return 'D';\r\n            return 'F';\r\n        };\r\n\r\n        // Build criteria performance data\r\n        const criteriaPerformance = [];\r\n        if (loadedRubric && localGradingData.rubricGrading) {\r\n            loadedRubric.criteria.forEach(criterion => {\r\n                const grading = localGradingData.rubricGrading[criterion.id];\r\n                if (grading && grading.selectedLevel) {\r\n                    const level = loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel);\r\n                    const earnedPoints = criterion.maxPoints * (level?.multiplier || 0);\r\n                    const criterionPercentage = Math.round((earnedPoints / criterion.maxPoints) * 100);\r\n\r\n                    criteriaPerformance.push({\r\n                        name: criterion.name,\r\n                        description: criterion.description,\r\n                        maxPoints: criterion.maxPoints,\r\n                        earnedPoints: Math.round(earnedPoints * 10) / 10,\r\n                        level: grading.selectedLevel,\r\n                        levelName: level?.name || 'Unknown',\r\n                        levelDescription: level?.description || '',\r\n                        percentage: criterionPercentage,\r\n                        customComments: grading.customComments || ''\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        // Create the structured data for AI\r\n        const aiGradeData = {\r\n            student: {\r\n                firstName: localGradingData.student.name.split(' ')[0] || localGradingData.student.name,\r\n                lastName: localGradingData.student.name.split(' ').slice(1).join(' ') || '',\r\n                fullName: localGradingData.student.name,\r\n                id: localGradingData.student.id,\r\n                email: localGradingData.student.email\r\n            },\r\n            course: {\r\n                code: localGradingData.course.code,\r\n                name: localGradingData.course.name,\r\n                instructor: localGradingData.course.instructor,\r\n                term: localGradingData.course.term\r\n            },\r\n            assignment: {\r\n                title: localGradingData.assignment.name || (loadedRubric?.assignmentInfo?.title),\r\n                description: loadedRubric?.assignmentInfo?.description || '',\r\n                totalPoints: maxPoints,\r\n                passingThreshold: loadedRubric?.assignmentInfo?.passingThreshold || 60,\r\n                dueDate: localGradingData.assignment.dueDate\r\n            },\r\n            gradeData: {\r\n                overallScore: Math.round(scoreCalculation.finalScore * 10) / 10,\r\n                rawScore: Math.round(scoreCalculation.rawScore * 10) / 10,\r\n                overallPercentage: percentage,\r\n                letterGrade: getLetterGrade(percentage),\r\n                passed: percentage >= (loadedRubric?.assignmentInfo?.passingThreshold || 60),\r\n                latePenaltyApplied: scoreCalculation.penaltyApplied,\r\n                latePolicyDescription: scoreCalculation.latePolicyDescription,\r\n                criteria: criteriaPerformance\r\n            },\r\n            existingFeedback: {\r\n                general: localGradingData.feedback.general || '',\r\n                strengths: localGradingData.feedback.strengths || '',\r\n                improvements: localGradingData.feedback.improvements || ''\r\n            },\r\n            metadata: {\r\n                gradedDate: new Date().toISOString(),\r\n                rubricUsed: loadedRubric?.assignmentInfo?.title || 'Custom Rubric',\r\n                totalCriteria: criteriaPerformance.length,\r\n                exportedForAI: true\r\n            }\r\n        };\r\n\r\n        // Export as JSON file\r\n        const dataStr = JSON.stringify(aiGradeData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n\r\n        return aiGradeData;\r\n    };\r\n\r\n    // Updated function to generate concise AI feedback prompt\r\n    const generateAIFeedbackPrompt = () => {\r\n        const gradeData = exportAIFeedbackData();\r\n        if (!gradeData) return;\r\n\r\n        const studentFirstName = gradeData.student.firstName;\r\n        const courseName = gradeData.course.name || 'this course';\r\n        const assignmentTitle = gradeData.assignment.title || 'assignment';\r\n\r\n        // Determine student level context\r\n        const getStudentLevel = () => {\r\n            const courseCode = gradeData.course.code.toUpperCase();\r\n            if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\r\n            if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\r\n            if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\r\n            if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\r\n            if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\r\n            return 'undergraduate';\r\n        };\r\n\r\n        const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\r\n\r\nSTUDENT GRADE DATA:\r\n${JSON.stringify(gradeData, null, 2)}\r\n\r\nWrite feedback in this exact structure:\r\n\r\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\r\n\r\n**Key Observations:**\r\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\r\n• Their strongest performance area (mention specific criteria that scored highest)\r\n• One area showing good progress or solid competency  \r\n• One specific area for improvement with a concrete suggestion\r\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\r\n• One forward-looking suggestion for growth in ${courseName}\r\n\r\n**Conclusion:**\r\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\r\n\r\n**Final Note:**\r\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\r\n\r\n**WRITING STYLE:**\r\n- Conversational and personal, like speaking directly to ${studentFirstName}\r\n- Specific to their actual performance levels and criteria\r\n- Encouraging but honest\r\n- Professional yet warm\r\n- Use their actual criterion names and performance levels from the data\r\n- Keep each bullet point to 1-2 sentences maximum\r\n\r\n**Context:**\r\n- Student: ${gradeData.student.fullName}\r\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\r\n- Assignment: ${assignmentTitle}\r\n- Instructor: ${gradeData.course.instructor}\r\n\r\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\r\n\r\n        // Export prompt as text file\r\n        const promptBlob = new Blob([prompt], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(promptBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n\r\n        console.log('AI Feedback Prompt Generated:', prompt);\r\n        return prompt;\r\n    };\r\n\r\n    // Combined function to export both files at once\r\n    const exportForAIFeedback = () => {\r\n        try {\r\n            // First export the grade data\r\n            const gradeData = exportAIFeedbackData();\r\n            if (!gradeData) return;\r\n\r\n            // Then generate and export the prompt\r\n            setTimeout(() => {\r\n                generateAIFeedbackPrompt();\r\n                alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\r\n            }, 500); // Small delay to ensure first download completes\r\n\r\n        } catch (error) {\r\n            console.error('Error exporting AI feedback data:', error);\r\n            alert('Error exporting AI feedback data. Please check the console for details.');\r\n        }\r\n    };\r\n\r\n    const exportToHTML = () => {\r\n        const htmlContent = generateStudentReportHTML();\r\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(htmlBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const exportToPDF = () => {\r\n        const html = generateStudentReportHTML();\r\n        const printWindow = window.open('', '_blank');\r\n        printWindow.document.open();\r\n        printWindow.document.write(html);\r\n        printWindow.document.close();\r\n        printWindow.focus();\r\n        printWindow.print();\r\n    };\r\n\r\n    // --- END: CODE FIX ---\r\n\r\n    // NEW HELPER FUNCTIONS FOR COURSE INFO\r\n    const getEffectiveCourseData = () => {\r\n        const course = gradingData.course;\r\n        const metadata = classList?.courseMetadata;\r\n\r\n        return {\r\n            code: course.code || metadata?.courseCode || '',\r\n            name: course.name || metadata?.courseName || '',\r\n            instructor: course.instructor || metadata?.instructor || metadata?.professors || '',\r\n            term: course.term || metadata?.term || ''\r\n        };\r\n    };\r\n\r\n    const pullCourseDataFromClassList = () => {\r\n        if (!classList?.courseMetadata) {\r\n            alert('No class list course metadata available to pull from.');\r\n            return;\r\n        }\r\n\r\n        const courseMetadata = classList.courseMetadata;\r\n        const newCourseInfo = {\r\n            code: courseMetadata.courseCode || '',\r\n            name: courseMetadata.courseName || '',\r\n            instructor: courseMetadata.instructor || courseMetadata.professors || '',\r\n            term: courseMetadata.term || ''\r\n        };\r\n\r\n        // Update both local and shared state\r\n        setGradingData(prevData => ({\r\n            ...prevData,\r\n            course: newCourseInfo\r\n        }));\r\n\r\n        updateCourseInfo(newCourseInfo);\r\n\r\n        console.log('📥 Pulled course data from class list:', newCourseInfo);\r\n        alert(`Course information updated!\\n\\nCode: ${newCourseInfo.code}\\nName: ${newCourseInfo.name}\\nInstructor: ${newCourseInfo.instructor}\\nTerm: ${newCourseInfo.term}`);\r\n    };\r\n\r\n    const isCourseDataMissing = () => {\r\n        const course = gradingData.course;\r\n        return !course.code && !course.name && !course.instructor && !course.term;\r\n    };\r\n\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: '#f9fafb', padding: '1.5rem' }}>\r\n            <div style={{ maxWidth: '80rem', margin: '0 auto' }}>\r\n                {/* Header */}\r\n                <div style={{\r\n                    background: 'linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)',\r\n                    color: 'white',\r\n                    padding: '1.5rem',\r\n                    borderRadius: '0.5rem 0.5rem 0 0',\r\n                    boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                        <div>\r\n                            <h1 style={{ fontSize: '1.875rem', fontWeight: '700', margin: '0 0 0.5rem 0' }}>\r\n                                📋 Professional Grading Interface\r\n                            </h1>\r\n                            <p style={{ color: '#bfdbfe', margin: 0 }}>\r\n                                {loadedRubric ? 'Comprehensive rubric-based assessment' : 'Streamlined grading with flexible assessment options'}\r\n                            </p>\r\n                        </div>\r\n                        <div style={{ display: 'flex', gap: '0.75rem' }}>\r\n                            <button\r\n                                onClick={exportToHTML}\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    background: '#16a34a',\r\n                                    color: 'white',\r\n                                    padding: '0.5rem 1rem',\r\n                                    borderRadius: '0.5rem',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.875rem'\r\n                                }}\r\n                            >\r\n                                <FileDown size={16} />\r\n                                Export HTML\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={exportToPDF}\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    backgroundColor: '#dc2626',\r\n                                    color: '#ffffff',\r\n                                    padding: '0.5rem 1rem',\r\n                                    borderRadius: '0.5rem',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.875rem'\r\n                                }}\r\n                            >\r\n                                <FileText size={16} />\r\n                                Export PDF\r\n                            </button>\r\n\r\n                            {/* ADD THE NEW AI FEEDBACK BUTTON HERE */}\r\n                            <button\r\n                                onClick={exportForAIFeedback}\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: '0.5rem',\r\n                                    background: '#7c3aed',\r\n                                    color: 'white',\r\n                                    padding: '0.5rem 1rem',\r\n                                    borderRadius: '0.5rem',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '0.875rem'\r\n                                }}\r\n                                title=\"Export grade data and AI prompt for generating personalized feedback\"\r\n                            >\r\n                                <Bot size={16} />\r\n                                Export for AI Feedback\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ background: 'white', borderRadius: '0 0 0.5rem 0.5rem', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}>\r\n                    <div style={{ padding: '1.5rem' }}>\r\n                        {/* Student Navigation Bar */}\r\n                        {currentStudentInfo && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\r\n                                border: '1px solid #0284c7',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '1.5rem',\r\n                                marginBottom: '2rem'\r\n                            }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                        <div style={{\r\n                                            width: '40px',\r\n                                            height: '40px',\r\n                                            background: '#0284c7',\r\n                                            borderRadius: '50%',\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            color: 'white',\r\n                                            fontSize: '1.2rem',\r\n                                            fontWeight: 'bold'\r\n                                        }}>\r\n                                            {currentStudentInfo.position}\r\n                                        </div>\r\n                                        <div>\r\n                                            <h2 style={{ margin: 0, fontSize: '1.5rem', fontWeight: '700', color: '#0c4a6e' }}>\r\n                                                {currentStudentInfo.student.name}\r\n                                            </h2>\r\n                                            <p style={{ margin: 0, color: '#0369a1', fontSize: '0.875rem' }}>\r\n                                                Student ID: {currentStudentInfo.student.id} | Email: {currentStudentInfo.student.email}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n                                        <div style={{ textAlign: 'center', color: '#0369a1' }}>\r\n                                            <div style={{ fontSize: '1.25rem', fontWeight: 'bold' }}>\r\n                                                {currentStudentInfo.position}/{currentStudentInfo.total}\r\n                                            </div>\r\n                                            <div style={{ fontSize: '0.75rem' }}>Progress</div>\r\n                                        </div>\r\n\r\n                                        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                            <button\r\n                                                onClick={handlePreviousStudent}\r\n                                                disabled={currentStudentInfo.isFirst}\r\n                                                style={{\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.5rem',\r\n                                                    background: currentStudentInfo.isFirst ? '#94a3b8' : '#3b82f6',\r\n                                                    color: 'white',\r\n                                                    padding: '0.75rem 1rem',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    border: 'none',\r\n                                                    cursor: currentStudentInfo.isFirst ? 'not-allowed' : 'pointer',\r\n                                                    fontSize: '0.875rem',\r\n                                                    fontWeight: '500'\r\n                                                }}\r\n                                            >\r\n                                                <ArrowLeft size={16} />\r\n                                                Previous\r\n                                            </button>\r\n\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    updateGradingSession({ active: false });\r\n                                                    setActiveTab('class-manager');\r\n                                                }}\r\n                                                style={{\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.5rem',\r\n                                                    background: '#f59e0b',\r\n                                                    color: 'white',\r\n                                                    padding: '0.75rem 1rem',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    border: 'none',\r\n                                                    cursor: 'pointer',\r\n                                                    fontSize: '0.875rem',\r\n                                                    fontWeight: '500'\r\n                                                }}\r\n                                            >\r\n                                                <Pause size={16} />\r\n                                                Pause Session\r\n                                            </button>\r\n\r\n                                            <button\r\n                                                onClick={handleNextStudent}\r\n                                                disabled={currentStudentInfo.isLast}\r\n                                                style={{\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '0.5rem',\r\n                                                    background: currentStudentInfo.isLast ? '#94a3b8' : '#10b981',\r\n                                                    color: 'white',\r\n                                                    padding: '0.75rem 1rem',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    border: 'none',\r\n                                                    cursor: currentStudentInfo.isLast ? 'not-allowed' : 'pointer',\r\n                                                    fontSize: '0.875rem',\r\n                                                    fontWeight: '500'\r\n                                                }}\r\n                                            >\r\n                                                {currentStudentInfo.isLast ? (\r\n                                                    <>\r\n                                                        <CheckCircle size={16} />\r\n                                                        Complete Session\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <>\r\n                                                        Next\r\n                                                        <ArrowRight size={16} />\r\n                                                    </>\r\n                                                )}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Progress Bar */}\r\n                                <div style={{\r\n                                    width: '100%',\r\n                                    background: '#e0f2fe',\r\n                                    borderRadius: '0.5rem',\r\n                                    height: '8px',\r\n                                    overflow: 'hidden'\r\n                                }}>\r\n                                    <div style={{\r\n                                        width: `${(currentStudentInfo.position / currentStudentInfo.total) * 100}%`,\r\n                                        background: 'linear-gradient(90deg, #0284c7 0%, #0ea5e9 100%)',\r\n                                        height: '100%',\r\n                                        transition: 'width 0.5s ease'\r\n                                    }}></div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Auto-save Indicator */}\r\n                        {sharedGradingData && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n                                border: '1px solid #bbf7d0',\r\n                                borderRadius: '0.5rem',\r\n                                padding: '0.75rem',\r\n                                marginBottom: '1.5rem'\r\n                            }}>\r\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', color: '#15803d' }}>\r\n                                    <div style={{ width: '8px', height: '8px', background: '#16a34a', borderRadius: '50%' }}></div>\r\n                                    <span style={{ fontSize: '0.875rem', fontWeight: '500' }}>Auto-saved - Work preserved across tabs</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Quick Actions for Class Management */}\r\n                        {!currentStudentInfo && classList && classList.students?.length > 0 && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\r\n                                border: '1px solid #fbbf24',\r\n                                borderRadius: '0.5rem',\r\n                                padding: '1rem',\r\n                                marginBottom: '1.5rem'\r\n                            }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                    <div>\r\n                                        <h3 style={{ margin: '0 0 0.5rem 0', color: '#92400e', fontSize: '1.125rem', fontWeight: '600' }}>\r\n                                            Class List Available\r\n                                        </h3>\r\n                                        <p style={{ margin: 0, color: '#b45309', fontSize: '0.875rem' }}>\r\n                                            {classList.students.length} students ready for grading. Start a batch session to grade efficiently.\r\n                                        </p>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            initializeGradingSession(classList);\r\n                                            setActiveTab('grading-tool');\r\n                                        }}\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            background: '#d97706',\r\n                                            color: 'white',\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            borderRadius: '0.5rem',\r\n                                            border: 'none',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '500'\r\n                                        }}\r\n                                    >\r\n                                        <PlayCircle size={16} />\r\n                                        Start Batch Grading\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* ENHANCED Course Information Section */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n                                <h2 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#374151' }}>\r\n                                    Course Information\r\n                                </h2>\r\n\r\n                                {/* Pull Course Data Button - show if data is missing and classList has metadata */}\r\n                                {isCourseDataMissing() && classList?.courseMetadata && (\r\n                                    <button\r\n                                        onClick={pullCourseDataFromClassList}\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            background: '#3b82f6',\r\n                                            color: 'white',\r\n                                            padding: '0.5rem 1rem',\r\n                                            borderRadius: '0.5rem',\r\n                                            border: 'none',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '500'\r\n                                        }}\r\n                                        title=\"Pull course information from imported class list\"\r\n                                    >\r\n                                        <Download size={16} />\r\n                                        Pull Course Data\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Data source indicator */}\r\n                            {(() => {\r\n                                const effectiveData = getEffectiveCourseData();\r\n                                if (effectiveData.code || effectiveData.name) {\r\n                                    return (\r\n                                        <div style={{\r\n                                            background: '#f0f9ff',\r\n                                            border: '1px solid #0ea5e9',\r\n                                            borderRadius: '0.5rem',\r\n                                            padding: '0.75rem',\r\n                                            marginBottom: '1rem',\r\n                                            fontSize: '0.875rem',\r\n                                            color: '#0369a1'\r\n                                        }}>\r\n                                            <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                <CheckCircle size={16} />\r\n                                                <span>Course information loaded {gradingData.course.code ? 'from grading session' : 'from class list metadata'}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                }\r\n                                return null;\r\n                            })()}\r\n\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Course Code (e.g., ART101)\"\r\n                                    value={getEffectiveCourseData().code}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            course: { ...prevData.course, code: newValue }\r\n                                        }));\r\n                                        updateCourseInfo({ code: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        backgroundColor: getEffectiveCourseData().code && !gradingData.course.code ? '#f9fafb' : 'white'\r\n                                    }}\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Course Name\"\r\n                                    value={getEffectiveCourseData().name}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            course: { ...prevData.course, name: newValue }\r\n                                        }));\r\n                                        updateCourseInfo({ name: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        backgroundColor: getEffectiveCourseData().name && !gradingData.course.name ? '#f9fafb' : 'white'\r\n                                    }}\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Instructor Name\"\r\n                                    value={getEffectiveCourseData().instructor}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            course: { ...prevData.course, instructor: newValue }\r\n                                        }));\r\n                                        updateCourseInfo({ instructor: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        backgroundColor: getEffectiveCourseData().instructor && !gradingData.course.instructor ? '#f9fafb' : 'white'\r\n                                    }}\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Term (e.g., Fall 2024)\"\r\n                                    value={getEffectiveCourseData().term}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            course: { ...prevData.course, term: newValue }\r\n                                        }));\r\n                                        updateCourseInfo({ term: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        backgroundColor: getEffectiveCourseData().term && !gradingData.course.term ? '#f9fafb' : 'white'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Student Information */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '0.75rem', color: '#374151' }}>\r\n                                Student Information\r\n                            </h3>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Student Name\"\r\n                                    value={currentStudent?.name || gradingData.student.name}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            student: { ...prevData.student, name: newValue }\r\n                                        }));\r\n                                        updateStudentInfo({ name: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        background: currentStudentInfo ? '#f3f4f6' : 'white'\r\n                                    }}\r\n                                    readOnly={!!currentStudentInfo}\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Student ID\"\r\n                                    value={currentStudent?.id || gradingData.student.id}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            student: { ...prevData.student, id: newValue }\r\n                                        }));\r\n                                        updateStudentInfo({ id: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        background: currentStudentInfo ? '#f3f4f6' : 'white'\r\n                                    }}\r\n                                    readOnly={!!currentStudentInfo}\r\n                                />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    placeholder=\"Student Email\"\r\n                                    value={currentStudent?.email || gradingData.student.email}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            student: { ...prevData.student, email: newValue }\r\n                                        }));\r\n                                        updateStudentInfo({ email: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem',\r\n                                        background: currentStudentInfo ? '#f3f4f6' : 'white'\r\n                                    }}\r\n                                    readOnly={!!currentStudentInfo}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Assignment Details */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '0.75rem', color: '#374151' }}>\r\n                                Assignment Details\r\n                            </h3>\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Assignment Name\"\r\n                                    value={gradingData.assignment.name}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            assignment: { ...prevData.assignment, name: newValue }\r\n                                        }));\r\n                                        updateAssignmentInfo({ name: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem'\r\n                                    }}\r\n                                />\r\n                                <input\r\n                                    type=\"date\"\r\n                                    placeholder=\"Due Date\"\r\n                                    value={gradingData.assignment.dueDate}\r\n                                    onChange={(e) => {\r\n                                        const newValue = e.target.value;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            assignment: { ...prevData.assignment, dueDate: newValue }\r\n                                        }));\r\n                                        updateAssignmentInfo({ dueDate: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem'\r\n                                    }}\r\n                                />\r\n                                <input\r\n                                    type=\"number\"\r\n                                    placeholder=\"Max Points\"\r\n                                    value={gradingData.assignment.maxPoints}\r\n                                    onChange={(e) => {\r\n                                        const newValue = parseInt(e.target.value) || 0;\r\n                                        setGradingData(prevData => ({\r\n                                            ...prevData,\r\n                                            assignment: { ...prevData.assignment, maxPoints: newValue }\r\n                                        }));\r\n                                        updateAssignmentInfo({ maxPoints: newValue });\r\n                                    }}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '0.75rem',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '0.5rem',\r\n                                        fontSize: '0.875rem'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Late Policy Section */}\r\n                        <div style={{\r\n                            background: 'linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%)',\r\n                            border: '1px solid #fed7aa',\r\n                            borderRadius: '0.75rem',\r\n                            padding: '1.5rem',\r\n                            marginBottom: '2rem'\r\n                        }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#9a3412' }}>\r\n                                📅 Late Submission Policy\r\n                            </h3>\r\n                            <div style={{\r\n                                background: 'white',\r\n                                border: '1px solid #fed7aa',\r\n                                borderRadius: '0.5rem',\r\n                                padding: '1rem',\r\n                                marginBottom: '1.25rem'\r\n                            }}>\r\n                                <p style={{ fontWeight: '500', marginBottom: '0.5rem', color: '#9a3412' }}>\r\n                                    Institutional Late Assignment Policy:\r\n                                </p>\r\n                                <ul style={{ paddingLeft: '1.25rem', fontSize: '0.875rem', color: '#7c2d12' }}>\r\n                                    <li>• <strong>On Time:</strong> Assignments submitted on or before due date and time are marked out of 100%</li>\r\n                                    <li>• <strong>1-24 Hours Late:</strong> Assignments receive a 20% reduction and are marked out of 80%</li>\r\n                                    <li>• <strong>After 24 Hours:</strong> Assignments receive a mark of zero (0)</li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <div style={{ marginBottom: '1rem' }}>\r\n                                <h4 style={{ fontWeight: '500', marginBottom: '0.75rem', color: '#9a3412' }}>\r\n                                    Select submission status:\r\n                                </h4>\r\n\r\n                                {Object.entries(latePolicyLevels).map(([level, policy]) => (\r\n                                    <div\r\n                                        key={level}\r\n                                        onClick={() => updateLatePolicy(level)}\r\n                                        style={{\r\n                                            background: 'white',\r\n                                            border: `2px solid ${gradingData.latePolicy.level === level ? policy.color : '#d1d5db'}`,\r\n                                            borderRadius: '0.75rem',\r\n                                            padding: '1rem',\r\n                                            marginBottom: '0.75rem',\r\n                                            cursor: 'pointer',\r\n                                            transition: 'all 0.3s ease',\r\n                                            transform: gradingData.latePolicy.level === level ? 'translateY(-2px)' : 'none',\r\n                                            boxShadow: gradingData.latePolicy.level === level ? '0 8px 25px rgba(0, 0, 0, 0.15)' : '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                                            backgroundColor: gradingData.latePolicy.level === level ? `linear-gradient(135deg, ${policy.color}15 0%, ${policy.color}25 100%)` : 'white'\r\n                                        }}\r\n                                    >\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '0.75rem' }}>\r\n                                            <div style={{\r\n                                                width: '16px',\r\n                                                height: '16px',\r\n                                                borderRadius: '50%',\r\n                                                backgroundColor: policy.color,\r\n                                                flexShrink: 0\r\n                                            }}></div>\r\n                                            <h5 style={{\r\n                                                fontWeight: '600',\r\n                                                fontSize: '1.1rem',\r\n                                                margin: 0,\r\n                                                flex: 1,\r\n                                                color: policy.color\r\n                                            }}>\r\n                                                {policy.name}\r\n                                            </h5>\r\n                                            {level !== 'none' && (\r\n                                                <span style={{\r\n                                                    fontSize: '0.9rem',\r\n                                                    opacity: 0.8,\r\n                                                    fontWeight: '500',\r\n                                                    color: policy.color\r\n                                                }}>\r\n                                                    (×{policy.multiplier === 0 ? '0' : policy.multiplier})\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        <p style={{\r\n                                            fontSize: '0.9rem',\r\n                                            lineHeight: 1.5,\r\n                                            margin: 0,\r\n                                            color: '#6b7280'\r\n                                        }}>\r\n                                            {policy.description}\r\n                                        </p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {calculateTotalScore().penaltyApplied && (\r\n                                <div style={{\r\n                                    background: '#fef2f2',\r\n                                    border: '1px solid #fecaca',\r\n                                    borderRadius: '0.5rem',\r\n                                    padding: '1rem'\r\n                                }}>\r\n                                    <h5 style={{ fontWeight: '500', color: '#991b1b', marginBottom: '0.5rem' }}>\r\n                                        ⚠️ Late Penalty Calculation\r\n                                    </h5>\r\n                                    <div style={{ fontSize: '0.875rem', color: '#7f1d1d' }}>\r\n                                        <p style={{ marginBottom: '0.25rem' }}>\r\n                                            <strong>Raw Score:</strong> {Math.round(calculateTotalScore().rawScore * 10) / 10} / {loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n                                        </p>\r\n                                        <p style={{ marginBottom: '0.25rem' }}>\r\n                                            <strong>Late Penalty:</strong> ×{latePolicyLevels[gradingData.latePolicy.level].multiplier}\r\n                                        </p>\r\n                                        <p style={{ margin: 0 }}>\r\n                                            <strong>Final Score:</strong> {Math.round(calculateTotalScore().finalScore * 10) / 10} / {loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Score Summary */}\r\n                        <div style={{\r\n                            textAlign: 'center',\r\n                            background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n                            border: '1px solid #bbf7d0',\r\n                            borderRadius: '0.75rem',\r\n                            padding: '1.5rem',\r\n                            marginBottom: '2rem'\r\n                        }}>\r\n                            <h2 style={{ fontSize: '1.5rem', fontWeight: '700', color: '#15803d', marginBottom: '1rem' }}>\r\n                                📊 Final Score\r\n                            </h2>\r\n                            <div style={{ fontSize: '3rem', fontWeight: '700', color: '#16a34a', marginBottom: '1rem' }}>\r\n                                {Math.round(calculateTotalScore().finalScore * 10) / 10}\r\n                                <span style={{ fontSize: '1.5rem', color: '#6b7280' }}>\r\n                                    / {loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n                                </span>\r\n                            </div>\r\n                            <div style={{ fontSize: '1.25rem', color: '#6b7280', marginBottom: '1rem' }}>\r\n                                ({Math.round((calculateTotalScore().finalScore / (loadedRubric ? (loadedRubric.assignmentInfo.totalPoints || 1) : (gradingData.assignment.maxPoints || 1))) * 1000) / 10}%)\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'center', gap: '1rem', flexWrap: 'wrap' }}>\r\n                                {loadedRubric && (\r\n                                    <div style={{\r\n                                        fontSize: '0.875rem',\r\n                                        background: '#dcfce7',\r\n                                        color: '#15803d',\r\n                                        padding: '0.25rem 0.75rem',\r\n                                        borderRadius: '1rem'\r\n                                    }}>\r\n                                        📋 Rubric Assessment Active\r\n                                    </div>\r\n                                )}\r\n                                {calculateTotalScore().penaltyApplied && (\r\n                                    <div style={{\r\n                                        fontSize: '0.875rem',\r\n                                        background: '#fee2e2',\r\n                                        color: '#dc2626',\r\n                                        padding: '0.25rem 0.75rem',\r\n                                        borderRadius: '1rem'\r\n                                    }}>\r\n                                        ⏰ Late Penalty Applied\r\n                                    </div>\r\n                                )}\r\n                                {currentStudentInfo && (\r\n                                    <div style={{\r\n                                        fontSize: '0.875rem',\r\n                                        background: '#dbeafe',\r\n                                        color: '#2563eb',\r\n                                        padding: '0.25rem 0.75rem',\r\n                                        borderRadius: '1rem'\r\n                                    }}>\r\n                                        👥 Batch Session Active\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Save Draft Section */}\r\n                        {currentStudentInfo && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\r\n                                border: '1px solid #f59e0b',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '1.5rem',\r\n                                marginBottom: '2rem',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#92400e', marginBottom: '0.75rem' }}>\r\n                                    💾 Save Your Progress\r\n                                </h3>\r\n                                <p style={{ color: '#a16207', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n                                    Save your current grading progress as a draft. You can return to complete it later.\r\n                                </p>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (currentStudent?.id) {\r\n                                            saveDraft(currentStudent.id, localGradingData);\r\n                                            // Show success feedback\r\n                                            const button = document.activeElement;\r\n                                            const originalText = button.innerHTML;\r\n                                            const originalBg = button.style.background;\r\n                                            button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\r\n                                            button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\r\n                                            setTimeout(() => {\r\n                                                button.innerHTML = originalText;\r\n                                                button.style.background = originalBg;\r\n                                            }, 2000);\r\n                                        }\r\n                                    }}\r\n                                    disabled={!currentStudent?.id}\r\n                                    style={{\r\n                                        display: 'inline-flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.75rem',\r\n                                        background: currentStudent?.id ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\r\n                                        color: 'white',\r\n                                        padding: '1rem 2rem',\r\n                                        borderRadius: '0.75rem',\r\n                                        border: 'none',\r\n                                        cursor: currentStudent?.id ? 'pointer' : 'not-allowed',\r\n                                        fontSize: '1rem',\r\n                                        fontWeight: '600',\r\n                                        boxShadow: currentStudent?.id ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\r\n                                        transform: 'translateY(0)',\r\n                                        transition: 'all 0.2s ease'\r\n                                    }}\r\n                                    onMouseOver={(e) => {\r\n                                        if (currentStudent?.id) {\r\n                                            e.currentTarget.style.transform = 'translateY(-2px)';\r\n                                            e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\r\n                                        }\r\n                                    }}\r\n                                    onMouseOut={(e) => {\r\n                                        if (currentStudent?.id) {\r\n                                            e.currentTarget.style.transform = 'translateY(0)';\r\n                                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\r\n                                        }\r\n                                    }}\r\n                                    title={currentStudent?.id ? 'Save current grading progress' : 'No student selected to save'}\r\n                                >\r\n                                    <Save size={20} />\r\n                                    Save Draft\r\n                                </button>\r\n                                {!currentStudent?.id && (\r\n                                    <p style={{ marginTop: '0.75rem', fontSize: '0.75rem', color: '#6b7280' }}>\r\n                                        Select a student from the Class Manager to enable draft saving\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Loaded Rubric Section */}\r\n                        {loadedRubric && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n                                border: '1px solid #bbf7d0',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '1.5rem',\r\n                                marginBottom: '2rem'\r\n                            }}>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                                    <div>\r\n                                        <h3 style={{ fontSize: '1.25rem', fontWeight: '700', color: '#15803d', marginBottom: '0.5rem' }}>\r\n                                            📋 Active Assignment Rubric\r\n                                        </h3>\r\n                                        <p style={{ color: '#16a34a', fontWeight: '600', fontSize: '1.1rem' }}>\r\n                                            {loadedRubric.assignmentInfo.title}\r\n                                        </p>\r\n                                        <p style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                                            {renderFormattedContent(loadedRubric.assignmentInfo.description)}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div style={{ textAlign: 'right' }}>\r\n                                        <div style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                                            <p style={{ margin: '0.25rem 0' }}>\r\n                                                <strong>Weight:</strong> {loadedRubric.assignmentInfo.weight}% of Final Grade\r\n                                            </p>\r\n                                            <p style={{ margin: '0.25rem 0' }}>\r\n                                                <strong>Passing:</strong> {loadedRubric.assignmentInfo.passingThreshold}%\r\n                                            </p>\r\n                                            <p style={{ margin: '0.25rem 0' }}>\r\n                                                <strong>Total Points:</strong> {loadedRubric.assignmentInfo.totalPoints}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Rubric Grading Interface */}\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n                                    {loadedRubric.criteria.map((criterion) => {\r\n                                        const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\r\n                                        const showComments = showRubricComments[criterion.id];\r\n\r\n                                        return (\r\n                                            <div key={criterion.id} style={{\r\n                                                background: 'white',\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                padding: '1.25rem',\r\n                                                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n                                            }}>\r\n                                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                                                    <div style={{ flex: 1 }}>\r\n                                                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                                                            {criterion.name}\r\n                                                            <span style={{ color: '#3b82f6', marginLeft: '0.5rem' }}>\r\n                                                                ({criterion.maxPoints} pts)\r\n                                                            </span>\r\n                                                        </h4>\r\n                                                        <p style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.25rem' }}>\r\n                                                            {renderFormattedContent(criterion.description)}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                    <button\r\n                                                        onClick={() => toggleRubricComments(criterion.id)}\r\n                                                        style={{\r\n                                                            color: '#3b82f6',\r\n                                                            background: 'none',\r\n                                                            border: 'none',\r\n                                                            fontSize: '0.875rem',\r\n                                                            textDecoration: 'underline',\r\n                                                            cursor: 'pointer',\r\n                                                            marginLeft: '1rem'\r\n                                                        }}\r\n                                                    >\r\n                                                        {showComments ? 'Hide' : 'Show'} Level Details\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                                {/* Level Selection */}\r\n                                                <div style={{\r\n                                                    display: 'grid',\r\n                                                    gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\r\n                                                    gap: '0.5rem',\r\n                                                    marginBottom: '1rem'\r\n                                                }}>\r\n                                                    {loadedRubric.rubricLevels.map((level) => {\r\n                                                        const isSelected = currentGrading?.selectedLevel === level.level;\r\n                                                        const points = Math.round(criterion.maxPoints * level.multiplier);\r\n\r\n                                                        return (\r\n                                                            <button\r\n                                                                key={level.level}\r\n                                                                onClick={() => updateRubricGrading(criterion.id, level.level)}\r\n                                                                style={{\r\n                                                                    padding: '0.75rem',\r\n                                                                    borderRadius: '0.5rem',\r\n                                                                    border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\r\n                                                                    fontSize: '0.875rem',\r\n                                                                    fontWeight: '500',\r\n                                                                    cursor: 'pointer',\r\n                                                                    transition: 'all 0.2s ease',\r\n                                                                    backgroundColor: isSelected ? level.color : 'white',\r\n                                                                    color: isSelected ? 'white' : '#374151',\r\n                                                                    transform: isSelected ? 'scale(1.05)' : 'none',\r\n                                                                    textAlign: 'center'\r\n                                                                }}\r\n                                                            >\r\n                                                                <div style={{ fontWeight: '600' }}>{level.name}</div>\r\n                                                                <div style={{ fontSize: '0.75rem', marginTop: '0.25rem' }}>\r\n                                                                    {level.level === 'incomplete' ? '0' : points} pts\r\n                                                                </div>\r\n                                                            </button>\r\n                                                        );\r\n                                                    })}\r\n                                                </div>\r\n\r\n                                                {/* Level Descriptions */}\r\n                                                {showComments && (\r\n                                                    <div style={{\r\n                                                        background: '#f9fafb',\r\n                                                        borderRadius: '0.5rem',\r\n                                                        padding: '1rem',\r\n                                                        marginBottom: '1rem'\r\n                                                    }}>\r\n                                                        <h5 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                                                            Level Descriptions:\r\n                                                        </h5>\r\n                                                        <div style={{\r\n                                                            display: 'grid',\r\n                                                            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n                                                            gap: '0.75rem'\r\n                                                        }}>\r\n                                                            {loadedRubric.rubricLevels.map((level) => (\r\n                                                                <div\r\n                                                                    key={level.level}\r\n                                                                    style={{\r\n                                                                        background: 'white',\r\n                                                                        borderRadius: '0.25rem',\r\n                                                                        border: '1px solid #d1d5db',\r\n                                                                        borderLeft: `4px solid ${level.color}`,\r\n                                                                        padding: '0.75rem'\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <div style={{ fontWeight: '500', fontSize: '0.875rem', color: level.color }}>\r\n                                                                        {level.name}\r\n                                                                    </div>\r\n                                                                    <div style={{ fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem' }}>\r\n                                                                        {criterion.levels[level.level]?.pointRange} pts\r\n                                                                    </div>\r\n                                                                    <div style={{ fontSize: '0.75rem', color: '#374151' }}>\r\n                                                                        {renderFormattedContent(criterion.levels[level.level]?.description)}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                {/* Custom Comments */}\r\n                                                <div>\r\n                                                    <label style={{\r\n                                                        display: 'block',\r\n                                                        fontSize: '0.875rem',\r\n                                                        fontWeight: '500',\r\n                                                        color: '#374151',\r\n                                                        marginBottom: '0.5rem'\r\n                                                    }}>\r\n                                                        Additional Comments:\r\n                                                    </label>\r\n\r\n                                                    {/* Quick Feedback Dropdowns */}\r\n                                                    {criterion.feedbackLibrary && (\r\n                                                        <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.75rem', flexWrap: 'wrap' }}>\r\n                                                            {Object.entries(criterion.feedbackLibrary).map(([category, comments]) => (\r\n                                                                <select\r\n                                                                    key={category}\r\n                                                                    onChange={(e) => {\r\n                                                                        if (e.target.value) {\r\n                                                                            addCriterionFeedback(criterion.id, e.target.value);\r\n                                                                            e.target.value = '';\r\n                                                                        }\r\n                                                                    }}\r\n                                                                    defaultValue=\"\"\r\n                                                                    style={{\r\n                                                                        padding: '0.5rem',\r\n                                                                        border: '1px solid #d1d5db',\r\n                                                                        borderRadius: '0.25rem',\r\n                                                                        fontSize: '0.75rem',\r\n                                                                        cursor: 'pointer'\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <option value=\"\">Add {category}...</option>\r\n                                                                    {comments.map((comment, idx) => (\r\n                                                                        <option key={idx} value={comment}>{renderFormattedContent(comment)}</option>\r\n                                                                    ))}\r\n                                                                </select>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    )}\r\n\r\n                                                    <textarea\r\n                                                        value={currentGrading?.customComments || ''}\r\n                                                        onChange={(e) => updateRubricGrading(criterion.id, currentGrading?.selectedLevel, e.target.value)}\r\n                                                        style={{\r\n                                                            width: '100%',\r\n                                                            padding: '0.75rem',\r\n                                                            border: '1px solid #d1d5db',\r\n                                                            borderRadius: '0.5rem',\r\n                                                            fontSize: '0.875rem',\r\n                                                            resize: 'none',\r\n                                                            minHeight: '80px'\r\n                                                        }}\r\n                                                        rows=\"3\"\r\n                                                        placeholder=\"Add specific feedback for this criterion...\"\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                {/* Selected Level Feedback */}\r\n                                                {currentGrading?.selectedLevel && (\r\n                                                    <div style={{\r\n                                                        marginTop: '0.75rem',\r\n                                                        padding: '0.75rem',\r\n                                                        background: '#eff6ff',\r\n                                                        borderRadius: '0.25rem',\r\n                                                        border: '1px solid #bfdbfe'\r\n                                                    }}>\r\n                                                        <div style={{ fontSize: '0.875rem' }}>\r\n                                                            <strong>Selected Level:</strong> {loadedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)?.name}\r\n                                                            {' '}({criterion.levels[currentGrading.selectedLevel]?.pointRange} pts)\r\n                                                        </div>\r\n                                                        <div style={{ fontSize: '0.875rem', color: '#374151', marginTop: '0.25rem' }}>\r\n                                                            {renderFormattedContent(criterion.levels[currentGrading.selectedLevel]?.description)}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n\r\n                                {/* Rubric Summary */}\r\n                                <div style={{\r\n                                    marginTop: '1.5rem',\r\n                                    background: 'white',\r\n                                    border: '1px solid #d1d5db',\r\n                                    borderRadius: '0.5rem',\r\n                                    padding: '1rem'\r\n                                }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                        <div>\r\n                                            <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                                                Rubric Score Summary\r\n                                            </h4>\r\n                                            <p style={{ fontSize: '0.875rem', color: '#6b7280' }}>\r\n                                                Based on selected levels across all criteria\r\n                                            </p>\r\n                                        </div>\r\n                                        <div style={{ textAlign: 'right' }}>\r\n                                            <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#3b82f6' }}>\r\n                                                {Math.round(calculateTotalScore().finalScore * 10) / 10}/{loadedRubric.assignmentInfo.totalPoints}\r\n                                            </div>\r\n                                            <div style={{ fontSize: '1.125rem', color: '#6b7280' }}>\r\n                                                ({Math.round((calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 1000) / 10}%)\r\n                                            </div>\r\n                                            {calculateTotalScore().penaltyApplied && (\r\n                                                <div style={{ fontSize: '0.875rem', color: '#dc2626', marginTop: '0.25rem' }}>\r\n                                                    Raw: {Math.round(calculateTotalScore().rawScore * 10) / 10} (Late Penalty Applied)\r\n                                                </div>\r\n                                            )}\r\n                                            <div style={{\r\n                                                fontSize: '0.875rem',\r\n                                                fontWeight: '500',\r\n                                                color: (calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 100 >= loadedRubric.assignmentInfo.passingThreshold\r\n                                                    ? '#16a34a' : '#dc2626'\r\n                                            }}>\r\n                                                {(calculateTotalScore().finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 100 >= loadedRubric.assignmentInfo.passingThreshold\r\n                                                    ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* NEW: Enhanced Complete and Grade Next Section */}\r\n                        {loadedRubric && currentStudentInfo && (\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\r\n                                border: '2px solid #10b981',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '1.5rem',\r\n                                marginTop: '2rem',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#047857', marginBottom: '1rem' }}>\r\n                                    Ready to move to the next student?\r\n                                </h3>\r\n                                <p style={{ color: '#065f46', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n                                    Choose how to save the current grading before proceeding.\r\n                                </p>\r\n\r\n                                <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n                                    {/* Save as Draft Button */}\r\n                                    <button\r\n                                        onClick={handleNextStudentAsDraft}\r\n                                        style={{\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\r\n                                            color: 'white',\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            borderRadius: '0.5rem',\r\n                                            border: 'none',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '600',\r\n                                            boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\r\n                                            transition: 'all 0.2s ease'\r\n                                        }}\r\n                                        onMouseOver={(e) => {\r\n                                            e.target.style.transform = 'translateY(-2px)';\r\n                                            e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\r\n                                        }}\r\n                                        onMouseOut={(e) => {\r\n                                            e.target.style.transform = 'translateY(0)';\r\n                                            e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\r\n                                        }}\r\n                                    >\r\n                                        <span style={{ fontSize: '1.1rem' }}>📝</span>\r\n                                        Save & Grade Next Student\r\n                                    </button>\r\n\r\n                                    {/* Finalize & Grade Next Button */}\r\n                                    <button\r\n                                        onClick={handleNextStudentAsFinal}\r\n                                        style={{\r\n                                            display: 'inline-flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '0.5rem',\r\n                                            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                                            color: 'white',\r\n                                            padding: '0.75rem 1.5rem',\r\n                                            borderRadius: '0.5rem',\r\n                                            border: 'none',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '600',\r\n                                            boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\r\n                                            transition: 'all 0.2s ease'\r\n                                        }}\r\n                                        onMouseOver={(e) => {\r\n                                            e.target.style.transform = 'translateY(-2px)';\r\n                                            e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\r\n                                        }}\r\n                                        onMouseOut={(e) => {\r\n                                            e.target.style.transform = 'translateY(0)';\r\n                                            e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\r\n                                        }}\r\n                                    >\r\n                                        <span style={{ fontSize: '1.1rem' }}>✅</span>\r\n                                        Finalize & Grade Next Student\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div style={{\r\n                                    marginTop: '1rem',\r\n                                    padding: '0.75rem',\r\n                                    background: 'rgba(255, 255, 255, 0.6)',\r\n                                    borderRadius: '0.375rem',\r\n                                    fontSize: '0.75rem',\r\n                                    color: '#065f46'\r\n                                }}>\r\n                                    <strong>Draft:</strong> Save progress, can edit later • <strong>Finalize:</strong> Complete grading, ready for student/LMS\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* General Feedback Section */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n                                📝 General Feedback\r\n                            </h3>\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '0.75rem',\r\n                                padding: '1.5rem'\r\n                            }}>\r\n                                <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1.5rem' }}>\r\n                                    <div>\r\n                                        <label style={{\r\n                                            display: 'block',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '500',\r\n                                            color: '#374151',\r\n                                            marginBottom: '0.5rem'\r\n                                        }}>\r\n                                            Overall Comments\r\n                                        </label>\r\n                                        <textarea\r\n                                            value={gradingData.feedback.general}\r\n                                            onChange={(e) => setGradingData(prevData => ({\r\n                                                ...prevData,\r\n                                                feedback: { ...prevData.feedback, general: e.target.value }\r\n                                            }))}\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                padding: '0.75rem',\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                fontSize: '0.875rem',\r\n                                                resize: 'none',\r\n                                                minHeight: '100px'\r\n                                            }}\r\n                                            rows=\"4\"\r\n                                            placeholder=\"General comments about the assignment...\"\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                                        <div>\r\n                                            <label style={{\r\n                                                display: 'block',\r\n                                                fontSize: '0.875rem',\r\n                                                fontWeight: '500',\r\n                                                color: '#374151',\r\n                                                marginBottom: '0.5rem'\r\n                                            }}>\r\n                                                Strengths\r\n                                            </label>\r\n                                            <textarea\r\n                                                value={gradingData.feedback.strengths}\r\n                                                onChange={(e) => setGradingData(prevData => ({\r\n                                                    ...prevData,\r\n                                                    feedback: { ...prevData.feedback, strengths: e.target.value }\r\n                                                }))}\r\n                                                style={{\r\n                                                    width: '100%',\r\n                                                    padding: '0.75rem',\r\n                                                    border: '1px solid #d1d5db',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    fontSize: '0.875rem',\r\n                                                    resize: 'none',\r\n                                                    minHeight: '100px'\r\n                                                }}\r\n                                                rows=\"4\"\r\n                                                placeholder=\"What the student did well...\"\r\n                                            />\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label style={{\r\n                                                display: 'block',\r\n                                                fontSize: '0.875rem',\r\n                                                fontWeight: '500',\r\n                                                color: '#374151',\r\n                                                marginBottom: '0.5rem'\r\n                                            }}>\r\n                                                Areas for Improvement\r\n                                            </label>\r\n                                            <textarea\r\n                                                value={gradingData.feedback.improvements}\r\n                                                onChange={(e) => setGradingData(prevData => ({\r\n                                                    ...prevData,\r\n                                                    feedback: { ...prevData.feedback, improvements: e.target.value }\r\n                                                }))}\r\n                                                style={{\r\n                                                    width: '100%',\r\n                                                    padding: '0.75rem',\r\n                                                    border: '1px solid #d1d5db',\r\n                                                    borderRadius: '0.5rem',\r\n                                                    fontSize: '0.875rem',\r\n                                                    resize: 'none',\r\n                                                    minHeight: '100px'\r\n                                                }}\r\n                                                rows=\"4\"\r\n                                                placeholder=\"Suggestions for improvement...\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* File Attachments */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n                                📎 File Attachments\r\n                            </h3>\r\n                            <div style={{\r\n                                border: '2px dashed #d1d5db',\r\n                                borderRadius: '0.5rem',\r\n                                padding: '1.5rem',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                <input\r\n                                    ref={fileInputRef}\r\n                                    type=\"file\"\r\n                                    multiple\r\n                                    onChange={(e) => handleFileUpload(e.target.files)}\r\n                                    style={{ display: 'none' }}\r\n                                />\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '0.5rem',\r\n                                        background: '#3b82f6',\r\n                                        color: 'white',\r\n                                        padding: '0.75rem 1.5rem',\r\n                                        borderRadius: '0.5rem',\r\n                                        border: 'none',\r\n                                        cursor: 'pointer',\r\n                                        margin: '0 auto'\r\n                                    }}\r\n                                >\r\n                                    <Plus size={20} />\r\n                                    Add Files\r\n                                </button>\r\n                                <p style={{ color: '#6b7280', marginTop: '0.5rem', fontSize: '0.875rem' }}>\r\n                                    Upload images, documents, or other files relevant to the assignment\r\n                                </p>\r\n                            </div>\r\n\r\n                            {gradingData.attachments.length > 0 && (\r\n                                <div style={{ marginTop: '1rem' }}>\r\n                                    <h4 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                                        Uploaded Files ({gradingData.attachments.length})\r\n                                    </h4>\r\n                                    <div style={{\r\n                                        display: 'grid',\r\n                                        gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                                        gap: '1rem'\r\n                                    }}>\r\n                                        {gradingData.attachments.map((file) => (\r\n                                            <div key={file.id} style={{\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                overflow: 'hidden',\r\n                                                background: 'white'\r\n                                            }}>\r\n                                                {file.type.startsWith('image/') ? (\r\n                                                    <div style={{ position: 'relative' }}>\r\n                                                        <img\r\n                                                            src={file.base64Data || URL.createObjectURL(file.file)}\r\n                                                            alt={file.name}\r\n                                                            style={{\r\n                                                                width: '100%',\r\n                                                                height: '150px',\r\n                                                                objectFit: 'cover'\r\n                                                            }}\r\n                                                        />\r\n                                                        <button\r\n                                                            onClick={() => removeAttachment(file.id)}\r\n                                                            style={{\r\n                                                                position: 'absolute',\r\n                                                                top: '0.5rem',\r\n                                                                right: '0.5rem',\r\n                                                                background: '#dc2626',\r\n                                                                color: 'white',\r\n                                                                borderRadius: '50%',\r\n                                                                width: '24px',\r\n                                                                height: '24px',\r\n                                                                border: 'none',\r\n                                                                cursor: 'pointer',\r\n                                                                display: 'flex',\r\n                                                                alignItems: 'center',\r\n                                                                justifyContent: 'center'\r\n                                                            }}\r\n                                                        >\r\n                                                            <X size={12} />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <div style={{ padding: '1rem' }}>\r\n                                                        <FileText size={40} style={{ color: '#6b7280', margin: '0 auto 0.5rem auto', display: 'block' }} />\r\n                                                    </div>\r\n                                                )}\r\n                                                <div style={{ padding: '0.75rem' }}>\r\n                                                    <p style={{ fontWeight: '500', fontSize: '0.875rem', marginBottom: '0.25rem' }}>\r\n                                                        {file.name}\r\n                                                    </p>\r\n                                                    <p style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                                                        {(file.size / 1024).toFixed(1)} KB\r\n                                                    </p>\r\n                                                    {!file.type.startsWith('image/') && (\r\n                                                        <button\r\n                                                            onClick={() => removeAttachment(file.id)}\r\n                                                            style={{\r\n                                                                marginTop: '0.5rem',\r\n                                                                color: '#dc2626',\r\n                                                                background: 'none',\r\n                                                                border: 'none',\r\n                                                                fontSize: '0.75rem',\r\n                                                                cursor: 'pointer'\r\n                                                            }}\r\n                                                        >\r\n                                                            Remove\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Video Links Section */}\r\n                        <div style={{ marginBottom: '2rem' }}>\r\n                            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n                                🎥 Video Review Links\r\n                            </h3>\r\n                            <div style={{\r\n                                background: 'linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)',\r\n                                border: '1px solid #e9d5ff',\r\n                                borderRadius: '0.5rem',\r\n                                padding: '1.5rem'\r\n                            }}>\r\n                                <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem', flexWrap: 'wrap' }}>\r\n                                    <div style={{ flex: 1, minWidth: '200px' }}>\r\n                                        <label style={{\r\n                                            display: 'block',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '500',\r\n                                            color: '#374151',\r\n                                            marginBottom: '0.25rem'\r\n                                        }}>\r\n                                            Video URL\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"url\"\r\n                                            value={videoLinkInput}\r\n                                            onChange={(e) => setVideoLinkInput(e.target.value)}\r\n                                            placeholder=\"https://example.com/video...\"\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                padding: '0.75rem',\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                fontSize: '0.875rem'\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{ minWidth: '150px' }}>\r\n                                        <label style={{\r\n                                            display: 'block',\r\n                                            fontSize: '0.875rem',\r\n                                            fontWeight: '500',\r\n                                            color: '#374151',\r\n                                            marginBottom: '0.25rem'\r\n                                        }}>\r\n                                            Title (Optional)\r\n                                        </label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={videoTitle}\r\n                                            onChange={(e) => setVideoTitle(e.target.value)}\r\n                                            placeholder=\"Video title\"\r\n                                            style={{\r\n                                                width: '100%',\r\n                                                padding: '0.75rem',\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                fontSize: '0.875rem'\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', alignItems: 'end' }}>\r\n                                        <button\r\n                                            onClick={addVideoLink}\r\n                                            disabled={!videoLinkInput.trim()}\r\n                                            style={{\r\n                                                display: 'flex',\r\n                                                alignItems: 'center',\r\n                                                gap: '0.5rem',\r\n                                                background: videoLinkInput.trim() ? '#7c3aed' : '#9ca3af',\r\n                                                color: 'white',\r\n                                                padding: '0.75rem 1rem',\r\n                                                borderRadius: '0.5rem',\r\n                                                border: 'none',\r\n                                                cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed'\r\n                                            }}\r\n                                        >\r\n                                            <Plus size={18} />\r\n                                            Add Video\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {gradingData.videoLinks.length > 0 && (\r\n                                <div style={{ marginTop: '1.5rem' }}>\r\n                                    <h4 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                                        Added Video Links ({gradingData.videoLinks.length})\r\n                                    </h4>\r\n                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\r\n                                        {gradingData.videoLinks.map((videoLink) => (\r\n                                            <div key={videoLink.id} style={{\r\n                                                border: '1px solid #d1d5db',\r\n                                                borderRadius: '0.5rem',\r\n                                                overflow: 'hidden'\r\n                                            }}>\r\n                                                <div style={{\r\n                                                    background: '#f9fafb',\r\n                                                    padding: '1rem',\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    justifyContent: 'space-between'\r\n                                                }}>\r\n                                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\r\n                                                        <div style={{\r\n                                                            width: '32px',\r\n                                                            height: '32px',\r\n                                                            background: '#7c3aed',\r\n                                                            borderRadius: '0.25rem',\r\n                                                            display: 'flex',\r\n                                                            alignItems: 'center',\r\n                                                            justifyContent: 'center'\r\n                                                        }}>\r\n                                                            <Video size={16} style={{ color: 'white' }} />\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p style={{ fontWeight: '500', color: '#374151' }}>{videoLink.title}</p>\r\n                                                            <p style={{ fontSize: '0.875rem', color: '#6b7280' }}>External Link</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n                                                        <a\r\n                                                            href={videoLink.url}\r\n                                                            target=\"_blank\"\r\n                                                            rel=\"noopener noreferrer\"\r\n                                                            style={{\r\n                                                                background: '#3b82f6',\r\n                                                                color: 'white',\r\n                                                                padding: '0.25rem 0.75rem',\r\n                                                                borderRadius: '0.25rem',\r\n                                                                fontSize: '0.875rem',\r\n                                                                textDecoration: 'none'\r\n                                                            }}\r\n                                                        >\r\n                                                            Open Link\r\n                                                        </a>\r\n                                                        <button\r\n                                                            onClick={() => removeVideoLink(videoLink.id)}\r\n                                                            style={{\r\n                                                                color: '#dc2626',\r\n                                                                background: 'none',\r\n                                                                border: 'none',\r\n                                                                cursor: 'pointer',\r\n                                                                padding: '0.25rem'\r\n                                                            }}\r\n                                                        >\r\n                                                            <X size={16} />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GradingTemplate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}