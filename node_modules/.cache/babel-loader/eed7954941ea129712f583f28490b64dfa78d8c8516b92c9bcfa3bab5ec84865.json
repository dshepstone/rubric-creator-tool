{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\AssignmentPromptGenerator.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Download, Sparkles, FileText, ArrowRight, Lightbulb, BookOpen, Code, Plus, Minus, Upload, Save } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { generateAssignmentHeader, hasSchoolLogo } from './logoIntegrationUtility';\n\n// Simple Rich Text Editor Component\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SimpleRichTextEditor = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  value,\n  onChange,\n  placeholder\n}, ref) => {\n  _s();\n  const editorRef = useRef(null);\n  const [isEditorReady, setIsEditorReady] = useState(false);\n  useEffect(() => {\n    if (editorRef.current) {\n      setIsEditorReady(true);\n      // Set initial content\n      if (value && editorRef.current.innerHTML !== value) {\n        editorRef.current.innerHTML = value || '';\n      }\n    }\n  }, [value]);\n\n  // Initialize form data if it doesn't exist\n  React.useEffect(() => {\n    if (!assignmentPromptFormData) {\n      initializeAssignmentPromptFormData();\n    }\n  }, [assignmentPromptFormData, initializeAssignmentPromptFormData]);\n  const [generatedPrompt, setGeneratedPrompt] = useState('');\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [generatedHTML, setGeneratedHTML] = useState('');\n  const [showHTML, setShowHTML] = useState(false);\n\n  // ADD: Ref for the results container to scroll to\n  const resultsRef = useRef(null);\n\n  // ADD: File input ref for loading JSON\n  const fileInputRef = useRef(null);\n  const handlePaste = e => {\n    e.preventDefault();\n    const clipboard = e.clipboardData;\n    const htmlData = clipboard.getData('text/html');\n    const textData = clipboard.getData('text/plain');\n    let cleanContent;\n    if (htmlData) {\n      // Enhanced HTML sanitization - preserve more formatting including lists\n      cleanContent = sanitizeHtml(htmlData);\n    } else {\n      // Convert plain text to HTML, preserving line breaks\n      cleanContent = textData.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r\\n|\\r|\\n/g, '<br>');\n    }\n\n    // Focus the editor first\n    editorRef.current.focus();\n\n    // Insert the content\n    if (document.queryCommandSupported('insertHTML')) {\n      document.execCommand('insertHTML', false, cleanContent);\n    } else {\n      // Fallback for browsers that don't support insertHTML\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        range.deleteContents();\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = cleanContent;\n        const fragment = document.createDocumentFragment();\n        while (tempDiv.firstChild) {\n          fragment.appendChild(tempDiv.firstChild);\n        }\n        range.insertNode(fragment);\n      }\n    }\n\n    // Trigger onChange\n    if (onChange) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n  const sanitizeHtml = html => {\n    let cleanedHtml = html\n    // Remove all HTML comments (<!-- ‚Ä¶ -->), including Word's conditional comments\n    .replace(/<!--[\\s\\S]*?-->/g, '')\n    // Remove style tags and their content\n    .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\n    // Remove script tags and their content\n    .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\n    // Remove XML declarations and Office-specific tags\n    .replace(/<\\?xml[^>]*>/gi, '').replace(/<\\/?o:p[^>]*>/gi, '').replace(/<\\/?v:[^>]*>/gi, '').replace(/<\\/?w:[^>]*>/gi, '');\n\n    // Create a temporary container\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = cleanedHtml;\n\n    // Remove all style attributes and Microsoft Office attributes\n    const removeAttributes = element => {\n      if (element.nodeType === Node.ELEMENT_NODE) {\n        const attributesToRemove = [];\n        for (let i = 0; i < element.attributes.length; i++) {\n          const attr = element.attributes[i];\n          if (attr.name.startsWith('mso-') || attr.name === 'style' || attr.name.startsWith('o:') || attr.name.startsWith('v:') || attr.name.startsWith('w:')) {\n            attributesToRemove.push(attr.name);\n          }\n        }\n        attributesToRemove.forEach(attrName => {\n          element.removeAttribute(attrName);\n        });\n\n        // Recursively clean child elements\n        for (let child of element.children) {\n          removeAttributes(child);\n        }\n      }\n    };\n    removeAttributes(tempDiv);\n\n    // Clean and rebuild DOM structure\n    const cleanNode = node => {\n      if (node.nodeType === Node.TEXT_NODE) {\n        return node.textContent.trim() ? document.createTextNode(node.textContent) : null;\n      } else if (node.nodeType === Node.ELEMENT_NODE) {\n        const tagName = node.tagName.toLowerCase();\n        const allowedTags = ['p', 'br', 'strong', 'b', 'em', 'i', 'u', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'li', 'div', 'span'];\n        if (allowedTags.includes(tagName)) {\n          const newNode = document.createElement(tagName);\n\n          // Copy allowed attributes (none for now, but could be expanded)\n\n          // Process children\n          for (const child of Array.from(node.childNodes)) {\n            const cleanedChild = cleanNode(child);\n            if (cleanedChild) {\n              newNode.appendChild(cleanedChild);\n            }\n          }\n          return newNode.childNodes.length > 0 || tagName === 'br' ? newNode : null;\n        } else {\n          const fragment = document.createDocumentFragment();\n          for (const child of Array.from(node.childNodes)) {\n            const cleanedChild = cleanNode(child);\n            if (cleanedChild) {\n              fragment.appendChild(cleanedChild);\n            }\n          }\n          return fragment.childNodes.length > 0 ? fragment : null;\n        }\n      }\n      return null;\n    };\n    const cleanedContainer = document.createElement('div');\n    for (const child of Array.from(tempDiv.childNodes)) {\n      const cleanedChild = cleanNode(child);\n      if (cleanedChild) {\n        cleanedContainer.appendChild(cleanedChild);\n      }\n    }\n\n    // Final cleanup\n    const finalHtml = cleanedContainer.innerHTML.replace(/<p[^>]*>\\s*<\\/p>/g, '').replace(/\\n\\s*\\n/g, '\\n').replace(/(<\\/[^>]+>)\\s+(<[^>]+>)/g, '$1$2').trim();\n    return finalHtml;\n  };\n  const handleInput = () => {\n    if (onChange && editorRef.current) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n  const formatText = (command, value = null) => {\n    if (editorRef.current) {\n      editorRef.current.focus();\n      setTimeout(() => {\n        try {\n          document.execCommand(command, false, value);\n          if (onChange && editorRef.current) {\n            onChange(editorRef.current.innerHTML);\n          }\n        } catch (error) {\n          console.error(`Error executing command ${command}:`, error);\n        }\n      }, 10);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.ctrlKey || e.metaKey) {\n      switch (e.key) {\n        case 'b':\n          e.preventDefault();\n          formatText('bold');\n          break;\n        case 'i':\n          e.preventDefault();\n          formatText('italic');\n          break;\n        case 'u':\n          e.preventDefault();\n          formatText('underline');\n          break;\n        default:\n          break;\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"simple-rich-text-editor border border-gray-300 rounded-lg overflow-hidden bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-100 border-b border-gray-300 p-2 flex gap-2 flex-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault() // Prevent focus loss\n        ,\n        onClick: () => formatText('bold'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors text-gray-800\",\n        title: \"Bold (Ctrl+B)\",\n        children: \"B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('italic'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm italic transition-colors text-gray-800\",\n        title: \"Italic (Ctrl+I)\",\n        children: \"I\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('underline'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm underline transition-colors text-gray-800\",\n        title: \"Underline (Ctrl+U)\",\n        children: \"U\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('formatBlock', 'h3'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors text-gray-800\",\n        title: \"Heading 3\",\n        children: \"H3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('formatBlock', 'p'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\",\n        title: \"Paragraph\",\n        children: \"P\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('insertUnorderedList'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\",\n        title: \"Bullet List\",\n        children: \"\\u2022 List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('insertOrderedList'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\",\n        title: \"Numbered List\",\n        children: \"1. List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => {\n          if (editorRef.current) {\n            editorRef.current.innerHTML = '';\n            onChange('');\n          }\n        },\n        className: \"px-3 py-1 bg-red-50 border border-red-300 text-red-600 rounded hover:bg-red-100 text-sm transition-colors\",\n        title: \"Clear\",\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: editorRef,\n      contentEditable: true,\n      onInput: handleInput,\n      onPaste: handlePaste,\n      onKeyDown: handleKeyDown,\n      className: \"p-4 min-h-[120px] focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white\",\n      style: {\n        maxHeight: '300px',\n        overflowY: 'auto'\n      },\n      suppressContentEditableWarning: true,\n      \"data-placeholder\": placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                [contenteditable]:empty:before {\n                    content: attr(data-placeholder);\n                    color: #9ca3af;\n                    font-style: italic;\n                }\n                [contenteditable] strong, [contenteditable] b {\n                    font-weight: bold;\n                }\n                [contenteditable] em, [contenteditable] i {\n                    font-style: italic;\n                }\n                [contenteditable] u {\n                    text-decoration: underline;\n                }\n                [contenteditable] ul {\n                    list-style-type: disc;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] ol {\n                    list-style-type: decimal;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] li {\n                    margin-bottom: 0.25em;\n                }\n                [contenteditable] h3 {\n                    font-size: 1.25em;\n                    font-weight: bold;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p {\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p:last-child {\n                    margin-bottom: 0;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 9\n  }, this);\n}, \"vJrnNMp7OBC8C+IZNJhHbM6BM5k=\")), \"vJrnNMp7OBC8C+IZNJhHbM6BM5k=\");\n_c2 = SimpleRichTextEditor;\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\nconst AssignmentPromptGenerator = () => {\n  _s2();\n  var _formData$assignmentT, _formData$assignmentN, _formData$weightPerce, _formData$subjectArea, _formData$assignmentD, _formData$assignmentT2, _formData$assignmentD2;\n  const {\n    assignmentPromptFormData,\n    updateAssignmentPromptFormData,\n    initializeAssignmentPromptFormData\n  } = useAssessment();\n\n  // Initialize form data if it doesn't exist\n  React.useEffect(() => {\n    if (!assignmentPromptFormData) {\n      initializeAssignmentPromptFormData();\n    }\n  }, [assignmentPromptFormData, initializeAssignmentPromptFormData]);\n  const [generatedPrompt, setGeneratedPrompt] = useState('');\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [generatedHTML, setGeneratedHTML] = useState('');\n  const [showHTML, setShowHTML] = useState(false);\n\n  // ADD: File input ref for loading JSON\n  const fileInputRef = useRef(null);\n  const handleInputChange = (field, value) => {\n    updateAssignmentPromptFormData(field, value);\n\n    // Auto-sync submission folder number with assignment number\n    if (field === 'assignmentNumber' && value) {\n      updateAssignmentPromptFormData('submissionFolderNumber', value);\n    }\n  };\n\n  // ADD: Save assignment data as JSON\n  const saveAssignmentJSON = () => {\n    if (!assignmentPromptFormData) {\n      alert('No assignment data to save');\n      return;\n    }\n    const dataToSave = {\n      ...assignmentPromptFormData,\n      savedDate: new Date().toISOString(),\n      version: '1.0'\n    };\n    const dataStr = JSON.stringify(dataToSave, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n\n    // Generate filename based on assignment title and number\n    const assignmentTitle = assignmentPromptFormData.assignmentTitle || 'Assignment';\n    const assignmentNumber = assignmentPromptFormData.assignmentNumber || 'X';\n    const courseCode = assignmentPromptFormData.courseCode || 'Course';\n    const filename = `${courseCode}_Assignment_${assignmentNumber}_${assignmentTitle.replace(/\\s+/g, '_')}.json`;\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n    alert('Assignment saved successfully!');\n  };\n\n  // ADD: Load assignment data from JSON\n  const loadAssignmentJSON = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n\n  // ADD: Handle file input change\n  const handleFileLoad = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const jsonData = JSON.parse(e.target.result);\n\n        // Validate the JSON structure\n        if (typeof jsonData !== 'object' || !jsonData.assignmentTitle) {\n          throw new Error('Invalid assignment file format');\n        }\n\n        // Remove metadata fields before loading\n        const {\n          savedDate,\n          version,\n          ...assignmentData\n        } = jsonData;\n\n        // Load the data into the form\n        Object.entries(assignmentData).forEach(([field, value]) => {\n          updateAssignmentPromptFormData(field, value);\n        });\n        alert(`Assignment loaded successfully!${savedDate ? `\\nSaved: ${new Date(savedDate).toLocaleDateString()}` : ''}`);\n      } catch (error) {\n        console.error('Error loading assignment:', error);\n        alert('Error loading assignment file. Please ensure it\\'s a valid assignment JSON file.');\n      }\n    };\n    reader.readAsText(file);\n\n    // Reset the input to allow loading the same file again\n    event.target.value = '';\n  };\n\n  // CLO management functions\n  const addCLO = () => {\n    const currentCLOs = formData.clos || [];\n    if (currentCLOs.length < 15) {\n      const newCLO = {\n        id: Date.now(),\n        number: (currentCLOs.length + 1).toString(),\n        text: '',\n        type: 'CLO'\n      };\n      const updatedCLOs = [...currentCLOs, newCLO];\n      handleInputChange('clos', updatedCLOs);\n    }\n  };\n  const removeCLO = cloId => {\n    const currentCLOs = formData.clos || [];\n    if (currentCLOs.length > 1) {\n      const updatedCLOs = currentCLOs.filter(clo => clo.id !== cloId);\n      handleInputChange('clos', updatedCLOs);\n    }\n  };\n  const updateCLO = (cloId, field, value) => {\n    const currentCLOs = formData.clos || [];\n    const updatedCLOs = currentCLOs.map(clo => clo.id === cloId ? {\n      ...clo,\n      [field]: value\n    } : clo);\n    handleInputChange('clos', updatedCLOs);\n  };\n\n  // Generate number options for CLO/ULO dropdown\n  const generateNumberOptions = () => {\n    const options = [];\n    for (let i = 1; i <= 15; i++) {\n      options.push(/*#__PURE__*/_jsxDEV(\"option\", {\n        value: i.toString(),\n        children: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 26\n      }, this));\n      // Add decimal options for .1, .2, .3, .4, .5\n      for (let j = 1; j <= 5; j++) {\n        const decimal = `${i}.${j}`;\n        options.push(/*#__PURE__*/_jsxDEV(\"option\", {\n          value: decimal,\n          children: decimal\n        }, decimal, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 30\n        }, this));\n      }\n    }\n    return options;\n  };\n\n  // Generate week options for dropdown\n  const generateWeekOptions = () => {\n    const options = [/*#__PURE__*/_jsxDEV(\"option\", {\n      value: \"\",\n      children: \"Select Week\"\n    }, \"default\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 26\n    }, this)];\n    for (let i = 1; i <= 16; i++) {\n      options.push(/*#__PURE__*/_jsxDEV(\"option\", {\n        value: i.toString(),\n        children: `Week ${i}`\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 26\n      }, this));\n    }\n    return options;\n  };\n\n  // Use shared form data, fallback to defaults if not available\n  const formData = assignmentPromptFormData || {\n    assignmentTitle: '',\n    assignmentNumber: '1',\n    weightPercentage: '',\n    courseCode: '',\n    programLevel: '',\n    subjectArea: '',\n    assignmentDescription: '',\n    rationale: 'This assignment will evaluate the following Course Learning Outcomes:',\n    clos: [{\n      id: 1,\n      number: '1',\n      text: '',\n      type: 'CLO'\n    }, {\n      id: 2,\n      number: '2',\n      text: '',\n      type: 'CLO'\n    }, {\n      id: 3,\n      number: '3',\n      text: '',\n      type: 'CLO'\n    }, {\n      id: 4,\n      number: '4',\n      text: '',\n      type: 'CLO'\n    }],\n    directions: '',\n    gradingDetails: '',\n    dueWeek: '',\n    dueDateCustom: '',\n    submissionFolderNumber: '1',\n    specialInstructions: '',\n    tipsForSuccess: ''\n  };\n  const generateAIPrompt = () => {\n    // Generate CLO text for the prompt\n    const clos = formData.clos || [];\n    const closText = clos.filter(clo => clo.text.trim() !== '').map(clo => `- ${clo.type}${clo.number}: ${clo.text}`).join('\\n');\n\n    // Generate due date text\n    const dueText = formData.dueWeek ? `Week ${formData.dueWeek}${formData.dueDateCustom ? ` (${formData.dueDateCustom})` : ''}` : formData.dueDateCustom || 'See your Instructional Plan for exact due dates.';\n\n    // Generate submission folder text\n    const submissionFolderText = `Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}`;\n    const prompt = `Create HTML code for an assignment details page that matches EXACTLY the structure and format of the provided template for D2L. Use the following assignment information:\n\n**Assignment Information:**\n- Assignment Title: Individual Assignment ${formData.assignmentNumber} (${formData.weightPercentage}%)\n- Assignment Number: ${formData.assignmentNumber}\n- Weight: ${formData.weightPercentage}%\n- Course Code: ${formData.courseCode}\n- Subject Area: ${formData.subjectArea}\n- Due Date: ${dueText}\n- Submission Folder: ${submissionFolderText}\n\n**Assignment Content:**\n- Description: ${formData.assignmentDescription}\n- Rationale: ${formData.rationale}\n- Learning Outcomes:\n${closText}\n- Directions: ${formData.directions}\n- Grading Details: ${formData.gradingDetails}\n- Tips for Success: ${formData.tipsForSuccess}\n- Special Instructions: ${formData.specialInstructions}\n\n**CRITICAL REQUIREMENTS:**\n1. Use EXACTLY this HTML structure for D2L content area (NO DOCTYPE, html, head, or body tags):\n\n\\`\\`\\`html\n<div class=\"container-fluid\">\n<div class=\"row justify-content-center\">\n<div class=\"col-sm-12 col-md-10\">\n<p><strong>Due:</strong>&nbsp; [DUE DATE]</p>\n<p><strong>Submit to: </strong>The&nbsp;<strong>[SUBMISSION FOLDER]</strong>&nbsp;submission folder. Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments </strong>on the course navigation bar.</p>\n<h2>Description</h2>\n<p>[DESCRIPTION]</p>\n<h3>Rationale</h3>\n<p>[RATIONALE TEXT]</p>\n<ul>\n[LEARNING OUTCOME LIST ITEMS]\n</ul>\n<h2>Directions</h2>\n<p>[DIRECTIONS]</p>\n<h2>How Your Assignment Will be Graded</h2>\n<p>[GRADING INFORMATION]</p>\n<p>See your Program Handbook for the late policy.</p>\n<h2>Tips for Success</h2>\n<p>[TIPS FOR SUCCESS]</p>\n</div>\n</div>\n</div>\n\\`\\`\\`\n\n2. Replace all bracketed placeholders with the appropriate information provided above\n3. This is for D2L content area - do NOT include DOCTYPE, html, head, or body tags\n4. Follow the content structure exactly as shown in the simple template\n5. Use proper HTML formatting with &lt;strong&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;ul&gt;, &lt;li&gt;, &lt;p&gt; tags\n6. For the learning outcome list, create &lt;li&gt; tags with the format: &lt;li&gt;CLO#: [text]&lt;/li&gt; or &lt;li&gt;ULO#: [text]&lt;/li&gt;\n7. For grading section: use the provided grading details text\n8. Keep the format simple and clean - this is the basic template structure\n\nGenerate complete, ready-to-paste HTML code for D2L content area that matches the simple template structure exactly.`;\n    setGeneratedPrompt(prompt);\n    setShowPrompt(true);\n    setShowHTML(false);\n  };\n  const generateAssignmentHTML = () => {\n    // Generate CLO list HTML\n    const clos = formData.clos || [];\n    const closHTML = clos.filter(clo => clo.text.trim() !== '').map(clo => `    <li><strong>${clo.type} ${clo.number}:</strong> ${clo.text}</li>`).join('\\n');\n\n    // Generate due date text\n    const dueText = formData.dueWeek ? `(Week ${formData.dueWeek}${formData.dueDateCustom ? ` - ${formData.dueDateCustom}` : ''})` : formData.dueDateCustom ? `(${formData.dueDateCustom})` : '(See your Instructional Plan for exact due dates)';\n\n    // Generate submission folder text\n    const submissionFolderText = `Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}`;\n\n    // Helper function to extract text content from HTML and format for display\n    const formatRichTextForHTML = (htmlContent, fallbackText) => {\n      if (!htmlContent || htmlContent.trim() === '') {\n        return fallbackText;\n      }\n\n      // If it's already HTML content (contains HTML tags), use it as is\n      if (htmlContent.includes('<') && htmlContent.includes('>')) {\n        // Clean up the HTML content and ensure proper formatting\n        return htmlContent.replace(/<div>/g, '<p>').replace(/<\\/div>/g, '</p>').replace(/<br\\s*\\/?>/g, '<br>').trim();\n      } else {\n        // If it's plain text, wrap in paragraph tags\n        return `<p>${htmlContent}</p>`;\n      }\n    };\n    const assignmentHTML = `<div class=\"container-fluid\">\n<div class=\"row justify-content-center\">\n<div class=\"col-sm-12 col-md-10\">\n  <h1>Assignment ${formData.assignmentNumber || 'X'}: ${formData.assignmentTitle || '[Assignment Title]'}</h1>\n  <p><strong>Due:</strong> ${dueText}</p>\n  <p><strong>Weight:</strong> ${formData.weightPercentage || 'X'}% of final grade</p>\n  <p><strong>Submit to: </strong>The <strong>${submissionFolderText}</strong> submission folder. Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments</strong> on the course navigation bar.</p>\n  <h2>Description</h2>\n  <p>${formData.assignmentDescription || '[Please provide a short description of the assignment]'}</p>\n  <h3>Rationale</h3>\n  <p>${formData.rationale || 'This assignment will evaluate the following Course Learning Outcomes:'}</p>\n  <ul>\n${closHTML || '    <li><strong>CLO1:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO2:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO3:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO4:</strong> [Learning outcome description]</li>'}\n  </ul>\n  <h2>Directions</h2>\n  ${formatRichTextForHTML(formData.directions, '<p>[Provide step-by-step instructions if applicable]</p>')}\n  <h2>How Your Assignment Will be Graded</h2>\n  ${formatRichTextForHTML(formData.gradingDetails, '<p>A rubric has been created and can be found attached to the submission folder. Your work will be evaluated on [specify criteria].</p>')}\n  <p>See your Program Handbook for the late policy.</p>\n  <h3>Tips for Success:</h3>\n  ${formatRichTextForHTML(formData.tipsForSuccess, '<p>Tips for completing this assignment successfully will be provided here.</p>')}\n${formData.specialInstructions && formData.specialInstructions.trim() !== '' ? `  <h3>Additional Information:</h3>\\n  ${formatRichTextForHTML(formData.specialInstructions, '')}` : ''}\n</div>\n</div>\n</div>`;\n    setGeneratedHTML(assignmentHTML);\n    setShowHTML(true);\n    setShowPrompt(false);\n  };\n  const generateStudentHTML = () => {\n    // Generate CLO list HTML\n    const clos = formData.clos || [];\n    const closHTML = clos.filter(clo => clo.text.trim() !== '').map(clo => `        <li><strong>${clo.type} ${clo.number}:</strong> ${clo.text}</li>`).join('\\n');\n\n    // Generate due date text\n    const dueText = formData.dueWeek ? `Week ${formData.dueWeek}${formData.dueDateCustom ? ` - ${formData.dueDateCustom}` : ''}` : formData.dueDateCustom || 'See your Instructional Plan for exact due dates';\n\n    // Helper function to extract text content from HTML and format for display\n    const formatRichTextForStudentHTML = (htmlContent, fallbackText) => {\n      if (!htmlContent || htmlContent.trim() === '') {\n        return `<p>${fallbackText}</p>`;\n      }\n      if (htmlContent.includes('<') && htmlContent.includes('>')) {\n        return htmlContent.replace(/<div>/g, '<p>').replace(/<\\/div>/g, '</p>').replace(/<br\\s*\\/?>/g, '<br>').trim();\n      } else {\n        return `<p>${htmlContent}</p>`;\n      }\n    };\n\n    // Generate header with school logo on the right\n    const assignmentHeaderHTML = generateAssignmentHeader({\n      title: formData.assignmentTitle || 'Assignment Title',\n      assignmentNumber: formData.assignmentNumber || 'X',\n      courseCode: formData.courseCode || 'Course Code',\n      weight: formData.weightPercentage || 'X'\n    }, {\n      maxHeight: 70,\n      maxWidth: 200\n    });\n    const studentHTML = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"utf-8\"/>\n    <meta content=\"width=device-width, initial-scale=1\" name=\"viewport\"/>\n    <title>${formData.assignmentTitle || 'Assignment'} - ${formData.courseCode || 'Course'}</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            margin: 0;\n            padding: 20px;\n            background-color: #f8fafc;\n            color: #334155;\n        }\n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: white;\n            padding: 30px;\n            border-radius: 10px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n        .assignment-header {\n            margin-bottom: 30px;\n            padding-bottom: 20px;\n            border-bottom: 2px solid #e2e8f0;\n        }\n        h1 {\n            color: #1e40af;\n            margin: 0 0 10px 0;\n            font-size: 2rem;\n            font-weight: 700;\n        }\n        h2 {\n            color: #1e40af;\n            border-bottom: 2px solid #3b82f6;\n            padding-bottom: 5px;\n            margin-top: 30px;\n            margin-bottom: 15px;\n        }\n        h3 {\n            color: #1f2937;\n            margin-top: 25px;\n            margin-bottom: 10px;\n        }\n        .due-info {\n            background: #dbeafe;\n            padding: 15px;\n            border-radius: 8px;\n            margin: 20px 0;\n            border-left: 4px solid #3b82f6;\n        }\n        .submission-info {\n            background: #f0fdf4;\n            padding: 15px;\n            border-radius: 8px;\n            margin: 20px 0;\n            border-left: 4px solid #16a34a;\n        }\n        ul {\n            padding-left: 20px;\n        }\n        li {\n            margin-bottom: 8px;\n        }\n        .school-logo, .assignment-logo {\n            max-height: 70px;\n            max-width: 200px;\n            object-fit: contain;\n        }\n        footer {\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid #e2e8f0;\n            text-align: center;\n            color: #64748b;\n            font-size: 0.9rem;\n        }\n        \n        @media print {\n            body { background: white; }\n            .container { box-shadow: none; }\n            .school-logo, .assignment-logo { max-height: 50px !important; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        ${assignmentHeaderHTML}\n        \n        <div class=\"due-info\">\n            <strong>üìÖ Due:</strong> ${dueText}\n        </div>\n        \n        <div class=\"submission-info\">\n            <strong>üì§ Submit to:</strong> The <strong>Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}</strong> submission folder. \n            Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments</strong> on the course navigation bar.\n        </div>\n\n        <h2>üìã Description</h2>\n        ${formatRichTextForStudentHTML(formData.assignmentDescription, 'Please provide a short description of the assignment')}\n\n        <h2>üéØ Rationale</h2>\n        ${formatRichTextForStudentHTML(formData.rationale, 'This assignment will evaluate the following Course Learning Outcomes:')}\n        \n        <ul>\n${closHTML || '            <li><strong>CLO1:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO2:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO3:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO4:</strong> [Learning outcome description]</li>'}\n        </ul>\n\n        <h2>üìù Directions</h2>\n        ${formatRichTextForStudentHTML(formData.directions, 'Provide step-by-step instructions if applicable')}\n\n        <h2>üìä How Your Assignment Will be Graded</h2>\n        ${formatRichTextForStudentHTML(formData.gradingDetails, 'A rubric has been created and can be found attached to the submission folder. Your work will be evaluated on [specify criteria].')}\n        \n        <p><strong>‚ö†Ô∏è Late Policy:</strong> See your Program Handbook for the late policy.</p>\n\n        <h2>üí° Tips for Success</h2>\n        ${formatRichTextForStudentHTML(formData.tipsForSuccess, 'Tips for completing this assignment successfully will be provided here.')}\n\n${formData.specialInstructions && formData.specialInstructions.trim() !== '' ? `        <h2>‚ÑπÔ∏è Additional Information</h2>\n        ${formatRichTextForStudentHTML(formData.specialInstructions, '')}\n` : ''}\n        <footer>\n            <p><strong>${formData.courseCode || 'Course Code'}</strong> | ${new Date().getFullYear()}</p>\n            <p>Last Updated: ${new Date().toLocaleDateString()}</p>\n            ${hasSchoolLogo() ? '<p>Generated with institutional branding</p>' : ''}\n        </footer>\n    </div>\n</body>\n</html>`;\n    return studentHTML;\n  };\n  const exportStudentHTML = () => {\n    const studentHTML = generateStudentHTML();\n    const element = document.createElement('a');\n    const file = new Blob([studentHTML], {\n      type: 'text/html'\n    });\n    element.href = URL.createObjectURL(file);\n    const assignmentNum = formData.assignmentNumber || 'X';\n    const courseCode = formData.courseCode || 'Course';\n    element.download = `${courseCode}_Assignment_${assignmentNum}_${formData.assignmentTitle.replace(/\\s+/g, '_').toLowerCase()}_Student.html`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n  const exportPrompt = () => {\n    const element = document.createElement('a');\n    const file = new Blob([generatedPrompt], {\n      type: 'text/plain'\n    });\n    element.href = URL.createObjectURL(file);\n    const assignmentNum = formData.assignmentNumber || 'X';\n    element.download = `assignment-${assignmentNum}-ai-prompt-${formData.assignmentTitle.replace(/\\s+/g, '-').toLowerCase()}.txt`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n  const exportHTML = () => {\n    const element = document.createElement('a');\n    const file = new Blob([generatedHTML], {\n      type: 'text/html'\n    });\n    element.href = URL.createObjectURL(file);\n    const submissionNumber = formData.submissionFolderNumber || formData.assignmentNumber || '1';\n    element.download = `Assignment_${submissionNumber}_${formData.assignmentTitle.replace(/\\s+/g, '_').toLowerCase()}_D2L.html`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  };\n  const copyToClipboard = content => {\n    navigator.clipboard.writeText(content);\n    alert('Content copied to clipboard!');\n  };\n  const clearForm = () => {\n    if (window.confirm('Are you sure you want to clear all form data? This action cannot be undone.')) {\n      initializeAssignmentPromptFormData();\n      setGeneratedPrompt('');\n      setGeneratedHTML('');\n      setShowPrompt(false);\n      setShowHTML(false);\n    }\n  };\n\n  // Form validation\n  const isFormValid = ((_formData$assignmentT = formData.assignmentTitle) === null || _formData$assignmentT === void 0 ? void 0 : _formData$assignmentT.trim()) && ((_formData$assignmentN = formData.assignmentNumber) === null || _formData$assignmentN === void 0 ? void 0 : _formData$assignmentN.trim()) && ((_formData$weightPerce = formData.weightPercentage) === null || _formData$weightPerce === void 0 ? void 0 : _formData$weightPerce.trim()) && ((_formData$subjectArea = formData.subjectArea) === null || _formData$subjectArea === void 0 ? void 0 : _formData$subjectArea.trim()) && ((_formData$assignmentD = formData.assignmentDescription) === null || _formData$assignmentD === void 0 ? void 0 : _formData$assignmentD.trim()) && (formData.clos || []).some(clo => {\n    var _clo$text;\n    return (_clo$text = clo.text) === null || _clo$text === void 0 ? void 0 : _clo$text.trim();\n  });\n\n  // Check if there's data to save\n  const hasDataToSave = ((_formData$assignmentT2 = formData.assignmentTitle) === null || _formData$assignmentT2 === void 0 ? void 0 : _formData$assignmentT2.trim()) || ((_formData$assignmentD2 = formData.assignmentDescription) === null || _formData$assignmentD2 === void 0 ? void 0 : _formData$assignmentD2.trim()) || (formData.clos || []).some(clo => {\n    var _clo$text2;\n    return (_clo$text2 = clo.text) === null || _clo$text2 === void 0 ? void 0 : _clo$text2.trim();\n  });\n  if (!formData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 949,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm p-6 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-8 h-8 text-orange-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 959,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl font-bold text-gray-900\",\n                children: \"Assignment Prompt Generator\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 961,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"Create AI prompts and D2L HTML for assignment pages\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 962,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 960,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 958,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveAssignmentJSON,\n              disabled: !hasDataToSave,\n              className: `flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${hasDataToSave ? 'bg-blue-600 text-white hover:bg-blue-700 shadow-sm' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n              title: \"Save current assignment as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 977,\n                columnNumber: 33\n              }, this), \"Save JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 968,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: loadAssignmentJSON,\n              className: \"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-all duration-200 shadow-sm\",\n              title: \"Load assignment from JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 986,\n                columnNumber: 33\n              }, this), \"Load JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 981,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 967,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          accept: \".json\",\n          onChange: handleFileLoad,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-orange-50 to-green-50 rounded-lg p-6 border border-orange-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Lightbulb, {\n                  className: \"w-5 h-5 text-orange-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1005,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1004,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1003,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-900 mb-2\",\n                children: \"How It Works\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1009,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4 text-sm text-gray-700 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold text-xs\",\n                    children: \"1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1012,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Fill assignment details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1013,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1011,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  className: \"w-4 h-4 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1015,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold text-xs\",\n                    children: \"2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1017,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Generate AI prompt or D2L HTML\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1018,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1016,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  className: \"w-4 h-4 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1020,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold text-xs\",\n                    children: \"3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1022,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Export or copy content\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1023,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1021,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1010,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: [\"The AI prompt helps ChatGPT create assignment pages, while the D2L HTML output can be pasted directly into D2L's content editor.\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \" Save your work as JSON files to easily resume later!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1028,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1026,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1008,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1002,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1001,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 956,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Basic Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1040,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1043,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.assignmentTitle || '',\n                onChange: e => handleInputChange('assignmentTitle', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1044,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1042,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Number *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1053,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.assignmentNumber || '',\n                onChange: e => handleInputChange('assignmentNumber', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., 1, 2, 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1054,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1052,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight Percentage *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1063,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.weightPercentage || '',\n                onChange: e => handleInputChange('weightPercentage', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., 25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1064,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Subject Area *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1073,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.subjectArea || '',\n                onChange: e => handleInputChange('subjectArea', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Computer Graphics, Web Development\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1074,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1072,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Course Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1083,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.courseCode || '',\n                onChange: e => handleInputChange('courseCode', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., COMP1234\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1084,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1082,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Submission Folder Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1093,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: formData.submissionFolderNumber || '',\n                onChange: e => handleInputChange('submissionFolderNumber', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"Auto-synced with Assignment Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1094,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500 mt-1\",\n                children: \"Automatically syncs with Assignment Number when changed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1101,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1041,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1039,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-yellow-800 mb-4\",\n            children: \"Due Date Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Due Week\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1111,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: formData.dueWeek || '',\n                onChange: e => handleInputChange('dueWeek', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                children: generateWeekOptions()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1112,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Custom Due Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: formData.dueDateCustom || '',\n                onChange: e => handleInputChange('dueDateCustom', e.target.value),\n                className: \"w-full p-3 border rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-2\",\n            children: \"If no dates provided, will default to \\\"See your Instructional Plan for exact due dates.\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1130,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-green-800 mb-4\",\n            children: \"Assignment Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Description *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1140,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: formData.assignmentDescription || '',\n                onChange: e => handleInputChange('assignmentDescription', e.target.value),\n                className: \"w-full p-3 border rounded-lg h-24\",\n                placeholder: \"Provide a clear description of what students need to create or submit...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1141,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1139,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Rationale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1149,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: formData.rationale || '',\n                onChange: e => handleInputChange('rationale', e.target.value),\n                className: \"w-full p-3 border rounded-lg h-20\",\n                placeholder: \"This assignment will evaluate the following Course Learning Outcomes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1150,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1148,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1138,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 border border-purple-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-purple-800\",\n              children: \"Learning Outcomes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: addCLO,\n                disabled: (formData.clos || []).length >= 15,\n                className: `flex items-center gap-2 px-3 py-1 text-sm rounded-lg font-medium ${(formData.clos || []).length >= 15 ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-purple-600 text-white hover:bg-purple-700'}`,\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1174,\n                  columnNumber: 37\n                }, this), \"Add CLO\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1164,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: (formData.clos || []).map((clo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start gap-3 p-3 bg-white rounded border\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: clo.type,\n                  onChange: e => updateCLO(clo.id, 'type', e.target.value),\n                  className: \"border rounded px-2 py-1 text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"CLO\",\n                    children: \"CLO\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1189,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"ULO\",\n                    children: \"ULO\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1190,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1184,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: clo.number,\n                  onChange: e => updateCLO(clo.id, 'number', e.target.value),\n                  className: \"w-16 border rounded px-2 py-1 text-sm\",\n                  children: generateNumberOptions()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1192,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1183,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: clo.text,\n                onChange: e => updateCLO(clo.id, 'text', e.target.value),\n                className: \"flex-1 border rounded px-3 py-1\",\n                placeholder: \"Enter learning outcome description...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1200,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => removeCLO(clo.id),\n                disabled: (formData.clos || []).length <= 1,\n                className: `p-1 rounded ${(formData.clos || []).length <= 1 ? 'text-gray-400 cursor-not-allowed' : 'text-red-600 hover:bg-red-50'}`,\n                children: /*#__PURE__*/_jsxDEV(Minus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1216,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 37\n              }, this)]\n            }, clo.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1182,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1180,\n            columnNumber: 25\n          }, this), (!formData.clos || formData.clos.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-8 text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n              className: \"w-12 h-12 mx-auto mb-3 text-gray-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1224,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No learning outcomes added yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"Click \\\"Add CLO\\\" to add your first learning outcome.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1226,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1223,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-indigo-50 border border-indigo-200 rounded-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-indigo-800 mb-4\",\n            children: \"Assignment Instructions & Due Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1233,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Directions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1236,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                value: formData.directions || '',\n                onChange: html => handleInputChange('directions', html),\n                placeholder: \"Provide step-by-step instructions for completing the assignment...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1237,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1235,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"How Your Assignment Will be Graded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1245,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                value: formData.gradingDetails || '',\n                onChange: html => handleInputChange('gradingDetails', html),\n                placeholder: \"Describe how the assignment will be graded...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1246,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1244,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Tips for Success\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1254,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                value: formData.tipsForSuccess || '',\n                onChange: html => handleInputChange('tipsForSuccess', html),\n                placeholder: \"Provide helpful tips and strategies for completing this assignment successfully...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600 mt-2\",\n                children: \"Share strategies, common pitfalls to avoid, recommended resources, or time management advice to help students succeed.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1260,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1253,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Additional Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1266,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n                value: formData.specialInstructions || '',\n                onChange: html => handleInputChange('specialInstructions', html),\n                placeholder: \"Any additional notes or special requirements...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1267,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1265,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1234,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4 pt-6 flex-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: generateAIPrompt,\n            disabled: !isFormValid,\n            className: `flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid ? 'bg-orange-600 text-white hover:bg-orange-700' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n            children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1286,\n              columnNumber: 29\n            }, this), \"Generate AI Prompt\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1278,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: generateAssignmentHTML,\n            disabled: !isFormValid,\n            className: `flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid ? 'bg-green-600 text-white hover:bg-green-700' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n            children: [/*#__PURE__*/_jsxDEV(Code, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1298,\n              columnNumber: 29\n            }, this), \"Generate D2L HTML\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1290,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportStudentHTML,\n            disabled: !isFormValid,\n            className: `flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid ? 'bg-purple-600 text-white hover:bg-purple-700' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1310,\n              columnNumber: 29\n            }, this), \"Export Student HTML\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1302,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearForm,\n            className: \"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700\",\n            children: \"Clear Form\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1314,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1277,\n          columnNumber: 21\n        }, this), !isFormValid && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-yellow-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u26A0\\uFE0F Required:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1325,\n              columnNumber: 33\n            }, this), \" Complete assignment title, number, weight, subject area, description, and at least one learning outcome.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1324,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1323,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1037,\n        columnNumber: 17\n      }, this), (showPrompt || showHTML) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 bg-white rounded-lg shadow-sm border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: showPrompt ? 'Generated AI Prompt' : 'Generated D2L HTML'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1335,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-1\",\n            children: showPrompt ? 'Copy this prompt and paste it into ChatGPT to generate your assignment page' : 'Copy this HTML and paste it directly into D2L\\'s content editor'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1338,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1334,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 rounded-lg p-4 border border-gray-200 max-h-96 overflow-y-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"pre\", {\n              className: \"text-sm text-gray-800 whitespace-pre-wrap font-mono\",\n              children: showPrompt ? generatedPrompt : generatedHTML\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1348,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1347,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 mt-4\",\n            children: [showPrompt && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportPrompt,\n                className: \"flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1360,\n                  columnNumber: 45\n                }, this), \"Export Prompt (.txt)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1356,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => copyToClipboard(generatedPrompt),\n                className: \"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",\n                children: [/*#__PURE__*/_jsxDEV(FileText, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1367,\n                  columnNumber: 45\n                }, this), \"Copy to Clipboard\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1363,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true), showHTML && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportHTML,\n                className: \"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1379,\n                  columnNumber: 45\n                }, this), \"Export D2L HTML\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1375,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => copyToClipboard(generatedHTML),\n                className: \"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",\n                children: [/*#__PURE__*/_jsxDEV(Code, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1386,\n                  columnNumber: 45\n                }, this), \"Copy for D2L\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1382,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1353,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1346,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1333,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 954,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 953,\n    columnNumber: 9\n  }, this);\n};\n_s2(AssignmentPromptGenerator, \"TEopt4N98tK9PhtVAuPS1KngnoA=\", false, function () {\n  return [useAssessment];\n});\n_c3 = AssignmentPromptGenerator;\nexport default AssignmentPromptGenerator;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SimpleRichTextEditor$React.forwardRef\");\n$RefreshReg$(_c2, \"SimpleRichTextEditor\");\n$RefreshReg$(_c3, \"AssignmentPromptGenerator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Sparkles","FileText","ArrowRight","Lightbulb","BookOpen","Code","Plus","Minus","Upload","Save","useAssessment","generateAssignmentHeader","hasSchoolLogo","jsxDEV","_jsxDEV","Fragment","_Fragment","SimpleRichTextEditor","_s","forwardRef","_c","value","onChange","placeholder","ref","editorRef","isEditorReady","setIsEditorReady","current","innerHTML","assignmentPromptFormData","initializeAssignmentPromptFormData","generatedPrompt","setGeneratedPrompt","showPrompt","setShowPrompt","generatedHTML","setGeneratedHTML","showHTML","setShowHTML","resultsRef","fileInputRef","handlePaste","e","preventDefault","clipboard","clipboardData","htmlData","getData","textData","cleanContent","sanitizeHtml","replace","focus","document","queryCommandSupported","execCommand","selection","window","getSelection","rangeCount","range","getRangeAt","deleteContents","tempDiv","createElement","fragment","createDocumentFragment","firstChild","appendChild","insertNode","html","cleanedHtml","removeAttributes","element","nodeType","Node","ELEMENT_NODE","attributesToRemove","i","attributes","length","attr","name","startsWith","push","forEach","attrName","removeAttribute","child","children","cleanNode","node","TEXT_NODE","textContent","trim","createTextNode","tagName","toLowerCase","allowedTags","includes","newNode","Array","from","childNodes","cleanedChild","cleanedContainer","finalHtml","handleInput","formatText","command","setTimeout","error","console","handleKeyDown","ctrlKey","metaKey","key","className","type","onMouseDown","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","contentEditable","onInput","onPaste","onKeyDown","style","maxHeight","overflowY","suppressContentEditableWarning","_c2","displayName","AssignmentPromptGenerator","_s2","_formData$assignmentT","_formData$assignmentN","_formData$weightPerce","_formData$subjectArea","_formData$assignmentD","_formData$assignmentT2","_formData$assignmentD2","updateAssignmentPromptFormData","handleInputChange","field","saveAssignmentJSON","alert","dataToSave","savedDate","Date","toISOString","version","dataStr","JSON","stringify","dataBlob","Blob","url","URL","createObjectURL","link","href","assignmentTitle","assignmentNumber","courseCode","filename","download","body","click","removeChild","revokeObjectURL","loadAssignmentJSON","_fileInputRef$current","handleFileLoad","event","file","target","files","reader","FileReader","onload","jsonData","parse","result","Error","assignmentData","Object","entries","toLocaleDateString","readAsText","addCLO","currentCLOs","formData","clos","newCLO","id","now","number","toString","text","updatedCLOs","removeCLO","cloId","filter","clo","updateCLO","map","generateNumberOptions","options","j","decimal","generateWeekOptions","weightPercentage","programLevel","subjectArea","assignmentDescription","rationale","directions","gradingDetails","dueWeek","dueDateCustom","submissionFolderNumber","specialInstructions","tipsForSuccess","generateAIPrompt","closText","join","dueText","submissionFolderText","prompt","generateAssignmentHTML","closHTML","formatRichTextForHTML","htmlContent","fallbackText","assignmentHTML","generateStudentHTML","formatRichTextForStudentHTML","assignmentHeaderHTML","weight","maxWidth","studentHTML","getFullYear","exportStudentHTML","assignmentNum","exportPrompt","exportHTML","submissionNumber","copyToClipboard","content","navigator","writeText","clearForm","confirm","isFormValid","some","_clo$text","hasDataToSave","_clo$text2","disabled","accept","index","_c3","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/AssignmentPromptGenerator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Download, Sparkles, FileText, ArrowRight, Lightbulb, BookOpen, Code, Plus, Minus, Upload, Save } from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\nimport { generateAssignmentHeader, hasSchoolLogo } from './logoIntegrationUtility';\r\n\r\n// Simple Rich Text Editor Component\r\nconst SimpleRichTextEditor = React.forwardRef(({ value, onChange, placeholder }, ref) => {\r\n    const editorRef = useRef(null);\r\n    const [isEditorReady, setIsEditorReady] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (editorRef.current) {\r\n            setIsEditorReady(true);\r\n            // Set initial content\r\n            if (value && editorRef.current.innerHTML !== value) {\r\n                editorRef.current.innerHTML = value || '';\r\n            }\r\n        }\r\n    }, [value]);\r\n\r\n    // Initialize form data if it doesn't exist\r\n    React.useEffect(() => {\r\n        if (!assignmentPromptFormData) {\r\n            initializeAssignmentPromptFormData();\r\n        }\r\n    }, [assignmentPromptFormData, initializeAssignmentPromptFormData]);\r\n\r\n    const [generatedPrompt, setGeneratedPrompt] = useState('');\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [generatedHTML, setGeneratedHTML] = useState('');\r\n    const [showHTML, setShowHTML] = useState(false);\r\n\r\n    // ADD: Ref for the results container to scroll to\r\n    const resultsRef = useRef(null);\r\n\r\n    // ADD: File input ref for loading JSON\r\n    const fileInputRef = useRef(null);\r\n\r\n    \r\n    const handlePaste = (e) => {\r\n        e.preventDefault();\r\n        const clipboard = e.clipboardData;\r\n        const htmlData = clipboard.getData('text/html');\r\n        const textData = clipboard.getData('text/plain');\r\n\r\n        let cleanContent;\r\n        if (htmlData) {\r\n            // Enhanced HTML sanitization - preserve more formatting including lists\r\n            cleanContent = sanitizeHtml(htmlData);\r\n        } else {\r\n            // Convert plain text to HTML, preserving line breaks\r\n            cleanContent = textData\r\n                .replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\\r\\n|\\r|\\n/g, '<br>');\r\n        }\r\n\r\n        // Focus the editor first\r\n        editorRef.current.focus();\r\n\r\n        // Insert the content\r\n        if (document.queryCommandSupported('insertHTML')) {\r\n            document.execCommand('insertHTML', false, cleanContent);\r\n        } else {\r\n            // Fallback for browsers that don't support insertHTML\r\n            const selection = window.getSelection();\r\n            if (selection.rangeCount > 0) {\r\n                const range = selection.getRangeAt(0);\r\n                range.deleteContents();\r\n                const tempDiv = document.createElement('div');\r\n                tempDiv.innerHTML = cleanContent;\r\n                const fragment = document.createDocumentFragment();\r\n                while (tempDiv.firstChild) {\r\n                    fragment.appendChild(tempDiv.firstChild);\r\n                }\r\n                range.insertNode(fragment);\r\n            }\r\n        }\r\n\r\n        // Trigger onChange\r\n        if (onChange) {\r\n            onChange(editorRef.current.innerHTML);\r\n        }\r\n    };\r\n\r\n    const sanitizeHtml = (html) => {\r\n        let cleanedHtml = html\r\n            // Remove all HTML comments (<!-- ‚Ä¶ -->), including Word's conditional comments\r\n            .replace(/<!--[\\s\\S]*?-->/g, '')\r\n            // Remove style tags and their content\r\n            .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\r\n            // Remove script tags and their content\r\n            .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\r\n            // Remove XML declarations and Office-specific tags\r\n            .replace(/<\\?xml[^>]*>/gi, '')\r\n            .replace(/<\\/?o:p[^>]*>/gi, '')\r\n            .replace(/<\\/?v:[^>]*>/gi, '')\r\n            .replace(/<\\/?w:[^>]*>/gi, '');\r\n\r\n        // Create a temporary container\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = cleanedHtml;\r\n\r\n        // Remove all style attributes and Microsoft Office attributes\r\n        const removeAttributes = (element) => {\r\n            if (element.nodeType === Node.ELEMENT_NODE) {\r\n                const attributesToRemove = [];\r\n                for (let i = 0; i < element.attributes.length; i++) {\r\n                    const attr = element.attributes[i];\r\n                    if (attr.name.startsWith('mso-') ||\r\n                        attr.name === 'style' ||\r\n                        attr.name.startsWith('o:') ||\r\n                        attr.name.startsWith('v:') ||\r\n                        attr.name.startsWith('w:')) {\r\n                        attributesToRemove.push(attr.name);\r\n                    }\r\n                }\r\n                attributesToRemove.forEach(attrName => {\r\n                    element.removeAttribute(attrName);\r\n                });\r\n\r\n                // Recursively clean child elements\r\n                for (let child of element.children) {\r\n                    removeAttributes(child);\r\n                }\r\n            }\r\n        };\r\n\r\n        removeAttributes(tempDiv);\r\n\r\n        // Clean and rebuild DOM structure\r\n        const cleanNode = (node) => {\r\n            if (node.nodeType === Node.TEXT_NODE) {\r\n                return node.textContent.trim() ? document.createTextNode(node.textContent) : null;\r\n            } else if (node.nodeType === Node.ELEMENT_NODE) {\r\n                const tagName = node.tagName.toLowerCase();\r\n                const allowedTags = ['p', 'br', 'strong', 'b', 'em', 'i', 'u', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'li', 'div', 'span'];\r\n\r\n                if (allowedTags.includes(tagName)) {\r\n                    const newNode = document.createElement(tagName);\r\n\r\n                    // Copy allowed attributes (none for now, but could be expanded)\r\n\r\n                    // Process children\r\n                    for (const child of Array.from(node.childNodes)) {\r\n                        const cleanedChild = cleanNode(child);\r\n                        if (cleanedChild) {\r\n                            newNode.appendChild(cleanedChild);\r\n                        }\r\n                    }\r\n                    return newNode.childNodes.length > 0 || tagName === 'br' ? newNode : null;\r\n                } else {\r\n                    const fragment = document.createDocumentFragment();\r\n                    for (const child of Array.from(node.childNodes)) {\r\n                        const cleanedChild = cleanNode(child);\r\n                        if (cleanedChild) {\r\n                            fragment.appendChild(cleanedChild);\r\n                        }\r\n                    }\r\n                    return fragment.childNodes.length > 0 ? fragment : null;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n\r\n        const cleanedContainer = document.createElement('div');\r\n        for (const child of Array.from(tempDiv.childNodes)) {\r\n            const cleanedChild = cleanNode(child);\r\n            if (cleanedChild) {\r\n                cleanedContainer.appendChild(cleanedChild);\r\n            }\r\n        }\r\n\r\n        // Final cleanup\r\n        const finalHtml = cleanedContainer.innerHTML\r\n            .replace(/<p[^>]*>\\s*<\\/p>/g, '')\r\n            .replace(/\\n\\s*\\n/g, '\\n')\r\n            .replace(/(<\\/[^>]+>)\\s+(<[^>]+>)/g, '$1$2')\r\n            .trim();\r\n\r\n        return finalHtml;\r\n    };\r\n\r\n    const handleInput = () => {\r\n        if (onChange && editorRef.current) {\r\n            onChange(editorRef.current.innerHTML);\r\n        }\r\n    };\r\n\r\n    const formatText = (command, value = null) => {\r\n        if (editorRef.current) {\r\n            editorRef.current.focus();\r\n            setTimeout(() => {\r\n                try {\r\n                    document.execCommand(command, false, value);\r\n                    if (onChange && editorRef.current) {\r\n                        onChange(editorRef.current.innerHTML);\r\n                    }\r\n                } catch (error) {\r\n                    console.error(`Error executing command ${command}:`, error);\r\n                }\r\n            }, 10);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            switch (e.key) {\r\n                case 'b':\r\n                    e.preventDefault();\r\n                    formatText('bold');\r\n                    break;\r\n                case 'i':\r\n                    e.preventDefault();\r\n                    formatText('italic');\r\n                    break;\r\n                case 'u':\r\n                    e.preventDefault();\r\n                    formatText('underline');\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"simple-rich-text-editor border border-gray-300 rounded-lg overflow-hidden bg-white\">\r\n            {/* Toolbar */}\r\n            <div className=\"bg-gray-100 border-b border-gray-300 p-2 flex gap-2 flex-wrap\">\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()} // Prevent focus loss\r\n                    onClick={() => formatText('bold')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors text-gray-800\"\r\n                    title=\"Bold (Ctrl+B)\"\r\n                >\r\n                    B\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('italic')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm italic transition-colors text-gray-800\"\r\n                    title=\"Italic (Ctrl+I)\"\r\n                >\r\n                    I\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('underline')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm underline transition-colors text-gray-800\"\r\n                    title=\"Underline (Ctrl+U)\"\r\n                >\r\n                    U\r\n                </button>\r\n                <div className=\"w-px bg-gray-300\"></div>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('formatBlock', 'h3')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors text-gray-800\"\r\n                    title=\"Heading 3\"\r\n                >\r\n                    H3\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('formatBlock', 'p')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\"\r\n                    title=\"Paragraph\"\r\n                >\r\n                    P\r\n                </button>\r\n                <div className=\"w-px bg-gray-300\"></div>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('insertUnorderedList')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\"\r\n                    title=\"Bullet List\"\r\n                >\r\n                    ‚Ä¢ List\r\n                </button>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => formatText('insertOrderedList')}\r\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors text-gray-800\"\r\n                    title=\"Numbered List\"\r\n                >\r\n                    1. List\r\n                </button>\r\n                <div className=\"w-px bg-gray-300\"></div>\r\n                <button\r\n                    type=\"button\"\r\n                    onMouseDown={(e) => e.preventDefault()}\r\n                    onClick={() => {\r\n                        if (editorRef.current) {\r\n                            editorRef.current.innerHTML = '';\r\n                            onChange('');\r\n                        }\r\n                    }}\r\n                    className=\"px-3 py-1 bg-red-50 border border-red-300 text-red-600 rounded hover:bg-red-100 text-sm transition-colors\"\r\n                    title=\"Clear\"\r\n                >\r\n                    Clear\r\n                </button>\r\n            </div>\r\n\r\n            {/* Editor */}\r\n            <div\r\n                ref={editorRef}\r\n                contentEditable\r\n                onInput={handleInput}\r\n                onPaste={handlePaste}\r\n                onKeyDown={handleKeyDown}\r\n                className=\"p-4 min-h-[120px] focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white\"\r\n                style={{ maxHeight: '300px', overflowY: 'auto' }}\r\n                suppressContentEditableWarning={true}\r\n                data-placeholder={placeholder}\r\n            />\r\n\r\n            {/* CSS Styles for contentEditable */}\r\n            <style>{`\r\n                [contenteditable]:empty:before {\r\n                    content: attr(data-placeholder);\r\n                    color: #9ca3af;\r\n                    font-style: italic;\r\n                }\r\n                [contenteditable] strong, [contenteditable] b {\r\n                    font-weight: bold;\r\n                }\r\n                [contenteditable] em, [contenteditable] i {\r\n                    font-style: italic;\r\n                }\r\n                [contenteditable] u {\r\n                    text-decoration: underline;\r\n                }\r\n                [contenteditable] ul {\r\n                    list-style-type: disc;\r\n                    margin-left: 1.5em;\r\n                    margin-top: 0.5em;\r\n                    margin-bottom: 0.5em;\r\n                }\r\n                [contenteditable] ol {\r\n                    list-style-type: decimal;\r\n                    margin-left: 1.5em;\r\n                    margin-top: 0.5em;\r\n                    margin-bottom: 0.5em;\r\n                }\r\n                [contenteditable] li {\r\n                    margin-bottom: 0.25em;\r\n                }\r\n                [contenteditable] h3 {\r\n                    font-size: 1.25em;\r\n                    font-weight: bold;\r\n                    margin-top: 0.5em;\r\n                    margin-bottom: 0.5em;\r\n                }\r\n                [contenteditable] p {\r\n                    margin-bottom: 0.5em;\r\n                }\r\n                [contenteditable] p:last-child {\r\n                    margin-bottom: 0;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n});\r\n\r\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\r\n\r\nconst AssignmentPromptGenerator = () => {\r\n    const {\r\n        assignmentPromptFormData,\r\n        updateAssignmentPromptFormData,\r\n        initializeAssignmentPromptFormData\r\n    } = useAssessment();\r\n\r\n    // Initialize form data if it doesn't exist\r\n    React.useEffect(() => {\r\n        if (!assignmentPromptFormData) {\r\n            initializeAssignmentPromptFormData();\r\n        }\r\n    }, [assignmentPromptFormData, initializeAssignmentPromptFormData]);\r\n\r\n    const [generatedPrompt, setGeneratedPrompt] = useState('');\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [generatedHTML, setGeneratedHTML] = useState('');\r\n    const [showHTML, setShowHTML] = useState(false);\r\n\r\n    // ADD: File input ref for loading JSON\r\n    const fileInputRef = useRef(null);\r\n\r\n    const handleInputChange = (field, value) => {\r\n        updateAssignmentPromptFormData(field, value);\r\n\r\n        // Auto-sync submission folder number with assignment number\r\n        if (field === 'assignmentNumber' && value) {\r\n            updateAssignmentPromptFormData('submissionFolderNumber', value);\r\n        }\r\n    };\r\n\r\n    // ADD: Save assignment data as JSON\r\n    const saveAssignmentJSON = () => {\r\n        if (!assignmentPromptFormData) {\r\n            alert('No assignment data to save');\r\n            return;\r\n        }\r\n\r\n        const dataToSave = {\r\n            ...assignmentPromptFormData,\r\n            savedDate: new Date().toISOString(),\r\n            version: '1.0'\r\n        };\r\n\r\n        const dataStr = JSON.stringify(dataToSave, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n\r\n        // Generate filename based on assignment title and number\r\n        const assignmentTitle = assignmentPromptFormData.assignmentTitle || 'Assignment';\r\n        const assignmentNumber = assignmentPromptFormData.assignmentNumber || 'X';\r\n        const courseCode = assignmentPromptFormData.courseCode || 'Course';\r\n        const filename = `${courseCode}_Assignment_${assignmentNumber}_${assignmentTitle.replace(/\\s+/g, '_')}.json`;\r\n\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n\r\n        alert('Assignment saved successfully!');\r\n    };\r\n\r\n    // ADD: Load assignment data from JSON\r\n    const loadAssignmentJSON = () => {\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    // ADD: Handle file input change\r\n    const handleFileLoad = (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            try {\r\n                const jsonData = JSON.parse(e.target.result);\r\n\r\n                // Validate the JSON structure\r\n                if (typeof jsonData !== 'object' || !jsonData.assignmentTitle) {\r\n                    throw new Error('Invalid assignment file format');\r\n                }\r\n\r\n                // Remove metadata fields before loading\r\n                const { savedDate, version, ...assignmentData } = jsonData;\r\n\r\n                // Load the data into the form\r\n                Object.entries(assignmentData).forEach(([field, value]) => {\r\n                    updateAssignmentPromptFormData(field, value);\r\n                });\r\n\r\n                alert(`Assignment loaded successfully!${savedDate ? `\\nSaved: ${new Date(savedDate).toLocaleDateString()}` : ''}`);\r\n            } catch (error) {\r\n                console.error('Error loading assignment:', error);\r\n                alert('Error loading assignment file. Please ensure it\\'s a valid assignment JSON file.');\r\n            }\r\n        };\r\n        reader.readAsText(file);\r\n\r\n        // Reset the input to allow loading the same file again\r\n        event.target.value = '';\r\n    };\r\n\r\n    // CLO management functions\r\n    const addCLO = () => {\r\n        const currentCLOs = formData.clos || [];\r\n        if (currentCLOs.length < 15) {\r\n            const newCLO = {\r\n                id: Date.now(),\r\n                number: (currentCLOs.length + 1).toString(),\r\n                text: '',\r\n                type: 'CLO'\r\n            };\r\n            const updatedCLOs = [...currentCLOs, newCLO];\r\n            handleInputChange('clos', updatedCLOs);\r\n        }\r\n    };\r\n\r\n    const removeCLO = (cloId) => {\r\n        const currentCLOs = formData.clos || [];\r\n        if (currentCLOs.length > 1) {\r\n            const updatedCLOs = currentCLOs.filter(clo => clo.id !== cloId);\r\n            handleInputChange('clos', updatedCLOs);\r\n        }\r\n    };\r\n\r\n    const updateCLO = (cloId, field, value) => {\r\n        const currentCLOs = formData.clos || [];\r\n        const updatedCLOs = currentCLOs.map(clo =>\r\n            clo.id === cloId ? { ...clo, [field]: value } : clo\r\n        );\r\n        handleInputChange('clos', updatedCLOs);\r\n    };\r\n\r\n    // Generate number options for CLO/ULO dropdown\r\n    const generateNumberOptions = () => {\r\n        const options = [];\r\n        for (let i = 1; i <= 15; i++) {\r\n            options.push(<option key={i} value={i.toString()}>{i}</option>);\r\n            // Add decimal options for .1, .2, .3, .4, .5\r\n            for (let j = 1; j <= 5; j++) {\r\n                const decimal = `${i}.${j}`;\r\n                options.push(<option key={decimal} value={decimal}>{decimal}</option>);\r\n            }\r\n        }\r\n        return options;\r\n    };\r\n\r\n    // Generate week options for dropdown\r\n    const generateWeekOptions = () => {\r\n        const options = [<option key=\"default\" value=\"\">Select Week</option>];\r\n        for (let i = 1; i <= 16; i++) {\r\n            options.push(<option key={i} value={i.toString()}>{`Week ${i}`}</option>);\r\n        }\r\n        return options;\r\n    };\r\n\r\n    // Use shared form data, fallback to defaults if not available\r\n    const formData = assignmentPromptFormData || {\r\n        assignmentTitle: '',\r\n        assignmentNumber: '1',\r\n        weightPercentage: '',\r\n        courseCode: '',\r\n        programLevel: '',\r\n        subjectArea: '',\r\n        assignmentDescription: '',\r\n        rationale: 'This assignment will evaluate the following Course Learning Outcomes:',\r\n        clos: [\r\n            { id: 1, number: '1', text: '', type: 'CLO' },\r\n            { id: 2, number: '2', text: '', type: 'CLO' },\r\n            { id: 3, number: '3', text: '', type: 'CLO' },\r\n            { id: 4, number: '4', text: '', type: 'CLO' }\r\n        ],\r\n        directions: '',\r\n        gradingDetails: '',\r\n        dueWeek: '',\r\n        dueDateCustom: '',\r\n        submissionFolderNumber: '1',\r\n        specialInstructions: '',\r\n        tipsForSuccess: ''\r\n    };\r\n\r\n    const generateAIPrompt = () => {\r\n        // Generate CLO text for the prompt\r\n        const clos = formData.clos || [];\r\n        const closText = clos\r\n            .filter(clo => clo.text.trim() !== '')\r\n            .map(clo => `- ${clo.type}${clo.number}: ${clo.text}`)\r\n            .join('\\n');\r\n\r\n        // Generate due date text\r\n        const dueText = formData.dueWeek ?\r\n            `Week ${formData.dueWeek}${formData.dueDateCustom ? ` (${formData.dueDateCustom})` : ''}` :\r\n            formData.dueDateCustom || 'See your Instructional Plan for exact due dates.';\r\n\r\n        // Generate submission folder text\r\n        const submissionFolderText = `Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}`;\r\n\r\n        const prompt = `Create HTML code for an assignment details page that matches EXACTLY the structure and format of the provided template for D2L. Use the following assignment information:\r\n\r\n**Assignment Information:**\r\n- Assignment Title: Individual Assignment ${formData.assignmentNumber} (${formData.weightPercentage}%)\r\n- Assignment Number: ${formData.assignmentNumber}\r\n- Weight: ${formData.weightPercentage}%\r\n- Course Code: ${formData.courseCode}\r\n- Subject Area: ${formData.subjectArea}\r\n- Due Date: ${dueText}\r\n- Submission Folder: ${submissionFolderText}\r\n\r\n**Assignment Content:**\r\n- Description: ${formData.assignmentDescription}\r\n- Rationale: ${formData.rationale}\r\n- Learning Outcomes:\r\n${closText}\r\n- Directions: ${formData.directions}\r\n- Grading Details: ${formData.gradingDetails}\r\n- Tips for Success: ${formData.tipsForSuccess}\r\n- Special Instructions: ${formData.specialInstructions}\r\n\r\n**CRITICAL REQUIREMENTS:**\r\n1. Use EXACTLY this HTML structure for D2L content area (NO DOCTYPE, html, head, or body tags):\r\n\r\n\\`\\`\\`html\r\n<div class=\"container-fluid\">\r\n<div class=\"row justify-content-center\">\r\n<div class=\"col-sm-12 col-md-10\">\r\n<p><strong>Due:</strong>&nbsp; [DUE DATE]</p>\r\n<p><strong>Submit to: </strong>The&nbsp;<strong>[SUBMISSION FOLDER]</strong>&nbsp;submission folder. Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments </strong>on the course navigation bar.</p>\r\n<h2>Description</h2>\r\n<p>[DESCRIPTION]</p>\r\n<h3>Rationale</h3>\r\n<p>[RATIONALE TEXT]</p>\r\n<ul>\r\n[LEARNING OUTCOME LIST ITEMS]\r\n</ul>\r\n<h2>Directions</h2>\r\n<p>[DIRECTIONS]</p>\r\n<h2>How Your Assignment Will be Graded</h2>\r\n<p>[GRADING INFORMATION]</p>\r\n<p>See your Program Handbook for the late policy.</p>\r\n<h2>Tips for Success</h2>\r\n<p>[TIPS FOR SUCCESS]</p>\r\n</div>\r\n</div>\r\n</div>\r\n\\`\\`\\`\r\n\r\n2. Replace all bracketed placeholders with the appropriate information provided above\r\n3. This is for D2L content area - do NOT include DOCTYPE, html, head, or body tags\r\n4. Follow the content structure exactly as shown in the simple template\r\n5. Use proper HTML formatting with &lt;strong&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;ul&gt;, &lt;li&gt;, &lt;p&gt; tags\r\n6. For the learning outcome list, create &lt;li&gt; tags with the format: &lt;li&gt;CLO#: [text]&lt;/li&gt; or &lt;li&gt;ULO#: [text]&lt;/li&gt;\r\n7. For grading section: use the provided grading details text\r\n8. Keep the format simple and clean - this is the basic template structure\r\n\r\nGenerate complete, ready-to-paste HTML code for D2L content area that matches the simple template structure exactly.`;\r\n\r\n        setGeneratedPrompt(prompt);\r\n        setShowPrompt(true);\r\n        setShowHTML(false);\r\n    };\r\n\r\n    const generateAssignmentHTML = () => {\r\n        // Generate CLO list HTML\r\n        const clos = formData.clos || [];\r\n        const closHTML = clos\r\n            .filter(clo => clo.text.trim() !== '')\r\n            .map(clo => `    <li><strong>${clo.type} ${clo.number}:</strong> ${clo.text}</li>`)\r\n            .join('\\n');\r\n\r\n        // Generate due date text\r\n        const dueText = formData.dueWeek ?\r\n            `(Week ${formData.dueWeek}${formData.dueDateCustom ? ` - ${formData.dueDateCustom}` : ''})` :\r\n            formData.dueDateCustom ? `(${formData.dueDateCustom})` : '(See your Instructional Plan for exact due dates)';\r\n\r\n        // Generate submission folder text\r\n        const submissionFolderText = `Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}`;\r\n\r\n        // Helper function to extract text content from HTML and format for display\r\n        const formatRichTextForHTML = (htmlContent, fallbackText) => {\r\n            if (!htmlContent || htmlContent.trim() === '') {\r\n                return fallbackText;\r\n            }\r\n\r\n            // If it's already HTML content (contains HTML tags), use it as is\r\n            if (htmlContent.includes('<') && htmlContent.includes('>')) {\r\n                // Clean up the HTML content and ensure proper formatting\r\n                return htmlContent\r\n                    .replace(/<div>/g, '<p>')\r\n                    .replace(/<\\/div>/g, '</p>')\r\n                    .replace(/<br\\s*\\/?>/g, '<br>')\r\n                    .trim();\r\n            } else {\r\n                // If it's plain text, wrap in paragraph tags\r\n                return `<p>${htmlContent}</p>`;\r\n            }\r\n        };\r\n\r\n        const assignmentHTML = `<div class=\"container-fluid\">\r\n<div class=\"row justify-content-center\">\r\n<div class=\"col-sm-12 col-md-10\">\r\n  <h1>Assignment ${formData.assignmentNumber || 'X'}: ${formData.assignmentTitle || '[Assignment Title]'}</h1>\r\n  <p><strong>Due:</strong> ${dueText}</p>\r\n  <p><strong>Weight:</strong> ${formData.weightPercentage || 'X'}% of final grade</p>\r\n  <p><strong>Submit to: </strong>The <strong>${submissionFolderText}</strong> submission folder. Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments</strong> on the course navigation bar.</p>\r\n  <h2>Description</h2>\r\n  <p>${formData.assignmentDescription || '[Please provide a short description of the assignment]'}</p>\r\n  <h3>Rationale</h3>\r\n  <p>${formData.rationale || 'This assignment will evaluate the following Course Learning Outcomes:'}</p>\r\n  <ul>\r\n${closHTML || '    <li><strong>CLO1:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO2:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO3:</strong> [Learning outcome description]</li>\\n    <li><strong>CLO4:</strong> [Learning outcome description]</li>'}\r\n  </ul>\r\n  <h2>Directions</h2>\r\n  ${formatRichTextForHTML(formData.directions, '<p>[Provide step-by-step instructions if applicable]</p>')}\r\n  <h2>How Your Assignment Will be Graded</h2>\r\n  ${formatRichTextForHTML(formData.gradingDetails, '<p>A rubric has been created and can be found attached to the submission folder. Your work will be evaluated on [specify criteria].</p>')}\r\n  <p>See your Program Handbook for the late policy.</p>\r\n  <h3>Tips for Success:</h3>\r\n  ${formatRichTextForHTML(formData.tipsForSuccess, '<p>Tips for completing this assignment successfully will be provided here.</p>')}\r\n${formData.specialInstructions && formData.specialInstructions.trim() !== '' ? `  <h3>Additional Information:</h3>\\n  ${formatRichTextForHTML(formData.specialInstructions, '')}` : ''}\r\n</div>\r\n</div>\r\n</div>`;\r\n\r\n        setGeneratedHTML(assignmentHTML);\r\n        setShowHTML(true);\r\n        setShowPrompt(false);\r\n    };\r\n\r\n    const generateStudentHTML = () => {\r\n        // Generate CLO list HTML\r\n        const clos = formData.clos || [];\r\n        const closHTML = clos\r\n            .filter(clo => clo.text.trim() !== '')\r\n            .map(clo => `        <li><strong>${clo.type} ${clo.number}:</strong> ${clo.text}</li>`)\r\n            .join('\\n');\r\n\r\n        // Generate due date text\r\n        const dueText = formData.dueWeek ?\r\n            `Week ${formData.dueWeek}${formData.dueDateCustom ? ` - ${formData.dueDateCustom}` : ''}` :\r\n            formData.dueDateCustom || 'See your Instructional Plan for exact due dates';\r\n\r\n        // Helper function to extract text content from HTML and format for display\r\n        const formatRichTextForStudentHTML = (htmlContent, fallbackText) => {\r\n            if (!htmlContent || htmlContent.trim() === '') {\r\n                return `<p>${fallbackText}</p>`;\r\n            }\r\n\r\n            if (htmlContent.includes('<') && htmlContent.includes('>')) {\r\n                return htmlContent\r\n                    .replace(/<div>/g, '<p>')\r\n                    .replace(/<\\/div>/g, '</p>')\r\n                    .replace(/<br\\s*\\/?>/g, '<br>')\r\n                    .trim();\r\n            } else {\r\n                return `<p>${htmlContent}</p>`;\r\n            }\r\n        };\r\n\r\n        // Generate header with school logo on the right\r\n        const assignmentHeaderHTML = generateAssignmentHeader({\r\n            title: formData.assignmentTitle || 'Assignment Title',\r\n            assignmentNumber: formData.assignmentNumber || 'X',\r\n            courseCode: formData.courseCode || 'Course Code',\r\n            weight: formData.weightPercentage || 'X'\r\n        }, {\r\n            maxHeight: 70,\r\n            maxWidth: 200\r\n        });\r\n\r\n        const studentHTML = `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"utf-8\"/>\r\n    <meta content=\"width=device-width, initial-scale=1\" name=\"viewport\"/>\r\n    <title>${formData.assignmentTitle || 'Assignment'} - ${formData.courseCode || 'Course'}</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n            line-height: 1.6;\r\n            margin: 0;\r\n            padding: 20px;\r\n            background-color: #f8fafc;\r\n            color: #334155;\r\n        }\r\n        .container {\r\n            max-width: 800px;\r\n            margin: 0 auto;\r\n            background: white;\r\n            padding: 30px;\r\n            border-radius: 10px;\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .assignment-header {\r\n            margin-bottom: 30px;\r\n            padding-bottom: 20px;\r\n            border-bottom: 2px solid #e2e8f0;\r\n        }\r\n        h1 {\r\n            color: #1e40af;\r\n            margin: 0 0 10px 0;\r\n            font-size: 2rem;\r\n            font-weight: 700;\r\n        }\r\n        h2 {\r\n            color: #1e40af;\r\n            border-bottom: 2px solid #3b82f6;\r\n            padding-bottom: 5px;\r\n            margin-top: 30px;\r\n            margin-bottom: 15px;\r\n        }\r\n        h3 {\r\n            color: #1f2937;\r\n            margin-top: 25px;\r\n            margin-bottom: 10px;\r\n        }\r\n        .due-info {\r\n            background: #dbeafe;\r\n            padding: 15px;\r\n            border-radius: 8px;\r\n            margin: 20px 0;\r\n            border-left: 4px solid #3b82f6;\r\n        }\r\n        .submission-info {\r\n            background: #f0fdf4;\r\n            padding: 15px;\r\n            border-radius: 8px;\r\n            margin: 20px 0;\r\n            border-left: 4px solid #16a34a;\r\n        }\r\n        ul {\r\n            padding-left: 20px;\r\n        }\r\n        li {\r\n            margin-bottom: 8px;\r\n        }\r\n        .school-logo, .assignment-logo {\r\n            max-height: 70px;\r\n            max-width: 200px;\r\n            object-fit: contain;\r\n        }\r\n        footer {\r\n            margin-top: 40px;\r\n            padding-top: 20px;\r\n            border-top: 1px solid #e2e8f0;\r\n            text-align: center;\r\n            color: #64748b;\r\n            font-size: 0.9rem;\r\n        }\r\n        \r\n        @media print {\r\n            body { background: white; }\r\n            .container { box-shadow: none; }\r\n            .school-logo, .assignment-logo { max-height: 50px !important; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        ${assignmentHeaderHTML}\r\n        \r\n        <div class=\"due-info\">\r\n            <strong>üìÖ Due:</strong> ${dueText}\r\n        </div>\r\n        \r\n        <div class=\"submission-info\">\r\n            <strong>üì§ Submit to:</strong> The <strong>Assignment ${formData.submissionFolderNumber || formData.assignmentNumber || 'X'}</strong> submission folder. \r\n            Submission folders can be accessed by selecting <strong>Course Tools</strong> and then <strong>Assignments</strong> on the course navigation bar.\r\n        </div>\r\n\r\n        <h2>üìã Description</h2>\r\n        ${formatRichTextForStudentHTML(formData.assignmentDescription, 'Please provide a short description of the assignment')}\r\n\r\n        <h2>üéØ Rationale</h2>\r\n        ${formatRichTextForStudentHTML(formData.rationale, 'This assignment will evaluate the following Course Learning Outcomes:')}\r\n        \r\n        <ul>\r\n${closHTML || '            <li><strong>CLO1:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO2:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO3:</strong> [Learning outcome description]</li>\\n            <li><strong>CLO4:</strong> [Learning outcome description]</li>'}\r\n        </ul>\r\n\r\n        <h2>üìù Directions</h2>\r\n        ${formatRichTextForStudentHTML(formData.directions, 'Provide step-by-step instructions if applicable')}\r\n\r\n        <h2>üìä How Your Assignment Will be Graded</h2>\r\n        ${formatRichTextForStudentHTML(formData.gradingDetails, 'A rubric has been created and can be found attached to the submission folder. Your work will be evaluated on [specify criteria].')}\r\n        \r\n        <p><strong>‚ö†Ô∏è Late Policy:</strong> See your Program Handbook for the late policy.</p>\r\n\r\n        <h2>üí° Tips for Success</h2>\r\n        ${formatRichTextForStudentHTML(formData.tipsForSuccess, 'Tips for completing this assignment successfully will be provided here.')}\r\n\r\n${formData.specialInstructions && formData.specialInstructions.trim() !== '' ? `        <h2>‚ÑπÔ∏è Additional Information</h2>\r\n        ${formatRichTextForStudentHTML(formData.specialInstructions, '')}\r\n` : ''}\r\n        <footer>\r\n            <p><strong>${formData.courseCode || 'Course Code'}</strong> | ${new Date().getFullYear()}</p>\r\n            <p>Last Updated: ${new Date().toLocaleDateString()}</p>\r\n            ${hasSchoolLogo() ? '<p>Generated with institutional branding</p>' : ''}\r\n        </footer>\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n        return studentHTML;\r\n    };\r\n\r\n    const exportStudentHTML = () => {\r\n        const studentHTML = generateStudentHTML();\r\n        const element = document.createElement('a');\r\n        const file = new Blob([studentHTML], { type: 'text/html' });\r\n        element.href = URL.createObjectURL(file);\r\n        const assignmentNum = formData.assignmentNumber || 'X';\r\n        const courseCode = formData.courseCode || 'Course';\r\n        element.download = `${courseCode}_Assignment_${assignmentNum}_${formData.assignmentTitle.replace(/\\s+/g, '_').toLowerCase()}_Student.html`;\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n    const exportPrompt = () => {\r\n        const element = document.createElement('a');\r\n        const file = new Blob([generatedPrompt], { type: 'text/plain' });\r\n        element.href = URL.createObjectURL(file);\r\n        const assignmentNum = formData.assignmentNumber || 'X';\r\n        element.download = `assignment-${assignmentNum}-ai-prompt-${formData.assignmentTitle.replace(/\\s+/g, '-').toLowerCase()}.txt`;\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n    const exportHTML = () => {\r\n        const element = document.createElement('a');\r\n        const file = new Blob([generatedHTML], { type: 'text/html' });\r\n        element.href = URL.createObjectURL(file);\r\n        const submissionNumber = formData.submissionFolderNumber || formData.assignmentNumber || '1';\r\n        element.download = `Assignment_${submissionNumber}_${formData.assignmentTitle.replace(/\\s+/g, '_').toLowerCase()}_D2L.html`;\r\n        document.body.appendChild(element);\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n    const copyToClipboard = (content) => {\r\n        navigator.clipboard.writeText(content);\r\n        alert('Content copied to clipboard!');\r\n    };\r\n\r\n    const clearForm = () => {\r\n        if (window.confirm('Are you sure you want to clear all form data? This action cannot be undone.')) {\r\n            initializeAssignmentPromptFormData();\r\n            setGeneratedPrompt('');\r\n            setGeneratedHTML('');\r\n            setShowPrompt(false);\r\n            setShowHTML(false);\r\n        }\r\n    };\r\n\r\n    // Form validation\r\n    const isFormValid = formData.assignmentTitle?.trim() &&\r\n        formData.assignmentNumber?.trim() &&\r\n        formData.weightPercentage?.trim() &&\r\n        formData.subjectArea?.trim() &&\r\n        formData.assignmentDescription?.trim() &&\r\n        (formData.clos || []).some(clo => clo.text?.trim());\r\n\r\n    // Check if there's data to save\r\n    const hasDataToSave = formData.assignmentTitle?.trim() ||\r\n        formData.assignmentDescription?.trim() ||\r\n        (formData.clos || []).some(clo => clo.text?.trim());\r\n\r\n    if (!formData) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* UPDATED Header with Save/Load buttons */}\r\n                <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <FileText className=\"w-8 h-8 text-orange-600\" />\r\n                            <div>\r\n                                <h1 className=\"text-2xl font-bold text-gray-900\">Assignment Prompt Generator</h1>\r\n                                <p className=\"text-gray-600\">Create AI prompts and D2L HTML for assignment pages</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ADD: Save/Load buttons */}\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <button\r\n                                onClick={saveAssignmentJSON}\r\n                                disabled={!hasDataToSave}\r\n                                className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${hasDataToSave\r\n                                    ? 'bg-blue-600 text-white hover:bg-blue-700 shadow-sm'\r\n                                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                    }`}\r\n                                title=\"Save current assignment as JSON file\"\r\n                            >\r\n                                <Save className=\"w-4 h-4\" />\r\n                                Save JSON\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={loadAssignmentJSON}\r\n                                className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-all duration-200 shadow-sm\"\r\n                                title=\"Load assignment from JSON file\"\r\n                            >\r\n                                <Upload className=\"w-4 h-4\" />\r\n                                Load JSON\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* ADD: Hidden file input */}\r\n                    <input\r\n                        ref={fileInputRef}\r\n                        type=\"file\"\r\n                        accept=\".json\"\r\n                        onChange={handleFileLoad}\r\n                        className=\"hidden\"\r\n                    />\r\n\r\n                    <div className=\"bg-gradient-to-r from-orange-50 to-green-50 rounded-lg p-6 border border-orange-200\">\r\n                        <div className=\"flex items-start gap-4\">\r\n                            <div className=\"flex-shrink-0\">\r\n                                <div className=\"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center\">\r\n                                    <Lightbulb className=\"w-5 h-5 text-orange-600\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"font-semibold text-gray-900 mb-2\">How It Works</h3>\r\n                                <div className=\"flex items-center gap-4 text-sm text-gray-700 mb-3\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold text-xs\">1</div>\r\n                                        <span>Fill assignment details</span>\r\n                                    </div>\r\n                                    <ArrowRight className=\"w-4 h-4 text-gray-400\" />\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold text-xs\">2</div>\r\n                                        <span>Generate AI prompt or D2L HTML</span>\r\n                                    </div>\r\n                                    <ArrowRight className=\"w-4 h-4 text-gray-400\" />\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold text-xs\">3</div>\r\n                                        <span>Export or copy content</span>\r\n                                    </div>\r\n                                </div>\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    The AI prompt helps ChatGPT create assignment pages, while the D2L HTML output can be pasted directly into D2L's content editor.\r\n                                    <strong> Save your work as JSON files to easily resume later!</strong>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Rest of the existing form content remains exactly the same... */}\r\n                {/* Assignment Information Form */}\r\n                <div className=\"space-y-6\">\r\n                    {/* Basic Assignment Info */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Basic Assignment Information</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.assignmentTitle || ''}\r\n                                    onChange={(e) => handleInputChange('assignmentTitle', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., Digital Portfolio Project\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Number *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.assignmentNumber || ''}\r\n                                    onChange={(e) => handleInputChange('assignmentNumber', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., 1, 2, 3\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight Percentage *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.weightPercentage || ''}\r\n                                    onChange={(e) => handleInputChange('weightPercentage', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., 25\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Subject Area *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.subjectArea || ''}\r\n                                    onChange={(e) => handleInputChange('subjectArea', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., Computer Graphics, Web Development\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Course Code</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.courseCode || ''}\r\n                                    onChange={(e) => handleInputChange('courseCode', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., COMP1234\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Submission Folder Number</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.submissionFolderNumber || ''}\r\n                                    onChange={(e) => handleInputChange('submissionFolderNumber', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"Auto-synced with Assignment Number\"\r\n                                />\r\n                                <p className=\"text-sm text-gray-500 mt-1\">Automatically syncs with Assignment Number when changed</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Due Date Information */}\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-yellow-800 mb-4\">Due Date Information</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Due Week</label>\r\n                                <select\r\n                                    value={formData.dueWeek || ''}\r\n                                    onChange={(e) => handleInputChange('dueWeek', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                >\r\n                                    {generateWeekOptions()}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Custom Due Date</label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={formData.dueDateCustom || ''}\r\n                                    onChange={(e) => handleInputChange('dueDateCustom', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 mt-2\">\r\n                            If no dates provided, will default to \"See your Instructional Plan for exact due dates.\"\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Assignment Content */}\r\n                    <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-green-800 mb-4\">Assignment Content</h3>\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Description *</label>\r\n                                <textarea\r\n                                    value={formData.assignmentDescription || ''}\r\n                                    onChange={(e) => handleInputChange('assignmentDescription', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg h-24\"\r\n                                    placeholder=\"Provide a clear description of what students need to create or submit...\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Rationale</label>\r\n                                <textarea\r\n                                    value={formData.rationale || ''}\r\n                                    onChange={(e) => handleInputChange('rationale', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg h-20\"\r\n                                    placeholder=\"This assignment will evaluate the following Course Learning Outcomes:\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Course Learning Outcomes */}\r\n                    <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <h3 className=\"text-lg font-semibold text-purple-800\">Learning Outcomes</h3>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={addCLO}\r\n                                    disabled={(formData.clos || []).length >= 15}\r\n                                    className={`flex items-center gap-2 px-3 py-1 text-sm rounded-lg font-medium ${(formData.clos || []).length >= 15\r\n                                        ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                        : 'bg-purple-600 text-white hover:bg-purple-700'\r\n                                        }`}\r\n                                >\r\n                                    <Plus className=\"w-4 h-4\" />\r\n                                    Add CLO\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            {(formData.clos || []).map((clo, index) => (\r\n                                <div key={clo.id} className=\"flex items-start gap-3 p-3 bg-white rounded border\">\r\n                                    <div className=\"flex gap-2\">\r\n                                        <select\r\n                                            value={clo.type}\r\n                                            onChange={(e) => updateCLO(clo.id, 'type', e.target.value)}\r\n                                            className=\"border rounded px-2 py-1 text-sm\"\r\n                                        >\r\n                                            <option value=\"CLO\">CLO</option>\r\n                                            <option value=\"ULO\">ULO</option>\r\n                                        </select>\r\n                                        <select\r\n                                            value={clo.number}\r\n                                            onChange={(e) => updateCLO(clo.id, 'number', e.target.value)}\r\n                                            className=\"w-16 border rounded px-2 py-1 text-sm\"\r\n                                        >\r\n                                            {generateNumberOptions()}\r\n                                        </select>\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={clo.text}\r\n                                        onChange={(e) => updateCLO(clo.id, 'text', e.target.value)}\r\n                                        className=\"flex-1 border rounded px-3 py-1\"\r\n                                        placeholder=\"Enter learning outcome description...\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => removeCLO(clo.id)}\r\n                                        disabled={(formData.clos || []).length <= 1}\r\n                                        className={`p-1 rounded ${(formData.clos || []).length <= 1\r\n                                            ? 'text-gray-400 cursor-not-allowed'\r\n                                            : 'text-red-600 hover:bg-red-50'\r\n                                            }`}\r\n                                    >\r\n                                        <Minus className=\"w-4 h-4\" />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {(!formData.clos || formData.clos.length === 0) && (\r\n                            <div className=\"text-center py-8 text-gray-500\">\r\n                                <BookOpen className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                                <p>No learning outcomes added yet.</p>\r\n                                <p className=\"text-sm\">Click \"Add CLO\" to add your first learning outcome.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Assignment Instructions & Due Date */}\r\n                    <div className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-indigo-800 mb-4\">Assignment Instructions & Due Date</h3>\r\n                        <div className=\"space-y-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Directions</label>\r\n                                <SimpleRichTextEditor\r\n                                    value={formData.directions || ''}\r\n                                    onChange={(html) => handleInputChange('directions', html)}\r\n                                    placeholder=\"Provide step-by-step instructions for completing the assignment...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">How Your Assignment Will be Graded</label>\r\n                                <SimpleRichTextEditor\r\n                                    value={formData.gradingDetails || ''}\r\n                                    onChange={(html) => handleInputChange('gradingDetails', html)}\r\n                                    placeholder=\"Describe how the assignment will be graded...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Tips for Success</label>\r\n                                <SimpleRichTextEditor\r\n                                    value={formData.tipsForSuccess || ''}\r\n                                    onChange={(html) => handleInputChange('tipsForSuccess', html)}\r\n                                    placeholder=\"Provide helpful tips and strategies for completing this assignment successfully...\"\r\n                                />\r\n                                <p className=\"text-sm text-gray-600 mt-2\">\r\n                                    Share strategies, common pitfalls to avoid, recommended resources, or time management advice to help students succeed.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Additional Information</label>\r\n                                <SimpleRichTextEditor\r\n                                    value={formData.specialInstructions || ''}\r\n                                    onChange={(html) => handleInputChange('specialInstructions', html)}\r\n                                    placeholder=\"Any additional notes or special requirements...\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Action Buttons */}\r\n                    <div className=\"flex gap-4 pt-6 flex-wrap\">\r\n                        <button\r\n                            onClick={generateAIPrompt}\r\n                            disabled={!isFormValid}\r\n                            className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid\r\n                                ? 'bg-orange-600 text-white hover:bg-orange-700'\r\n                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                }`}\r\n                        >\r\n                            <Sparkles className=\"w-5 h-5\" />\r\n                            Generate AI Prompt\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={generateAssignmentHTML}\r\n                            disabled={!isFormValid}\r\n                            className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid\r\n                                ? 'bg-green-600 text-white hover:bg-green-700'\r\n                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                }`}\r\n                        >\r\n                            <Code className=\"w-5 h-5\" />\r\n                            Generate D2L HTML\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={exportStudentHTML}\r\n                            disabled={!isFormValid}\r\n                            className={`flex items-center gap-2 px-6 py-3 rounded-lg font-medium ${isFormValid\r\n                                ? 'bg-purple-600 text-white hover:bg-purple-700'\r\n                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                }`}\r\n                        >\r\n                            <FileText className=\"w-5 h-5\" />\r\n                            Export Student HTML\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={clearForm}\r\n                            className=\"flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700\"\r\n                        >\r\n                            Clear Form\r\n                        </button>\r\n                    </div>\r\n\r\n                    {!isFormValid && (\r\n                        <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded\">\r\n                            <p className=\"text-sm text-yellow-700\">\r\n                                <strong>‚ö†Ô∏è Required:</strong> Complete assignment title, number, weight, subject area, description, and at least one learning outcome.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Generated Content Display */}\r\n                {(showPrompt || showHTML) && (\r\n                    <div className=\"mt-8 bg-white rounded-lg shadow-sm border\">\r\n                        <div className=\"p-6 border-b\">\r\n                            <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                                {showPrompt ? 'Generated AI Prompt' : 'Generated D2L HTML'}\r\n                            </h2>\r\n                            <p className=\"text-gray-600 mt-1\">\r\n                                {showPrompt\r\n                                    ? 'Copy this prompt and paste it into ChatGPT to generate your assignment page'\r\n                                    : 'Copy this HTML and paste it directly into D2L\\'s content editor'\r\n                                }\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-6\">\r\n                            <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200 max-h-96 overflow-y-auto\">\r\n                                <pre className=\"text-sm text-gray-800 whitespace-pre-wrap font-mono\">\r\n                                    {showPrompt ? generatedPrompt : generatedHTML}\r\n                                </pre>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-4 mt-4\">\r\n                                {showPrompt && (\r\n                                    <>\r\n                                        <button\r\n                                            onClick={exportPrompt}\r\n                                            className=\"flex items-center gap-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700\"\r\n                                        >\r\n                                            <Download className=\"w-4 h-4\" />\r\n                                            Export Prompt (.txt)\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => copyToClipboard(generatedPrompt)}\r\n                                            className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\r\n                                        >\r\n                                            <FileText className=\"w-4 h-4\" />\r\n                                            Copy to Clipboard\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n\r\n                                {showHTML && (\r\n                                    <>\r\n                                        <button\r\n                                            onClick={exportHTML}\r\n                                            className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700\"\r\n                                        >\r\n                                            <Download className=\"w-4 h-4\" />\r\n                                            Export D2L HTML\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => copyToClipboard(generatedHTML)}\r\n                                            className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\r\n                                        >\r\n                                            <Code className=\"w-4 h-4\" />\r\n                                            Copy for D2L\r\n                                        </button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AssignmentPromptGenerator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}