{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\GradingTemplate.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Upload, Download, FileText, Video, Plus, X, Save, FileDown, Bot, ArrowRight } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { generatePDF } from '../utils/pdfFunctions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseLevels = [{\n  level: 'incomplete',\n  name: 'Incomplete',\n  multiplier: 0,\n  color: '#94a3b8'\n}, {\n  level: 'unacceptable',\n  name: 'Unacceptable',\n  multiplier: 0.3,\n  color: '#ef4444'\n}, {\n  level: 'developing',\n  name: 'Developing',\n  multiplier: 0.6,\n  color: '#f97316'\n}, {\n  level: 'acceptable',\n  name: 'Acceptable',\n  multiplier: 0.8,\n  color: '#22c55e'\n}, {\n  level: 'exceptional',\n  name: 'Exceptional',\n  multiplier: 1.0,\n  color: '#3b82f6'\n}];\nconst courseModules = {\n  '2d-animation': {\n    courseType: '2D Animation',\n    version: '1.0',\n    gradingSettings: {\n      maxPoints: 100\n    },\n    rubric: {\n      assignmentInfo: {\n        title: 'Animation Project',\n        description: 'Create a short animated clip',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: baseLevels,\n      criteria: [{\n        id: 'design',\n        name: 'Animation Principles',\n        description: 'Timing and spacing',\n        maxPoints: 40\n      }, {\n        id: 'technical',\n        name: 'Technical Execution',\n        description: 'File quality and format',\n        maxPoints: 30\n      }, {\n        id: 'story',\n        name: 'Storytelling',\n        description: 'Narrative and creativity',\n        maxPoints: 30\n      }]\n    },\n    feedbackLibrary: {\n      strengths: ['Great timing', 'Smooth transitions'],\n      improvements: ['More anticipation', 'Check spacing'],\n      general: ['Good overall progress']\n    }\n  },\n  '3d-modeling': {\n    courseType: '3D Modeling',\n    version: '1.0',\n    gradingSettings: {\n      maxPoints: 100\n    },\n    rubric: {\n      assignmentInfo: {\n        title: 'Modeling Project',\n        description: 'Model a detailed object',\n        weight: 30,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: baseLevels,\n      criteria: [{\n        id: 'topology',\n        name: 'Topology',\n        description: 'Clean edge flow',\n        maxPoints: 35\n      }, {\n        id: 'uv',\n        name: 'UV Mapping',\n        description: 'Efficient layout',\n        maxPoints: 35\n      }, {\n        id: 'texture',\n        name: 'Texturing',\n        description: 'Material and shading quality',\n        maxPoints: 30\n      }]\n    },\n    feedbackLibrary: {\n      strengths: ['Clean topology', 'Good shading'],\n      improvements: ['Check UV stretching'],\n      general: ['Nice modelling work']\n    }\n  }\n};\nconst allowedVideoDomains = ['syncsketch', 'panopto', 'youtube.com', 'youtu.be', 'vimeo.com'];\nconst GradingTemplate = () => {\n  _s();\n  const {\n    sharedRubric,\n    sharedCourseDetails,\n    setSharedRubric,\n    transferRubricToGrading,\n    clearSharedRubric,\n    updateStudentInfo,\n    updateCourseInfo,\n    updateAssignmentInfo\n  } = useAssessment();\n  const defaultModule = Object.keys(courseModules)[0];\n  const [activeModule, setActiveModule] = useState(defaultModule);\n  const [loadedRubric, setLoadedRubric] = useState(courseModules[defaultModule].rubric);\n  const [rubricGrading, setRubricGrading] = useState({});\n  const [attachments, setAttachments] = useState([]);\n  const [videoLinks, setVideoLinks] = useState([]);\n  const [videoInput, setVideoInput] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n  const [aiAssist, setAiAssist] = useState(false);\n  const jsonInputRef = useRef(null);\n  const [gradingData, setGradingData] = useState({\n    student: {\n      name: '',\n      id: '',\n      email: ''\n    },\n    course: {\n      code: '',\n      name: '',\n      term: ''\n    },\n    assignment: {\n      title: courseModules[defaultModule].rubric.assignmentInfo.title,\n      dueDate: '',\n      maxPoints: courseModules[defaultModule].gradingSettings.maxPoints\n    },\n    feedback: {\n      general: '',\n      strengths: '',\n      improvements: ''\n    },\n    latePolicy: 'none'\n  });\n  const initRubricGrading = rubric => {\n    const obj = {};\n    rubric.criteria.forEach(c => {\n      obj[c.id] = {\n        level: null,\n        comments: ''\n      };\n    });\n    setRubricGrading(obj);\n  };\n\n  // Initialize with module rubric\n  useEffect(() => {\n    initRubricGrading(loadedRubric);\n    setSharedRubric(loadedRubric);\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Update from shared rubric\n  useEffect(() => {\n    if (sharedRubric) {\n      setLoadedRubric(sharedRubric);\n      initRubricGrading(sharedRubric);\n      updateAssignmentInfo({\n        name: sharedRubric.assignmentInfo.title,\n        maxPoints: sharedRubric.assignmentInfo.totalPoints\n      });\n      setGradingData(prev => ({\n        ...prev,\n        assignment: {\n          ...prev.assignment,\n          title: sharedRubric.assignmentInfo.title,\n          maxPoints: sharedRubric.assignmentInfo.totalPoints\n        }\n      }));\n    }\n  }, [sharedRubric]);\n\n  // Update from shared course details\n  useEffect(() => {\n    if (sharedCourseDetails) {\n      setGradingData(prev => ({\n        ...prev,\n        student: {\n          ...prev.student,\n          ...sharedCourseDetails.student\n        },\n        course: {\n          ...prev.course,\n          ...sharedCourseDetails.course\n        }\n      }));\n    }\n  }, [sharedCourseDetails]);\n\n  // Module change\n  useEffect(() => {\n    const mod = courseModules[activeModule];\n    if (mod) {\n      setLoadedRubric(mod.rubric);\n      setSharedRubric(mod.rubric);\n      initRubricGrading(mod.rubric);\n      updateAssignmentInfo({\n        name: mod.rubric.assignmentInfo.title,\n        maxPoints: mod.gradingSettings.maxPoints\n      });\n      setGradingData(prev => ({\n        ...prev,\n        assignment: {\n          ...prev.assignment,\n          title: mod.rubric.assignmentInfo.title,\n          maxPoints: mod.gradingSettings.maxPoints\n        }\n      }));\n    }\n  }, [activeModule, setSharedRubric]);\n  const handleLevelChange = (id, level) => {\n    setRubricGrading(prev => ({\n      ...prev,\n      [id]: {\n        ...prev[id],\n        level\n      }\n    }));\n  };\n  const handleCommentChange = (id, text) => {\n    setRubricGrading(prev => ({\n      ...prev,\n      [id]: {\n        ...prev[id],\n        comments: text\n      }\n    }));\n  };\n  const totalRawScore = () => {\n    return loadedRubric.criteria.reduce((acc, c) => {\n      const grade = rubricGrading[c.id];\n      if (!grade || !grade.level) return acc;\n      const levelObj = loadedRubric.rubricLevels.find(l => l.level === grade.level);\n      return acc + c.maxPoints * levelObj.multiplier;\n    }, 0);\n  };\n  const lateMultiplier = () => {\n    if (gradingData.latePolicy === 'none') return 1;\n    if (gradingData.latePolicy === 'within24') return 0.8;\n    return 0;\n  };\n  const finalScore = () => totalRawScore() * lateMultiplier();\n  const handleFileUpload = files => {\n    const list = Array.from(files).map(file => ({\n      id: Date.now() + Math.random(),\n      file,\n      name: file.name,\n      type: file.type,\n      size: file.size\n    }));\n    Promise.all(list.map(item => new Promise(res => {\n      if (item.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          item.base64 = e.target.result;\n          res(item);\n        };\n        reader.readAsDataURL(item.file);\n      } else {\n        res(item);\n      }\n    }))).then(newList => setAttachments(prev => [...prev, ...newList]));\n  };\n  const removeAttachment = id => {\n    setAttachments(prev => prev.filter(a => a.id !== id));\n  };\n  const addVideoLink = () => {\n    if (!videoInput.trim()) return;\n    if (!allowedVideoDomains.some(d => videoInput.includes(d))) {\n      alert('Unsupported video provider');\n      return;\n    }\n    setVideoLinks(prev => [...prev, {\n      id: Date.now(),\n      url: videoInput.trim(),\n      title: videoTitle || 'Video'\n    }]);\n    setVideoInput('');\n    setVideoTitle('');\n  };\n  const removeVideo = id => setVideoLinks(prev => prev.filter(v => v.id !== id));\n  const generateHTML = () => {\n    const score = finalScore().toFixed(1);\n    const raw = totalRawScore().toFixed(1);\n    const max = loadedRubric.assignmentInfo.totalPoints;\n    const percentage = (score / max * 100).toFixed(1);\n    const rubricRows = loadedRubric.criteria.map(c => {\n      const g = rubricGrading[c.id];\n      const level = g && g.level ? loadedRubric.rubricLevels.find(l => l.level === g.level) : null;\n      const pts = level ? (c.maxPoints * level.multiplier).toFixed(1) : '0';\n      return `<tr><td>${c.name}</td><td>${c.maxPoints}</td><td>${level ? level.name : ''}</td><td>${pts}</td><td>${(g === null || g === void 0 ? void 0 : g.comments) || ''}</td></tr>`;\n    }).join('');\n    const attachHTML = attachments.map(att => {\n      if (att.type.startsWith('image/')) {\n        return `<img src=\"${att.base64}\" alt=\"${att.name}\" style=\"max-width:300px;margin:10px;\"/>`;\n      }\n      return `<div>${att.name}</div>`;\n    }).join('');\n    const videoHTML = videoLinks.map(v => `<div><strong>${v.title}</strong><br/><iframe src=\"${v.url}\" width=\"480\" height=\"270\"></iframe></div>`).join('');\n    return `<!DOCTYPE html><html><head><meta charset=\"UTF-8\" /><title>Grade Report</title></head><body>\n<h1>Grade Report</h1>\n<p><strong>Student:</strong> ${gradingData.student.name}</p>\n<p><strong>Course:</strong> ${gradingData.course.code} - ${gradingData.course.name}</p>\n<p><strong>Assignment:</strong> ${gradingData.assignment.title}</p>\n<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\"><thead><tr><th>Criterion</th><th>Max</th><th>Level</th><th>Score</th><th>Comments</th></tr></thead><tbody>${rubricRows}</tbody></table>\n<p><strong>Raw Score:</strong> ${raw} / ${max}</p>\n<p><strong>Final Score:</strong> ${score} (${percentage}%)</p>\n${gradingData.latePolicy !== 'none' ? `<p>Late penalty applied.</p>` : ''}\n${attachHTML}\n${videoHTML}\n<p>Generated on ${new Date().toLocaleString()}</p>\n</body></html>`;\n  };\n  const exportHTML = () => {\n    const html = generateHTML();\n    const blob = new Blob([html], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = 'grade_report.html';\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportPDF = () => {\n    const html = generateHTML();\n    generatePDF(html);\n  };\n  const saveJSON = () => {\n    const data = {\n      gradingData,\n      rubricGrading,\n      rubricInfo: loadedRubric,\n      attachments,\n      videoLinks,\n      aiAssist\n    };\n    const blob = new Blob([JSON.stringify(data, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = 'grading_data.json';\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const loadJSON = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = ev => {\n      try {\n        const data = JSON.parse(ev.target.result);\n        if (data.rubricInfo) {\n          setLoadedRubric(data.rubricInfo);\n          initRubricGrading(data.rubricInfo);\n        }\n        setGradingData(data.gradingData || gradingData);\n        setAttachments(data.attachments || []);\n        setVideoLinks(data.videoLinks || []);\n      } catch (err) {\n        alert('Invalid JSON file');\n      }\n    };\n    reader.readAsText(file);\n  };\n  const clearRubric = () => {\n    clearSharedRubric();\n    setLoadedRubric(null);\n    setRubricGrading({});\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"border rounded p-2\",\n          value: activeModule,\n          onChange: e => setActiveModule(e.target.value),\n          children: Object.entries(courseModules).map(([key, mod]) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: key,\n            children: mod.courseType\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600\",\n          children: [\"v\", courseModules[activeModule].version]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAiAssist(v => !v),\n          className: `ml-4 p-2 rounded-full border ${aiAssist ? 'bg-blue-600 text-white' : 'bg-gray-50 text-gray-600'}`,\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".json\",\n          ref: jsonInputRef,\n          onChange: loadJSON,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _jsonInputRef$current;\n            return (_jsonInputRef$current = jsonInputRef.current) === null || _jsonInputRef$current === void 0 ? void 0 : _jsonInputRef$current.click();\n          },\n          className: \"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), \" Load Rubric JSON\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveJSON,\n          className: \"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), \" Save Grading JSON\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportHTML,\n          className: \"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(FileDown, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), \" Export HTML Report\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportPDF,\n          className: \"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), \" Export PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => transferRubricToGrading(loadedRubric),\n          className: \"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), \" Transfer to Grading\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Student & Course Info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Student Name\",\n          value: gradingData.student.name,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              student: {\n                ...p.student,\n                name: val\n              }\n            }));\n            updateStudentInfo({\n              name: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Student ID\",\n          value: gradingData.student.id,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              student: {\n                ...p.student,\n                id: val\n              }\n            }));\n            updateStudentInfo({\n              id: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Student Email\",\n          value: gradingData.student.email,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              student: {\n                ...p.student,\n                email: val\n              }\n            }));\n            updateStudentInfo({\n              email: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Course Code\",\n          value: gradingData.course.code,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              course: {\n                ...p.course,\n                code: val\n              }\n            }));\n            updateCourseInfo({\n              code: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Course Name\",\n          value: gradingData.course.name,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              course: {\n                ...p.course,\n                name: val\n              }\n            }));\n            updateCourseInfo({\n              name: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Term\",\n          value: gradingData.course.term,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              course: {\n                ...p.course,\n                term: val\n              }\n            }));\n            updateCourseInfo({\n              term: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-3 gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Assignment Title\",\n          value: gradingData.assignment.title,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              assignment: {\n                ...p.assignment,\n                title: val\n              }\n            }));\n            updateAssignmentInfo({\n              name: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: gradingData.assignment.dueDate,\n          onChange: e => {\n            const val = e.target.value;\n            setGradingData(p => ({\n              ...p,\n              assignment: {\n                ...p.assignment,\n                dueDate: val\n              }\n            }));\n            updateAssignmentInfo({\n              dueDate: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: gradingData.assignment.maxPoints,\n          onChange: e => {\n            const val = parseInt(e.target.value) || 0;\n            setGradingData(p => ({\n              ...p,\n              assignment: {\n                ...p.assignment,\n                maxPoints: val\n              }\n            }));\n            updateAssignmentInfo({\n              maxPoints: val\n            });\n          },\n          className: \"border rounded p-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Rubric Assessment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full text-sm border\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2 text-left\",\n              children: \"Criterion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2 text-center\",\n              children: \"Max\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2 text-center\",\n              children: \"Level\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2 text-center\",\n              children: \"Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2 text-left\",\n              children: \"Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: loadedRubric.criteria.map(c => {\n            const grade = rubricGrading[c.id] || {};\n            const levelObj = grade.level && loadedRubric.rubricLevels.find(l => l.level === grade.level);\n            const points = levelObj ? (c.maxPoints * levelObj.multiplier).toFixed(1) : '0';\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: c.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: c.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2 text-center\",\n                children: c.maxPoints\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2 text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: grade.level || '',\n                  onChange: e => handleLevelChange(c.id, e.target.value),\n                  className: \"border rounded p-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 25\n                  }, this), loadedRubric.rubricLevels.map(l => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: l.level,\n                    style: {\n                      backgroundColor: l.color\n                    },\n                    children: l.name\n                  }, l.level, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 540,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2 text-center\",\n                children: points\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: grade.comments || '',\n                  onChange: e => handleCommentChange(c.id, e.target.value),\n                  className: \"w-full border rounded p-1 text-sm\",\n                  rows: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 21\n              }, this)]\n            }, c.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right font-semibold\",\n        children: [\"Raw Score: \", totalRawScore().toFixed(1), \" / \", loadedRubric.assignmentInfo.totalPoints]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Late Submission Policy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"late\",\n            value: \"none\",\n            checked: gradingData.latePolicy === 'none',\n            onChange: () => setGradingData(p => ({\n              ...p,\n              latePolicy: 'none'\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }, this), \"On Time\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"late\",\n            value: \"within24\",\n            checked: gradingData.latePolicy === 'within24',\n            onChange: () => setGradingData(p => ({\n              ...p,\n              latePolicy: 'within24'\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }, this), \"Within 24 Hours (\\xD70.8)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-2 cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"late\",\n            value: \"after24\",\n            checked: gradingData.latePolicy === 'after24',\n            onChange: () => setGradingData(p => ({\n              ...p,\n              latePolicy: 'after24'\n            }))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this), \"After 24 Hours (\\xD70)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-500\",\n        children: [\"Final Score: \", finalScore().toFixed(1)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Attachments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        onChange: e => handleFileUpload(e.target.files),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this), attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: attachments.map(att => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 text-sm border p-2 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex-1\",\n            children: att.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeAttachment(att.id),\n            className: \"text-red-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 17\n          }, this)]\n        }, att.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-sm p-4 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold\",\n        children: \"Video Links\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          placeholder: \"Video URL\",\n          value: videoInput,\n          onChange: e => setVideoInput(e.target.value),\n          className: \"border p-2 rounded flex-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Title\",\n          value: videoTitle,\n          onChange: e => setVideoTitle(e.target.value),\n          className: \"border p-2 rounded flex-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addVideoLink,\n          className: \"border px-3 py-2 rounded bg-blue-50 flex items-center gap-1\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), \" Add\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this), videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: videoLinks.map(v => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 text-sm border p-2 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(Video, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex-1\",\n            children: v.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removeVideo(v.id),\n            className: \"text-red-600\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 17\n          }, this)]\n        }, v.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 604,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-right\",\n      children: loadedRubric && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearRubric,\n        className: \"mt-2 px-3 py-2 border rounded text-red-600\",\n        children: \"Clear Rubric\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 5\n  }, this);\n};\n_s(GradingTemplate, \"yxlxHAXXBgvN/V48H+HqbnkTA1U=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Upload","Download","FileText","Video","Plus","X","Save","FileDown","Bot","ArrowRight","useAssessment","generatePDF","jsxDEV","_jsxDEV","baseLevels","level","name","multiplier","color","courseModules","courseType","version","gradingSettings","maxPoints","rubric","assignmentInfo","title","description","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","feedbackLibrary","strengths","improvements","general","allowedVideoDomains","GradingTemplate","_s","sharedRubric","sharedCourseDetails","setSharedRubric","transferRubricToGrading","clearSharedRubric","updateStudentInfo","updateCourseInfo","updateAssignmentInfo","defaultModule","Object","keys","activeModule","setActiveModule","loadedRubric","setLoadedRubric","rubricGrading","setRubricGrading","attachments","setAttachments","videoLinks","setVideoLinks","videoInput","setVideoInput","videoTitle","setVideoTitle","aiAssist","setAiAssist","jsonInputRef","gradingData","setGradingData","student","email","course","code","term","assignment","dueDate","feedback","latePolicy","initRubricGrading","obj","forEach","c","comments","prev","mod","handleLevelChange","handleCommentChange","text","totalRawScore","reduce","acc","grade","levelObj","find","l","lateMultiplier","finalScore","handleFileUpload","files","list","Array","from","map","file","Date","now","Math","random","type","size","Promise","all","item","res","startsWith","reader","FileReader","onload","e","base64","target","result","readAsDataURL","then","newList","removeAttachment","filter","a","addVideoLink","trim","some","d","includes","alert","url","removeVideo","v","generateHTML","score","toFixed","raw","max","percentage","rubricRows","g","pts","join","attachHTML","att","videoHTML","toLocaleString","exportHTML","html","blob","Blob","URL","createObjectURL","link","document","createElement","href","download","click","revokeObjectURL","exportPDF","saveJSON","data","rubricInfo","JSON","stringify","loadJSON","ev","parse","err","readAsText","clearRubric","className","children","value","onChange","entries","key","fileName","_jsxFileName","lineNumber","columnNumber","onClick","accept","ref","_jsonInputRef$current","current","placeholder","val","p","parseInt","points","style","backgroundColor","rows","checked","multiple","length","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/GradingTemplate.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Upload, Download, FileText, Video, Plus, X, Save, FileDown, Bot, ArrowRight } from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\nimport { generatePDF } from '../utils/pdfFunctions';\r\n\r\nconst baseLevels = [\r\n  { level: 'incomplete', name: 'Incomplete', multiplier: 0, color: '#94a3b8' },\r\n  { level: 'unacceptable', name: 'Unacceptable', multiplier: 0.3, color: '#ef4444' },\r\n  { level: 'developing', name: 'Developing', multiplier: 0.6, color: '#f97316' },\r\n  { level: 'acceptable', name: 'Acceptable', multiplier: 0.8, color: '#22c55e' },\r\n  { level: 'exceptional', name: 'Exceptional', multiplier: 1.0, color: '#3b82f6' },\r\n];\r\n\r\nconst courseModules = {\r\n  '2d-animation': {\r\n    courseType: '2D Animation',\r\n    version: '1.0',\r\n    gradingSettings: { maxPoints: 100 },\r\n    rubric: {\r\n      assignmentInfo: {\r\n        title: 'Animation Project',\r\n        description: 'Create a short animated clip',\r\n        weight: 25,\r\n        passingThreshold: 60,\r\n        totalPoints: 100,\r\n      },\r\n      rubricLevels: baseLevels,\r\n      criteria: [\r\n        { id: 'design', name: 'Animation Principles', description: 'Timing and spacing', maxPoints: 40 },\r\n        { id: 'technical', name: 'Technical Execution', description: 'File quality and format', maxPoints: 30 },\r\n        { id: 'story', name: 'Storytelling', description: 'Narrative and creativity', maxPoints: 30 },\r\n      ],\r\n    },\r\n    feedbackLibrary: {\r\n      strengths: ['Great timing', 'Smooth transitions'],\r\n      improvements: ['More anticipation', 'Check spacing'],\r\n      general: ['Good overall progress'],\r\n    },\r\n  },\r\n  '3d-modeling': {\r\n    courseType: '3D Modeling',\r\n    version: '1.0',\r\n    gradingSettings: { maxPoints: 100 },\r\n    rubric: {\r\n      assignmentInfo: {\r\n        title: 'Modeling Project',\r\n        description: 'Model a detailed object',\r\n        weight: 30,\r\n        passingThreshold: 60,\r\n        totalPoints: 100,\r\n      },\r\n      rubricLevels: baseLevels,\r\n      criteria: [\r\n        { id: 'topology', name: 'Topology', description: 'Clean edge flow', maxPoints: 35 },\r\n        { id: 'uv', name: 'UV Mapping', description: 'Efficient layout', maxPoints: 35 },\r\n        { id: 'texture', name: 'Texturing', description: 'Material and shading quality', maxPoints: 30 },\r\n      ],\r\n    },\r\n    feedbackLibrary: {\r\n      strengths: ['Clean topology', 'Good shading'],\r\n      improvements: ['Check UV stretching'],\r\n      general: ['Nice modelling work'],\r\n    },\r\n  },\r\n};\r\n\r\nconst allowedVideoDomains = ['syncsketch', 'panopto', 'youtube.com', 'youtu.be', 'vimeo.com'];\r\n\r\nconst GradingTemplate = () => {\r\n  const {\r\n    sharedRubric,\r\n    sharedCourseDetails,\r\n    setSharedRubric,\r\n    transferRubricToGrading,\r\n    clearSharedRubric,\r\n    updateStudentInfo,\r\n    updateCourseInfo,\r\n    updateAssignmentInfo,\r\n  } = useAssessment();\r\n\r\n  const defaultModule = Object.keys(courseModules)[0];\r\n  const [activeModule, setActiveModule] = useState(defaultModule);\r\n  const [loadedRubric, setLoadedRubric] = useState(courseModules[defaultModule].rubric);\r\n  const [rubricGrading, setRubricGrading] = useState({});\r\n  const [attachments, setAttachments] = useState([]);\r\n  const [videoLinks, setVideoLinks] = useState([]);\r\n  const [videoInput, setVideoInput] = useState('');\r\n  const [videoTitle, setVideoTitle] = useState('');\r\n  const [aiAssist, setAiAssist] = useState(false);\r\n  const jsonInputRef = useRef(null);\r\n\r\n  const [gradingData, setGradingData] = useState({\r\n    student: { name: '', id: '', email: '' },\r\n    course: { code: '', name: '', term: '' },\r\n    assignment: {\r\n      title: courseModules[defaultModule].rubric.assignmentInfo.title,\r\n      dueDate: '',\r\n      maxPoints: courseModules[defaultModule].gradingSettings.maxPoints,\r\n    },\r\n    feedback: { general: '', strengths: '', improvements: '' },\r\n    latePolicy: 'none',\r\n  });\r\n\r\n  const initRubricGrading = (rubric) => {\r\n    const obj = {};\r\n    rubric.criteria.forEach((c) => {\r\n      obj[c.id] = { level: null, comments: '' };\r\n    });\r\n    setRubricGrading(obj);\r\n  };\r\n\r\n  // Initialize with module rubric\r\n  useEffect(() => {\r\n    initRubricGrading(loadedRubric);\r\n    setSharedRubric(loadedRubric);\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // Update from shared rubric\r\n  useEffect(() => {\r\n    if (sharedRubric) {\r\n      setLoadedRubric(sharedRubric);\r\n      initRubricGrading(sharedRubric);\r\n      updateAssignmentInfo({\r\n        name: sharedRubric.assignmentInfo.title,\r\n        maxPoints: sharedRubric.assignmentInfo.totalPoints,\r\n      });\r\n      setGradingData((prev) => ({\r\n        ...prev,\r\n        assignment: {\r\n          ...prev.assignment,\r\n          title: sharedRubric.assignmentInfo.title,\r\n          maxPoints: sharedRubric.assignmentInfo.totalPoints,\r\n        },\r\n      }));\r\n    }\r\n  }, [sharedRubric]);\r\n\r\n  // Update from shared course details\r\n  useEffect(() => {\r\n    if (sharedCourseDetails) {\r\n      setGradingData((prev) => ({\r\n        ...prev,\r\n        student: { ...prev.student, ...sharedCourseDetails.student },\r\n        course: { ...prev.course, ...sharedCourseDetails.course },\r\n      }));\r\n    }\r\n  }, [sharedCourseDetails]);\r\n\r\n  // Module change\r\n  useEffect(() => {\r\n    const mod = courseModules[activeModule];\r\n    if (mod) {\r\n      setLoadedRubric(mod.rubric);\r\n      setSharedRubric(mod.rubric);\r\n      initRubricGrading(mod.rubric);\r\n      updateAssignmentInfo({\r\n        name: mod.rubric.assignmentInfo.title,\r\n        maxPoints: mod.gradingSettings.maxPoints,\r\n      });\r\n      setGradingData((prev) => ({\r\n        ...prev,\r\n        assignment: {\r\n          ...prev.assignment,\r\n          title: mod.rubric.assignmentInfo.title,\r\n          maxPoints: mod.gradingSettings.maxPoints,\r\n        },\r\n      }));\r\n    }\r\n  }, [activeModule, setSharedRubric]);\r\n\r\n  const handleLevelChange = (id, level) => {\r\n    setRubricGrading((prev) => ({\r\n      ...prev,\r\n      [id]: { ...prev[id], level },\r\n    }));\r\n  };\r\n\r\n  const handleCommentChange = (id, text) => {\r\n    setRubricGrading((prev) => ({\r\n      ...prev,\r\n      [id]: { ...prev[id], comments: text },\r\n    }));\r\n  };\r\n\r\n  const totalRawScore = () => {\r\n    return loadedRubric.criteria.reduce((acc, c) => {\r\n      const grade = rubricGrading[c.id];\r\n      if (!grade || !grade.level) return acc;\r\n      const levelObj = loadedRubric.rubricLevels.find((l) => l.level === grade.level);\r\n      return acc + c.maxPoints * levelObj.multiplier;\r\n    }, 0);\r\n  };\r\n\r\n  const lateMultiplier = () => {\r\n    if (gradingData.latePolicy === 'none') return 1;\r\n    if (gradingData.latePolicy === 'within24') return 0.8;\r\n    return 0;\r\n  };\r\n\r\n  const finalScore = () => totalRawScore() * lateMultiplier();\r\n\r\n  const handleFileUpload = (files) => {\r\n    const list = Array.from(files).map((file) => ({\r\n      id: Date.now() + Math.random(),\r\n      file,\r\n      name: file.name,\r\n      type: file.type,\r\n      size: file.size,\r\n    }));\r\n\r\n    Promise.all(\r\n      list.map(\r\n        (item) =>\r\n          new Promise((res) => {\r\n            if (item.type.startsWith('image/')) {\r\n              const reader = new FileReader();\r\n              reader.onload = (e) => {\r\n                item.base64 = e.target.result;\r\n                res(item);\r\n              };\r\n              reader.readAsDataURL(item.file);\r\n            } else {\r\n              res(item);\r\n            }\r\n          })\r\n      )\r\n    ).then((newList) => setAttachments((prev) => [...prev, ...newList]));\r\n  };\r\n\r\n  const removeAttachment = (id) => {\r\n    setAttachments((prev) => prev.filter((a) => a.id !== id));\r\n  };\r\n\r\n  const addVideoLink = () => {\r\n    if (!videoInput.trim()) return;\r\n    if (!allowedVideoDomains.some((d) => videoInput.includes(d))) {\r\n      alert('Unsupported video provider');\r\n      return;\r\n    }\r\n    setVideoLinks((prev) => [\r\n      ...prev,\r\n      { id: Date.now(), url: videoInput.trim(), title: videoTitle || 'Video' },\r\n    ]);\r\n    setVideoInput('');\r\n    setVideoTitle('');\r\n  };\r\n\r\n  const removeVideo = (id) => setVideoLinks((prev) => prev.filter((v) => v.id !== id));\r\n\r\n  const generateHTML = () => {\r\n    const score = finalScore().toFixed(1);\r\n    const raw = totalRawScore().toFixed(1);\r\n    const max = loadedRubric.assignmentInfo.totalPoints;\r\n    const percentage = ((score / max) * 100).toFixed(1);\r\n\r\n    const rubricRows = loadedRubric.criteria\r\n      .map((c) => {\r\n        const g = rubricGrading[c.id];\r\n        const level = g && g.level ? loadedRubric.rubricLevels.find((l) => l.level === g.level) : null;\r\n        const pts = level ? (c.maxPoints * level.multiplier).toFixed(1) : '0';\r\n        return `<tr><td>${c.name}</td><td>${c.maxPoints}</td><td>${level ? level.name : ''}</td><td>${pts}</td><td>${g?.comments || ''}</td></tr>`;\r\n      })\r\n      .join('');\r\n\r\n    const attachHTML = attachments\r\n      .map((att) => {\r\n        if (att.type.startsWith('image/')) {\r\n          return `<img src=\"${att.base64}\" alt=\"${att.name}\" style=\"max-width:300px;margin:10px;\"/>`;\r\n        }\r\n        return `<div>${att.name}</div>`;\r\n      })\r\n      .join('');\r\n\r\n    const videoHTML = videoLinks\r\n      .map((v) => `<div><strong>${v.title}</strong><br/><iframe src=\"${v.url}\" width=\"480\" height=\"270\"></iframe></div>`) \r\n      .join('');\r\n\r\n    return `<!DOCTYPE html><html><head><meta charset=\"UTF-8\" /><title>Grade Report</title></head><body>\r\n<h1>Grade Report</h1>\r\n<p><strong>Student:</strong> ${gradingData.student.name}</p>\r\n<p><strong>Course:</strong> ${gradingData.course.code} - ${gradingData.course.name}</p>\r\n<p><strong>Assignment:</strong> ${gradingData.assignment.title}</p>\r\n<table border=\"1\" cellpadding=\"5\" cellspacing=\"0\"><thead><tr><th>Criterion</th><th>Max</th><th>Level</th><th>Score</th><th>Comments</th></tr></thead><tbody>${rubricRows}</tbody></table>\r\n<p><strong>Raw Score:</strong> ${raw} / ${max}</p>\r\n<p><strong>Final Score:</strong> ${score} (${percentage}%)</p>\r\n${gradingData.latePolicy !== 'none' ? `<p>Late penalty applied.</p>` : ''}\r\n${attachHTML}\r\n${videoHTML}\r\n<p>Generated on ${new Date().toLocaleString()}</p>\r\n</body></html>`;\r\n  };\r\n\r\n  const exportHTML = () => {\r\n    const html = generateHTML();\r\n    const blob = new Blob([html], { type: 'text/html' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = 'grade_report.html';\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportPDF = () => {\r\n    const html = generateHTML();\r\n    generatePDF(html);\r\n  };\r\n\r\n  const saveJSON = () => {\r\n    const data = {\r\n      gradingData,\r\n      rubricGrading,\r\n      rubricInfo: loadedRubric,\r\n      attachments,\r\n      videoLinks,\r\n      aiAssist,\r\n    };\r\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = 'grading_data.json';\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const loadJSON = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = (ev) => {\r\n      try {\r\n        const data = JSON.parse(ev.target.result);\r\n        if (data.rubricInfo) {\r\n          setLoadedRubric(data.rubricInfo);\r\n          initRubricGrading(data.rubricInfo);\r\n        }\r\n        setGradingData(data.gradingData || gradingData);\r\n        setAttachments(data.attachments || []);\r\n        setVideoLinks(data.videoLinks || []);\r\n      } catch (err) {\r\n        alert('Invalid JSON file');\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const clearRubric = () => {\r\n    clearSharedRubric();\r\n    setLoadedRubric(null);\r\n    setRubricGrading({});\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      {/* Header Bar */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <select\r\n            className=\"border rounded p-2\"\r\n            value={activeModule}\r\n            onChange={(e) => setActiveModule(e.target.value)}\r\n          >\r\n            {Object.entries(courseModules).map(([key, mod]) => (\r\n              <option key={key} value={key}>\r\n                {mod.courseType}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-sm text-gray-600\">v{courseModules[activeModule].version}</span>\r\n          <button\r\n            onClick={() => setAiAssist((v) => !v)}\r\n            className={`ml-4 p-2 rounded-full border ${aiAssist ? 'bg-blue-600 text-white' : 'bg-gray-50 text-gray-600'}`}\r\n          >\r\n            <Bot size={18} />\r\n          </button>\r\n        </div>\r\n        <div className=\"flex gap-3\">\r\n          <input type=\"file\" accept=\".json\" ref={jsonInputRef} onChange={loadJSON} className=\"hidden\" />\r\n          <button onClick={() => jsonInputRef.current?.click()} className=\"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\">\r\n            <Upload size={16} /> Load Rubric JSON\r\n          </button>\r\n          <button onClick={saveJSON} className=\"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\">\r\n            <Save size={16} /> Save Grading JSON\r\n          </button>\r\n          <button onClick={exportHTML} className=\"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\">\r\n            <FileDown size={16} /> Export HTML Report\r\n          </button>\r\n          <button onClick={exportPDF} className=\"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\">\r\n            <Download size={16} /> Export PDF\r\n          </button>\r\n          <button onClick={() => transferRubricToGrading(loadedRubric)} className=\"flex items-center gap-1 border px-3 py-2 rounded hover:bg-gray-100\">\r\n            <ArrowRight size={16} /> Transfer to Grading\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Student & Assignment Info */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 space-y-4\">\r\n        <h2 className=\"text-lg font-semibold\">Student & Course Info</h2>\r\n        <div className=\"grid md:grid-cols-3 gap-3\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Student Name\"\r\n            value={gradingData.student.name}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, student: { ...p.student, name: val } }));\r\n              updateStudentInfo({ name: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Student ID\"\r\n            value={gradingData.student.id}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, student: { ...p.student, id: val } }));\r\n              updateStudentInfo({ id: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Student Email\"\r\n            value={gradingData.student.email}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, student: { ...p.student, email: val } }));\r\n              updateStudentInfo({ email: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n        </div>\r\n        <div className=\"grid md:grid-cols-3 gap-3\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Course Code\"\r\n            value={gradingData.course.code}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, course: { ...p.course, code: val } }));\r\n              updateCourseInfo({ code: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Course Name\"\r\n            value={gradingData.course.name}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, course: { ...p.course, name: val } }));\r\n              updateCourseInfo({ name: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Term\"\r\n            value={gradingData.course.term}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, course: { ...p.course, term: val } }));\r\n              updateCourseInfo({ term: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n        </div>\r\n        <div className=\"grid md:grid-cols-3 gap-3\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Assignment Title\"\r\n            value={gradingData.assignment.title}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, assignment: { ...p.assignment, title: val } }));\r\n              updateAssignmentInfo({ name: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            value={gradingData.assignment.dueDate}\r\n            onChange={(e) => {\r\n              const val = e.target.value;\r\n              setGradingData((p) => ({ ...p, assignment: { ...p.assignment, dueDate: val } }));\r\n              updateAssignmentInfo({ dueDate: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            value={gradingData.assignment.maxPoints}\r\n            onChange={(e) => {\r\n              const val = parseInt(e.target.value) || 0;\r\n              setGradingData((p) => ({ ...p, assignment: { ...p.assignment, maxPoints: val } }));\r\n              updateAssignmentInfo({ maxPoints: val });\r\n            }}\r\n            className=\"border rounded p-2\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rubric Table */}\r\n      {loadedRubric && (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-4 space-y-4\">\r\n          <h2 className=\"text-lg font-semibold\">Rubric Assessment</h2>\r\n          <table className=\"w-full text-sm border\">\r\n            <thead>\r\n              <tr className=\"bg-gray-100\">\r\n                <th className=\"border p-2 text-left\">Criterion</th>\r\n                <th className=\"border p-2 text-center\">Max</th>\r\n                <th className=\"border p-2 text-center\">Level</th>\r\n                <th className=\"border p-2 text-center\">Score</th>\r\n                <th className=\"border p-2 text-left\">Comments</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {loadedRubric.criteria.map((c) => {\r\n                const grade = rubricGrading[c.id] || {};\r\n                const levelObj = grade.level && loadedRubric.rubricLevels.find((l) => l.level === grade.level);\r\n                const points = levelObj ? (c.maxPoints * levelObj.multiplier).toFixed(1) : '0';\r\n                return (\r\n                  <tr key={c.id} className=\"border-b\">\r\n                    <td className=\"border p-2\">\r\n                      <div className=\"font-medium\">{c.name}</div>\r\n                      <div className=\"text-xs text-gray-500\">{c.description}</div>\r\n                    </td>\r\n                    <td className=\"border p-2 text-center\">{c.maxPoints}</td>\r\n                    <td className=\"border p-2 text-center\">\r\n                      <select\r\n                        value={grade.level || ''}\r\n                        onChange={(e) => handleLevelChange(c.id, e.target.value)}\r\n                        className=\"border rounded p-1\"\r\n                      >\r\n                        <option value=\"\">-</option>\r\n                        {loadedRubric.rubricLevels.map((l) => (\r\n                          <option key={l.level} value={l.level} style={{ backgroundColor: l.color }}>\r\n                            {l.name}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </td>\r\n                    <td className=\"border p-2 text-center\">{points}</td>\r\n                    <td className=\"border p-2\">\r\n                      <textarea\r\n                        value={grade.comments || ''}\r\n                        onChange={(e) => handleCommentChange(c.id, e.target.value)}\r\n                        className=\"w-full border rounded p-1 text-sm\"\r\n                        rows=\"2\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n          <div className=\"text-right font-semibold\">Raw Score: {totalRawScore().toFixed(1)} / {loadedRubric.assignmentInfo.totalPoints}</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Late Policy */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 space-y-2\">\r\n        <h2 className=\"text-lg font-semibold\">Late Submission Policy</h2>\r\n        <div className=\"flex flex-col md:flex-row gap-3\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input type=\"radio\" name=\"late\" value=\"none\" checked={gradingData.latePolicy === 'none'} onChange={() => setGradingData((p) => ({ ...p, latePolicy: 'none' }))} />\r\n            On Time\r\n          </label>\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input type=\"radio\" name=\"late\" value=\"within24\" checked={gradingData.latePolicy === 'within24'} onChange={() => setGradingData((p) => ({ ...p, latePolicy: 'within24' }))} />\r\n            Within 24 Hours (0.8)\r\n          </label>\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input type=\"radio\" name=\"late\" value=\"after24\" checked={gradingData.latePolicy === 'after24'} onChange={() => setGradingData((p) => ({ ...p, latePolicy: 'after24' }))} />\r\n            After 24 Hours (0)\r\n          </label>\r\n        </div>\r\n        <div className=\"text-sm text-gray-500\">Final Score: {finalScore().toFixed(1)}</div>\r\n      </div>\r\n\r\n      {/* Attachments */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 space-y-3\">\r\n        <h2 className=\"text-lg font-semibold\">Attachments</h2>\r\n        <input type=\"file\" multiple onChange={(e) => handleFileUpload(e.target.files)} className=\"border p-2 rounded\" />\r\n        {attachments.length > 0 && (\r\n          <div className=\"space-y-2\">\r\n            {attachments.map((att) => (\r\n              <div key={att.id} className=\"flex items-center gap-2 text-sm border p-2 rounded\">\r\n                <FileText size={14} />\r\n                <span className=\"flex-1\">{att.name}</span>\r\n                <button onClick={() => removeAttachment(att.id)} className=\"text-red-600\">\r\n                  <X size={14} />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Video Links */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 space-y-3\">\r\n        <h2 className=\"text-lg font-semibold\">Video Links</h2>\r\n        <div className=\"flex flex-col md:flex-row gap-2\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Video URL\"\r\n            value={videoInput}\r\n            onChange={(e) => setVideoInput(e.target.value)}\r\n            className=\"border p-2 rounded flex-1\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            value={videoTitle}\r\n            onChange={(e) => setVideoTitle(e.target.value)}\r\n            className=\"border p-2 rounded flex-1\"\r\n          />\r\n          <button onClick={addVideoLink} className=\"border px-3 py-2 rounded bg-blue-50 flex items-center gap-1\">\r\n            <Plus size={16} /> Add\r\n          </button>\r\n        </div>\r\n        {videoLinks.length > 0 && (\r\n          <div className=\"space-y-2\">\r\n            {videoLinks.map((v) => (\r\n              <div key={v.id} className=\"flex items-center gap-2 text-sm border p-2 rounded\">\r\n                <Video size={14} />\r\n                <span className=\"flex-1\">{v.title}</span>\r\n                <button onClick={() => removeVideo(v.id)} className=\"text-red-600\">\r\n                  <X size={14} />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Clear Rubric */}\r\n      <div className=\"text-right\">\r\n        {loadedRubric && (\r\n          <button onClick={clearRubric} className=\"mt-2 px-3 py-2 border rounded text-red-600\">\r\n            Clear Rubric\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default GradingTemplate;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}