{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\GradingTemplate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot, ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle, CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw, AlertTriangle, BookOpen, Settings } from 'lucide-react';\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\n\n// NO SAMPLE RUBRIC - START WITH EMPTY STATE\n// This forces users to create or load a rubric before grading\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GradingTemplate = () => {\n  _s();\n  var _loadedRubric$assignm6, _loadedRubric$assignm7, _loadedRubric$assignm8, _loadedRubric$criteri, _gradingSession$stude2, _gradingSession$stude3, _gradingSession$stude4, _gradingSession$stude5, _gradingSession$stude6, _gradingSession$stude7, _levels$gradingData$l;\n  // Get shared context - ENHANCED with new functions\n  const {\n    sharedRubric,\n    sharedCourseDetails,\n    setSharedCourseDetails,\n    gradingData: sharedGradingData,\n    setGradingData: setSharedGradingData,\n    updateStudentInfo,\n    updateCourseInfo,\n    updateAssignmentInfo,\n    clearGradingFormData,\n    classList,\n    setClassList,\n    setCurrentStudent,\n    gradingSession,\n    setGradingSession,\n    nextStudentInSession,\n    previousStudentInSession,\n    updateGradingSession,\n    initializeGradingSession,\n    setActiveTab,\n    currentStudent,\n    saveDraft,\n    loadDraft,\n    // NEW: Add the draft/final grade functions\n    saveFinalGrade,\n    loadFinalGrade,\n    finalGrades,\n    getGradeStatus,\n    currentLatePolicy,\n    customLatePolicies\n  } = useAssessment();\n\n  // Helper function to convert HTML content to readable text format\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // State for all grading data - initialize from shared context or defaults\n  const [localGradingData, setLocalGradingData] = useState(() => {\n    // 1) Try loading a saved draft first\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      const draft = loadDraft(currentStudent.id);\n      if (draft) {\n        return draft;\n      }\n    }\n    // 2) If rubric was just transferred, use that\n    if (sharedGradingData) {\n      return {\n        ...sharedGradingData,\n        student: currentStudent || sharedGradingData.student || {\n          name: '',\n          id: '',\n          email: ''\n        }\n      };\n    }\n    // 3) Otherwise, start fresh for this student\n    return {\n      student: currentStudent || {\n        name: '',\n        id: '',\n        email: ''\n      },\n      course: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) || {\n        code: '',\n        name: '',\n        instructor: '',\n        term: ''\n      },\n      assignment: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) || {\n        name: '',\n        dueDate: '',\n        maxPoints: 100\n      },\n      feedback: {\n        general: '',\n        strengths: '',\n        improvements: ''\n      },\n      attachments: [],\n      videoLinks: [],\n      latePolicy: {\n        level: 'none',\n        penaltyApplied: false\n      },\n      metadata: {\n        gradedBy: '',\n        gradedDate: '',\n        aiAssisted: false,\n        rubricIntegrated: false\n      },\n      rubricGrading: {}\n    };\n  });\n\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\n  const gradingData = localGradingData;\n  const setGradingData = setLocalGradingData;\n\n  // Rubric-specific state - MODIFIED: Default to null instead of sampleRubric\n  const [loadedRubric, setLoadedRubric] = useState(() => {\n    return sharedRubric || null; // NO DEFAULT SAMPLE RUBRIC\n  });\n  const [showRubricComments, setShowRubricComments] = useState({});\n  const [showHeaderGuide, setShowHeaderGuide] = useState(false);\n  const fileInputRef = useRef(null);\n  const moduleInputRef = useRef(null);\n  const rubricInputRef = useRef(null);\n\n  // Video link management\n  const [videoLinkInput, setVideoLinkInput] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n\n  // Additional state for comments display\n  const [showComments, setShowComments] = useState(false);\n\n  // Enhanced shared data synchronization\n  useEffect(() => {\n    if (!sharedGradingData) return;\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\n\n    // Only update course info if it's not empty and different from current\n    if (sharedGradingData.course && (sharedGradingData.course.code || sharedGradingData.course.name || sharedGradingData.course.instructor || sharedGradingData.course.term)) {\n      const needsSync = sharedGradingData.course.code !== localGradingData.course.code || sharedGradingData.course.name !== localGradingData.course.name || sharedGradingData.course.instructor !== localGradingData.course.instructor || sharedGradingData.course.term !== localGradingData.course.term;\n      if (needsSync) {\n        console.log('✅ Syncing course data from shared context to local state');\n        setLocalGradingData(prev => ({\n          ...prev,\n          course: {\n            code: sharedGradingData.course.code || prev.course.code,\n            name: sharedGradingData.course.name || prev.course.name,\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\n            term: sharedGradingData.course.term || prev.course.term\n          }\n        }));\n      }\n    }\n  }, [sharedGradingData]);\n\n  // Sync with sharedRubric\n  useEffect(() => {\n    if (sharedRubric && sharedRubric !== loadedRubric) {\n      var _sharedRubric$assignm;\n      console.log('✅ Syncing rubric from shared context:', ((_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.title) || 'Untitled');\n      setLoadedRubric(sharedRubric);\n    }\n  }, [sharedRubric, loadedRubric]);\n\n  // Auto-save to shared context whenever gradingData changes (with debounce)\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setSharedGradingData(gradingData);\n      setSharedCourseDetails({\n        student: gradingData.student,\n        course: gradingData.course,\n        assignment: gradingData.assignment\n      });\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\n\n  // When we get new sharedCourseDetails, merge them in\n  useEffect(() => {\n    if (!sharedCourseDetails) return;\n    setLocalGradingData(prev => ({\n      ...prev,\n      student: sharedCourseDetails.student || prev.student,\n      course: sharedCourseDetails.course || prev.course,\n      assignment: sharedCourseDetails.assignment || prev.assignment\n    }));\n  }, [sharedCourseDetails]);\n\n  // When student changes, load any saved draft/final but keep course+assignment\n  useEffect(() => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) return;\n    const status = getGradeStatus(currentStudent.id);\n    let saved = null;\n    if (status === 'final' && loadFinalGrade) {\n      saved = loadFinalGrade(currentStudent.id);\n    } else if (status === 'draft') {\n      saved = loadDraft(currentStudent.id);\n    }\n    if (saved) {\n      setLocalGradingData(prev => ({\n        ...saved,\n        // Use saved data\n        course: prev.course,\n        // Keep current course info\n        assignment: prev.assignment // Keep current assignment info\n      }));\n    } else {\n      // Fresh slate for this student, but keep course/assignment\n      setLocalGradingData(prev => ({\n        ...prev,\n        student: currentStudent,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: {}\n      }));\n    }\n  }, [currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.id, getGradeStatus, loadFinalGrade, loadDraft]);\n\n  // Enhanced calculation function\n  const calculateTotalScore = () => {\n    if (!loadedRubric || !loadedRubric.criteria) return {\n      rawScore: 0,\n      finalScore: 0,\n      penaltyApplied: false,\n      latePolicyDescription: ''\n    };\n    let totalRawScore = 0;\n    let maxPossiblePoints = 0;\n\n    // Calculate raw score from rubric grading\n    loadedRubric.criteria.forEach(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      if (grading && grading.selectedLevel && loadedRubric.rubricLevels) {\n        const selectedLevel = loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\n        if (selectedLevel) {\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\n        }\n      }\n      maxPossiblePoints += criterion.maxPoints;\n    });\n\n    // Apply late policy penalty\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\n    return {\n      rawScore: totalRawScore,\n      finalScore: finalScore,\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\n      latePolicyDescription: latePolicyLevel.description\n    };\n  };\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\n  useEffect(() => {\n    setScoreSummary(calculateTotalScore());\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, loadedRubric]);\n  const updateLatePolicy = level => {\n    setGradingData(prevData => ({\n      ...prevData,\n      latePolicy: {\n        level: level,\n        penaltyApplied: level !== 'none',\n        policyId: (currentLatePolicy === null || currentLatePolicy === void 0 ? void 0 : currentLatePolicy.id) || DEFAULT_LATE_POLICY.id\n      }\n    }));\n  };\n  const updateRubricGrading = (criterionId, level, comments = null) => {\n    if (!loadedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const existingGrading = prevData.rubricGrading[criterionId];\n      const existingComments = (existingGrading === null || existingGrading === void 0 ? void 0 : existingGrading.customComments) || '';\n      const newRubricState = {\n        ...prevData.rubricGrading,\n        [criterionId]: {\n          criterionId,\n          selectedLevel: level,\n          customComments: comments !== null ? comments : existingComments\n        }\n      };\n      return {\n        ...prevData,\n        rubricGrading: newRubricState\n      };\n    });\n  };\n  const addCriterionFeedback = (criterionId, comment) => {\n    if (!loadedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const currentGrading = prevData.rubricGrading[criterionId];\n      const currentComments = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '';\n      const newComments = currentComments ? `${currentComments}\\n${comment}` : comment;\n      return {\n        ...prevData,\n        rubricGrading: {\n          ...prevData.rubricGrading,\n          [criterionId]: {\n            ...currentGrading,\n            customComments: newComments\n          }\n        }\n      };\n    });\n  };\n\n  // HELPER FUNCTIONS FOR COURSE INFO\n  const getEffectiveCourseData = () => {\n    const course = (gradingData === null || gradingData === void 0 ? void 0 : gradingData.course) || {};\n    const metadata = classList === null || classList === void 0 ? void 0 : classList.courseMetadata;\n    return {\n      code: course.code || (metadata === null || metadata === void 0 ? void 0 : metadata.courseCode) || '',\n      name: course.name || (metadata === null || metadata === void 0 ? void 0 : metadata.courseName) || '',\n      instructor: course.instructor || (metadata === null || metadata === void 0 ? void 0 : metadata.instructor) || (metadata === null || metadata === void 0 ? void 0 : metadata.professors) || '',\n      term: course.term || (metadata === null || metadata === void 0 ? void 0 : metadata.term) || ''\n    };\n  };\n  const pullCourseDataFromClassList = () => {\n    if (!(classList !== null && classList !== void 0 && classList.courseMetadata)) {\n      alert('No class list course metadata available to pull from.');\n      return;\n    }\n    const metadata = classList.courseMetadata;\n    setGradingData(prevData => ({\n      ...prevData,\n      course: {\n        code: metadata.courseCode || prevData.course.code,\n        name: metadata.courseName || prevData.course.name,\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\n        term: metadata.term || prevData.course.term\n      }\n    }));\n    alert('Course information has been pulled from the class list!');\n  };\n\n  // LETTER GRADE CALCULATION\n  const getLetterGrade = percentage => {\n    if (percentage >= 97) return 'A+';\n    if (percentage >= 93) return 'A';\n    if (percentage >= 90) return 'A-';\n    if (percentage >= 87) return 'B+';\n    if (percentage >= 83) return 'B';\n    if (percentage >= 80) return 'B-';\n    if (percentage >= 77) return 'C+';\n    if (percentage >= 73) return 'C';\n    if (percentage >= 70) return 'C-';\n    if (percentage >= 67) return 'D+';\n    if (percentage >= 63) return 'D';\n    if (percentage >= 60) return 'D-';\n    return 'F';\n  };\n\n  // HTML REPORT GENERATION\n  const generateStudentReportHTML = () => {\n    const effectiveCourse = getEffectiveCourseData();\n    const totalScore = getTotalScore();\n\n    // Generate attachments HTML with file type detection\n    const attachmentsHTML = gradingData.attachments.map((attachment, index) => {\n      const isImage = attachment.type && attachment.type.startsWith('image/');\n      if (isImage && attachment.base64Data) {\n        return `<div class=\"attachment-item image-attachment\">\n            <img src=\"${attachment.base64Data}\" \n                 alt=\"${attachment.name}\" \n                 class=\"clickable-image\" \n                 data-index=\"${index}\"\n                 style=\"max-width: 150px; max-height: 150px; border-radius: 8px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s ease;\"\n                 onmouseover=\"this.style.transform='scale(1.05)'\" \n                 onmouseout=\"this.style.transform='scale(1)'\" />\n            <div class=\"attachment-name\">${attachment.name}</div>\n          </div>`;\n      } else {\n        return `<div class=\"attachment-item file-attachment\">\n            <div class=\"file-icon\">📄</div>\n            <div class=\"attachment-name\">${attachment.name}</div>\n            <div class=\"file-size\">${(attachment.size / 1024).toFixed(1)} KB</div>\n          </div>`;\n      }\n    }).join('');\n\n    // Generate video links HTML\n    const videoLinksHTML = gradingData.videoLinks.map(link => `<div class=\"video-link\">\n        <div class=\"video-info\">\n          <strong>${link.title}</strong><br>\n          <a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\">${link.url}</a>\n          <div class=\"video-date\">Added: ${link.addedDate}</div>\n        </div>\n      </div>`).join('');\n\n    // Generate rubric HTML if available\n    let rubricHTML = '';\n    if (loadedRubric && loadedRubric.criteria) {\n      rubricHTML = `\n        <div class=\"rubric-section\">\n          <h2>📊 Detailed Rubric Assessment</h2>\n          ${loadedRubric.criteria.map(criterion => {\n        var _criterion$levels$sel;\n        const grading = gradingData.rubricGrading[criterion.id];\n        const selectedLevel = grading !== null && grading !== void 0 && grading.selectedLevel && loadedRubric.rubricLevels ? loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\n        const points = selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : '0.0';\n        return `\n              <div class=\"criterion\">\n                <div class=\"criterion-header\">\n                  <h3>${criterion.name}</h3>\n                  <div class=\"criterion-points\">${points}/${criterion.maxPoints} pts</div>\n                </div>\n                <div class=\"criterion-description\">${renderFormattedContent(criterion.description)}</div>\n                ${selectedLevel ? `\n                  <div class=\"selected-level\" style=\"background-color: ${selectedLevel.color}20; border-left: 4px solid ${selectedLevel.color};\">\n                    <strong>${selectedLevel.name}</strong> (${Math.round(selectedLevel.multiplier * 100)}%)\n                    ${criterion.levels && (_criterion$levels$sel = criterion.levels[selectedLevel.level]) !== null && _criterion$levels$sel !== void 0 && _criterion$levels$sel.description ? `<div class=\"level-description\">${renderFormattedContent(criterion.levels[selectedLevel.level].description)}</div>` : ''}\n                  </div>\n                ` : '<div class=\"no-level\">Not assessed</div>'}\n                ${grading !== null && grading !== void 0 && grading.customComments ? `\n                  <div class=\"custom-comments\">\n                    <strong>Instructor Comments:</strong>\n                    <div>${grading.customComments}</div>\n                  </div>\n                ` : ''}\n              </div>\n            `;\n      }).join('')}\n        </div>`;\n    }\n    const htmlContent = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Grade Report - ${gradingData.student.name}</title>\n    <style>\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; background: #f9f9f9; }\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }\n        .header h1 { margin: 0; font-size: 2.2em; font-weight: 300; }\n        .header .course-info { margin-top: 15px; font-size: 1.1em; opacity: 0.9; }\n        .grade-summary { background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }\n        .grade-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 20px 0; }\n        .grade-item { text-align: center; padding: 20px; background: #f8f9ff; border-radius: 8px; border: 2px solid #e1e5f2; }\n        .grade-value { font-size: 2em; font-weight: bold; color: #5a67d8; margin-bottom: 5px; }\n        .grade-label { font-size: 0.9em; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }\n        .section { background: white; padding: 25px; margin-bottom: 25px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }\n        .section h2 { color: #4a5568; border-bottom: 3px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 20px; }\n        .feedback-section { background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); padding: 20px; border-radius: 8px; margin: 15px 0; }\n        .rubric-section .criterion { margin-bottom: 25px; padding: 20px; background: #fdfdfd; border-radius: 8px; border: 1px solid #e2e8f0; }\n        .criterion-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\n        .criterion-header h3 { margin: 0; color: #2d3748; }\n        .criterion-points { font-weight: bold; color: #5a67d8; font-size: 1.1em; }\n        .selected-level { padding: 15px; margin: 15px 0; border-radius: 6px; }\n        .custom-comments { background: #f7fafc; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #4299e1; }\n        .attachments { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; }\n        .attachment-item { text-align: center; padding: 15px; background: #f8f9ff; border-radius: 8px; border: 1px solid #e1e5f2; }\n        .attachment-name { margin-top: 10px; font-size: 0.9em; font-weight: 500; }\n        .file-icon { font-size: 2.5em; margin-bottom: 10px; }\n        .file-size { font-size: 0.8em; color: #666; margin-top: 5px; }\n        .video-link { padding: 15px; background: #f1f5f9; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #3182ce; }\n        .video-date { font-size: 0.8em; color: #666; margin-top: 5px; }\n        .pass-status { padding: 10px 20px; border-radius: 20px; font-weight: bold; display: inline-block; margin-top: 10px; }\n        .pass { background: #c6f6d5; color: #22543d; }\n        .fail { background: #fed7d7; color: #742a2a; }\n        .late-penalty { background: #fef5e7; color: #744210; padding: 15px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #ed8936; }\n        .image-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); }\n        .image-modal.show { display: block; }\n        .modal-content { margin: auto; display: block; max-width: 90%; max-height: 90%; margin-top: 5%; }\n        .close-modal { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer; }\n        .modal-caption { margin: auto; display: block; width: 80%; max-width: 700px; text-align: center; color: #ccc; padding: 10px 0; }\n        @media print { .image-modal { display: none !important; } body { background: white; } .section, .grade-summary { box-shadow: none; border: 1px solid #ddd; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>📋 Grade Report</h1>\n        <div class=\"course-info\">\n            <strong>${gradingData.student.name}</strong> (${gradingData.student.id})<br>\n            ${effectiveCourse.code} - ${effectiveCourse.name}<br>\n            ${effectiveCourse.instructor} • ${effectiveCourse.term}\n        </div>\n    </div>\n\n    <div class=\"grade-summary\">\n        <h2>🎯 Grade Summary</h2>\n        <div class=\"grade-grid\">\n            <div class=\"grade-item\">\n                <div class=\"grade-value\">${totalScore.finalScore.toFixed(1)}</div>\n                <div class=\"grade-label\">Final Score</div>\n            </div>\n            <div class=\"grade-item\">\n                <div class=\"grade-value\">${totalScore.percentage}%</div>\n                <div class=\"grade-label\">Percentage</div>\n            </div>\n            <div class=\"grade-item\">\n                <div class=\"grade-value\">${getLetterGrade(parseFloat(totalScore.percentage))}</div>\n                <div class=\"grade-label\">Letter Grade</div>\n            </div>\n            <div class=\"grade-item\">\n                <div class=\"grade-value\">${loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}</div>\n                <div class=\"grade-label\">Total Points</div>\n            </div>\n        </div>\n        \n        <div class=\"pass-status ${totalScore.finalScore >= (loadedRubric ? loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints * 0.6) ? 'pass' : 'fail'}\">\n            ${totalScore.finalScore >= (loadedRubric ? loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints * 0.6) ? '✅ PASS' : '❌ FAIL'}\n        </div>\n\n        ${totalScore.penaltyApplied ? `\n            <div class=\"late-penalty\">\n                <strong>⏰ Late Penalty Applied:</strong> ${totalScore.latePolicyDescription}\n            </div>\n        ` : ''}\n    </div>\n\n    ${gradingData.feedback.general || gradingData.feedback.strengths || gradingData.feedback.improvements ? `\n        <div class=\"section\">\n            <h2>💬 Instructor Feedback</h2>\n            ${gradingData.feedback.general ? `\n                <div class=\"feedback-section\">\n                    <h3>Overall Comments</h3>\n                    <p>${gradingData.feedback.general}</p>\n                </div>\n            ` : ''}\n            ${gradingData.feedback.strengths ? `\n                <div class=\"feedback-section\">\n                    <h3>✅ Strengths</h3>\n                    <p>${gradingData.feedback.strengths}</p>\n                </div>\n            ` : ''}\n            ${gradingData.feedback.improvements ? `\n                <div class=\"feedback-section\">\n                    <h3>📈 Areas for Improvement</h3>\n                    <p>${gradingData.feedback.improvements}</p>\n                </div>\n            ` : ''}\n        </div>\n    ` : ''}\n\n    ${rubricHTML}\n\n    ${attachmentsHTML ? `<div class=\"section\"><h2>📎 File Attachments</h2><div class=\"attachments\">${attachmentsHTML}</div></div>` : ''}\n\n    ${videoLinksHTML ? `<div class=\"section\"><h2>🎥 Video Review Links</h2>${videoLinksHTML}</div>` : ''}\n\n    <p style=\"margin-top: 40px; text-align: center; color: #666; font-size: 0.9rem;\">\n        Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}\n    </p>\n\n    <div id=\"imageModal\" class=\"image-modal\">\n        <span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span>\n        <img class=\"modal-content\" id=\"modalImage\">\n        <div class=\"modal-caption\" id=\"modalCaption\"></div>\n    </div>\n\n    <script>\n        const attachmentData = ${JSON.stringify(gradingData.attachments)};\n\n        function openImageModal(src, caption) {\n            const modal = document.getElementById('imageModal');\n            const modalImg = document.getElementById('modalImage');\n            const modalCaption = document.getElementById('modalCaption');\n            \n            modal.classList.add('show');\n            modalImg.src = src;\n            modalCaption.textContent = caption;\n            document.body.style.overflow = 'hidden';\n        }\n\n        function closeImageModal() {\n            document.getElementById('imageModal').classList.remove('show');\n            document.body.style.overflow = 'auto';\n        }\n\n        document.addEventListener('DOMContentLoaded', function() {\n            // Add click handlers to images\n            document.querySelectorAll('.clickable-image').forEach(img => {\n                img.addEventListener('click', function() {\n                    const index = parseInt(this.getAttribute('data-index'));\n                    const attachment = attachmentData[index];\n                    if (attachment && attachment.base64Data) {\n                        openImageModal(attachment.base64Data, attachment.name);\n                    }\n                });\n            });\n\n            // Close modal when clicking outside\n            document.getElementById('imageModal').addEventListener('click', function(e) {\n                if (e.target === this) {\n                    closeImageModal();\n                }\n            });\n\n            // Close modal with Escape key\n            document.addEventListener('keydown', function(e) {\n                if (e.key === 'Escape') {\n                    closeImageModal();\n                }\n            });\n        });\n    </script>\n</body>\n</html>`;\n    return htmlContent;\n  };\n\n  // AI FEEDBACK EXPORT FUNCTIONS\n  const exportAIFeedbackData = () => {\n    var _localGradingData$stu, _loadedRubric$assignm, _loadedRubric$assignm2, _loadedRubric$assignm3, _loadedRubric$assignm4, _loadedRubric$assignm5;\n    if (!((_localGradingData$stu = localGradingData.student) !== null && _localGradingData$stu !== void 0 && _localGradingData$stu.name)) {\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\n      return;\n    }\n\n    // Calculate scores\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\n\n    // Build criteria performance data\n    const criteriaPerformance = loadedRubric && loadedRubric.criteria ? loadedRubric.criteria.map(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      const selectedLevel = grading !== null && grading !== void 0 && grading.selectedLevel && loadedRubric.rubricLevels ? loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\n      return {\n        name: criterion.name,\n        maxPoints: criterion.maxPoints,\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\n        levelDescription: selectedLevel ? selectedLevel.description : '',\n        customComments: (grading === null || grading === void 0 ? void 0 : grading.customComments) || '',\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\n      };\n    }) : [];\n    const aiGradeData = {\n      student: {\n        firstName: localGradingData.student.name.split(' ')[0] || '',\n        fullName: localGradingData.student.name,\n        id: localGradingData.student.id,\n        email: localGradingData.student.email\n      },\n      course: {\n        code: localGradingData.course.code,\n        name: localGradingData.course.name,\n        instructor: localGradingData.course.instructor,\n        term: localGradingData.course.term\n      },\n      assignment: {\n        title: localGradingData.assignment.name || (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm === void 0 ? void 0 : _loadedRubric$assignm.title),\n        description: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm2 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm2 === void 0 ? void 0 : _loadedRubric$assignm2.description) || '',\n        totalPoints: maxPoints,\n        passingThreshold: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm3 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm3 === void 0 ? void 0 : _loadedRubric$assignm3.passingThreshold) || 60,\n        dueDate: localGradingData.assignment.dueDate\n      },\n      gradeData: {\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\n        overallPercentage: percentage,\n        letterGrade: getLetterGrade(percentage),\n        passed: percentage >= ((loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm4 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm4 === void 0 ? void 0 : _loadedRubric$assignm4.passingThreshold) || 60),\n        latePenaltyApplied: scoreSummary.penaltyApplied,\n        latePolicyDescription: scoreSummary.latePolicyDescription,\n        criteria: criteriaPerformance\n      },\n      existingFeedback: {\n        general: localGradingData.feedback.general || '',\n        strengths: localGradingData.feedback.strengths || '',\n        improvements: localGradingData.feedback.improvements || ''\n      },\n      metadata: {\n        gradedDate: new Date().toISOString(),\n        rubricUsed: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm5 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm5 === void 0 ? void 0 : _loadedRubric$assignm5.title) || 'Custom Rubric',\n        totalCriteria: criteriaPerformance.length,\n        exportedForAI: true\n      }\n    };\n\n    // Export as JSON file\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n    return aiGradeData;\n  };\n  const generateAIFeedbackPrompt = () => {\n    const gradeData = exportAIFeedbackData();\n    if (!gradeData) return;\n    const studentFirstName = gradeData.student.firstName;\n    const courseName = gradeData.course.name || 'this course';\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\n\n    // Determine student level context\n    const getStudentLevel = () => {\n      const courseCode = gradeData.course.code.toUpperCase();\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\n      return 'undergraduate';\n    };\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\n\nSTUDENT GRADE DATA:\n${JSON.stringify(gradeData, null, 2)}\n\nWrite feedback in this exact structure:\n\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\n\n**Key Observations:**\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\n• Their strongest performance area (mention specific criteria that scored highest)\n• One area showing good progress or solid competency  \n• One specific area for improvement with a concrete suggestion\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\n• One forward-looking suggestion for growth in ${courseName}\n\n**Conclusion:**\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\n\n**Final Note:**\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\n\n**WRITING STYLE:**\n- Conversational and personal, like speaking directly to ${studentFirstName}\n- Specific to their actual performance levels and criteria\n- Encouraging but honest\n- Professional yet warm\n- Use their actual criterion names and performance levels from the data\n- Keep each bullet point to 1-2 sentences maximum\n\n**Context:**\n- Student: ${gradeData.student.fullName}\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\n- Assignment: ${assignmentTitle}\n- Instructor: ${gradeData.course.instructor}\n\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\n\n    // Export prompt as text file\n    const promptBlob = new Blob([prompt], {\n      type: 'text/plain'\n    });\n    const url = URL.createObjectURL(promptBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n    console.log('AI Feedback Prompt Generated:', prompt);\n    return prompt;\n  };\n  const exportForAIFeedback = () => {\n    try {\n      // First export the grade data\n      const gradeData = exportAIFeedbackData();\n      if (!gradeData) return;\n\n      // Then generate and export the prompt\n      setTimeout(() => {\n        generateAIFeedbackPrompt();\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\n      }, 500); // Small delay to ensure first download completes\n    } catch (error) {\n      console.error('Error exporting AI feedback data:', error);\n      alert('Error exporting AI feedback data. Please check the console for details.');\n    }\n  };\n\n  // FILE UPLOAD HANDLERS\n  const handleFileUpload = event => {\n    const files = Array.from(event.target.files);\n    const processFiles = files.map(file => {\n      return new Promise(resolve => {\n        const newAttachment = {\n          id: Date.now() + Math.random(),\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          file: file\n        };\n\n        // If it's an image, convert to base64 for display\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            newAttachment.base64Data = e.target.result;\n            resolve(newAttachment);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          resolve(newAttachment);\n        }\n      });\n    });\n    Promise.all(processFiles).then(newAttachments => {\n      setGradingData(prevData => ({\n        ...prevData,\n        attachments: [...prevData.attachments, ...newAttachments]\n      }));\n    });\n  };\n  const removeAttachment = attachmentId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\n    }));\n  };\n\n  // VIDEO LINK HANDLERS\n  const addVideoLink = () => {\n    if (!videoLinkInput.trim()) return;\n    const newVideoLink = {\n      id: Date.now(),\n      url: videoLinkInput,\n      title: videoTitle || 'Video Link',\n      addedDate: new Date().toLocaleDateString()\n    };\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: [...prevData.videoLinks, newVideoLink]\n    }));\n    setVideoLinkInput('');\n    setVideoTitle('');\n  };\n  const removeVideoLink = linkId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\n    }));\n  };\n\n  // RUBRIC LOADING\n  const handleRubricUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const rubricData = JSON.parse(e.target.result);\n\n        // Validate required structure\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\n          return;\n        }\n        setLoadedRubric(rubricData);\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\n\n        // Reset rubric grading when new rubric is loaded\n        setGradingData(prevData => ({\n          ...prevData,\n          rubricGrading: {}\n        }));\n      } catch (error) {\n        alert('Error loading rubric: Invalid JSON format');\n        console.error('Rubric loading error:', error);\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  // Enhanced total score calculation with grade percentage\n  const getTotalScore = () => {\n    const score = calculateTotalScore();\n    const percentage = loadedRubric ? (score.finalScore / loadedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\n    return {\n      ...score,\n      percentage\n    };\n  };\n\n  // EXPORT FUNCTIONS\n  const exportToHTML = () => {\n    const htmlContent = generateStudentReportHTML();\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportToPDF = () => {\n    const html = generateStudentReportHTML();\n    const printWindow = window.open('', '_blank');\n    printWindow.document.open();\n    printWindow.document.write(html);\n    printWindow.document.close();\n    printWindow.focus();\n    printWindow.print();\n  };\n  const exportGradingData = () => {\n    var _gradingData$student$;\n    const exportData = {\n      ...gradingData,\n      rubric: loadedRubric,\n      totalScore: getTotalScore(),\n      exportDate: new Date().toISOString()\n    };\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    const exportFileDefaultName = `grading-${((_gradingData$student$ = gradingData.student.name) === null || _gradingData$student$ === void 0 ? void 0 : _gradingData$student$.replace(/\\s+/g, '-')) || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  };\n\n  // GRADING SESSION HANDLERS\n  const handleNextStudent = () => {\n    if (!gradingSession || !gradingSession.students) return;\n    const success = nextStudentInSession();\n    if (success) {\n      // Clear current grading data and load next student's draft if available\n      const nextStudent = gradingSession.students[gradingSession.currentIndex];\n      if (!nextStudent) return;\n      const draft = loadDraft(nextStudent.id);\n      if (draft) {\n        setLocalGradingData(draft);\n      } else {\n        // Initialize fresh data for next student\n        setLocalGradingData({\n          student: nextStudent,\n          course: gradingData.course,\n          assignment: gradingData.assignment,\n          feedback: {\n            general: '',\n            strengths: '',\n            improvements: ''\n          },\n          attachments: [],\n          videoLinks: [],\n          latePolicy: {\n            level: 'none',\n            penaltyApplied: false\n          },\n          metadata: {\n            gradedBy: '',\n            gradedDate: '',\n            aiAssisted: false,\n            rubricIntegrated: false\n          },\n          rubricGrading: {}\n        });\n      }\n    }\n  };\n  const handlePreviousStudent = () => {\n    if (!gradingSession || !gradingSession.students) return;\n    const success = previousStudentInSession();\n    if (success) {\n      const prevStudent = gradingSession.students[gradingSession.currentIndex];\n      if (!prevStudent) return;\n      const draft = loadDraft(prevStudent.id);\n      if (draft) {\n        setLocalGradingData(draft);\n      } else {\n        setLocalGradingData({\n          student: prevStudent,\n          course: gradingData.course,\n          assignment: gradingData.assignment,\n          feedback: {\n            general: '',\n            strengths: '',\n            improvements: ''\n          },\n          attachments: [],\n          videoLinks: [],\n          latePolicy: {\n            level: 'none',\n            penaltyApplied: false\n          },\n          metadata: {\n            gradedBy: '',\n            gradedDate: '',\n            aiAssisted: false,\n            rubricIntegrated: false\n          },\n          rubricGrading: {}\n        });\n      }\n    }\n  };\n\n  // SAVING HANDLERS\n  const handleSaveDraft = () => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) {\n      alert('No student selected for saving draft');\n      return;\n    }\n    saveDraft(currentStudent.id, gradingData);\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\n  };\n  const handleSaveFinalGrade = () => {\n    var _gradingSession$stude;\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) {\n      alert('No student selected for final grade');\n      return;\n    }\n    const finalGradeData = {\n      ...gradingData,\n      totalScore: getTotalScore(),\n      metadata: {\n        ...gradingData.metadata,\n        gradedDate: new Date().toISOString(),\n        rubricIntegrated: !!loadedRubric\n      }\n    };\n    saveFinalGrade(currentStudent.id, finalGradeData);\n    alert(`Final grade saved for ${currentStudent.name || 'current student'}`);\n\n    // Automatically move to next student if in a grading session\n    if (gradingSession && gradingSession.students && gradingSession.currentIndex < (((_gradingSession$stude = gradingSession.students) === null || _gradingSession$stude === void 0 ? void 0 : _gradingSession$stude.length) || 0) - 1) {\n      setTimeout(() => {\n        handleNextStudent();\n      }, 1000);\n    }\n  };\n\n  // NEW: No Rubric UI Component\n  const NoRubricUI = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '60vh',\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\n      borderRadius: '1rem',\n      border: '2px dashed #f59e0b',\n      padding: '3rem',\n      margin: '2rem 0',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n      size: 80,\n      style: {\n        color: '#d97706',\n        marginBottom: '1.5rem',\n        filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1074,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '2rem',\n        fontWeight: '700',\n        color: '#92400e',\n        marginBottom: '1rem',\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\n      },\n      children: \"No Rubric Loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1083,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '1.1rem',\n        color: '#a16207',\n        marginBottom: '2rem',\n        maxWidth: '600px',\n        lineHeight: '1.6'\n      },\n      children: \"A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1093,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '1rem',\n        flexWrap: 'wrap',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab('rubric-creator'),\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1135,\n          columnNumber: 11\n        }, this), \"Create New Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          var _rubricInputRef$curre;\n          return (_rubricInputRef$curre = rubricInputRef.current) === null || _rubricInputRef$curre === void 0 ? void 0 : _rubricInputRef$curre.click();\n        },\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1165,\n          columnNumber: 11\n        }, this), \"Load Existing Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem',\n        padding: '1rem',\n        background: 'rgba(255, 255, 255, 0.7)',\n        borderRadius: '0.5rem',\n        fontSize: '0.9rem',\n        color: '#78350f',\n        maxWidth: '500px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uD83D\\uDCA1 Tip:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1179,\n        columnNumber: 9\n      }, this), \" You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: rubricInputRef,\n      type: \"file\",\n      accept: \".json\",\n      style: {\n        display: 'none'\n      },\n      onChange: handleRubricUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1061,\n    columnNumber: 5\n  }, this);\n\n  // If no rubric is loaded, show the No Rubric UI\n  if (!loadedRubric) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        maxWidth: '1200px',\n        margin: '0 auto',\n        fontFamily: 'system-ui, -apple-system, sans-serif'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem',\n          marginBottom: '2rem',\n          padding: '1rem',\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n          borderRadius: '0.75rem',\n          border: '1px solid #d1d5db'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          size: 32,\n          style: {\n            color: '#6b7280'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              fontSize: '2rem',\n              fontWeight: '700',\n              color: '#1f2937',\n              margin: 0\n            },\n            children: \"\\uD83C\\uDFAF Grading Tool\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#6b7280',\n              margin: 0,\n              fontSize: '1rem'\n            },\n            children: \"Assessment and feedback management system\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NoRubricUI, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1195,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Regular grading interface when rubric is loaded\n  const totalScore = getTotalScore();\n  const gradeStatus = currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? getGradeStatus(currentStudent.id) : 'none';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '2rem',\n      maxWidth: '1200px',\n      margin: '0 auto',\n      fontFamily: 'system-ui, -apple-system, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '1rem',\n        marginBottom: '2rem',\n        padding: '1rem',\n        background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n        borderRadius: '0.75rem',\n        border: '1px solid #d1d5db'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Settings, {\n        size: 32,\n        style: {\n          color: '#6b7280'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: '2rem',\n            fontWeight: '700',\n            color: '#1f2937',\n            margin: 0\n          },\n          children: \"\\uD83C\\uDFAF Grading Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#6b7280',\n            margin: 0,\n            fontSize: '1rem'\n          },\n          children: \"Assessment and feedback management system\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '0.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _rubricInputRef$curre2;\n            return (_rubricInputRef$curre2 = rubricInputRef.current) === null || _rubricInputRef$curre2 === void 0 ? void 0 : _rubricInputRef$curre2.click();\n          },\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            padding: '0.5rem 1rem',\n            background: '#f3f4f6',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            cursor: 'pointer',\n            color: '#374151'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1294,\n            columnNumber: 13\n          }, this), \"Load Rubric\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportGradingData,\n          disabled: !currentStudent,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            padding: '0.5rem 1rem',\n            background: currentStudent ? '#f3f4f6' : '#f9fafb',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            cursor: currentStudent ? 'pointer' : 'not-allowed',\n            color: currentStudent ? '#374151' : '#9ca3af'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FileDown, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1314,\n            columnNumber: 13\n          }, this), \"Export\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: rubricInputRef,\n      type: \"file\",\n      accept: \".json\",\n      style: {\n        display: 'none'\n      },\n      onChange: handleRubricUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1320,\n      columnNumber: 7\n    }, this), loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\n        border: '1px solid #93c5fd',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          color: '#1e40af',\n          margin: '0 0 0.5rem 0',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1346,\n          columnNumber: 13\n        }, this), \"Current Rubric: \", loadedRubric.assignmentInfo.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#1e40af',\n          margin: 0,\n          fontSize: '0.9rem'\n        },\n        children: loadedRubric.assignmentInfo.description || 'No description provided'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1349,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '2rem',\n          marginTop: '0.75rem',\n          fontSize: '0.875rem',\n          color: '#1d4ed8'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Weight:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1359,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm6 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm6 === void 0 ? void 0 : _loadedRubric$assignm6.weight) || 0, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Points:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1360,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm7 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm7 === void 0 ? void 0 : _loadedRubric$assignm7.totalPoints) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1360,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Passing:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1361,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm8 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm8 === void 0 ? void 0 : _loadedRubric$assignm8.passingThreshold) || 0, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Criteria:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$criteri = loadedRubric.criteria) === null || _loadedRubric$criteri === void 0 ? void 0 : _loadedRubric$criteri.length) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1352,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1330,\n      columnNumber: 9\n    }, this), gradingSession && gradingSession.students && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\n        border: '1px solid #6ee7b7',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#047857',\n              margin: '0 0 0.5rem 0',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1387,\n              columnNumber: 17\n            }, this), \"Batch Grading Session Active\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1378,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#047857',\n              margin: 0,\n              fontSize: '0.9rem'\n            },\n            children: [\"Student \", gradingSession.currentIndex + 1, \" of \", ((_gradingSession$stude2 = gradingSession.students) === null || _gradingSession$stude2 === void 0 ? void 0 : _gradingSession$stude2.length) || 0, \":\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\" \", ((_gradingSession$stude3 = gradingSession.students[gradingSession.currentIndex]) === null || _gradingSession$stude3 === void 0 ? void 0 : _gradingSession$stude3.name) || 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1392,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1390,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1377,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviousStudent,\n            disabled: gradingSession.currentIndex === 0,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              padding: '0.5rem 1rem',\n              background: gradingSession.currentIndex === 0 ? '#f3f4f6' : '#10b981',\n              color: gradingSession.currentIndex === 0 ? '#9ca3af' : 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\n              fontWeight: '500'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SkipBack, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1414,\n              columnNumber: 17\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1397,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudent,\n            disabled: gradingSession.currentIndex >= (((_gradingSession$stude4 = gradingSession.students) === null || _gradingSession$stude4 === void 0 ? void 0 : _gradingSession$stude4.length) || 0) - 1,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              padding: '0.5rem 1rem',\n              background: gradingSession.currentIndex >= (((_gradingSession$stude5 = gradingSession.students) === null || _gradingSession$stude5 === void 0 ? void 0 : _gradingSession$stude5.length) || 0) - 1 ? '#f3f4f6' : '#10b981',\n              color: gradingSession.currentIndex >= (((_gradingSession$stude6 = gradingSession.students) === null || _gradingSession$stude6 === void 0 ? void 0 : _gradingSession$stude6.length) || 0) - 1 ? '#9ca3af' : 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              cursor: gradingSession.currentIndex >= (((_gradingSession$stude7 = gradingSession.students) === null || _gradingSession$stude7 === void 0 ? void 0 : _gradingSession$stude7.length) || 0) - 1 ? 'not-allowed' : 'pointer',\n              fontWeight: '500'\n            },\n            children: [\"Next\", /*#__PURE__*/_jsxDEV(SkipForward, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1436,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1396,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1376,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1369,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDC64 Student Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Student Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1456,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.student.name,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter student name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1465,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1484,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.student.id,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  id: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1493,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1483,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: gradingData.student.email,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  email: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter email address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1521,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1511,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1454,\n          columnNumber: 11\n        }, this), gradeStatus !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\n            border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            color: gradeStatus === 'final' ? '#047857' : '#a16207'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1550,\n            columnNumber: 15\n          }, this), gradeStatus === 'final' && ' - This student has been fully graded', gradeStatus === 'draft' && ' - You can continue editing this draft']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1541,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1444,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCA Rubric Assessment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1562,\n        columnNumber: 9\n      }, this), loadedRubric && loadedRubric.criteria && loadedRubric.criteria.map((criterion, criterionIndex) => {\n        var _gradingData$rubricGr, _gradingData$rubricGr2, _gradingData$rubricGr4;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#ffffff',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.5rem',\n            padding: '1.5rem',\n            marginBottom: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: '1rem',\n              paddingBottom: '0.75rem',\n              borderBottom: '1px solid #e5e7eb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                fontSize: '1.1rem',\n                fontWeight: '600',\n                color: '#1f2937',\n                margin: 0\n              },\n              children: criterion.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                color: '#6b7280'\n              },\n              children: [criterion.maxPoints, \" points\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1594,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1578,\n            columnNumber: 13\n          }, this), criterion.description && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              color: '#6b7280',\n              marginBottom: '1rem',\n              lineHeight: '1.5'\n            },\n            children: renderFormattedContent(criterion.description)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1605,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Performance Level:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1617,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: ((_gradingData$rubricGr = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr === void 0 ? void 0 : _gradingData$rubricGr.selectedLevel) || '',\n              onChange: e => updateRubricGrading(criterion.id, e.target.value),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.375rem',\n                fontSize: '0.875rem',\n                background: '#ffffff'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select performance level...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1638,\n                columnNumber: 17\n              }, this), loadedRubric && loadedRubric.rubricLevels && loadedRubric.rubricLevels.map(level => {\n                const pointValue = (criterion.maxPoints * level.multiplier).toFixed(1);\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: level.level,\n                  children: [level.name, \" - \", pointValue, \" pts (\", Math.round(level.multiplier * 100), \"%)\"]\n                }, level.level, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1642,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1626,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1616,\n            columnNumber: 13\n          }, this), ((_gradingData$rubricGr2 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr2 === void 0 ? void 0 : _gradingData$rubricGr2.selectedLevel) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '1rem',\n              background: '#f9fafb',\n              border: '1px solid #e5e7eb',\n              borderRadius: '0.375rem',\n              marginBottom: '1rem'\n            },\n            children: (() => {\n              const selectedLevel = loadedRubric.rubricLevels.find(level => {\n                var _gradingData$rubricGr3;\n                return level.level === ((_gradingData$rubricGr3 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr3 === void 0 ? void 0 : _gradingData$rubricGr3.selectedLevel);\n              });\n              const pointValue = (criterion.maxPoints * selectedLevel.multiplier).toFixed(1);\n              const levelDescription = criterion.levels && criterion.levels[selectedLevel.level];\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    fontWeight: '600',\n                    color: '#1f2937',\n                    marginBottom: '0.5rem'\n                  },\n                  children: [selectedLevel.name, \": \", pointValue, \" / \", criterion.maxPoints, \" points\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1668,\n                  columnNumber: 23\n                }, this), levelDescription && levelDescription.description && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.8rem',\n                    color: '#6b7280',\n                    lineHeight: '1.4'\n                  },\n                  children: renderFormattedContent(levelDescription.description)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1677,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1667,\n                columnNumber: 21\n              }, this);\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1652,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: [\"Comments for \", criterion.name, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1693,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: ((_gradingData$rubricGr4 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr4 === void 0 ? void 0 : _gradingData$rubricGr4.customComments) || '',\n              onChange: e => {\n                var _gradingData$rubricGr5;\n                return updateRubricGrading(criterion.id, ((_gradingData$rubricGr5 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr5 === void 0 ? void 0 : _gradingData$rubricGr5.selectedLevel) || '', e.target.value);\n              },\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.375rem',\n                fontSize: '0.875rem',\n                resize: 'vertical',\n                minHeight: '80px'\n              },\n              placeholder: `Add specific feedback for ${criterion.name}...`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1702,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1692,\n            columnNumber: 13\n          }, this), criterion.feedbackLibrary && Object.keys(criterion.feedbackLibrary).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowRubricComments(prev => ({\n                ...prev,\n                [criterion.id]: !prev[criterion.id]\n              })),\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.5rem 1rem',\n                background: '#f3f4f6',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.375rem',\n                fontSize: '0.875rem',\n                cursor: 'pointer',\n                color: '#374151'\n              },\n              children: [showRubricComments[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1743,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1744,\n                columnNumber: 21\n              }, this), \"Quick Feedback Library\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1724,\n              columnNumber: 17\n            }, this), showRubricComments[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '0.75rem',\n                padding: '1rem',\n                background: '#f9fafb',\n                border: '1px solid #e5e7eb',\n                borderRadius: '0.375rem'\n              },\n              children: Object.entries(criterion.feedbackLibrary).map(([category, comments]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    fontWeight: '600',\n                    color: '#374151',\n                    marginBottom: '0.5rem',\n                    textTransform: 'capitalize'\n                  },\n                  children: [category, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1759,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    gap: '0.5rem'\n                  },\n                  children: comments.map((comment, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => addCriterionFeedback(criterion.id, comment),\n                    style: {\n                      padding: '0.25rem 0.5rem',\n                      background: '#ffffff',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.25rem',\n                      fontSize: '0.75rem',\n                      cursor: 'pointer',\n                      color: '#374151'\n                    },\n                    children: [\"+ \", comment]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1770,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1768,\n                  columnNumber: 25\n                }, this)]\n              }, category, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1758,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1750,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1723,\n            columnNumber: 15\n          }, this)]\n        }, criterion.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1567,\n          columnNumber: 11\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1561,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCB Assignment Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1799,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Assignment Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1810,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.assignment.name,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Assignment title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1819,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1809,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Due Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1838,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: gradingData.assignment.dueDate,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  dueDate: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1847,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1837,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Max Points\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1865,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: gradingData.assignment.maxPoints,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  maxPoints: parseInt(e.target.value) || 100\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              min: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1874,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1864,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1808,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1802,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1798,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\u23F0 Late Policy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1897,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            flexWrap: 'wrap'\n          },\n          children: Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.75rem 1rem',\n              background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\n              color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\n              borderRadius: '0.5rem',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '500',\n              border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\n              transition: 'all 0.2s ease'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"latePolicy\",\n              value: levelKey,\n              checked: gradingData.latePolicy.level === levelKey,\n              onChange: e => updateLatePolicy(e.target.value),\n              style: {\n                margin: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1925,\n              columnNumber: 17\n            }, this), levelData.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '0.75rem',\n                opacity: 0.8\n              },\n              children: [\"(\", Math.round(levelData.multiplier * 100), \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1934,\n              columnNumber: 17\n            }, this)]\n          }, levelKey, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1908,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1906,\n          columnNumber: 11\n        }, this), gradingData.latePolicy.level !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: '#fef3c7',\n            border: '1px solid #fde047',\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            color: '#a16207'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Late Policy Applied:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1951,\n            columnNumber: 15\n          }, this), \" \", (_levels$gradingData$l = (currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]) === null || _levels$gradingData$l === void 0 ? void 0 : _levels$gradingData$l.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1942,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1900,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1896,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCA Rubric Assessment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1959,\n        columnNumber: 9\n      }, this), loadedRubric && loadedRubric.criteria && loadedRubric.criteria.map((criterion, criterionIndex) => {\n        var _gradingData$rubricGr7;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)',\n            border: '1px solid #e2e8f0',\n            borderRadius: '0.75rem',\n            padding: '1.5rem',\n            marginBottom: '1.5rem',\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontSize: '1.1rem',\n                  fontWeight: '600',\n                  color: '#1e293b',\n                  margin: '0 0 0.5rem 0'\n                },\n                children: criterion.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1982,\n                columnNumber: 17\n              }, this), criterion.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#64748b',\n                  margin: '0 0 0.75rem 0',\n                  lineHeight: '1.5'\n                },\n                children: renderFormattedContent(criterion.description)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1991,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1981,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'right',\n                marginLeft: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  fontWeight: '600',\n                  color: '#1e293b'\n                },\n                children: [criterion.maxPoints, \" pts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2005,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.75rem',\n                  color: '#64748b'\n                },\n                children: [\"Weight: \", criterion.weight, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2012,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2001,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1975,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n              gap: '0.75rem',\n              marginBottom: '1rem'\n            },\n            children: loadedRubric && loadedRubric.rubricLevels && loadedRubric.rubricLevels.map(level => {\n              var _gradingData$rubricGr6;\n              const isSelected = ((_gradingData$rubricGr6 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr6 === void 0 ? void 0 : _gradingData$rubricGr6.selectedLevel) === level.level;\n              const levelDescription = criterion.levels[level.level];\n              const pointValue = criterion.maxPoints * level.multiplier;\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateRubricGrading(criterion.id, level.level),\n                style: {\n                  padding: '1rem',\n                  background: isSelected ? `linear-gradient(135deg, ${level.color} 0%, ${level.color}dd 100%)` : 'linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)',\n                  color: isSelected ? 'white' : '#374151',\n                  border: `2px solid ${isSelected ? level.color : '#e2e8f0'}`,\n                  borderRadius: '0.5rem',\n                  cursor: 'pointer',\n                  fontSize: '0.75rem',\n                  fontWeight: isSelected ? '600' : '500',\n                  textAlign: 'left',\n                  transition: 'all 0.2s ease',\n                  boxShadow: isSelected ? `0 4px 12px ${level.color}40` : '0 1px 3px rgba(0, 0, 0, 0.1)'\n                },\n                onMouseOver: e => {\n                  if (!isSelected) {\n                    e.target.style.borderColor = level.color;\n                    e.target.style.transform = 'translateY(-1px)';\n                  }\n                },\n                onMouseOut: e => {\n                  if (!isSelected) {\n                    e.target.style.borderColor = '#e2e8f0';\n                    e.target.style.transform = 'translateY(0)';\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '600',\n                    marginBottom: '0.25rem',\n                    fontSize: '0.875rem'\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2065,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    opacity: 0.9,\n                    marginBottom: '0.5rem'\n                  },\n                  children: [pointValue.toFixed(1), \" pts (\", Math.round(level.multiplier * 100), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2072,\n                  columnNumber: 21\n                }, this), levelDescription && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.7rem',\n                    opacity: 0.8,\n                    lineHeight: '1.3'\n                  },\n                  children: levelDescription.description ? renderFormattedContent(levelDescription.description).substring(0, 100) + '...' : level.description.substring(0, 100) + '...'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2080,\n                  columnNumber: 23\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2034,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2022,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: [\"Custom Comments for \", criterion.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2098,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: ((_gradingData$rubricGr7 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr7 === void 0 ? void 0 : _gradingData$rubricGr7.customComments) || '',\n              onChange: e => {\n                var _gradingData$rubricGr8;\n                return updateRubricGrading(criterion.id, ((_gradingData$rubricGr8 = gradingData.rubricGrading[criterion.id]) === null || _gradingData$rubricGr8 === void 0 ? void 0 : _gradingData$rubricGr8.selectedLevel) || '', e.target.value);\n              },\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                resize: 'vertical',\n                minHeight: '80px'\n              },\n              placeholder: `Specific feedback for ${criterion.name}...`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2107,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2097,\n            columnNumber: 13\n          }, this), criterion.feedbackLibrary && Object.keys(criterion.feedbackLibrary).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowRubricComments(prev => ({\n                ...prev,\n                [criterion.id]: !prev[criterion.id]\n              })),\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.5rem 1rem',\n                background: '#f1f5f9',\n                border: '1px solid #cbd5e1',\n                borderRadius: '0.375rem',\n                fontSize: '0.875rem',\n                cursor: 'pointer',\n                color: '#475569'\n              },\n              children: [showRubricComments[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2148,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2149,\n                columnNumber: 21\n              }, this), \"Feedback Library\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2129,\n              columnNumber: 17\n            }, this), showRubricComments[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '0.75rem',\n                padding: '1rem',\n                background: '#f8fafc',\n                border: '1px solid #e2e8f0',\n                borderRadius: '0.5rem'\n              },\n              children: Object.entries(criterion.feedbackLibrary).map(([category, comments]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    fontWeight: '600',\n                    color: '#374151',\n                    marginBottom: '0.5rem',\n                    textTransform: 'capitalize'\n                  },\n                  children: category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2164,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    gap: '0.5rem'\n                  },\n                  children: comments.map((comment, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => addCriterionFeedback(criterion.id, comment),\n                    style: {\n                      padding: '0.375rem 0.75rem',\n                      background: '#ffffff',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.375rem',\n                      fontSize: '0.75rem',\n                      cursor: 'pointer',\n                      color: '#374151',\n                      transition: 'all 0.2s ease'\n                    },\n                    onMouseOver: e => {\n                      e.target.style.background = '#3b82f6';\n                      e.target.style.color = 'white';\n                    },\n                    onMouseOut: e => {\n                      e.target.style.background = '#ffffff';\n                      e.target.style.color = '#374151';\n                    },\n                    children: [\"+ \", comment]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2175,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2173,\n                  columnNumber: 25\n                }, this)]\n              }, category, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2163,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2155,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2128,\n            columnNumber: 15\n          }, this)]\n        }, criterion.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1964,\n          columnNumber: 11\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1958,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83C\\uDFAF Score Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: loadedRubric && totalScore.finalScore >= loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints ? 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)' : 'linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)',\n          border: `1px solid ${loadedRubric && totalScore.finalScore >= loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints ? '#86efac' : '#fca5a5'}`,\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280',\n                marginBottom: '0.25rem'\n              },\n              children: \"Raw Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#1f2937'\n              },\n              children: [totalScore.rawScore.toFixed(1), \"/\", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2230,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280',\n                marginBottom: '0.25rem'\n              },\n              children: \"Final Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#1f2937'\n              },\n              children: [totalScore.finalScore.toFixed(1), \"/\", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280',\n                marginBottom: '0.25rem'\n              },\n              children: \"Percentage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#1f2937'\n              },\n              children: [totalScore.percentage, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280',\n                marginBottom: '0.25rem'\n              },\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1rem',\n                fontWeight: '600',\n                color: loadedRubric && totalScore.finalScore >= loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints ? '#047857' : '#dc2626'\n              },\n              children: loadedRubric && totalScore.finalScore >= loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints ? '✅ PASS' : '❌ FAIL'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2225,\n          columnNumber: 11\n        }, this), totalScore.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: 'rgba(255, 255, 255, 0.7)',\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            color: '#a16207'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Late Penalty Applied:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2279,\n            columnNumber: 15\n          }, this), \" \", totalScore.latePolicyDescription]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCE4 Export & Save Actions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.75rem',\n            flexWrap: 'wrap',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportToHTML,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: '#16a34a',\n              color: 'white',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FileDown, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2317,\n              columnNumber: 15\n            }, this), \"Export HTML\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: exportToPDF,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              backgroundColor: '#dc2626',\n              color: '#ffffff',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2337,\n              columnNumber: 15\n            }, this), \"Export PDF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportForAIFeedback,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              backgroundColor: '#7c3aed',\n              color: '#ffffff',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Bot, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2356,\n              columnNumber: 15\n            }, this), \"AI Feedback\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2341,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.875rem',\n            color: '#6b7280',\n            margin: 0,\n            fontStyle: 'italic'\n          },\n          children: loadedRubric ? 'Comprehensive rubric-based assessment' : 'Streamlined grading with flexible assessment options'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2361,\n          columnNumber: 11\n        }, this), currentStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1.5rem',\n            paddingTop: '1.5rem',\n            borderTop: '1px solid #e5e7eb'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              flexWrap: 'wrap'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveDraft,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem 1.5rem',\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                boxShadow: '0 2px 8px rgba(245, 158, 11, 0.4)',\n                transition: 'all 0.2s ease'\n              },\n              onMouseOver: e => {\n                e.target.style.transform = 'translateY(-2px)';\n                e.target.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.5)';\n              },\n              onMouseOut: e => {\n                e.target.style.transform = 'translateY(0)';\n                e.target.style.boxShadow = '0 2px 8px rgba(245, 158, 11, 0.4)';\n              },\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2407,\n                columnNumber: 19\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveFinalGrade,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem 1.5rem',\n                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n                transition: 'all 0.2s ease'\n              },\n              onMouseOver: e => {\n                e.target.style.transform = 'translateY(-2px)';\n                e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\n              },\n              onMouseOut: e => {\n                e.target.style.transform = 'translateY(0)';\n                e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\n              },\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2437,\n                columnNumber: 19\n              }, this), \"Finalize & Grade Next Student\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2411,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2380,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem',\n              padding: '0.75rem',\n              background: 'rgba(255, 255, 255, 0.6)',\n              borderRadius: '0.375rem',\n              fontSize: '0.75rem',\n              color: '#065f46'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Draft:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2450,\n              columnNumber: 17\n            }, this), \" Save progress, can edit later \\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Finalize:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2450,\n              columnNumber: 73\n            }, this), \" Complete grading, ready for student/LMS\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2442,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2375,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCDD General Feedback\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2459,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr',\n            gap: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Overall Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2470,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: gradingData.feedback.general,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                feedback: {\n                  ...prevData.feedback,\n                  general: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                resize: 'none',\n                minHeight: '100px'\n              },\n              rows: \"4\",\n              placeholder: \"General comments about the assignment...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2479,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2469,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Strengths\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2501,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: gradingData.feedback.strengths,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  feedback: {\n                    ...prevData.feedback,\n                    strengths: e.target.value\n                  }\n                })),\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '100px'\n                },\n                rows: \"4\",\n                placeholder: \"What the student did well...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2510,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Areas for Improvement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2531,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: gradingData.feedback.improvements,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  feedback: {\n                    ...prevData.feedback,\n                    improvements: e.target.value\n                  }\n                })),\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '100px'\n                },\n                rows: \"4\",\n                placeholder: \"Suggestions for improvement...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2540,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2530,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2499,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2468,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2462,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2458,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCE File Attachments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2566,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '2px dashed #d1d5db',\n          borderRadius: '0.5rem',\n          padding: '2rem',\n          textAlign: 'center',\n          background: 'linear-gradient(135deg, #fafaff 0%, #f9fafb 100%)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          multiple: true,\n          onChange: handleFileUpload,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            padding: '0.75rem 1.5rem',\n            background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n            color: 'white',\n            border: 'none',\n            borderRadius: '0.5rem',\n            cursor: 'pointer',\n            fontSize: '0.875rem',\n            fontWeight: '600',\n            margin: '0 auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2600,\n            columnNumber: 13\n          }, this), \"Add Files\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2583,\n          columnNumber: 11\n        }, this), gradingData.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              marginBottom: '0.5rem',\n              color: '#374151'\n            },\n            children: \"Attached Files:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2606,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: '0.5rem',\n              justifyContent: 'center'\n            },\n            children: gradingData.attachments.map(attachment => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.5rem 1rem',\n                background: '#f3f4f6',\n                borderRadius: '0.375rem',\n                fontSize: '0.75rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2623,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: attachment.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2624,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeAttachment(attachment.id),\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  color: '#ef4444',\n                  cursor: 'pointer',\n                  padding: '0.125rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 12\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2635,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2625,\n                columnNumber: 21\n              }, this)]\n            }, attachment.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2611,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2609,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2605,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2569,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2565,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83C\\uDFA5 Video Links\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2647,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            value: videoLinkInput,\n            onChange: e => setVideoLinkInput(e.target.value),\n            placeholder: \"Enter video URL (YouTube, Vimeo, etc.)\",\n            style: {\n              flex: 1,\n              padding: '0.75rem',\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2657,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: videoTitle,\n            onChange: e => setVideoTitle(e.target.value),\n            placeholder: \"Video title (optional)\",\n            style: {\n              width: '200px',\n              padding: '0.75rem',\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2670,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addVideoLink,\n            disabled: !videoLinkInput.trim(),\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.75rem 1rem',\n              background: videoLinkInput.trim() ? '#10b981' : '#d1d5db',\n              color: 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem',\n              fontWeight: '600'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Video, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2700,\n              columnNumber: 15\n            }, this), \"Add\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2683,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2656,\n          columnNumber: 11\n        }, this), gradingData.videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              marginBottom: '0.5rem',\n              color: '#374151'\n            },\n            children: \"Video Links:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2707,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '0.5rem'\n            },\n            children: gradingData.videoLinks.map(link => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem',\n                background: '#ffffff',\n                border: '1px solid #e5e7eb',\n                borderRadius: '0.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 16,\n                style: {\n                  color: '#6b7280'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2724,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '500',\n                    fontSize: '0.875rem',\n                    color: '#374151'\n                  },\n                  children: link.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2726,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: link.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  style: {\n                    fontSize: '0.75rem',\n                    color: '#3b82f6',\n                    textDecoration: 'none'\n                  },\n                  children: link.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2729,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2725,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '0.75rem',\n                  color: '#6b7280'\n                },\n                children: link.addedDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2742,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeVideoLink(link.id),\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  color: '#ef4444',\n                  cursor: 'pointer',\n                  padding: '0.25rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2755,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2745,\n                columnNumber: 21\n              }, this)]\n            }, link.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2712,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2710,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2706,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2650,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2646,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1241,\n    columnNumber: 5\n  }, this);\n};\n_s(GradingTemplate, \"KZ2mZ6XyDMPRvCRPXl/rzr2uqVM=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Upload","FileText","Video","Plus","X","Save","FileDown","Bot","ChevronDown","ChevronUp","ArrowLeft","ArrowRight","Users","PlayCircle","CheckCircle","Clock","SkipForward","SkipBack","Pause","RotateCcw","AlertTriangle","BookOpen","Settings","useAssessment","DEFAULT_LATE_POLICY","jsxDEV","_jsxDEV","GradingTemplate","_s","_loadedRubric$assignm6","_loadedRubric$assignm7","_loadedRubric$assignm8","_loadedRubric$criteri","_gradingSession$stude2","_gradingSession$stude3","_gradingSession$stude4","_gradingSession$stude5","_gradingSession$stude6","_gradingSession$stude7","_levels$gradingData$l","sharedRubric","sharedCourseDetails","setSharedCourseDetails","gradingData","sharedGradingData","setGradingData","setSharedGradingData","updateStudentInfo","updateCourseInfo","updateAssignmentInfo","clearGradingFormData","classList","setClassList","setCurrentStudent","gradingSession","setGradingSession","nextStudentInSession","previousStudentInSession","updateGradingSession","initializeGradingSession","setActiveTab","currentStudent","saveDraft","loadDraft","saveFinalGrade","loadFinalGrade","finalGrades","getGradeStatus","currentLatePolicy","customLatePolicies","renderFormattedContent","htmlContent","textContent","replace","trim","localGradingData","setLocalGradingData","id","draft","student","name","email","course","code","instructor","term","assignment","dueDate","maxPoints","feedback","general","strengths","improvements","attachments","videoLinks","latePolicy","level","penaltyApplied","metadata","gradedBy","gradedDate","aiAssisted","rubricIntegrated","rubricGrading","loadedRubric","setLoadedRubric","showRubricComments","setShowRubricComments","showHeaderGuide","setShowHeaderGuide","fileInputRef","moduleInputRef","rubricInputRef","videoLinkInput","setVideoLinkInput","videoTitle","setVideoTitle","showComments","setShowComments","console","log","needsSync","prev","_sharedRubric$assignm","assignmentInfo","title","timeoutId","setTimeout","clearTimeout","status","saved","calculateTotalScore","criteria","rawScore","finalScore","latePolicyDescription","totalRawScore","maxPossiblePoints","forEach","criterion","grading","selectedLevel","rubricLevels","find","multiplier","activeLatePolicy","latePolicyLevel","levels","none","description","scoreSummary","setScoreSummary","updateLatePolicy","prevData","policyId","updateRubricGrading","criterionId","comments","existingGrading","existingComments","customComments","newRubricState","addCriterionFeedback","comment","currentGrading","currentComments","newComments","getEffectiveCourseData","courseMetadata","courseCode","courseName","professors","pullCourseDataFromClassList","alert","getLetterGrade","percentage","generateStudentReportHTML","effectiveCourse","totalScore","getTotalScore","attachmentsHTML","map","attachment","index","isImage","type","startsWith","base64Data","size","toFixed","join","videoLinksHTML","link","url","addedDate","rubricHTML","_criterion$levels$sel","points","color","Math","round","parseFloat","totalPoints","passingThreshold","Date","toLocaleDateString","toLocaleTimeString","JSON","stringify","exportAIFeedbackData","_localGradingData$stu","_loadedRubric$assignm","_loadedRubric$assignm2","_loadedRubric$assignm3","_loadedRubric$assignm4","_loadedRubric$assignm5","criteriaPerformance","earnedPoints","levelDescription","aiGradeData","firstName","split","fullName","gradeData","overallScore","overallPercentage","letterGrade","passed","latePenaltyApplied","existingFeedback","toISOString","rubricUsed","totalCriteria","length","exportedForAI","dataStr","dataBlob","Blob","URL","createObjectURL","document","createElement","href","download","slice","click","revokeObjectURL","generateAIFeedbackPrompt","studentFirstName","assignmentTitle","getStudentLevel","toUpperCase","includes","prompt","promptBlob","exportForAIFeedback","error","handleFileUpload","event","files","Array","from","target","processFiles","file","Promise","resolve","newAttachment","now","random","reader","FileReader","onload","e","result","readAsDataURL","all","then","newAttachments","removeAttachment","attachmentId","filter","att","addVideoLink","newVideoLink","removeVideoLink","linkId","handleRubricUpload","rubricData","parse","readAsText","score","exportToHTML","htmlBlob","exportToPDF","html","printWindow","window","open","write","close","focus","print","exportGradingData","_gradingData$student$","exportData","rubric","exportDate","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","setAttribute","handleNextStudent","students","success","nextStudent","currentIndex","handlePreviousStudent","prevStudent","handleSaveDraft","handleSaveFinalGrade","_gradingSession$stude","finalGradeData","NoRubricUI","style","display","flexDirection","alignItems","justifyContent","minHeight","background","borderRadius","border","padding","margin","textAlign","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","fontWeight","textShadow","maxWidth","lineHeight","gap","flexWrap","onClick","cursor","boxShadow","transition","onMouseOver","transform","onMouseOut","_rubricInputRef$curre","current","marginTop","ref","accept","onChange","fontFamily","gradeStatus","flex","_rubricInputRef$curre2","disabled","weight","gridTemplateColumns","value","width","placeholder","criterionIndex","_gradingData$rubricGr","_gradingData$rubricGr2","_gradingData$rubricGr4","paddingBottom","borderBottom","pointValue","_gradingData$rubricGr3","_gradingData$rubricGr5","resize","feedbackLibrary","Object","keys","entries","category","textTransform","parseInt","min","levelKey","levelData","checked","opacity","_gradingData$rubricGr7","marginLeft","_gradingData$rubricGr6","isSelected","borderColor","substring","_gradingData$rubricGr8","backgroundColor","fontStyle","paddingTop","borderTop","rows","multiple","_fileInputRef$current","rel","textDecoration","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/GradingTemplate.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot,\r\n  ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle,\r\n  CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw, AlertTriangle,\r\n  BookOpen, Settings\r\n} from 'lucide-react';\r\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\r\n\r\n// NO SAMPLE RUBRIC - START WITH EMPTY STATE\r\n// This forces users to create or load a rubric before grading\r\n\r\nconst GradingTemplate = () => {\r\n  // Get shared context - ENHANCED with new functions\r\n  const {\r\n    sharedRubric,\r\n    sharedCourseDetails,\r\n    setSharedCourseDetails,\r\n    gradingData: sharedGradingData,\r\n    setGradingData: setSharedGradingData,\r\n    updateStudentInfo,\r\n    updateCourseInfo,\r\n    updateAssignmentInfo,\r\n    clearGradingFormData,\r\n    classList,\r\n    setClassList,\r\n    setCurrentStudent,\r\n    gradingSession,\r\n    setGradingSession,\r\n    nextStudentInSession,\r\n    previousStudentInSession,\r\n    updateGradingSession,\r\n    initializeGradingSession,\r\n    setActiveTab,\r\n    currentStudent,\r\n    saveDraft,\r\n    loadDraft,\r\n    // NEW: Add the draft/final grade functions\r\n    saveFinalGrade,\r\n    loadFinalGrade,\r\n    finalGrades,\r\n    getGradeStatus,\r\n    currentLatePolicy,\r\n    customLatePolicies\r\n  } = useAssessment();\r\n\r\n  // Helper function to convert HTML content to readable text format\r\n  const renderFormattedContent = (htmlContent) => {\r\n    if (!htmlContent) return '';\r\n\r\n    // Convert basic HTML to readable text format\r\n    let textContent = htmlContent\r\n      .replace(/<br\\s*\\/?>/gi, '\\n')\r\n      .replace(/<\\/p>/gi, '\\n')\r\n      .replace(/<p[^>]*>/gi, '')\r\n      .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\r\n      .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\r\n      .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\r\n      .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\r\n      .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\r\n      .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\r\n      .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\r\n      .replace(/<\\/ul>/gi, '\\n')\r\n      .replace(/<ul[^>]*>/gi, '')\r\n      .replace(/<\\/ol>/gi, '\\n')\r\n      .replace(/<ol[^>]*>/gi, '')\r\n      .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\r\n      .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\r\n      .trim();\r\n\r\n    return textContent;\r\n  };\r\n\r\n  // State for all grading data - initialize from shared context or defaults\r\n  const [localGradingData, setLocalGradingData] = useState(() => {\r\n    // 1) Try loading a saved draft first\r\n    if (currentStudent?.id) {\r\n      const draft = loadDraft(currentStudent.id);\r\n      if (draft) {\r\n        return draft;\r\n      }\r\n    }\r\n    // 2) If rubric was just transferred, use that\r\n    if (sharedGradingData) {\r\n      return {\r\n        ...sharedGradingData,\r\n        student: currentStudent || sharedGradingData.student || { name: '', id: '', email: '' }\r\n      };\r\n    }\r\n    // 3) Otherwise, start fresh for this student\r\n    return {\r\n      student: currentStudent || { name: '', id: '', email: '' },\r\n      course: sharedCourseDetails?.course || { code: '', name: '', instructor: '', term: '' },\r\n      assignment: sharedCourseDetails?.assignment || { name: '', dueDate: '', maxPoints: 100 },\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false },\r\n      metadata: {\r\n        gradedBy: '',\r\n        gradedDate: '',\r\n        aiAssisted: false,\r\n        rubricIntegrated: false\r\n      },\r\n      rubricGrading: {}\r\n    };\r\n  });\r\n\r\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\r\n  const gradingData = localGradingData;\r\n  const setGradingData = setLocalGradingData;\r\n\r\n  // Rubric-specific state - MODIFIED: Default to null instead of sampleRubric\r\n  const [loadedRubric, setLoadedRubric] = useState(() => {\r\n    return sharedRubric || null; // NO DEFAULT SAMPLE RUBRIC\r\n  });\r\n  const [showRubricComments, setShowRubricComments] = useState({});\r\n  const [showHeaderGuide, setShowHeaderGuide] = useState(false);\r\n\r\n  const fileInputRef = useRef(null);\r\n  const moduleInputRef = useRef(null);\r\n  const rubricInputRef = useRef(null);\r\n\r\n  // Video link management\r\n  const [videoLinkInput, setVideoLinkInput] = useState('');\r\n  const [videoTitle, setVideoTitle] = useState('');\r\n\r\n  // Additional state for comments display\r\n  const [showComments, setShowComments] = useState(false);\r\n\r\n  // Enhanced shared data synchronization\r\n  useEffect(() => {\r\n    if (!sharedGradingData) return;\r\n\r\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\r\n\r\n    // Only update course info if it's not empty and different from current\r\n    if (sharedGradingData.course &&\r\n      (sharedGradingData.course.code || sharedGradingData.course.name ||\r\n        sharedGradingData.course.instructor || sharedGradingData.course.term)) {\r\n\r\n      const needsSync =\r\n        sharedGradingData.course.code !== localGradingData.course.code ||\r\n        sharedGradingData.course.name !== localGradingData.course.name ||\r\n        sharedGradingData.course.instructor !== localGradingData.course.instructor ||\r\n        sharedGradingData.course.term !== localGradingData.course.term;\r\n\r\n      if (needsSync) {\r\n        console.log('✅ Syncing course data from shared context to local state');\r\n        setLocalGradingData(prev => ({\r\n          ...prev,\r\n          course: {\r\n            code: sharedGradingData.course.code || prev.course.code,\r\n            name: sharedGradingData.course.name || prev.course.name,\r\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\r\n            term: sharedGradingData.course.term || prev.course.term\r\n          }\r\n        }));\r\n      }\r\n    }\r\n  }, [sharedGradingData]);\r\n\r\n  // Sync with sharedRubric\r\n  useEffect(() => {\r\n    if (sharedRubric && sharedRubric !== loadedRubric) {\r\n      console.log('✅ Syncing rubric from shared context:', sharedRubric.assignmentInfo?.title || 'Untitled');\r\n      setLoadedRubric(sharedRubric);\r\n    }\r\n  }, [sharedRubric, loadedRubric]);\r\n\r\n  // Auto-save to shared context whenever gradingData changes (with debounce)\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      setSharedGradingData(gradingData);\r\n      setSharedCourseDetails({\r\n        student: gradingData.student,\r\n        course: gradingData.course,\r\n        assignment: gradingData.assignment\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\r\n\r\n  // When we get new sharedCourseDetails, merge them in\r\n  useEffect(() => {\r\n    if (!sharedCourseDetails) return;\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      student: sharedCourseDetails.student || prev.student,\r\n      course: sharedCourseDetails.course || prev.course,\r\n      assignment: sharedCourseDetails.assignment || prev.assignment\r\n    }));\r\n  }, [sharedCourseDetails]);\r\n\r\n  // When student changes, load any saved draft/final but keep course+assignment\r\n  useEffect(() => {\r\n    if (!currentStudent?.id) return;\r\n\r\n    const status = getGradeStatus(currentStudent.id);\r\n    let saved = null;\r\n    if (status === 'final' && loadFinalGrade) {\r\n      saved = loadFinalGrade(currentStudent.id);\r\n    } else if (status === 'draft') {\r\n      saved = loadDraft(currentStudent.id);\r\n    }\r\n\r\n    if (saved) {\r\n      setLocalGradingData(prev => ({\r\n        ...saved, // Use saved data\r\n        course: prev.course, // Keep current course info\r\n        assignment: prev.assignment // Keep current assignment info\r\n      }));\r\n    } else {\r\n      // Fresh slate for this student, but keep course/assignment\r\n      setLocalGradingData(prev => ({\r\n        ...prev,\r\n        student: currentStudent,\r\n        feedback: { general: '', strengths: '', improvements: '' },\r\n        attachments: [],\r\n        videoLinks: [],\r\n        latePolicy: { level: 'none', penaltyApplied: false },\r\n        rubricGrading: {}\r\n      }));\r\n    }\r\n  }, [currentStudent?.id, getGradeStatus, loadFinalGrade, loadDraft]);\r\n\r\n  // Enhanced calculation function\r\n  const calculateTotalScore = () => {\r\n    if (!loadedRubric || !loadedRubric.criteria) return { rawScore: 0, finalScore: 0, penaltyApplied: false, latePolicyDescription: '' };\r\n\r\n    let totalRawScore = 0;\r\n    let maxPossiblePoints = 0;\r\n\r\n    // Calculate raw score from rubric grading\r\n    loadedRubric.criteria.forEach(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      if (grading && grading.selectedLevel && loadedRubric.rubricLevels) {\r\n        const selectedLevel = loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\r\n        if (selectedLevel) {\r\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\r\n        }\r\n      }\r\n      maxPossiblePoints += criterion.maxPoints;\r\n    });\r\n\r\n    // Apply late policy penalty\r\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\r\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\r\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\r\n\r\n    return {\r\n      rawScore: totalRawScore,\r\n      finalScore: finalScore,\r\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\r\n      latePolicyDescription: latePolicyLevel.description\r\n    };\r\n  };\r\n\r\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\r\n\r\n  useEffect(() => {\r\n    setScoreSummary(calculateTotalScore());\r\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, loadedRubric]);\r\n\r\n  const updateLatePolicy = (level) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      latePolicy: {\r\n        level: level,\r\n        penaltyApplied: level !== 'none',\r\n        policyId: currentLatePolicy?.id || DEFAULT_LATE_POLICY.id\r\n      }\r\n    }));\r\n  };\r\n\r\n  const updateRubricGrading = (criterionId, level, comments = null) => {\r\n    if (!loadedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const existingGrading = prevData.rubricGrading[criterionId];\r\n      const existingComments = existingGrading?.customComments || '';\r\n      const newRubricState = {\r\n        ...prevData.rubricGrading,\r\n        [criterionId]: {\r\n          criterionId,\r\n          selectedLevel: level,\r\n          customComments: comments !== null ? comments : existingComments\r\n        }\r\n      };\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: newRubricState\r\n      };\r\n    });\r\n  };\r\n\r\n  const addCriterionFeedback = (criterionId, comment) => {\r\n    if (!loadedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const currentGrading = prevData.rubricGrading[criterionId];\r\n      const currentComments = currentGrading?.customComments || '';\r\n      const newComments = currentComments ?\r\n        `${currentComments}\\n${comment}` : comment;\r\n\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: {\r\n          ...prevData.rubricGrading,\r\n          [criterionId]: {\r\n            ...currentGrading,\r\n            customComments: newComments\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  // HELPER FUNCTIONS FOR COURSE INFO\r\n  const getEffectiveCourseData = () => {\r\n    const course = gradingData?.course || {};\r\n    const metadata = classList?.courseMetadata;\r\n\r\n    return {\r\n      code: course.code || metadata?.courseCode || '',\r\n      name: course.name || metadata?.courseName || '',\r\n      instructor: course.instructor || metadata?.instructor || metadata?.professors || '',\r\n      term: course.term || metadata?.term || ''\r\n    };\r\n  };\r\n\r\n  const pullCourseDataFromClassList = () => {\r\n    if (!classList?.courseMetadata) {\r\n      alert('No class list course metadata available to pull from.');\r\n      return;\r\n    }\r\n\r\n    const metadata = classList.courseMetadata;\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      course: {\r\n        code: metadata.courseCode || prevData.course.code,\r\n        name: metadata.courseName || prevData.course.name,\r\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\r\n        term: metadata.term || prevData.course.term\r\n      }\r\n    }));\r\n\r\n    alert('Course information has been pulled from the class list!');\r\n  };\r\n\r\n  // LETTER GRADE CALCULATION\r\n  const getLetterGrade = (percentage) => {\r\n    if (percentage >= 97) return 'A+';\r\n    if (percentage >= 93) return 'A';\r\n    if (percentage >= 90) return 'A-';\r\n    if (percentage >= 87) return 'B+';\r\n    if (percentage >= 83) return 'B';\r\n    if (percentage >= 80) return 'B-';\r\n    if (percentage >= 77) return 'C+';\r\n    if (percentage >= 73) return 'C';\r\n    if (percentage >= 70) return 'C-';\r\n    if (percentage >= 67) return 'D+';\r\n    if (percentage >= 63) return 'D';\r\n    if (percentage >= 60) return 'D-';\r\n    return 'F';\r\n  };\r\n\r\n  // HTML REPORT GENERATION\r\n  const generateStudentReportHTML = () => {\r\n    const effectiveCourse = getEffectiveCourseData();\r\n    const totalScore = getTotalScore();\r\n\r\n    // Generate attachments HTML with file type detection\r\n    const attachmentsHTML = gradingData.attachments\r\n      .map((attachment, index) => {\r\n        const isImage = attachment.type && attachment.type.startsWith('image/');\r\n\r\n        if (isImage && attachment.base64Data) {\r\n          return `<div class=\"attachment-item image-attachment\">\r\n            <img src=\"${attachment.base64Data}\" \r\n                 alt=\"${attachment.name}\" \r\n                 class=\"clickable-image\" \r\n                 data-index=\"${index}\"\r\n                 style=\"max-width: 150px; max-height: 150px; border-radius: 8px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s ease;\"\r\n                 onmouseover=\"this.style.transform='scale(1.05)'\" \r\n                 onmouseout=\"this.style.transform='scale(1)'\" />\r\n            <div class=\"attachment-name\">${attachment.name}</div>\r\n          </div>`;\r\n        } else {\r\n          return `<div class=\"attachment-item file-attachment\">\r\n            <div class=\"file-icon\">📄</div>\r\n            <div class=\"attachment-name\">${attachment.name}</div>\r\n            <div class=\"file-size\">${(attachment.size / 1024).toFixed(1)} KB</div>\r\n          </div>`;\r\n        }\r\n      })\r\n      .join('');\r\n\r\n    // Generate video links HTML\r\n    const videoLinksHTML = gradingData.videoLinks\r\n      .map(link => `<div class=\"video-link\">\r\n        <div class=\"video-info\">\r\n          <strong>${link.title}</strong><br>\r\n          <a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\">${link.url}</a>\r\n          <div class=\"video-date\">Added: ${link.addedDate}</div>\r\n        </div>\r\n      </div>`)\r\n      .join('');\r\n\r\n    // Generate rubric HTML if available\r\n    let rubricHTML = '';\r\n    if (loadedRubric && loadedRubric.criteria) {\r\n      rubricHTML = `\r\n        <div class=\"rubric-section\">\r\n          <h2>📊 Detailed Rubric Assessment</h2>\r\n          ${loadedRubric.criteria.map(criterion => {\r\n        const grading = gradingData.rubricGrading[criterion.id];\r\n        const selectedLevel = (grading?.selectedLevel && loadedRubric.rubricLevels) ?\r\n          loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\r\n        const points = selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : '0.0';\r\n\r\n        return `\r\n              <div class=\"criterion\">\r\n                <div class=\"criterion-header\">\r\n                  <h3>${criterion.name}</h3>\r\n                  <div class=\"criterion-points\">${points}/${criterion.maxPoints} pts</div>\r\n                </div>\r\n                <div class=\"criterion-description\">${renderFormattedContent(criterion.description)}</div>\r\n                ${selectedLevel ? `\r\n                  <div class=\"selected-level\" style=\"background-color: ${selectedLevel.color}20; border-left: 4px solid ${selectedLevel.color};\">\r\n                    <strong>${selectedLevel.name}</strong> (${Math.round(selectedLevel.multiplier * 100)}%)\r\n                    ${criterion.levels && criterion.levels[selectedLevel.level]?.description ?\r\n              `<div class=\"level-description\">${renderFormattedContent(criterion.levels[selectedLevel.level].description)}</div>` : ''\r\n            }\r\n                  </div>\r\n                ` : '<div class=\"no-level\">Not assessed</div>'}\r\n                ${grading?.customComments ? `\r\n                  <div class=\"custom-comments\">\r\n                    <strong>Instructor Comments:</strong>\r\n                    <div>${grading.customComments}</div>\r\n                  </div>\r\n                ` : ''}\r\n              </div>\r\n            `;\r\n      }).join('')}\r\n        </div>`;\r\n    }\r\n\r\n    const htmlContent = `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Grade Report - ${gradingData.student.name}</title>\r\n    <style>\r\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px; background: #f9f9f9; }\r\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }\r\n        .header h1 { margin: 0; font-size: 2.2em; font-weight: 300; }\r\n        .header .course-info { margin-top: 15px; font-size: 1.1em; opacity: 0.9; }\r\n        .grade-summary { background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }\r\n        .grade-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 20px 0; }\r\n        .grade-item { text-align: center; padding: 20px; background: #f8f9ff; border-radius: 8px; border: 2px solid #e1e5f2; }\r\n        .grade-value { font-size: 2em; font-weight: bold; color: #5a67d8; margin-bottom: 5px; }\r\n        .grade-label { font-size: 0.9em; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }\r\n        .section { background: white; padding: 25px; margin-bottom: 25px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }\r\n        .section h2 { color: #4a5568; border-bottom: 3px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 20px; }\r\n        .feedback-section { background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); padding: 20px; border-radius: 8px; margin: 15px 0; }\r\n        .rubric-section .criterion { margin-bottom: 25px; padding: 20px; background: #fdfdfd; border-radius: 8px; border: 1px solid #e2e8f0; }\r\n        .criterion-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\r\n        .criterion-header h3 { margin: 0; color: #2d3748; }\r\n        .criterion-points { font-weight: bold; color: #5a67d8; font-size: 1.1em; }\r\n        .selected-level { padding: 15px; margin: 15px 0; border-radius: 6px; }\r\n        .custom-comments { background: #f7fafc; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #4299e1; }\r\n        .attachments { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; }\r\n        .attachment-item { text-align: center; padding: 15px; background: #f8f9ff; border-radius: 8px; border: 1px solid #e1e5f2; }\r\n        .attachment-name { margin-top: 10px; font-size: 0.9em; font-weight: 500; }\r\n        .file-icon { font-size: 2.5em; margin-bottom: 10px; }\r\n        .file-size { font-size: 0.8em; color: #666; margin-top: 5px; }\r\n        .video-link { padding: 15px; background: #f1f5f9; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid #3182ce; }\r\n        .video-date { font-size: 0.8em; color: #666; margin-top: 5px; }\r\n        .pass-status { padding: 10px 20px; border-radius: 20px; font-weight: bold; display: inline-block; margin-top: 10px; }\r\n        .pass { background: #c6f6d5; color: #22543d; }\r\n        .fail { background: #fed7d7; color: #742a2a; }\r\n        .late-penalty { background: #fef5e7; color: #744210; padding: 15px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #ed8936; }\r\n        .image-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); }\r\n        .image-modal.show { display: block; }\r\n        .modal-content { margin: auto; display: block; max-width: 90%; max-height: 90%; margin-top: 5%; }\r\n        .close-modal { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer; }\r\n        .modal-caption { margin: auto; display: block; width: 80%; max-width: 700px; text-align: center; color: #ccc; padding: 10px 0; }\r\n        @media print { .image-modal { display: none !important; } body { background: white; } .section, .grade-summary { box-shadow: none; border: 1px solid #ddd; } }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1>📋 Grade Report</h1>\r\n        <div class=\"course-info\">\r\n            <strong>${gradingData.student.name}</strong> (${gradingData.student.id})<br>\r\n            ${effectiveCourse.code} - ${effectiveCourse.name}<br>\r\n            ${effectiveCourse.instructor} • ${effectiveCourse.term}\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"grade-summary\">\r\n        <h2>🎯 Grade Summary</h2>\r\n        <div class=\"grade-grid\">\r\n            <div class=\"grade-item\">\r\n                <div class=\"grade-value\">${totalScore.finalScore.toFixed(1)}</div>\r\n                <div class=\"grade-label\">Final Score</div>\r\n            </div>\r\n            <div class=\"grade-item\">\r\n                <div class=\"grade-value\">${totalScore.percentage}%</div>\r\n                <div class=\"grade-label\">Percentage</div>\r\n            </div>\r\n            <div class=\"grade-item\">\r\n                <div class=\"grade-value\">${getLetterGrade(parseFloat(totalScore.percentage))}</div>\r\n                <div class=\"grade-label\">Letter Grade</div>\r\n            </div>\r\n            <div class=\"grade-item\">\r\n                <div class=\"grade-value\">${loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}</div>\r\n                <div class=\"grade-label\">Total Points</div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"pass-status ${totalScore.finalScore >= (loadedRubric ? loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints * 0.6) ? 'pass' : 'fail'}\">\r\n            ${totalScore.finalScore >= (loadedRubric ? loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints * 0.6) ? '✅ PASS' : '❌ FAIL'}\r\n        </div>\r\n\r\n        ${totalScore.penaltyApplied ? `\r\n            <div class=\"late-penalty\">\r\n                <strong>⏰ Late Penalty Applied:</strong> ${totalScore.latePolicyDescription}\r\n            </div>\r\n        ` : ''}\r\n    </div>\r\n\r\n    ${gradingData.feedback.general || gradingData.feedback.strengths || gradingData.feedback.improvements ? `\r\n        <div class=\"section\">\r\n            <h2>💬 Instructor Feedback</h2>\r\n            ${gradingData.feedback.general ? `\r\n                <div class=\"feedback-section\">\r\n                    <h3>Overall Comments</h3>\r\n                    <p>${gradingData.feedback.general}</p>\r\n                </div>\r\n            ` : ''}\r\n            ${gradingData.feedback.strengths ? `\r\n                <div class=\"feedback-section\">\r\n                    <h3>✅ Strengths</h3>\r\n                    <p>${gradingData.feedback.strengths}</p>\r\n                </div>\r\n            ` : ''}\r\n            ${gradingData.feedback.improvements ? `\r\n                <div class=\"feedback-section\">\r\n                    <h3>📈 Areas for Improvement</h3>\r\n                    <p>${gradingData.feedback.improvements}</p>\r\n                </div>\r\n            ` : ''}\r\n        </div>\r\n    ` : ''}\r\n\r\n    ${rubricHTML}\r\n\r\n    ${attachmentsHTML ? `<div class=\"section\"><h2>📎 File Attachments</h2><div class=\"attachments\">${attachmentsHTML}</div></div>` : ''}\r\n\r\n    ${videoLinksHTML ? `<div class=\"section\"><h2>🎥 Video Review Links</h2>${videoLinksHTML}</div>` : ''}\r\n\r\n    <p style=\"margin-top: 40px; text-align: center; color: #666; font-size: 0.9rem;\">\r\n        Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}\r\n    </p>\r\n\r\n    <div id=\"imageModal\" class=\"image-modal\">\r\n        <span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span>\r\n        <img class=\"modal-content\" id=\"modalImage\">\r\n        <div class=\"modal-caption\" id=\"modalCaption\"></div>\r\n    </div>\r\n\r\n    <script>\r\n        const attachmentData = ${JSON.stringify(gradingData.attachments)};\r\n\r\n        function openImageModal(src, caption) {\r\n            const modal = document.getElementById('imageModal');\r\n            const modalImg = document.getElementById('modalImage');\r\n            const modalCaption = document.getElementById('modalCaption');\r\n            \r\n            modal.classList.add('show');\r\n            modalImg.src = src;\r\n            modalCaption.textContent = caption;\r\n            document.body.style.overflow = 'hidden';\r\n        }\r\n\r\n        function closeImageModal() {\r\n            document.getElementById('imageModal').classList.remove('show');\r\n            document.body.style.overflow = 'auto';\r\n        }\r\n\r\n        document.addEventListener('DOMContentLoaded', function() {\r\n            // Add click handlers to images\r\n            document.querySelectorAll('.clickable-image').forEach(img => {\r\n                img.addEventListener('click', function() {\r\n                    const index = parseInt(this.getAttribute('data-index'));\r\n                    const attachment = attachmentData[index];\r\n                    if (attachment && attachment.base64Data) {\r\n                        openImageModal(attachment.base64Data, attachment.name);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Close modal when clicking outside\r\n            document.getElementById('imageModal').addEventListener('click', function(e) {\r\n                if (e.target === this) {\r\n                    closeImageModal();\r\n                }\r\n            });\r\n\r\n            // Close modal with Escape key\r\n            document.addEventListener('keydown', function(e) {\r\n                if (e.key === 'Escape') {\r\n                    closeImageModal();\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n\r\n    return htmlContent;\r\n  };\r\n\r\n  // AI FEEDBACK EXPORT FUNCTIONS\r\n  const exportAIFeedbackData = () => {\r\n    if (!localGradingData.student?.name) {\r\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\r\n      return;\r\n    }\r\n\r\n    // Calculate scores\r\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\r\n\r\n    // Build criteria performance data\r\n    const criteriaPerformance = (loadedRubric && loadedRubric.criteria) ? loadedRubric.criteria.map(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      const selectedLevel = (grading?.selectedLevel && loadedRubric.rubricLevels) ?\r\n        loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\r\n\r\n      return {\r\n        name: criterion.name,\r\n        maxPoints: criterion.maxPoints,\r\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\r\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\r\n        levelDescription: selectedLevel ? selectedLevel.description : '',\r\n        customComments: grading?.customComments || '',\r\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\r\n      };\r\n    }) : [];\r\n\r\n    const aiGradeData = {\r\n      student: {\r\n        firstName: localGradingData.student.name.split(' ')[0] || '',\r\n        fullName: localGradingData.student.name,\r\n        id: localGradingData.student.id,\r\n        email: localGradingData.student.email\r\n      },\r\n      course: {\r\n        code: localGradingData.course.code,\r\n        name: localGradingData.course.name,\r\n        instructor: localGradingData.course.instructor,\r\n        term: localGradingData.course.term\r\n      },\r\n      assignment: {\r\n        title: localGradingData.assignment.name || (loadedRubric?.assignmentInfo?.title),\r\n        description: loadedRubric?.assignmentInfo?.description || '',\r\n        totalPoints: maxPoints,\r\n        passingThreshold: loadedRubric?.assignmentInfo?.passingThreshold || 60,\r\n        dueDate: localGradingData.assignment.dueDate\r\n      },\r\n      gradeData: {\r\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\r\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\r\n        overallPercentage: percentage,\r\n        letterGrade: getLetterGrade(percentage),\r\n        passed: percentage >= (loadedRubric?.assignmentInfo?.passingThreshold || 60),\r\n        latePenaltyApplied: scoreSummary.penaltyApplied,\r\n        latePolicyDescription: scoreSummary.latePolicyDescription,\r\n        criteria: criteriaPerformance\r\n      },\r\n      existingFeedback: {\r\n        general: localGradingData.feedback.general || '',\r\n        strengths: localGradingData.feedback.strengths || '',\r\n        improvements: localGradingData.feedback.improvements || ''\r\n      },\r\n      metadata: {\r\n        gradedDate: new Date().toISOString(),\r\n        rubricUsed: loadedRubric?.assignmentInfo?.title || 'Custom Rubric',\r\n        totalCriteria: criteriaPerformance.length,\r\n        exportedForAI: true\r\n      }\r\n    };\r\n\r\n    // Export as JSON file\r\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    return aiGradeData;\r\n  };\r\n\r\n  const generateAIFeedbackPrompt = () => {\r\n    const gradeData = exportAIFeedbackData();\r\n    if (!gradeData) return;\r\n\r\n    const studentFirstName = gradeData.student.firstName;\r\n    const courseName = gradeData.course.name || 'this course';\r\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\r\n\r\n    // Determine student level context\r\n    const getStudentLevel = () => {\r\n      const courseCode = gradeData.course.code.toUpperCase();\r\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\r\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\r\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\r\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\r\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\r\n      return 'undergraduate';\r\n    };\r\n\r\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\r\n\r\nSTUDENT GRADE DATA:\r\n${JSON.stringify(gradeData, null, 2)}\r\n\r\nWrite feedback in this exact structure:\r\n\r\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\r\n\r\n**Key Observations:**\r\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\r\n• Their strongest performance area (mention specific criteria that scored highest)\r\n• One area showing good progress or solid competency  \r\n• One specific area for improvement with a concrete suggestion\r\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\r\n• One forward-looking suggestion for growth in ${courseName}\r\n\r\n**Conclusion:**\r\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\r\n\r\n**Final Note:**\r\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\r\n\r\n**WRITING STYLE:**\r\n- Conversational and personal, like speaking directly to ${studentFirstName}\r\n- Specific to their actual performance levels and criteria\r\n- Encouraging but honest\r\n- Professional yet warm\r\n- Use their actual criterion names and performance levels from the data\r\n- Keep each bullet point to 1-2 sentences maximum\r\n\r\n**Context:**\r\n- Student: ${gradeData.student.fullName}\r\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\r\n- Assignment: ${assignmentTitle}\r\n- Instructor: ${gradeData.course.instructor}\r\n\r\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\r\n\r\n    // Export prompt as text file\r\n    const promptBlob = new Blob([prompt], { type: 'text/plain' });\r\n    const url = URL.createObjectURL(promptBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    console.log('AI Feedback Prompt Generated:', prompt);\r\n    return prompt;\r\n  };\r\n\r\n  const exportForAIFeedback = () => {\r\n    try {\r\n      // First export the grade data\r\n      const gradeData = exportAIFeedbackData();\r\n      if (!gradeData) return;\r\n\r\n      // Then generate and export the prompt\r\n      setTimeout(() => {\r\n        generateAIFeedbackPrompt();\r\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\r\n      }, 500); // Small delay to ensure first download completes\r\n\r\n    } catch (error) {\r\n      console.error('Error exporting AI feedback data:', error);\r\n      alert('Error exporting AI feedback data. Please check the console for details.');\r\n    }\r\n  };\r\n\r\n  // FILE UPLOAD HANDLERS\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    const processFiles = files.map(file => {\r\n      return new Promise((resolve) => {\r\n        const newAttachment = {\r\n          id: Date.now() + Math.random(),\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          file: file\r\n        };\r\n\r\n        // If it's an image, convert to base64 for display\r\n        if (file.type.startsWith('image/')) {\r\n          const reader = new FileReader();\r\n          reader.onload = (e) => {\r\n            newAttachment.base64Data = e.target.result;\r\n            resolve(newAttachment);\r\n          };\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          resolve(newAttachment);\r\n        }\r\n      });\r\n    });\r\n\r\n    Promise.all(processFiles).then(newAttachments => {\r\n      setGradingData(prevData => ({\r\n        ...prevData,\r\n        attachments: [...prevData.attachments, ...newAttachments]\r\n      }));\r\n    });\r\n  };\r\n\r\n  const removeAttachment = (attachmentId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\r\n    }));\r\n  };\r\n\r\n  // VIDEO LINK HANDLERS\r\n  const addVideoLink = () => {\r\n    if (!videoLinkInput.trim()) return;\r\n\r\n    const newVideoLink = {\r\n      id: Date.now(),\r\n      url: videoLinkInput,\r\n      title: videoTitle || 'Video Link',\r\n      addedDate: new Date().toLocaleDateString()\r\n    };\r\n\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: [...prevData.videoLinks, newVideoLink]\r\n    }));\r\n\r\n    setVideoLinkInput('');\r\n    setVideoTitle('');\r\n  };\r\n\r\n  const removeVideoLink = (linkId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\r\n    }));\r\n  };\r\n\r\n  // RUBRIC LOADING\r\n  const handleRubricUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const rubricData = JSON.parse(e.target.result);\r\n\r\n        // Validate required structure\r\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\r\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\r\n          return;\r\n        }\r\n\r\n        setLoadedRubric(rubricData);\r\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\r\n\r\n        // Reset rubric grading when new rubric is loaded\r\n        setGradingData(prevData => ({\r\n          ...prevData,\r\n          rubricGrading: {}\r\n        }));\r\n      } catch (error) {\r\n        alert('Error loading rubric: Invalid JSON format');\r\n        console.error('Rubric loading error:', error);\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  // Enhanced total score calculation with grade percentage\r\n  const getTotalScore = () => {\r\n    const score = calculateTotalScore();\r\n    const percentage = loadedRubric ?\r\n      (score.finalScore / loadedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\r\n    return { ...score, percentage };\r\n  };\r\n\r\n  // EXPORT FUNCTIONS\r\n  const exportToHTML = () => {\r\n    const htmlContent = generateStudentReportHTML();\r\n    const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n    const url = URL.createObjectURL(htmlBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToPDF = () => {\r\n    const html = generateStudentReportHTML();\r\n    const printWindow = window.open('', '_blank');\r\n    printWindow.document.open();\r\n    printWindow.document.write(html);\r\n    printWindow.document.close();\r\n    printWindow.focus();\r\n    printWindow.print();\r\n  };\r\n\r\n  const exportGradingData = () => {\r\n    const exportData = {\r\n      ...gradingData,\r\n      rubric: loadedRubric,\r\n      totalScore: getTotalScore(),\r\n      exportDate: new Date().toISOString()\r\n    };\r\n\r\n    const dataStr = JSON.stringify(exportData, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\r\n\r\n    const exportFileDefaultName = `grading-${gradingData.student.name?.replace(/\\s+/g, '-') || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\r\n\r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', exportFileDefaultName);\r\n    linkElement.click();\r\n  };\r\n\r\n  // GRADING SESSION HANDLERS\r\n  const handleNextStudent = () => {\r\n    if (!gradingSession || !gradingSession.students) return;\r\n\r\n    const success = nextStudentInSession();\r\n    if (success) {\r\n      // Clear current grading data and load next student's draft if available\r\n      const nextStudent = gradingSession.students[gradingSession.currentIndex];\r\n      if (!nextStudent) return;\r\n\r\n      const draft = loadDraft(nextStudent.id);\r\n\r\n      if (draft) {\r\n        setLocalGradingData(draft);\r\n      } else {\r\n        // Initialize fresh data for next student\r\n        setLocalGradingData({\r\n          student: nextStudent,\r\n          course: gradingData.course,\r\n          assignment: gradingData.assignment,\r\n          feedback: { general: '', strengths: '', improvements: '' },\r\n          attachments: [],\r\n          videoLinks: [],\r\n          latePolicy: { level: 'none', penaltyApplied: false },\r\n          metadata: {\r\n            gradedBy: '',\r\n            gradedDate: '',\r\n            aiAssisted: false,\r\n            rubricIntegrated: false\r\n          },\r\n          rubricGrading: {}\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePreviousStudent = () => {\r\n    if (!gradingSession || !gradingSession.students) return;\r\n\r\n    const success = previousStudentInSession();\r\n    if (success) {\r\n      const prevStudent = gradingSession.students[gradingSession.currentIndex];\r\n      if (!prevStudent) return;\r\n\r\n      const draft = loadDraft(prevStudent.id);\r\n\r\n      if (draft) {\r\n        setLocalGradingData(draft);\r\n      } else {\r\n        setLocalGradingData({\r\n          student: prevStudent,\r\n          course: gradingData.course,\r\n          assignment: gradingData.assignment,\r\n          feedback: { general: '', strengths: '', improvements: '' },\r\n          attachments: [],\r\n          videoLinks: [],\r\n          latePolicy: { level: 'none', penaltyApplied: false },\r\n          metadata: {\r\n            gradedBy: '',\r\n            gradedDate: '',\r\n            aiAssisted: false,\r\n            rubricIntegrated: false\r\n          },\r\n          rubricGrading: {}\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // SAVING HANDLERS\r\n  const handleSaveDraft = () => {\r\n    if (!currentStudent?.id) {\r\n      alert('No student selected for saving draft');\r\n      return;\r\n    }\r\n\r\n    saveDraft(currentStudent.id, gradingData);\r\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\r\n  };\r\n\r\n  const handleSaveFinalGrade = () => {\r\n    if (!currentStudent?.id) {\r\n      alert('No student selected for final grade');\r\n      return;\r\n    }\r\n\r\n    const finalGradeData = {\r\n      ...gradingData,\r\n      totalScore: getTotalScore(),\r\n      metadata: {\r\n        ...gradingData.metadata,\r\n        gradedDate: new Date().toISOString(),\r\n        rubricIntegrated: !!loadedRubric\r\n      }\r\n    };\r\n\r\n    saveFinalGrade(currentStudent.id, finalGradeData);\r\n    alert(`Final grade saved for ${currentStudent.name || 'current student'}`);\r\n\r\n    // Automatically move to next student if in a grading session\r\n    if (gradingSession && gradingSession.students && gradingSession.currentIndex < (gradingSession.students?.length || 0) - 1) {\r\n      setTimeout(() => {\r\n        handleNextStudent();\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  // NEW: No Rubric UI Component\r\n  const NoRubricUI = () => (\r\n    <div style={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      minHeight: '60vh',\r\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\r\n      borderRadius: '1rem',\r\n      border: '2px dashed #f59e0b',\r\n      padding: '3rem',\r\n      margin: '2rem 0',\r\n      textAlign: 'center'\r\n    }}>\r\n      <AlertTriangle\r\n        size={80}\r\n        style={{\r\n          color: '#d97706',\r\n          marginBottom: '1.5rem',\r\n          filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\r\n        }}\r\n      />\r\n\r\n      <h2 style={{\r\n        fontSize: '2rem',\r\n        fontWeight: '700',\r\n        color: '#92400e',\r\n        marginBottom: '1rem',\r\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\r\n      }}>\r\n        No Rubric Loaded\r\n      </h2>\r\n\r\n      <p style={{\r\n        fontSize: '1.1rem',\r\n        color: '#a16207',\r\n        marginBottom: '2rem',\r\n        maxWidth: '600px',\r\n        lineHeight: '1.6'\r\n      }}>\r\n        A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\r\n      </p>\r\n\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '1rem',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <button\r\n          onClick={() => setActiveTab('rubric-creator')}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\r\n          }}\r\n        >\r\n          <FileText size={20} />\r\n          Create New Rubric\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => rubricInputRef.current?.click()}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\r\n          }}\r\n        >\r\n          <Upload size={20} />\r\n          Load Existing Rubric\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{\r\n        marginTop: '2rem',\r\n        padding: '1rem',\r\n        background: 'rgba(255, 255, 255, 0.7)',\r\n        borderRadius: '0.5rem',\r\n        fontSize: '0.9rem',\r\n        color: '#78350f',\r\n        maxWidth: '500px'\r\n      }}>\r\n        <strong>💡 Tip:</strong> You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\r\n      </div>\r\n\r\n      <input\r\n        ref={rubricInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleRubricUpload}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  // If no rubric is loaded, show the No Rubric UI\r\n  if (!loadedRubric) {\r\n    return (\r\n      <div style={{\r\n        padding: '2rem',\r\n        maxWidth: '1200px',\r\n        margin: '0 auto',\r\n        fontFamily: 'system-ui, -apple-system, sans-serif'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem',\r\n          marginBottom: '2rem',\r\n          padding: '1rem',\r\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n          borderRadius: '0.75rem',\r\n          border: '1px solid #d1d5db'\r\n        }}>\r\n          <Settings size={32} style={{ color: '#6b7280' }} />\r\n          <div>\r\n            <h1 style={{\r\n              fontSize: '2rem',\r\n              fontWeight: '700',\r\n              color: '#1f2937',\r\n              margin: 0\r\n            }}>\r\n              🎯 Grading Tool\r\n            </h1>\r\n            <p style={{\r\n              color: '#6b7280',\r\n              margin: 0,\r\n              fontSize: '1rem'\r\n            }}>\r\n              Assessment and feedback management system\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <NoRubricUI />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Regular grading interface when rubric is loaded\r\n  const totalScore = getTotalScore();\r\n  const gradeStatus = currentStudent?.id ? getGradeStatus(currentStudent.id) : 'none';\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '2rem',\r\n      maxWidth: '1200px',\r\n      margin: '0 auto',\r\n      fontFamily: 'system-ui, -apple-system, sans-serif'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem',\r\n        marginBottom: '2rem',\r\n        padding: '1rem',\r\n        background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n        borderRadius: '0.75rem',\r\n        border: '1px solid #d1d5db'\r\n      }}>\r\n        <Settings size={32} style={{ color: '#6b7280' }} />\r\n        <div style={{ flex: 1 }}>\r\n          <h1 style={{\r\n            fontSize: '2rem',\r\n            fontWeight: '700',\r\n            color: '#1f2937',\r\n            margin: 0\r\n          }}>\r\n            🎯 Grading Tool\r\n          </h1>\r\n          <p style={{\r\n            color: '#6b7280',\r\n            margin: 0,\r\n            fontSize: '1rem'\r\n          }}>\r\n            Assessment and feedback management system\r\n          </p>\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n          <button\r\n            onClick={() => rubricInputRef.current?.click()}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              background: '#f3f4f6',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              cursor: 'pointer',\r\n              color: '#374151'\r\n            }}\r\n          >\r\n            <Upload size={16} />\r\n            Load Rubric\r\n          </button>\r\n\r\n          <button\r\n            onClick={exportGradingData}\r\n            disabled={!currentStudent}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              background: currentStudent ? '#f3f4f6' : '#f9fafb',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              cursor: currentStudent ? 'pointer' : 'not-allowed',\r\n              color: currentStudent ? '#374151' : '#9ca3af'\r\n            }}\r\n          >\r\n            <FileDown size={16} />\r\n            Export\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <input\r\n        ref={rubricInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleRubricUpload}\r\n      />\r\n\r\n      {/* Current Rubric Info */}\r\n      {loadedRubric && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\r\n          border: '1px solid #93c5fd',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: '600',\r\n            color: '#1e40af',\r\n            margin: '0 0 0.5rem 0',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <FileText size={20} />\r\n            Current Rubric: {loadedRubric.assignmentInfo.title}\r\n          </h2>\r\n          <p style={{ color: '#1e40af', margin: 0, fontSize: '0.9rem' }}>\r\n            {loadedRubric.assignmentInfo.description || 'No description provided'}\r\n          </p>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '2rem',\r\n            marginTop: '0.75rem',\r\n            fontSize: '0.875rem',\r\n            color: '#1d4ed8'\r\n          }}>\r\n            <span><strong>Weight:</strong> {loadedRubric.assignmentInfo?.weight || 0}%</span>\r\n            <span><strong>Total Points:</strong> {loadedRubric.assignmentInfo?.totalPoints || 0}</span>\r\n            <span><strong>Passing:</strong> {loadedRubric.assignmentInfo?.passingThreshold || 0}%</span>\r\n            <span><strong>Criteria:</strong> {loadedRubric.criteria?.length || 0}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Grading Session Status */}\r\n      {gradingSession && gradingSession.students && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\r\n          border: '1px solid #6ee7b7',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <div>\r\n              <h3 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#047857',\r\n                margin: '0 0 0.5rem 0',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem'\r\n              }}>\r\n                <Users size={18} />\r\n                Batch Grading Session Active\r\n              </h3>\r\n              <p style={{ color: '#047857', margin: 0, fontSize: '0.9rem' }}>\r\n                Student {gradingSession.currentIndex + 1} of {gradingSession.students?.length || 0}:\r\n                <strong> {gradingSession.students[gradingSession.currentIndex]?.name || 'Unknown'}</strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n              <button\r\n                onClick={handlePreviousStudent}\r\n                disabled={gradingSession.currentIndex === 0}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  padding: '0.5rem 1rem',\r\n                  background: gradingSession.currentIndex === 0 ? '#f3f4f6' : '#10b981',\r\n                  color: gradingSession.currentIndex === 0 ? '#9ca3af' : 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                <SkipBack size={16} />\r\n                Previous\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleNextStudent}\r\n                disabled={gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  padding: '0.5rem 1rem',\r\n                  background: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? '#f3f4f6' : '#10b981',\r\n                  color: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? '#9ca3af' : 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  cursor: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? 'not-allowed' : 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Next\r\n                <SkipForward size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Student Information */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          👤 Student Information\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Student Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.student.name}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter student name\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Student ID\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.student.id}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, id: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter student ID\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={gradingData.student.email}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, email: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter email address\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {gradeStatus !== 'none' && (\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\r\n              border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              color: gradeStatus === 'final' ? '#047857' : '#a16207'\r\n            }}>\r\n              <strong>\r\n                {gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'}\r\n              </strong>\r\n              {gradeStatus === 'final' && ' - This student has been fully graded'}\r\n              {gradeStatus === 'draft' && ' - You can continue editing this draft'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rubric Grading */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📊 Rubric Assessment\r\n        </h3>\r\n\r\n        {loadedRubric && loadedRubric.criteria && loadedRubric.criteria.map((criterion, criterionIndex) => (\r\n          <div\r\n            key={criterion.id}\r\n            style={{\r\n              background: '#ffffff',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '0.5rem',\r\n              padding: '1.5rem',\r\n              marginBottom: '1.5rem'\r\n            }}\r\n          >\r\n            {/* Criterion Header */}\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              marginBottom: '1rem',\r\n              paddingBottom: '0.75rem',\r\n              borderBottom: '1px solid #e5e7eb'\r\n            }}>\r\n              <h4 style={{\r\n                fontSize: '1.1rem',\r\n                fontWeight: '600',\r\n                color: '#1f2937',\r\n                margin: 0\r\n              }}>\r\n                {criterion.name}\r\n              </h4>\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                fontWeight: '600',\r\n                color: '#6b7280'\r\n              }}>\r\n                {criterion.maxPoints} points\r\n              </div>\r\n            </div>\r\n\r\n            {/* Criterion Description */}\r\n            {criterion.description && (\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                color: '#6b7280',\r\n                marginBottom: '1rem',\r\n                lineHeight: '1.5'\r\n              }}>\r\n                {renderFormattedContent(criterion.description)}\r\n              </div>\r\n            )}\r\n\r\n            {/* Performance Level Selection */}\r\n            <div style={{ marginBottom: '1rem' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Performance Level:\r\n              </label>\r\n              <select\r\n                value={gradingData.rubricGrading[criterion.id]?.selectedLevel || ''}\r\n                onChange={(e) => updateRubricGrading(criterion.id, e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem',\r\n                  background: '#ffffff'\r\n                }}\r\n              >\r\n                <option value=\"\">Select performance level...</option>\r\n                {loadedRubric && loadedRubric.rubricLevels && loadedRubric.rubricLevels.map((level) => {\r\n                  const pointValue = (criterion.maxPoints * level.multiplier).toFixed(1);\r\n                  return (\r\n                    <option key={level.level} value={level.level}>\r\n                      {level.name} - {pointValue} pts ({Math.round(level.multiplier * 100)}%)\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Selected Level Details */}\r\n            {gradingData.rubricGrading[criterion.id]?.selectedLevel && (\r\n              <div style={{\r\n                padding: '1rem',\r\n                background: '#f9fafb',\r\n                border: '1px solid #e5e7eb',\r\n                borderRadius: '0.375rem',\r\n                marginBottom: '1rem'\r\n              }}>\r\n                {(() => {\r\n                  const selectedLevel = loadedRubric.rubricLevels.find(\r\n                    level => level.level === gradingData.rubricGrading[criterion.id]?.selectedLevel\r\n                  );\r\n                  const pointValue = (criterion.maxPoints * selectedLevel.multiplier).toFixed(1);\r\n                  const levelDescription = criterion.levels && criterion.levels[selectedLevel.level];\r\n\r\n                  return (\r\n                    <div>\r\n                      <div style={{\r\n                        fontSize: '0.875rem',\r\n                        fontWeight: '600',\r\n                        color: '#1f2937',\r\n                        marginBottom: '0.5rem'\r\n                      }}>\r\n                        {selectedLevel.name}: {pointValue} / {criterion.maxPoints} points\r\n                      </div>\r\n                      {levelDescription && levelDescription.description && (\r\n                        <div style={{\r\n                          fontSize: '0.8rem',\r\n                          color: '#6b7280',\r\n                          lineHeight: '1.4'\r\n                        }}>\r\n                          {renderFormattedContent(levelDescription.description)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            )}\r\n\r\n            {/* Custom Comments */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Comments for {criterion.name}:\r\n              </label>\r\n              <textarea\r\n                value={gradingData.rubricGrading[criterion.id]?.customComments || ''}\r\n                onChange={(e) => updateRubricGrading(criterion.id,\r\n                  gradingData.rubricGrading[criterion.id]?.selectedLevel || '',\r\n                  e.target.value\r\n                )}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem',\r\n                  resize: 'vertical',\r\n                  minHeight: '80px'\r\n                }}\r\n                placeholder={`Add specific feedback for ${criterion.name}...`}\r\n              />\r\n            </div>\r\n\r\n            {/* Feedback Library */}\r\n            {criterion.feedbackLibrary && Object.keys(criterion.feedbackLibrary).length > 0 && (\r\n              <div style={{ marginTop: '1rem' }}>\r\n                <button\r\n                  onClick={() => setShowRubricComments(prev => ({\r\n                    ...prev,\r\n                    [criterion.id]: !prev[criterion.id]\r\n                  }))}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.5rem 1rem',\r\n                    background: '#f3f4f6',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.375rem',\r\n                    fontSize: '0.875rem',\r\n                    cursor: 'pointer',\r\n                    color: '#374151'\r\n                  }}\r\n                >\r\n                  {showRubricComments[criterion.id] ?\r\n                    <ChevronUp size={16} /> :\r\n                    <ChevronDown size={16} />\r\n                  }\r\n                  Quick Feedback Library\r\n                </button>\r\n\r\n                {showRubricComments[criterion.id] && (\r\n                  <div style={{\r\n                    marginTop: '0.75rem',\r\n                    padding: '1rem',\r\n                    background: '#f9fafb',\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '0.375rem'\r\n                  }}>\r\n                    {Object.entries(criterion.feedbackLibrary).map(([category, comments]) => (\r\n                      <div key={category} style={{ marginBottom: '1rem' }}>\r\n                        <h5 style={{\r\n                          fontSize: '0.875rem',\r\n                          fontWeight: '600',\r\n                          color: '#374151',\r\n                          marginBottom: '0.5rem',\r\n                          textTransform: 'capitalize'\r\n                        }}>\r\n                          {category}:\r\n                        </h5>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                          {comments.map((comment, index) => (\r\n                            <button\r\n                              key={index}\r\n                              onClick={() => addCriterionFeedback(criterion.id, comment)}\r\n                              style={{\r\n                                padding: '0.25rem 0.5rem',\r\n                                background: '#ffffff',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '0.25rem',\r\n                                fontSize: '0.75rem',\r\n                                cursor: 'pointer',\r\n                                color: '#374151'\r\n                              }}\r\n                            >\r\n                              + {comment}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Assignment Information */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📋 Assignment Information\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Assignment Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.assignment.name}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Assignment title\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Due Date\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={gradingData.assignment.dueDate}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, dueDate: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Max Points\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={gradingData.assignment.maxPoints}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, maxPoints: parseInt(e.target.value) || 100 }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Late Policy */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          ⏰ Late Policy\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n            {Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => (\r\n              <label\r\n                key={levelKey}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.75rem 1rem',\r\n                  background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\r\n                  color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\r\n                  borderRadius: '0.5rem',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"latePolicy\"\r\n                  value={levelKey}\r\n                  checked={gradingData.latePolicy.level === levelKey}\r\n                  onChange={(e) => updateLatePolicy(e.target.value)}\r\n                  style={{ margin: 0 }}\r\n                />\r\n                {levelData.name}\r\n                <span style={{ fontSize: '0.75rem', opacity: 0.8 }}>\r\n                  ({Math.round(levelData.multiplier * 100)}%)\r\n                </span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n\r\n          {gradingData.latePolicy.level !== 'none' && (\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: '#fef3c7',\r\n              border: '1px solid #fde047',\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              color: '#a16207'\r\n            }}>\r\n              <strong>Late Policy Applied:</strong> {(currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]?.description}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rubric Grading */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📊 Rubric Assessment\r\n        </h3>\r\n\r\n        {loadedRubric && loadedRubric.criteria && loadedRubric.criteria.map((criterion, criterionIndex) => (\r\n          <div\r\n            key={criterion.id}\r\n            style={{\r\n              background: 'linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '0.75rem',\r\n              padding: '1.5rem',\r\n              marginBottom: '1.5rem',\r\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n            }}\r\n          >\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'flex-start',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <div style={{ flex: 1 }}>\r\n                <h4 style={{\r\n                  fontSize: '1.1rem',\r\n                  fontWeight: '600',\r\n                  color: '#1e293b',\r\n                  margin: '0 0 0.5rem 0'\r\n                }}>\r\n                  {criterion.name}\r\n                </h4>\r\n                {criterion.description && (\r\n                  <p style={{\r\n                    fontSize: '0.875rem',\r\n                    color: '#64748b',\r\n                    margin: '0 0 0.75rem 0',\r\n                    lineHeight: '1.5'\r\n                  }}>\r\n                    {renderFormattedContent(criterion.description)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div style={{\r\n                textAlign: 'right',\r\n                marginLeft: '1rem'\r\n              }}>\r\n                <div style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600',\r\n                  color: '#1e293b'\r\n                }}>\r\n                  {criterion.maxPoints} pts\r\n                </div>\r\n                <div style={{\r\n                  fontSize: '0.75rem',\r\n                  color: '#64748b'\r\n                }}>\r\n                  Weight: {criterion.weight}%\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Performance Levels */}\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n              gap: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              {loadedRubric && loadedRubric.rubricLevels && loadedRubric.rubricLevels.map((level) => {\r\n                const isSelected = gradingData.rubricGrading[criterion.id]?.selectedLevel === level.level;\r\n                const levelDescription = criterion.levels[level.level];\r\n                const pointValue = criterion.maxPoints * level.multiplier;\r\n\r\n                return (\r\n                  <button\r\n                    key={level.level}\r\n                    onClick={() => updateRubricGrading(criterion.id, level.level)}\r\n                    style={{\r\n                      padding: '1rem',\r\n                      background: isSelected ?\r\n                        `linear-gradient(135deg, ${level.color} 0%, ${level.color}dd 100%)` :\r\n                        'linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)',\r\n                      color: isSelected ? 'white' : '#374151',\r\n                      border: `2px solid ${isSelected ? level.color : '#e2e8f0'}`,\r\n                      borderRadius: '0.5rem',\r\n                      cursor: 'pointer',\r\n                      fontSize: '0.75rem',\r\n                      fontWeight: isSelected ? '600' : '500',\r\n                      textAlign: 'left',\r\n                      transition: 'all 0.2s ease',\r\n                      boxShadow: isSelected ? `0 4px 12px ${level.color}40` : '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n                    }}\r\n                    onMouseOver={(e) => {\r\n                      if (!isSelected) {\r\n                        e.target.style.borderColor = level.color;\r\n                        e.target.style.transform = 'translateY(-1px)';\r\n                      }\r\n                    }}\r\n                    onMouseOut={(e) => {\r\n                      if (!isSelected) {\r\n                        e.target.style.borderColor = '#e2e8f0';\r\n                        e.target.style.transform = 'translateY(0)';\r\n                      }\r\n                    }}\r\n                  >\r\n                    <div style={{\r\n                      fontWeight: '600',\r\n                      marginBottom: '0.25rem',\r\n                      fontSize: '0.875rem'\r\n                    }}>\r\n                      {level.name}\r\n                    </div>\r\n                    <div style={{\r\n                      fontSize: '0.75rem',\r\n                      opacity: 0.9,\r\n                      marginBottom: '0.5rem'\r\n                    }}>\r\n                      {pointValue.toFixed(1)} pts ({Math.round(level.multiplier * 100)}%)\r\n                    </div>\r\n                    {levelDescription && (\r\n                      <div style={{\r\n                        fontSize: '0.7rem',\r\n                        opacity: 0.8,\r\n                        lineHeight: '1.3'\r\n                      }}>\r\n                        {levelDescription.description ?\r\n                          renderFormattedContent(levelDescription.description).substring(0, 100) + '...' :\r\n                          level.description.substring(0, 100) + '...'\r\n                        }\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Custom Comments */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Custom Comments for {criterion.name}\r\n              </label>\r\n              <textarea\r\n                value={gradingData.rubricGrading[criterion.id]?.customComments || ''}\r\n                onChange={(e) => updateRubricGrading(criterion.id,\r\n                  gradingData.rubricGrading[criterion.id]?.selectedLevel || '',\r\n                  e.target.value\r\n                )}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  resize: 'vertical',\r\n                  minHeight: '80px'\r\n                }}\r\n                placeholder={`Specific feedback for ${criterion.name}...`}\r\n              />\r\n            </div>\r\n\r\n            {/* Feedback Library (if available) */}\r\n            {criterion.feedbackLibrary && Object.keys(criterion.feedbackLibrary).length > 0 && (\r\n              <div style={{ marginTop: '1rem' }}>\r\n                <button\r\n                  onClick={() => setShowRubricComments(prev => ({\r\n                    ...prev,\r\n                    [criterion.id]: !prev[criterion.id]\r\n                  }))}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.5rem 1rem',\r\n                    background: '#f1f5f9',\r\n                    border: '1px solid #cbd5e1',\r\n                    borderRadius: '0.375rem',\r\n                    fontSize: '0.875rem',\r\n                    cursor: 'pointer',\r\n                    color: '#475569'\r\n                  }}\r\n                >\r\n                  {showRubricComments[criterion.id] ?\r\n                    <ChevronUp size={16} /> :\r\n                    <ChevronDown size={16} />\r\n                  }\r\n                  Feedback Library\r\n                </button>\r\n\r\n                {showRubricComments[criterion.id] && (\r\n                  <div style={{\r\n                    marginTop: '0.75rem',\r\n                    padding: '1rem',\r\n                    background: '#f8fafc',\r\n                    border: '1px solid #e2e8f0',\r\n                    borderRadius: '0.5rem'\r\n                  }}>\r\n                    {Object.entries(criterion.feedbackLibrary).map(([category, comments]) => (\r\n                      <div key={category} style={{ marginBottom: '1rem' }}>\r\n                        <h5 style={{\r\n                          fontSize: '0.875rem',\r\n                          fontWeight: '600',\r\n                          color: '#374151',\r\n                          marginBottom: '0.5rem',\r\n                          textTransform: 'capitalize'\r\n                        }}>\r\n                          {category}\r\n                        </h5>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>\r\n                          {comments.map((comment, index) => (\r\n                            <button\r\n                              key={index}\r\n                              onClick={() => addCriterionFeedback(criterion.id, comment)}\r\n                              style={{\r\n                                padding: '0.375rem 0.75rem',\r\n                                background: '#ffffff',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '0.375rem',\r\n                                fontSize: '0.75rem',\r\n                                cursor: 'pointer',\r\n                                color: '#374151',\r\n                                transition: 'all 0.2s ease'\r\n                              }}\r\n                              onMouseOver={(e) => {\r\n                                e.target.style.background = '#3b82f6';\r\n                                e.target.style.color = 'white';\r\n                              }}\r\n                              onMouseOut={(e) => {\r\n                                e.target.style.background = '#ffffff';\r\n                                e.target.style.color = '#374151';\r\n                              }}\r\n                            >\r\n                              + {comment}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Score Summary */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          🎯 Score Summary\r\n        </h3>\r\n        <div style={{\r\n          background: (loadedRubric && totalScore.finalScore >= (loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints)) ?\r\n            'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)' :\r\n            'linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)',\r\n          border: `1px solid ${(loadedRubric && totalScore.finalScore >= (loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints)) ?\r\n            '#86efac' : '#fca5a5'}`,\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '1rem' }}>\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.25rem' }}>\r\n                Raw Score\r\n              </div>\r\n              <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#1f2937' }}>\r\n                {totalScore.rawScore.toFixed(1)}/{loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.25rem' }}>\r\n                Final Score\r\n              </div>\r\n              <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#1f2937' }}>\r\n                {totalScore.finalScore.toFixed(1)}/{loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.25rem' }}>\r\n                Percentage\r\n              </div>\r\n              <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#1f2937' }}>\r\n                {totalScore.percentage}%\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ textAlign: 'center' }}>\r\n              <div style={{ fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.25rem' }}>\r\n                Status\r\n              </div>\r\n              <div style={{\r\n                fontSize: '1rem',\r\n                fontWeight: '600',\r\n                color: (loadedRubric && totalScore.finalScore >= (loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints)) ?\r\n                  '#047857' : '#dc2626'\r\n              }}>\r\n                {(loadedRubric && totalScore.finalScore >= (loadedRubric.assignmentInfo.passingThreshold / 100 * loadedRubric.assignmentInfo.totalPoints)) ?\r\n                  '✅ PASS' : '❌ FAIL'\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {totalScore.penaltyApplied && (\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: 'rgba(255, 255, 255, 0.7)',\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              color: '#a16207'\r\n            }}>\r\n              <strong>Late Penalty Applied:</strong> {totalScore.latePolicyDescription}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Export and Save Actions */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📤 Export & Save Actions\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.75rem',\r\n            flexWrap: 'wrap',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={exportToHTML}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: '#16a34a',\r\n                color: 'white',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <FileDown size={16} />\r\n              Export HTML\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={exportToPDF}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                backgroundColor: '#dc2626',\r\n                color: '#ffffff',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <FileText size={16} />\r\n              Export PDF\r\n            </button>\r\n\r\n            <button\r\n              onClick={exportForAIFeedback}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                backgroundColor: '#7c3aed',\r\n                color: '#ffffff',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <Bot size={16} />\r\n              AI Feedback\r\n            </button>\r\n          </div>\r\n\r\n          <p style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6b7280',\r\n            margin: 0,\r\n            fontStyle: 'italic'\r\n          }}>\r\n            {loadedRubric ?\r\n              'Comprehensive rubric-based assessment' :\r\n              'Streamlined grading with flexible assessment options'\r\n            }\r\n          </p>\r\n\r\n          {/* Save Actions for Students */}\r\n          {currentStudent && (\r\n            <div style={{\r\n              marginTop: '1.5rem',\r\n              paddingTop: '1.5rem',\r\n              borderTop: '1px solid #e5e7eb'\r\n            }}>\r\n              <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n                <button\r\n                  onClick={handleSaveDraft}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.75rem 1.5rem',\r\n                    background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '0.5rem',\r\n                    cursor: 'pointer',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '600',\r\n                    boxShadow: '0 2px 8px rgba(245, 158, 11, 0.4)',\r\n                    transition: 'all 0.2s ease'\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.transform = 'translateY(-2px)';\r\n                    e.target.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.5)';\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.transform = 'translateY(0)';\r\n                    e.target.style.boxShadow = '0 2px 8px rgba(245, 158, 11, 0.4)';\r\n                  }}\r\n                >\r\n                  <Save size={16} />\r\n                  Save Draft\r\n                </button>\r\n\r\n                <button\r\n                  onClick={handleSaveFinalGrade}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.75rem 1.5rem',\r\n                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '0.5rem',\r\n                    cursor: 'pointer',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '600',\r\n                    boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\r\n                    transition: 'all 0.2s ease'\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    e.target.style.transform = 'translateY(-2px)';\r\n                    e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.target.style.transform = 'translateY(0)';\r\n                    e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\r\n                  }}\r\n                >\r\n                  <CheckCircle size={16} />\r\n                  Finalize & Grade Next Student\r\n                </button>\r\n              </div>\r\n\r\n              <div style={{\r\n                marginTop: '1rem',\r\n                padding: '0.75rem',\r\n                background: 'rgba(255, 255, 255, 0.6)',\r\n                borderRadius: '0.375rem',\r\n                fontSize: '0.75rem',\r\n                color: '#065f46'\r\n              }}>\r\n                <strong>Draft:</strong> Save progress, can edit later • <strong>Finalize:</strong> Complete grading, ready for student/LMS\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* General Feedback Section */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📝 General Feedback\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1.5rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Overall Comments\r\n              </label>\r\n              <textarea\r\n                value={gradingData.feedback.general}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  feedback: { ...prevData.feedback, general: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  resize: 'none',\r\n                  minHeight: '100px'\r\n                }}\r\n                rows=\"4\"\r\n                placeholder=\"General comments about the assignment...\"\r\n              />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Strengths\r\n                </label>\r\n                <textarea\r\n                  value={gradingData.feedback.strengths}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    feedback: { ...prevData.feedback, strengths: e.target.value }\r\n                  }))}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    resize: 'none',\r\n                    minHeight: '100px'\r\n                  }}\r\n                  rows=\"4\"\r\n                  placeholder=\"What the student did well...\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Areas for Improvement\r\n                </label>\r\n                <textarea\r\n                  value={gradingData.feedback.improvements}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    feedback: { ...prevData.feedback, improvements: e.target.value }\r\n                  }))}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    resize: 'none',\r\n                    minHeight: '100px'\r\n                  }}\r\n                  rows=\"4\"\r\n                  placeholder=\"Suggestions for improvement...\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* File Attachments */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📎 File Attachments\r\n        </h3>\r\n        <div style={{\r\n          border: '2px dashed #d1d5db',\r\n          borderRadius: '0.5rem',\r\n          padding: '2rem',\r\n          textAlign: 'center',\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f9fafb 100%)'\r\n        }}>\r\n          <input\r\n            ref={fileInputRef}\r\n            type=\"file\"\r\n            multiple\r\n            onChange={handleFileUpload}\r\n            style={{ display: 'none' }}\r\n          />\r\n          <button\r\n            onClick={() => fileInputRef.current?.click()}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.75rem 1.5rem',\r\n              background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '0.5rem',\r\n              cursor: 'pointer',\r\n              fontSize: '0.875rem',\r\n              fontWeight: '600',\r\n              margin: '0 auto'\r\n            }}\r\n          >\r\n            <Plus size={16} />\r\n            Add Files\r\n          </button>\r\n\r\n          {gradingData.attachments.length > 0 && (\r\n            <div style={{ marginTop: '1rem' }}>\r\n              <h4 style={{ fontSize: '0.875rem', fontWeight: '600', marginBottom: '0.5rem', color: '#374151' }}>\r\n                Attached Files:\r\n              </h4>\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem', justifyContent: 'center' }}>\r\n                {gradingData.attachments.map((attachment) => (\r\n                  <div\r\n                    key={attachment.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.5rem 1rem',\r\n                      background: '#f3f4f6',\r\n                      borderRadius: '0.375rem',\r\n                      fontSize: '0.75rem'\r\n                    }}\r\n                  >\r\n                    <FileText size={14} />\r\n                    <span>{attachment.name}</span>\r\n                    <button\r\n                      onClick={() => removeAttachment(attachment.id)}\r\n                      style={{\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        color: '#ef4444',\r\n                        cursor: 'pointer',\r\n                        padding: '0.125rem'\r\n                      }}\r\n                    >\r\n                      <X size={12} />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Video Links */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          🎥 Video Links\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n            <input\r\n              type=\"url\"\r\n              value={videoLinkInput}\r\n              onChange={(e) => setVideoLinkInput(e.target.value)}\r\n              placeholder=\"Enter video URL (YouTube, Vimeo, etc.)\"\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.75rem',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              value={videoTitle}\r\n              onChange={(e) => setVideoTitle(e.target.value)}\r\n              placeholder=\"Video title (optional)\"\r\n              style={{\r\n                width: '200px',\r\n                padding: '0.75rem',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <button\r\n              onClick={addVideoLink}\r\n              disabled={!videoLinkInput.trim()}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                padding: '0.75rem 1rem',\r\n                background: videoLinkInput.trim() ? '#10b981' : '#d1d5db',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.5rem',\r\n                cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              <Video size={16} />\r\n              Add\r\n            </button>\r\n          </div>\r\n\r\n          {gradingData.videoLinks.length > 0 && (\r\n            <div>\r\n              <h4 style={{ fontSize: '0.875rem', fontWeight: '600', marginBottom: '0.5rem', color: '#374151' }}>\r\n                Video Links:\r\n              </h4>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                {gradingData.videoLinks.map((link) => (\r\n                  <div\r\n                    key={link.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.75rem',\r\n                      background: '#ffffff',\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '0.5rem'\r\n                    }}\r\n                  >\r\n                    <Video size={16} style={{ color: '#6b7280' }} />\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ fontWeight: '500', fontSize: '0.875rem', color: '#374151' }}>\r\n                        {link.title}\r\n                      </div>\r\n                      <a\r\n                        href={link.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          fontSize: '0.75rem',\r\n                          color: '#3b82f6',\r\n                          textDecoration: 'none'\r\n                        }}\r\n                      >\r\n                        {link.url}\r\n                      </a>\r\n                    </div>\r\n                    <span style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                      {link.addedDate}\r\n                    </span>\r\n                    <button\r\n                      onClick={() => removeVideoLink(link.id)}\r\n                      style={{\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        color: '#ef4444',\r\n                        cursor: 'pointer',\r\n                        padding: '0.25rem'\r\n                      }}\r\n                    >\r\n                      <X size={16} />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradingTemplate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}