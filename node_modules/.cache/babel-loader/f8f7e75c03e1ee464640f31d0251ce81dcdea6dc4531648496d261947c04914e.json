{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\GradingTemplate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot, ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle, CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw, AlertTriangle, BookOpen, Settings } from 'lucide-react';\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\n\n// NO SAMPLE RUBRIC - START WITH EMPTY STATE\n// This forces users to create or load a rubric before grading\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GradingTemplate = () => {\n  _s();\n  var _loadedRubric$assignm8, _loadedRubric$assignm9, _loadedRubric$assignm0, _loadedRubric$criteri, _gradingSession$stude, _gradingSession$stude2, _gradingSession$stude3, _gradingSession$stude4, _gradingSession$stude5, _gradingSession$stude6, _levels$gradingData$l;\n  // Get shared context - ENHANCED with new functions\n  const {\n    sharedRubric,\n    sharedCourseDetails,\n    setSharedCourseDetails,\n    gradingData: sharedGradingData,\n    setGradingData: setSharedGradingData,\n    updateStudentInfo,\n    updateCourseInfo,\n    updateAssignmentInfo,\n    clearGradingFormData,\n    classList,\n    setClassList,\n    setCurrentStudent,\n    gradingSession,\n    setGradingSession,\n    nextStudentInSession,\n    previousStudentInSession,\n    updateGradingSession,\n    initializeGradingSession,\n    setActiveTab,\n    currentStudent,\n    saveDraft,\n    loadDraft,\n    // NEW: Add the draft/final grade functions\n    saveFinalGrade,\n    loadFinalGrade,\n    finalGrades,\n    getGradeStatus,\n    currentLatePolicy,\n    customLatePolicies\n  } = useAssessment();\n\n  // Helper function to convert HTML content to readable text format\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // State for all grading data - initialize from shared context or defaults\n  const [localGradingData, setLocalGradingData] = useState(() => {\n    // 1) Try loading a saved draft first\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      const draft = loadDraft(currentStudent.id);\n      if (draft) {\n        return draft;\n      }\n    }\n    // 2) If rubric was just transferred, use that\n    if (sharedGradingData) {\n      return {\n        ...sharedGradingData,\n        student: currentStudent || sharedGradingData.student || {\n          name: '',\n          id: '',\n          email: ''\n        }\n      };\n    }\n    // 3) Otherwise, start fresh for this student\n    return {\n      student: currentStudent || {\n        name: '',\n        id: '',\n        email: ''\n      },\n      course: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) || {\n        code: '',\n        name: '',\n        instructor: '',\n        term: ''\n      },\n      assignment: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) || {\n        name: '',\n        dueDate: '',\n        maxPoints: 100\n      },\n      feedback: {\n        general: '',\n        strengths: '',\n        improvements: ''\n      },\n      attachments: [],\n      videoLinks: [],\n      latePolicy: {\n        level: 'none',\n        penaltyApplied: false\n      },\n      metadata: {\n        gradedBy: '',\n        gradedDate: '',\n        aiAssisted: false,\n        rubricIntegrated: false\n      },\n      rubricGrading: {}\n    };\n  });\n\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\n  const gradingData = localGradingData;\n  const setGradingData = setLocalGradingData;\n\n  // Rubric-specific state - MODIFIED: Default to null instead of sampleRubric\n  const [loadedRubric, setLoadedRubric] = useState(() => {\n    return sharedRubric || null; // NO DEFAULT SAMPLE RUBRIC\n  });\n  const [showRubricComments, setShowRubricComments] = useState({});\n  const [showHeaderGuide, setShowHeaderGuide] = useState(false);\n  const fileInputRef = useRef(null);\n  const moduleInputRef = useRef(null);\n  const rubricInputRef = useRef(null);\n\n  // Video link management\n  const [videoLinkInput, setVideoLinkInput] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n\n  // Additional state for comments display\n  const [showComments, setShowComments] = useState(false);\n\n  // Enhanced shared data synchronization\n  useEffect(() => {\n    if (!sharedGradingData) return;\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\n\n    // Only update course info if it's not empty and different from current\n    if (sharedGradingData.course && (sharedGradingData.course.code || sharedGradingData.course.name || sharedGradingData.course.instructor || sharedGradingData.course.term)) {\n      const needsSync = sharedGradingData.course.code !== localGradingData.course.code || sharedGradingData.course.name !== localGradingData.course.name || sharedGradingData.course.instructor !== localGradingData.course.instructor || sharedGradingData.course.term !== localGradingData.course.term;\n      if (needsSync) {\n        console.log('✅ Syncing course data from shared context to local state');\n        setLocalGradingData(prev => ({\n          ...prev,\n          course: {\n            code: sharedGradingData.course.code || prev.course.code,\n            name: sharedGradingData.course.name || prev.course.name,\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\n            term: sharedGradingData.course.term || prev.course.term\n          }\n        }));\n      }\n    }\n  }, [sharedGradingData]);\n\n  // Sync with sharedRubric\n  useEffect(() => {\n    if (sharedRubric && sharedRubric !== loadedRubric) {\n      var _sharedRubric$assignm;\n      console.log('✅ Syncing rubric from shared context:', ((_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.title) || 'Untitled');\n      setLoadedRubric(sharedRubric);\n    }\n  }, [sharedRubric, loadedRubric]);\n\n  // Auto-populate assignment info when rubric is loaded\n  useEffect(() => {\n    if (loadedRubric) {\n      const initialGrading = {};\n      loadedRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setLocalGradingData(prevData => {\n        var _loadedRubric$assignm, _loadedRubric$assignm2;\n        return {\n          ...prevData,\n          assignment: {\n            ...prevData.assignment,\n            name: ((_loadedRubric$assignm = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm === void 0 ? void 0 : _loadedRubric$assignm.title) || prevData.assignment.name,\n            maxPoints: ((_loadedRubric$assignm2 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm2 === void 0 ? void 0 : _loadedRubric$assignm2.totalPoints) || prevData.assignment.maxPoints\n          },\n          rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\n          metadata: {\n            ...prevData.metadata,\n            rubricIntegrated: true\n          }\n        };\n      });\n    }\n  }, [loadedRubric]);\n\n  // Auto-save to shared context whenever gradingData changes (with debounce)\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setSharedGradingData(gradingData);\n      setSharedCourseDetails({\n        student: gradingData.student,\n        course: gradingData.course,\n        assignment: gradingData.assignment\n      });\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\n\n  // When we get new sharedCourseDetails, merge them in\n  useEffect(() => {\n    if (!sharedCourseDetails) return;\n    setLocalGradingData(prev => ({\n      ...prev,\n      student: sharedCourseDetails.student || prev.student,\n      course: sharedCourseDetails.course || prev.course,\n      assignment: sharedCourseDetails.assignment || prev.assignment\n    }));\n  }, [sharedCourseDetails]);\n\n  // When student changes, load any saved draft/final but keep course+assignment\n  useEffect(() => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) return;\n    const status = getGradeStatus(currentStudent.id);\n    let saved = null;\n    if (status === 'final' && loadFinalGrade) {\n      saved = loadFinalGrade(currentStudent.id);\n    } else if (status === 'draft') {\n      saved = loadDraft(currentStudent.id);\n    }\n    if (saved) {\n      setLocalGradingData(prev => ({\n        ...saved,\n        // Use saved data\n        course: prev.course,\n        // Keep current course info\n        assignment: prev.assignment // Keep current assignment info\n      }));\n    } else {\n      // Fresh slate for this student, but keep course/assignment\n      setLocalGradingData(prev => ({\n        ...prev,\n        student: currentStudent,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: {}\n      }));\n    }\n  }, [currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.id, getGradeStatus, loadFinalGrade, loadDraft]);\n\n  // Enhanced calculation function\n  const calculateTotalScore = () => {\n    if (!loadedRubric || !loadedRubric.criteria) return {\n      rawScore: 0,\n      finalScore: 0,\n      penaltyApplied: false,\n      latePolicyDescription: ''\n    };\n    let totalRawScore = 0;\n    let maxPossiblePoints = 0;\n\n    // Calculate raw score from rubric grading\n    loadedRubric.criteria.forEach(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      if (grading && grading.selectedLevel && loadedRubric.rubricLevels) {\n        const selectedLevel = loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\n        if (selectedLevel) {\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\n        }\n      }\n      maxPossiblePoints += criterion.maxPoints;\n    });\n\n    // Apply late policy penalty\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\n    return {\n      rawScore: totalRawScore,\n      finalScore: finalScore,\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\n      latePolicyDescription: latePolicyLevel.description\n    };\n  };\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\n  useEffect(() => {\n    setScoreSummary(calculateTotalScore());\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, loadedRubric]);\n  const updateLatePolicy = level => {\n    setGradingData(prevData => ({\n      ...prevData,\n      latePolicy: {\n        level: level,\n        penaltyApplied: level !== 'none',\n        policyId: (currentLatePolicy === null || currentLatePolicy === void 0 ? void 0 : currentLatePolicy.id) || DEFAULT_LATE_POLICY.id\n      }\n    }));\n  };\n  const updateRubricGrading = (criterionId, level, comments = null) => {\n    if (!loadedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const existingGrading = prevData.rubricGrading[criterionId];\n      const existingComments = (existingGrading === null || existingGrading === void 0 ? void 0 : existingGrading.customComments) || '';\n      const newRubricState = {\n        ...prevData.rubricGrading,\n        [criterionId]: {\n          criterionId,\n          selectedLevel: level,\n          customComments: comments !== null ? comments : existingComments\n        }\n      };\n      return {\n        ...prevData,\n        rubricGrading: newRubricState\n      };\n    });\n  };\n  const addCriterionFeedback = (criterionId, comment) => {\n    if (!loadedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const currentGrading = prevData.rubricGrading[criterionId];\n      const currentComments = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '';\n      const newComments = currentComments ? `${currentComments}\\n${comment}` : comment;\n      return {\n        ...prevData,\n        rubricGrading: {\n          ...prevData.rubricGrading,\n          [criterionId]: {\n            ...currentGrading,\n            customComments: newComments\n          }\n        }\n      };\n    });\n  };\n\n  // HELPER FUNCTIONS FOR COURSE INFO\n  const getEffectiveCourseData = () => {\n    const course = (gradingData === null || gradingData === void 0 ? void 0 : gradingData.course) || {};\n    const metadata = classList === null || classList === void 0 ? void 0 : classList.courseMetadata;\n    return {\n      code: course.code || (metadata === null || metadata === void 0 ? void 0 : metadata.courseCode) || '',\n      name: course.name || (metadata === null || metadata === void 0 ? void 0 : metadata.courseName) || '',\n      instructor: course.instructor || (metadata === null || metadata === void 0 ? void 0 : metadata.instructor) || (metadata === null || metadata === void 0 ? void 0 : metadata.professors) || '',\n      term: course.term || (metadata === null || metadata === void 0 ? void 0 : metadata.term) || ''\n    };\n  };\n  const pullCourseDataFromClassList = () => {\n    if (!(classList !== null && classList !== void 0 && classList.courseMetadata)) {\n      alert('No class list course metadata available to pull from.');\n      return;\n    }\n    const metadata = classList.courseMetadata;\n    setGradingData(prevData => ({\n      ...prevData,\n      course: {\n        code: metadata.courseCode || prevData.course.code,\n        name: metadata.courseName || prevData.course.name,\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\n        term: metadata.term || prevData.course.term\n      }\n    }));\n    alert('Course information has been pulled from the class list!');\n  };\n\n  // LETTER GRADE CALCULATION\n  const getLetterGrade = percentage => {\n    if (percentage >= 97) return 'A+';\n    if (percentage >= 93) return 'A';\n    if (percentage >= 90) return 'A-';\n    if (percentage >= 87) return 'B+';\n    if (percentage >= 83) return 'B';\n    if (percentage >= 80) return 'B-';\n    if (percentage >= 77) return 'C+';\n    if (percentage >= 73) return 'C';\n    if (percentage >= 70) return 'C-';\n    if (percentage >= 67) return 'D+';\n    if (percentage >= 63) return 'D';\n    if (percentage >= 60) return 'D-';\n    return 'F';\n  };\n\n  // Helper function to generate the student report HTML. This avoids code duplication.\n  const generateStudentReportHTML = () => {\n    var _gradingData$course$c, _gradingData$course, _gradingData$course$n, _gradingData$course2, _gradingData$course$i, _gradingData$course3, _gradingData$course$t, _gradingData$course4, _gradingData$latePoli, _gradingData$latePoli2, _gradingData$latePoli3;\n    const totalScore = scoreSummary.finalScore;\n    const rawScore = scoreSummary.rawScore;\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = (totalScore / (maxPoints || 1) * 100).toFixed(1);\n    const penaltyApplied = scoreSummary.penaltyApplied;\n    const attachmentsHTML = gradingData.attachments.map((att, index) => {\n      if (att.base64Data) {\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\n      } else {\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\n      }\n    }).join('');\n    const videoLinksHTML = gradingData.videoLinks.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('');\n    const rubricTableHTML = loadedRubric ? `\n      <div class=\"rubric-section\" style=\"margin-top: 30px;\">\n          <h3>📋 Detailed Rubric Assessment</h3>\n          <div style=\"background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;\">\n              <strong>Assignment:</strong> ${loadedRubric.assignmentInfo.title}<br>\n              <strong>Description:</strong> ${renderFormattedContent(loadedRubric.assignmentInfo.description)}<br>\n              <strong>Weight:</strong> ${loadedRubric.assignmentInfo.weight}% of Final Grade<br>\n              <strong>Passing Threshold:</strong> ${loadedRubric.assignmentInfo.passingThreshold}%  \n          </div>\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.9rem;\">\n              <thead><tr style=\"background: #2c3e50; color: white;\"><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Max Points</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Level Achieved</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Points Earned</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Assessment & Comments</th></tr></thead>\n              <tbody>\n                  ${loadedRubric.criteria.map(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      const level = grading !== null && grading !== void 0 && grading.selectedLevel ? loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel) : null;\n      const points = level ? (criterion.maxPoints * level.multiplier).toFixed(1) : '0';\n      const levelDescription = level && criterion.levels[level.level] ? renderFormattedContent(criterion.levels[level.level].description) : '';\n      const additionalComments = (grading === null || grading === void 0 ? void 0 : grading.customComments) || '';\n      return `<tr><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\"><strong style=\"color: #2c3e50;\">${criterion.name}</strong><br><small style=\"color: #666; font-style: italic;\">${renderFormattedContent(criterion.description)}</small></td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold;\">${criterion.maxPoints}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; ${level ? `background-color: ${level.color}15; color: ${level.color}; font-weight: bold;` : ''}\">${level ? level.name : 'Not Assessed'}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}${!levelDescription && !additionalComments ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}</td></tr>`;\n    }).join('')}\n              </tbody>\n          </table>\n          <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\"><h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4><div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\"><div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div><div><strong>Grade Status:</strong><span style=\"color: ${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}</div></div>\n      </div>` : '';\n    const getSafeLatePolicy = (level, policyId) => {\n      const policy = getPolicyById(policyId) || currentLatePolicy || DEFAULT_LATE_POLICY;\n      const activeLevels = policy.levels || DEFAULT_LATE_POLICY.levels;\n      if (!level || typeof level !== \"string\" || !activeLevels[level]) {\n        return activeLevels.none;\n      }\n      return activeLevels[level];\n    };\n    const getPolicyById = policyId => {\n      if (!policyId) return null;\n      if (policyId === DEFAULT_LATE_POLICY.id) return DEFAULT_LATE_POLICY;\n      return customLatePolicies.find(p => p.id === policyId) || null;\n    };\n    const htmlContent = `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Grade Report - ${gradingData.student.name}</title><style>body{font-family:Arial,sans-serif;max-width:800px;margin:20px auto;padding:20px;line-height:1.6}.header{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:30px}.score-summary{background:#e8f5e8;border:2px solid #4caf50;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.late-policy-section{margin:30px 0;background:#fff5f5;border:1px solid #f87171;border-radius:8px;padding:20px}.feedback-section{margin:20px 0;padding:15px;background:#f9f9f9;border-radius:8px}.attachments{margin:30px 0}.attachment-item{display:inline-block;text-align:center;margin:1rem;padding:1rem;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);max-width:250px;vertical-align:top}.clickable-image{cursor:pointer;transition:all .3s ease;position:relative}.clickable-image:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.2)}.video-links{margin:30px 0}.video-link-item{margin-bottom:1rem}.video-link-item a{color:#007bff;text-decoration:none}.video-link-item a:hover{text-decoration:underline}h1,h2,h3{color:#333}.image-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);animation:fadeIn .3s ease}.image-modal.show{display:flex;align-items:center;justify-content:center}.modal-content{max-width:95%;max-height:95%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);animation:zoomIn .3s ease}.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:40px;font-weight:700;cursor:pointer;z-index:1001;background:rgba(0,0,0,.5);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;line-height:1}.close-modal:hover{background:rgba(0,0,0,.8)}.modal-caption{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.7);padding:10px 20px;border-radius:6px;text-align:center;max-width:80%}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes zoomIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@media print{.attachment-item,.video-link-item{break-inside:avoid}.image-modal{display:none!important}}</style></head><body><div class=\"header\"><h1>📋 Grade Report</h1><p><strong>Student:</strong> ${gradingData.student.name} (${gradingData.student.id})</p><p><strong>Course:</strong> ${(_gradingData$course$c = (_gradingData$course = gradingData.course) === null || _gradingData$course === void 0 ? void 0 : _gradingData$course.code) !== null && _gradingData$course$c !== void 0 ? _gradingData$course$c : ''} - ${(_gradingData$course$n = (_gradingData$course2 = gradingData.course) === null || _gradingData$course2 === void 0 ? void 0 : _gradingData$course2.name) !== null && _gradingData$course$n !== void 0 ? _gradingData$course$n : ''}</p><p><strong>Assignment:</strong> ${gradingData.assignment.name}</p><p><strong>Instructor:</strong> ${(_gradingData$course$i = (_gradingData$course3 = gradingData.course) === null || _gradingData$course3 === void 0 ? void 0 : _gradingData$course3.instructor) !== null && _gradingData$course$i !== void 0 ? _gradingData$course$i : ''}</p><p><strong>Term:</strong> ${(_gradingData$course$t = (_gradingData$course4 = gradingData.course) === null || _gradingData$course4 === void 0 ? void 0 : _gradingData$course4.term) !== null && _gradingData$course$t !== void 0 ? _gradingData$course$t : ''}</p></div><div class=\"score-summary\"><h2>📊 Final Score</h2><div style=\"font-size:2rem;font-weight:700;color:#2e7d32;margin:15px 0\">${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)</div><p style=\"margin:10px 0;color:#555\">${loadedRubric ? `Rubric: ${loadedRubric.assignmentInfo.title}` : \"\"}${penaltyApplied ? ` | Late Policy: ${getSafeLatePolicy((_gradingData$latePoli = gradingData.latePolicy) === null || _gradingData$latePoli === void 0 ? void 0 : _gradingData$latePoli.level).name}` : \"\"}</p></div>${penaltyApplied ? `<div class=\"late-policy-section\"><h3 style=\"color:#dc2626\">📅 Late Submission Policy Applied</h3><p><strong>Policy Status:</strong> ${getSafeLatePolicy((_gradingData$latePoli2 = gradingData.latePolicy) === null || _gradingData$latePoli2 === void 0 ? void 0 : _gradingData$latePoli2.level).name}</p><p>${getSafeLatePolicy((_gradingData$latePoli3 = gradingData.latePolicy) === null || _gradingData$latePoli3 === void 0 ? void 0 : _gradingData$latePoli3.level).description}</p><p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p></div>` : \"\"}${rubricTableHTML}${Object.entries(gradingData.feedback).filter(([e, t]) => t).map(([e, t]) => `<div class=\"feedback-section\"><h3>${e.charAt(0).toUpperCase() + e.slice(1)} Feedback</h3><p>${t.replace(/\\n/g, \"<br>\")}</p></div>`).join(\"\")}${attachmentsHTML ? `<div class=\"attachments\"><h3>📎 File Attachments</h3><div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">${attachmentsHTML}</div></div>` : \"\"}${videoLinksHTML ? `<div class=\"video-links\"><h3>🎥 Video Review Links</h3>${videoLinksHTML}</div>` : \"\"}<p style=\"margin-top:40px;text-align:center;color:#666;font-size:.9rem\">Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p><div id=\"imageModal\" class=\"image-modal\"><span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span><img class=\"modal-content\" id=\"modalImage\"><div class=\"modal-caption\" id=\"modalCaption\"></div></div><script>const attachmentData=${JSON.stringify(gradingData.attachments)};function openImageModal(e,t){const n=document.getElementById(\"imageModal\"),o=document.getElementById(\"modalImage\"),a=document.getElementById(\"modalCaption\");n.classList.add(\"show\"),o.src=e,a.textContent=t,document.body.style.overflow=\"hidden\"}function closeImageModal(){document.getElementById(\"imageModal\").classList.remove(\"show\"),document.body.style.overflow=\"auto\"}document.addEventListener(\"DOMContentLoaded\",function(){document.querySelectorAll(\".clickable-image\").forEach(e=>{e.addEventListener(\"click\",function(){const e=parseInt(this.getAttribute(\"data-index\")),t=attachmentData[e];t&&t.base64Data&&openImageModal(t.base64Data,t.name)})}),document.getElementById(\"imageModal\").addEventListener(\"click\",function(e){e.target===this&&closeImageModal()}),document.addEventListener(\"keydown\",function(e){\"Escape\"===e.key&&closeImageModal()})})</script></body></html>`;\n    return htmlContent;\n  };\n\n  // AI FEEDBACK EXPORT FUNCTIONS\n  const exportAIFeedbackData = () => {\n    var _localGradingData$stu, _loadedRubric$assignm3, _loadedRubric$assignm4, _loadedRubric$assignm5, _loadedRubric$assignm6, _loadedRubric$assignm7;\n    if (!((_localGradingData$stu = localGradingData.student) !== null && _localGradingData$stu !== void 0 && _localGradingData$stu.name)) {\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\n      return;\n    }\n\n    // Calculate scores\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\n\n    // Build criteria performance data\n    const criteriaPerformance = loadedRubric && loadedRubric.criteria ? loadedRubric.criteria.map(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      const selectedLevel = grading !== null && grading !== void 0 && grading.selectedLevel && loadedRubric.rubricLevels ? loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\n      return {\n        name: criterion.name,\n        maxPoints: criterion.maxPoints,\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\n        levelDescription: selectedLevel ? selectedLevel.description : '',\n        customComments: (grading === null || grading === void 0 ? void 0 : grading.customComments) || '',\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\n      };\n    }) : [];\n    const aiGradeData = {\n      student: {\n        firstName: localGradingData.student.name.split(' ')[0] || '',\n        fullName: localGradingData.student.name,\n        id: localGradingData.student.id,\n        email: localGradingData.student.email\n      },\n      course: {\n        code: localGradingData.course.code,\n        name: localGradingData.course.name,\n        instructor: localGradingData.course.instructor,\n        term: localGradingData.course.term\n      },\n      assignment: {\n        title: localGradingData.assignment.name || (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm3 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm3 === void 0 ? void 0 : _loadedRubric$assignm3.title),\n        description: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm4 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm4 === void 0 ? void 0 : _loadedRubric$assignm4.description) || '',\n        totalPoints: maxPoints,\n        passingThreshold: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm5 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm5 === void 0 ? void 0 : _loadedRubric$assignm5.passingThreshold) || 60,\n        dueDate: localGradingData.assignment.dueDate\n      },\n      gradeData: {\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\n        overallPercentage: percentage,\n        letterGrade: getLetterGrade(percentage),\n        passed: percentage >= ((loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm6 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm6 === void 0 ? void 0 : _loadedRubric$assignm6.passingThreshold) || 60),\n        latePenaltyApplied: scoreSummary.penaltyApplied,\n        latePolicyDescription: scoreSummary.latePolicyDescription,\n        criteria: criteriaPerformance\n      },\n      existingFeedback: {\n        general: localGradingData.feedback.general || '',\n        strengths: localGradingData.feedback.strengths || '',\n        improvements: localGradingData.feedback.improvements || ''\n      },\n      metadata: {\n        gradedDate: new Date().toISOString(),\n        rubricUsed: (loadedRubric === null || loadedRubric === void 0 ? void 0 : (_loadedRubric$assignm7 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm7 === void 0 ? void 0 : _loadedRubric$assignm7.title) || 'Custom Rubric',\n        totalCriteria: criteriaPerformance.length,\n        exportedForAI: true\n      }\n    };\n\n    // Export as JSON file\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n    return aiGradeData;\n  };\n  const generateAIFeedbackPrompt = () => {\n    const gradeData = exportAIFeedbackData();\n    if (!gradeData) return;\n    const studentFirstName = gradeData.student.firstName;\n    const courseName = gradeData.course.name || 'this course';\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\n\n    // Determine student level context\n    const getStudentLevel = () => {\n      const courseCode = gradeData.course.code.toUpperCase();\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\n      return 'undergraduate';\n    };\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\n\nSTUDENT GRADE DATA:\n${JSON.stringify(gradeData, null, 2)}\n\nWrite feedback in this exact structure:\n\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\n\n**Key Observations:**\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\n• Their strongest performance area (mention specific criteria that scored highest)\n• One area showing good progress or solid competency  \n• One specific area for improvement with a concrete suggestion\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\n• One forward-looking suggestion for growth in ${courseName}\n\n**Conclusion:**\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\n\n**Final Note:**\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\n\n**WRITING STYLE:**\n- Conversational and personal, like speaking directly to ${studentFirstName}\n- Specific to their actual performance levels and criteria\n- Encouraging but honest\n- Professional yet warm\n- Use their actual criterion names and performance levels from the data\n- Keep each bullet point to 1-2 sentences maximum\n\n**Context:**\n- Student: ${gradeData.student.fullName}\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\n- Assignment: ${assignmentTitle}\n- Instructor: ${gradeData.course.instructor}\n\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\n\n    // Export prompt as text file\n    const promptBlob = new Blob([prompt], {\n      type: 'text/plain'\n    });\n    const url = URL.createObjectURL(promptBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n    console.log('AI Feedback Prompt Generated:', prompt);\n    return prompt;\n  };\n  const exportForAIFeedback = () => {\n    try {\n      // First export the grade data\n      const gradeData = exportAIFeedbackData();\n      if (!gradeData) return;\n\n      // Then generate and export the prompt\n      setTimeout(() => {\n        generateAIFeedbackPrompt();\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\n      }, 500); // Small delay to ensure first download completes\n    } catch (error) {\n      console.error('Error exporting AI feedback data:', error);\n      alert('Error exporting AI feedback data. Please check the console for details.');\n    }\n  };\n\n  // FILE UPLOAD HANDLERS\n  const handleFileUpload = event => {\n    const files = Array.from(event.target.files);\n    const processFiles = files.map(file => {\n      return new Promise(resolve => {\n        const newAttachment = {\n          id: Date.now() + Math.random(),\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          file: file\n        };\n\n        // If it's an image, convert to base64 for display\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            newAttachment.base64Data = e.target.result;\n            resolve(newAttachment);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          resolve(newAttachment);\n        }\n      });\n    });\n    Promise.all(processFiles).then(newAttachments => {\n      setGradingData(prevData => ({\n        ...prevData,\n        attachments: [...prevData.attachments, ...newAttachments]\n      }));\n    });\n  };\n  const removeAttachment = attachmentId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\n    }));\n  };\n\n  // VIDEO LINK HANDLERS\n  const addVideoLink = () => {\n    if (!videoLinkInput.trim()) return;\n    const newVideoLink = {\n      id: Date.now(),\n      url: videoLinkInput,\n      title: videoTitle || 'Video Link',\n      addedDate: new Date().toLocaleDateString()\n    };\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: [...prevData.videoLinks, newVideoLink]\n    }));\n    setVideoLinkInput('');\n    setVideoTitle('');\n  };\n  const removeVideoLink = linkId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\n    }));\n  };\n\n  // RUBRIC LOADING\n  const handleRubricUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const rubricData = JSON.parse(e.target.result);\n\n        // Validate required structure\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\n          return;\n        }\n        setLoadedRubric(rubricData);\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\n\n        // Reset rubric grading when new rubric is loaded\n        setGradingData(prevData => ({\n          ...prevData,\n          rubricGrading: {}\n        }));\n      } catch (error) {\n        alert('Error loading rubric: Invalid JSON format');\n        console.error('Rubric loading error:', error);\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  // Enhanced total score calculation with grade percentage\n  const getTotalScore = () => {\n    const score = calculateTotalScore();\n    const percentage = loadedRubric ? (score.finalScore / loadedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\n    return {\n      ...score,\n      percentage\n    };\n  };\n\n  // EXPORT FUNCTIONS\n  const exportToHTML = () => {\n    const htmlContent = generateStudentReportHTML();\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportToPDF = () => {\n    const html = generateStudentReportHTML();\n    const printWindow = window.open('', '_blank');\n    printWindow.document.open();\n    printWindow.document.write(html);\n    printWindow.document.close();\n    printWindow.focus();\n    printWindow.print();\n  };\n  const exportGradingData = () => {\n    var _gradingData$student$;\n    const exportData = {\n      ...gradingData,\n      rubric: loadedRubric,\n      totalScore: getTotalScore(),\n      exportDate: new Date().toISOString()\n    };\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    const exportFileDefaultName = `grading-${((_gradingData$student$ = gradingData.student.name) === null || _gradingData$student$ === void 0 ? void 0 : _gradingData$student$.replace(/\\s+/g, '-')) || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  };\n\n  // GRADING SESSION HANDLERS\n  const handleNextStudent = () => {\n    if (!gradingSession || !gradingSession.students) return;\n    const success = nextStudentInSession();\n    if (success) {\n      // Clear current grading data and load next student's draft if available\n      const nextStudent = gradingSession.students[gradingSession.currentIndex];\n      if (!nextStudent) return;\n      const draft = loadDraft(nextStudent.id);\n      if (draft) {\n        setLocalGradingData(draft);\n      } else {\n        // Initialize fresh data for next student\n        setLocalGradingData({\n          student: nextStudent,\n          course: gradingData.course,\n          assignment: gradingData.assignment,\n          feedback: {\n            general: '',\n            strengths: '',\n            improvements: ''\n          },\n          attachments: [],\n          videoLinks: [],\n          latePolicy: {\n            level: 'none',\n            penaltyApplied: false\n          },\n          metadata: {\n            gradedBy: '',\n            gradedDate: '',\n            aiAssisted: false,\n            rubricIntegrated: false\n          },\n          rubricGrading: {}\n        });\n      }\n    }\n  };\n  const handlePreviousStudent = () => {\n    if (!gradingSession || !gradingSession.students) return;\n    const success = previousStudentInSession();\n    if (success) {\n      const prevStudent = gradingSession.students[gradingSession.currentIndex];\n      if (!prevStudent) return;\n      const draft = loadDraft(prevStudent.id);\n      if (draft) {\n        setLocalGradingData(draft);\n      } else {\n        setLocalGradingData({\n          student: prevStudent,\n          course: gradingData.course,\n          assignment: gradingData.assignment,\n          feedback: {\n            general: '',\n            strengths: '',\n            improvements: ''\n          },\n          attachments: [],\n          videoLinks: [],\n          latePolicy: {\n            level: 'none',\n            penaltyApplied: false\n          },\n          metadata: {\n            gradedBy: '',\n            gradedDate: '',\n            aiAssisted: false,\n            rubricIntegrated: false\n          },\n          rubricGrading: {}\n        });\n      }\n    }\n  };\n\n  // SAVING HANDLERS\n  const handleSaveDraft = () => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) {\n      alert('No student selected for saving draft');\n      return;\n    }\n    saveDraft(currentStudent.id, gradingData);\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\n  };\n  const handleNextStudentAsDraft = () => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('💾 Saving as draft for student:', currentStudent.name);\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('draft');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Draft saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const handleNextStudentAsFinal = () => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('✅ Finalizing grade for student:', currentStudent.name);\n      const finalGradeData = {\n        ...localGradingData,\n        totalScore: getTotalScore(),\n        metadata: {\n          ...localGradingData.metadata,\n          gradedDate: new Date().toISOString(),\n          rubricIntegrated: !!loadedRubric\n        }\n      };\n      saveFinalGrade(currentStudent.id, finalGradeData);\n    }\n    const success = nextStudentInSession('final');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const resetGradingForm = () => {\n    const initialRubricGrading = {};\n    if (loadedRubric) {\n      loadedRubric.criteria.forEach(criterion => {\n        initialRubricGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n    }\n    setLocalGradingData(prev => {\n      var _sharedCourseDetails$, _sharedCourseDetails$2;\n      return {\n        ...prev,\n        course: (_sharedCourseDetails$ = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) !== null && _sharedCourseDetails$ !== void 0 ? _sharedCourseDetails$ : prev.course,\n        assignment: (_sharedCourseDetails$2 = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) !== null && _sharedCourseDetails$2 !== void 0 ? _sharedCourseDetails$2 : prev.assignment,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: initialRubricGrading\n      };\n    });\n  };\n\n  // NEW: No Rubric UI Component\n  const NoRubricUI = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '60vh',\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\n      borderRadius: '1rem',\n      border: '2px dashed #f59e0b',\n      padding: '3rem',\n      margin: '2rem 0',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n      size: 80,\n      style: {\n        color: '#d97706',\n        marginBottom: '1.5rem',\n        filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 943,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '2rem',\n        fontWeight: '700',\n        color: '#92400e',\n        marginBottom: '1rem',\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\n      },\n      children: \"No Rubric Loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 952,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '1.1rem',\n        color: '#a16207',\n        marginBottom: '2rem',\n        maxWidth: '600px',\n        lineHeight: '1.6'\n      },\n      children: \"A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 962,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '1rem',\n        flexWrap: 'wrap',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab('rubric-creator'),\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1004,\n          columnNumber: 11\n        }, this), \"Create New Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 978,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          var _rubricInputRef$curre;\n          return (_rubricInputRef$curre = rubricInputRef.current) === null || _rubricInputRef$curre === void 0 ? void 0 : _rubricInputRef$curre.click();\n        },\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1034,\n          columnNumber: 11\n        }, this), \"Load Existing Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1008,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 972,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem',\n        padding: '1rem',\n        background: 'rgba(255, 255, 255, 0.7)',\n        borderRadius: '0.5rem',\n        fontSize: '0.9rem',\n        color: '#78350f',\n        maxWidth: '500px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uD83D\\uDCA1 Tip:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1048,\n        columnNumber: 9\n      }, this), \" You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1039,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: rubricInputRef,\n      type: \"file\",\n      accept: \".json\",\n      style: {\n        display: 'none'\n      },\n      onChange: handleRubricUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1051,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 930,\n    columnNumber: 5\n  }, this);\n\n  // If no rubric is loaded, show the No Rubric UI\n  if (!loadedRubric) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        maxWidth: '1200px',\n        margin: '0 auto',\n        fontFamily: 'system-ui, -apple-system, sans-serif'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem',\n          marginBottom: '2rem',\n          padding: '1rem',\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n          borderRadius: '0.75rem',\n          border: '1px solid #d1d5db'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          size: 32,\n          style: {\n            color: '#6b7280'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1080,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              fontSize: '2rem',\n              fontWeight: '700',\n              color: '#1f2937',\n              margin: 0\n            },\n            children: \"\\uD83C\\uDFAF Grading Tool\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1082,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#6b7280',\n              margin: 0,\n              fontSize: '1rem'\n            },\n            children: \"Assessment and feedback management system\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1081,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1070,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NoRubricUI, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1064,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Regular grading interface when rubric is loaded\n  const totalScore = getTotalScore();\n  const gradeStatus = currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? getGradeStatus(currentStudent.id) : 'none';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '2rem',\n      maxWidth: '1200px',\n      margin: '0 auto',\n      fontFamily: 'system-ui, -apple-system, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '1rem',\n        marginBottom: '2rem',\n        padding: '1rem',\n        background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n        borderRadius: '0.75rem',\n        border: '1px solid #d1d5db'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Settings, {\n        size: 32,\n        style: {\n          color: '#6b7280'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontSize: '2rem',\n            fontWeight: '700',\n            color: '#1f2937',\n            margin: 0\n          },\n          children: \"\\uD83C\\uDFAF Grading Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#6b7280',\n            margin: 0,\n            fontSize: '1rem'\n          },\n          children: \"Assessment and feedback management system\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '0.75rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportToHTML,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            background: '#16a34a',\n            color: 'white',\n            padding: '0.5rem 1rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FileDown, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1162,\n            columnNumber: 13\n          }, this), \"Export HTML\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: exportToPDF,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            backgroundColor: '#dc2626',\n            color: '#ffffff',\n            padding: '0.5rem 1rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1181,\n            columnNumber: 13\n          }, this), \"Export PDF\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportForAIFeedback,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            background: '#7c3aed',\n            color: 'white',\n            padding: '0.5rem 1rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem'\n          },\n          title: \"Export grade data and AI prompt for generating personalized feedback\",\n          children: [/*#__PURE__*/_jsxDEV(Bot, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1200,\n            columnNumber: 13\n          }, this), \"Export for AI Feedback\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: rubricInputRef,\n      type: \"file\",\n      accept: \".json\",\n      style: {\n        display: 'none'\n      },\n      onChange: handleRubricUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1206,\n      columnNumber: 7\n    }, this), currentStudent && gradingSession && gradingSession.students && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\n        border: '1px solid #0284c7',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '40px',\n              height: '40px',\n              background: '#0284c7',\n              borderRadius: '50%',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              color: 'white',\n              fontSize: '1.2rem',\n              fontWeight: 'bold'\n            },\n            children: gradingSession.currentIndex + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: 0,\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#0c4a6e'\n              },\n              children: currentStudent.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: 0,\n                color: '#0369a1',\n                fontSize: '0.875rem'\n              },\n              children: [\"Student ID: \", currentStudent.id, \" | Email: \", currentStudent.email]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1242,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1238,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              color: '#0369a1'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.25rem',\n                fontWeight: 'bold'\n              },\n              children: [gradingSession.currentIndex + 1, \"/\", gradingSession.students.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.75rem'\n              },\n              children: \"Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1253,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePreviousStudent,\n              disabled: gradingSession.currentIndex === 0,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                background: gradingSession.currentIndex === 0 ? '#94a3b8' : '#3b82f6',\n                color: 'white',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: '500'\n              },\n              children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1274,\n                columnNumber: 19\n              }, this), \"Previous\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1257,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                updateGradingSession({\n                  active: false\n                });\n                setActiveTab('class-manager');\n              },\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                background: '#f59e0b',\n                color: 'white',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: '500'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Pause, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1297,\n                columnNumber: 19\n              }, this), \"Pause Session\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNextStudent,\n              disabled: gradingSession.currentIndex >= gradingSession.students.length - 1,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                background: gradingSession.currentIndex >= gradingSession.students.length - 1 ? '#94a3b8' : '#10b981',\n                color: 'white',\n                padding: '0.75rem 1rem',\n                borderRadius: '0.5rem',\n                border: 'none',\n                cursor: gradingSession.currentIndex >= gradingSession.students.length - 1 ? 'not-allowed' : 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: '500'\n              },\n              children: gradingSession.currentIndex >= gradingSession.students.length - 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1320,\n                  columnNumber: 23\n                }, this), \"Complete Session\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\"Next\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1326,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1301,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1256,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1222,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          background: '#e0f2fe',\n          borderRadius: '0.5rem',\n          height: '8px',\n          overflow: 'hidden'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: `${(gradingSession.currentIndex + 1) / gradingSession.students.length * 100}%`,\n            background: 'linear-gradient(90deg, #0284c7 0%, #0ea5e9 100%)',\n            height: '100%',\n            transition: 'width 0.5s ease'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1342,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1335,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1215,\n      columnNumber: 9\n    }, this), loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\n        border: '1px solid #93c5fd',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          color: '#1e40af',\n          margin: '0 0 0.5rem 0',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1370,\n          columnNumber: 13\n        }, this), \"Current Rubric: \", loadedRubric.assignmentInfo.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1361,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#1e40af',\n          margin: 0,\n          fontSize: '0.9rem'\n        },\n        children: loadedRubric.assignmentInfo.description || 'No description provided'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1373,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '2rem',\n          marginTop: '0.75rem',\n          fontSize: '0.875rem',\n          color: '#1d4ed8'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Weight:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1383,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm8 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm8 === void 0 ? void 0 : _loadedRubric$assignm8.weight) || 0, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1383,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Points:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1384,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm9 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm9 === void 0 ? void 0 : _loadedRubric$assignm9.totalPoints) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1384,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Passing:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1385,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$assignm0 = loadedRubric.assignmentInfo) === null || _loadedRubric$assignm0 === void 0 ? void 0 : _loadedRubric$assignm0.passingThreshold) || 0, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1385,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Criteria:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1386,\n            columnNumber: 19\n          }, this), \" \", ((_loadedRubric$criteri = loadedRubric.criteria) === null || _loadedRubric$criteri === void 0 ? void 0 : _loadedRubric$criteri.length) || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1386,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1376,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1354,\n      columnNumber: 9\n    }, this), gradingSession && gradingSession.students && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\n        border: '1px solid #6ee7b7',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#047857',\n              margin: '0 0 0.5rem 0',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1411,\n              columnNumber: 17\n            }, this), \"Batch Grading Session Active\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1402,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#047857',\n              margin: 0,\n              fontSize: '0.9rem'\n            },\n            children: [\"Student \", gradingSession.currentIndex + 1, \" of \", ((_gradingSession$stude = gradingSession.students) === null || _gradingSession$stude === void 0 ? void 0 : _gradingSession$stude.length) || 0, \":\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\" \", ((_gradingSession$stude2 = gradingSession.students[gradingSession.currentIndex]) === null || _gradingSession$stude2 === void 0 ? void 0 : _gradingSession$stude2.name) || 'Unknown']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1416,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1414,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviousStudent,\n            disabled: gradingSession.currentIndex === 0,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              padding: '0.5rem 1rem',\n              background: gradingSession.currentIndex === 0 ? '#f3f4f6' : '#10b981',\n              color: gradingSession.currentIndex === 0 ? '#9ca3af' : 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\n              fontWeight: '500'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SkipBack, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1438,\n              columnNumber: 17\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1421,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudent,\n            disabled: gradingSession.currentIndex >= (((_gradingSession$stude3 = gradingSession.students) === null || _gradingSession$stude3 === void 0 ? void 0 : _gradingSession$stude3.length) || 0) - 1,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              padding: '0.5rem 1rem',\n              background: gradingSession.currentIndex >= (((_gradingSession$stude4 = gradingSession.students) === null || _gradingSession$stude4 === void 0 ? void 0 : _gradingSession$stude4.length) || 0) - 1 ? '#f3f4f6' : '#10b981',\n              color: gradingSession.currentIndex >= (((_gradingSession$stude5 = gradingSession.students) === null || _gradingSession$stude5 === void 0 ? void 0 : _gradingSession$stude5.length) || 0) - 1 ? '#9ca3af' : 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              cursor: gradingSession.currentIndex >= (((_gradingSession$stude6 = gradingSession.students) === null || _gradingSession$stude6 === void 0 ? void 0 : _gradingSession$stude6.length) || 0) - 1 ? 'not-allowed' : 'pointer',\n              fontWeight: '500'\n            },\n            children: [\"Next\", /*#__PURE__*/_jsxDEV(SkipForward, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1460,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1442,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1400,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1393,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDC64 Student Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1469,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Student Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1480,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.student.name,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter student name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1489,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1479,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.student.id,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  id: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1517,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1507,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1536,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: gradingData.student.email,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                student: {\n                  ...prevData.student,\n                  email: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Enter email address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1545,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1535,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1478,\n          columnNumber: 11\n        }, this), gradeStatus !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\n            border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            color: gradeStatus === 'final' ? '#047857' : '#a16207'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1574,\n            columnNumber: 15\n          }, this), gradeStatus === 'final' && ' - This student has been fully graded', gradeStatus === 'draft' && ' - You can continue editing this draft']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1565,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1472,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem',\n          marginBottom: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            margin: 0,\n            color: '#374151'\n          },\n          children: \"\\uD83C\\uDFEB Course Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1587,\n          columnNumber: 11\n        }, this), classList && classList.courseMetadata && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: pullCourseDataFromClassList,\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.25rem',\n            padding: '0.375rem 0.75rem',\n            background: '#3b82f6',\n            color: 'white',\n            border: 'none',\n            borderRadius: '0.375rem',\n            fontSize: '0.75rem',\n            cursor: 'pointer',\n            fontWeight: '500'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1607,\n            columnNumber: 15\n          }, this), \"Pull Course Data\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1591,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1586,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Course Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1621,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.course.code,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                course: {\n                  ...prevData.course,\n                  code: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"e.g., CS 101\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1630,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1620,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Course Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1649,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.course.name,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                course: {\n                  ...prevData.course,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"e.g., Introduction to Computer Science\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1658,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1648,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Instructor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1677,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.course.instructor,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                course: {\n                  ...prevData.course,\n                  instructor: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Instructor name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1686,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1676,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Term\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1705,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.course.term,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                course: {\n                  ...prevData.course,\n                  term: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"e.g., Fall 2024\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1714,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1704,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1619,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1613,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1585,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCB Assignment Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1737,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Assignment Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1748,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: gradingData.assignment.name,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              placeholder: \"Assignment title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1757,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1747,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Due Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1776,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: gradingData.assignment.dueDate,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  dueDate: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1785,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1775,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Max Points\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1803,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: gradingData.assignment.maxPoints,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                assignment: {\n                  ...prevData.assignment,\n                  maxPoints: parseInt(e.target.value) || 100\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem'\n              },\n              min: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1812,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1802,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1746,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1740,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1736,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\u23F0 Late Policy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1835,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            flexWrap: 'wrap'\n          },\n          children: Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.75rem 1rem',\n              background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\n              color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\n              borderRadius: '0.5rem',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '500',\n              border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\n              transition: 'all 0.2s ease'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"latePolicy\",\n              value: levelKey,\n              checked: gradingData.latePolicy.level === levelKey,\n              onChange: e => updateLatePolicy(e.target.value),\n              style: {\n                margin: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1863,\n              columnNumber: 17\n            }, this), levelData.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '0.75rem',\n                opacity: 0.8\n              },\n              children: [\"(\", Math.round(levelData.multiplier * 100), \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1872,\n              columnNumber: 17\n            }, this)]\n          }, levelKey, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1846,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1844,\n          columnNumber: 11\n        }, this), gradingData.latePolicy.level !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: '#fef3c7',\n            border: '1px solid #fde047',\n            borderRadius: '0.5rem',\n            fontSize: '0.875rem',\n            color: '#a16207'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Late Policy Applied:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1889,\n            columnNumber: 15\n          }, this), \" \", (_levels$gradingData$l = (currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]) === null || _levels$gradingData$l === void 0 ? void 0 : _levels$gradingData$l.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1880,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1838,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1834,\n      columnNumber: 7\n    }, this), loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n        border: '1px solid #bbf7d0',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'flex-start',\n          marginBottom: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.25rem',\n              fontWeight: '700',\n              color: '#15803d',\n              marginBottom: '0.5rem'\n            },\n            children: \"\\uD83D\\uDCCB Active Assignment Rubric\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1907,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#16a34a',\n              fontWeight: '600',\n              fontSize: '1.1rem'\n            },\n            children: loadedRubric.assignmentInfo.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1910,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '0.875rem',\n              color: '#059669'\n            },\n            children: renderFormattedContent(loadedRubric.assignmentInfo.description)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1913,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1906,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'right'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              color: '#059669'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0.25rem 0'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Weight:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1920,\n                columnNumber: 19\n              }, this), \" \", loadedRubric.assignmentInfo.weight, \"% of Final Grade\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1919,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0.25rem 0'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Passing:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1923,\n                columnNumber: 19\n              }, this), \" \", loadedRubric.assignmentInfo.passingThreshold, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1922,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0.25rem 0'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Total Points:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1926,\n                columnNumber: 19\n              }, this), \" \", loadedRubric.assignmentInfo.totalPoints]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1925,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1918,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1917,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1905,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '1.5rem'\n        },\n        children: loadedRubric.criteria.map(criterion => {\n          var _loadedRubric$rubricL, _criterion$levels$cur, _criterion$levels$cur2;\n          const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\n          const showComments = showRubricComments[criterion.id];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'white',\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              padding: '1.25rem',\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start',\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    fontSize: '1.125rem',\n                    fontWeight: '600',\n                    color: '#374151'\n                  },\n                  children: [criterion.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: '#3b82f6',\n                      marginLeft: '0.5rem'\n                    },\n                    children: [\"(\", criterion.maxPoints, \" pts)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1950,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1948,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    color: '#6b7280',\n                    marginTop: '0.25rem'\n                  },\n                  children: renderFormattedContent(criterion.description)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1954,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1947,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowRubricComments(prev => ({\n                  ...prev,\n                  [criterion.id]: !prev[criterion.id]\n                })),\n                style: {\n                  color: '#3b82f6',\n                  background: 'none',\n                  border: 'none',\n                  fontSize: '0.875rem',\n                  textDecoration: 'underline',\n                  cursor: 'pointer',\n                  marginLeft: '1rem'\n                },\n                children: [showComments ? 'Hide' : 'Show', \" Level Details\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1958,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1946,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n                gap: '0.5rem',\n                marginBottom: '1rem'\n              },\n              children: loadedRubric.rubricLevels.map(level => {\n                const isSelected = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) === level.level;\n                const points = Math.round(criterion.maxPoints * level.multiplier);\n                return /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => updateRubricGrading(criterion.id, level.level),\n                  style: {\n                    padding: '0.75rem',\n                    borderRadius: '0.5rem',\n                    border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\n                    fontSize: '0.875rem',\n                    fontWeight: '500',\n                    cursor: 'pointer',\n                    transition: 'all 0.2s ease',\n                    backgroundColor: isSelected ? level.color : 'white',\n                    color: isSelected ? 'white' : '#374151',\n                    transform: isSelected ? 'scale(1.05)' : 'none',\n                    textAlign: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: '600'\n                    },\n                    children: level.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2006,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: '0.75rem',\n                      marginTop: '0.25rem'\n                    },\n                    children: [level.level === 'incomplete' ? '0' : points, \" pts\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2007,\n                    columnNumber: 27\n                  }, this)]\n                }, level.level, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1989,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1978,\n              columnNumber: 19\n            }, this), showComments && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: '#f9fafb',\n                borderRadius: '0.5rem',\n                padding: '1rem',\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  fontWeight: '600',\n                  color: '#374151',\n                  marginBottom: '0.75rem'\n                },\n                children: \"Level Descriptions:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2023,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n                  gap: '0.75rem'\n                },\n                children: loadedRubric.rubricLevels.map(level => {\n                  var _criterion$levels$lev, _criterion$levels$lev2;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      background: 'white',\n                      borderRadius: '0.25rem',\n                      border: '1px solid #d1d5db',\n                      borderLeft: `4px solid ${level.color}`,\n                      padding: '0.75rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontWeight: '500',\n                        fontSize: '0.875rem',\n                        color: level.color\n                      },\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2042,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.75rem',\n                        color: '#6b7280',\n                        marginBottom: '0.5rem'\n                      },\n                      children: [(_criterion$levels$lev = criterion.levels[level.level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange, \" pts\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2045,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.75rem',\n                        color: '#374151'\n                      },\n                      children: renderFormattedContent((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2048,\n                      columnNumber: 29\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2032,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2026,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2017,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Additional Comments:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2059,\n                columnNumber: 21\n              }, this), criterion.feedbackLibrary && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '0.5rem',\n                  marginBottom: '0.75rem',\n                  flexWrap: 'wrap'\n                },\n                children: Object.entries(criterion.feedbackLibrary).map(([category, comments]) => /*#__PURE__*/_jsxDEV(\"select\", {\n                  onChange: e => {\n                    if (e.target.value) {\n                      addCriterionFeedback(criterion.id, e.target.value);\n                      e.target.value = '';\n                    }\n                  },\n                  defaultValue: \"\",\n                  style: {\n                    padding: '0.5rem',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.25rem',\n                    fontSize: '0.75rem',\n                    cursor: 'pointer'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: [\"Add \", category, \"...\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2090,\n                    columnNumber: 29\n                  }, this), comments.map((comment, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: comment,\n                    children: renderFormattedContent(comment)\n                  }, idx, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2092,\n                    columnNumber: 31\n                  }, this))]\n                }, category, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2073,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2071,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '',\n                onChange: e => updateRubricGrading(criterion.id, currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel, e.target.value),\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '80px'\n                },\n                rows: \"3\",\n                placeholder: \"Add specific feedback for this criterion...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2099,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2058,\n              columnNumber: 19\n            }, this), (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '0.75rem',\n                padding: '0.75rem',\n                background: '#eff6ff',\n                borderRadius: '0.25rem',\n                border: '1px solid #bfdbfe'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Selected Level:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2126,\n                  columnNumber: 25\n                }, this), \" \", (_loadedRubric$rubricL = loadedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)) === null || _loadedRubric$rubricL === void 0 ? void 0 : _loadedRubric$rubricL.name, ' ', \"(\", (_criterion$levels$cur = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur === void 0 ? void 0 : _criterion$levels$cur.pointRange, \" pts)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2125,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#374151',\n                  marginTop: '0.25rem'\n                },\n                children: renderFormattedContent((_criterion$levels$cur2 = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur2 === void 0 ? void 0 : _criterion$levels$cur2.description)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2129,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2118,\n              columnNumber: 21\n            }, this)]\n          }, criterion.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1939,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1933,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1.5rem',\n          background: 'white',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.5rem',\n          padding: '1rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"Rubric Score Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#6b7280'\n              },\n              children: \"Based on selected levels across all criteria\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2152,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#3b82f6'\n              },\n              children: [Math.round(scoreSummary.finalScore * 10) / 10, \"/\", loadedRubric.assignmentInfo.totalPoints]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.125rem',\n                color: '#6b7280'\n              },\n              children: [\"(\", Math.round(scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 1000) / 10, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2160,\n              columnNumber: 17\n            }, this), scoreSummary.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#dc2626',\n                marginTop: '0.25rem'\n              },\n              children: [\"Raw: \", Math.round(scoreSummary.rawScore * 10) / 10, \" (Late Penalty Applied)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2164,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 100 >= loadedRubric.assignmentInfo.passingThreshold ? '#16a34a' : '#dc2626'\n              },\n              children: scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1) * 100 >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2168,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2156,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2147,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2140,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1898,\n      columnNumber: 9\n    }, this), loadedRubric && currentStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\n        border: '2px solid #10b981',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          color: '#047857',\n          marginBottom: '1rem'\n        },\n        children: \"Ready to move to the next student?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2193,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#065f46',\n          marginBottom: '1.5rem',\n          fontSize: '0.875rem'\n        },\n        children: \"Choose how to save the current grading before proceeding.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2196,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '1rem',\n          justifyContent: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNextStudentAsDraft,\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\n            color: 'white',\n            padding: '0.75rem 1.5rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem',\n            fontWeight: '600',\n            boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\n            transition: 'all 0.2s ease'\n          },\n          onMouseOver: e => {\n            e.target.style.transform = 'translateY(-2px)';\n            e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n          },\n          onMouseOut: e => {\n            e.target.style.transform = 'translateY(0)';\n            e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '1.1rem'\n            },\n            children: \"\\uD83D\\uDCDD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2228,\n            columnNumber: 15\n          }, this), \"Save & Grade Next Student\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2202,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNextStudentAsFinal,\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n            color: 'white',\n            padding: '0.75rem 1.5rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem',\n            fontWeight: '600',\n            boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n            transition: 'all 0.2s ease'\n          },\n          onMouseOver: e => {\n            e.target.style.transform = 'translateY(-2px)';\n            e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\n          },\n          onMouseOut: e => {\n            e.target.style.transform = 'translateY(0)';\n            e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '1.1rem'\n            },\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2259,\n            columnNumber: 15\n          }, this), \"Finalize & Grade Next Student\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2200,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1rem',\n          padding: '0.75rem',\n          background: 'rgba(255, 255, 255, 0.6)',\n          borderRadius: '0.375rem',\n          fontSize: '0.75rem',\n          color: '#065f46'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Draft:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2272,\n          columnNumber: 13\n        }, this), \" Save progress, can edit later \\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Finalize:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2272,\n          columnNumber: 69\n        }, this), \" Complete grading, ready for student/LMS\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2264,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2185,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n        border: '1px solid #bbf7d0',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: '1.5rem',\n          fontWeight: '700',\n          color: '#15803d',\n          marginBottom: '1rem'\n        },\n        children: \"\\uD83D\\uDCCA Final Score\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '3rem',\n          fontWeight: '700',\n          color: '#16a34a',\n          marginBottom: '1rem'\n        },\n        children: [Math.round(scoreSummary.finalScore * 10) / 10, /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '1.5rem',\n            color: '#6b7280'\n          },\n          children: [\"/ \", loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '1.25rem',\n          color: '#6b7280',\n          marginBottom: '1rem'\n        },\n        children: [\"(\", Math.round(scoreSummary.finalScore / (loadedRubric ? loadedRubric.assignmentInfo.totalPoints || 1 : gradingData.assignment.maxPoints || 1) * 1000) / 10, \"%)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          gap: '1rem',\n          flexWrap: 'wrap'\n        },\n        children: [loadedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            background: '#dcfce7',\n            color: '#15803d',\n            padding: '0.25rem 0.75rem',\n            borderRadius: '1rem'\n          },\n          children: \"\\uD83D\\uDCCB Rubric Assessment Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2300,\n          columnNumber: 13\n        }, this), scoreSummary.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            background: '#fee2e2',\n            color: '#dc2626',\n            padding: '0.25rem 0.75rem',\n            borderRadius: '1rem'\n          },\n          children: \"\\u23F0 Late Penalty Applied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2311,\n          columnNumber: 13\n        }, this), gradingSession && gradingSession.students && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.875rem',\n            background: '#dbeafe',\n            color: '#2563eb',\n            padding: '0.25rem 0.75rem',\n            borderRadius: '1rem'\n          },\n          children: \"\\uD83D\\uDC65 Batch Session Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2322,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2278,\n      columnNumber: 7\n    }, this), currentStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\n        border: '1px solid #f59e0b',\n        borderRadius: '0.75rem',\n        padding: '1.5rem',\n        marginBottom: '2rem',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          color: '#92400e',\n          marginBottom: '0.75rem'\n        },\n        children: \"\\uD83D\\uDCBE Save Your Progress\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2345,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#a16207',\n          marginBottom: '1.5rem',\n          fontSize: '0.875rem'\n        },\n        children: \"Save your current grading progress as a draft. You can return to complete it later.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2348,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n            saveDraft(currentStudent.id, localGradingData);\n            // Show success feedback\n            const button = document.activeElement;\n            const originalText = button.innerHTML;\n            const originalBg = button.style.background;\n            button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\n            button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\n            setTimeout(() => {\n              button.innerHTML = originalText;\n              button.style.background = originalBg;\n            }, 2000);\n          }\n        },\n        disabled: !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id),\n        style: {\n          display: 'inline-flex',\n          alignItems: 'center',\n          gap: '0.75rem',\n          background: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\n          color: 'white',\n          padding: '1rem 2rem',\n          borderRadius: '0.75rem',\n          border: 'none',\n          cursor: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'pointer' : 'not-allowed',\n          fontSize: '1rem',\n          fontWeight: '600',\n          boxShadow: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\n          transform: 'translateY(0)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n            e.currentTarget.style.transform = 'translateY(-2px)';\n            e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\n          }\n        },\n        onMouseOut: e => {\n          if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\n          }\n        },\n        title: currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? 'Save current grading progress' : 'No student selected to save',\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2398,\n          columnNumber: 13\n        }, this), \"Save Draft\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2351,\n        columnNumber: 11\n      }, this), !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id) && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '0.75rem',\n          fontSize: '0.75rem',\n          color: '#6b7280'\n        },\n        children: \"Select a student from the Class Manager to enable draft saving\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2402,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2337,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCDD General Feedback\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr',\n            gap: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              },\n              children: \"Overall Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: gradingData.feedback.general,\n              onChange: e => setGradingData(prevData => ({\n                ...prevData,\n                feedback: {\n                  ...prevData.feedback,\n                  general: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                resize: 'none',\n                minHeight: '100px'\n              },\n              rows: \"4\",\n              placeholder: \"General comments about the assignment...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2431,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '1fr 1fr',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Strengths\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2453,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: gradingData.feedback.strengths,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  feedback: {\n                    ...prevData.feedback,\n                    strengths: e.target.value\n                  }\n                })),\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '100px'\n                },\n                rows: \"4\",\n                placeholder: \"What the student did well...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2462,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2452,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Areas for Improvement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2483,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: gradingData.feedback.improvements,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  feedback: {\n                    ...prevData.feedback,\n                    improvements: e.target.value\n                  }\n                })),\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '100px'\n                },\n                rows: \"4\",\n                placeholder: \"Suggestions for improvement...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2492,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2451,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2420,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2410,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83D\\uDCCE File Attachments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2518,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '2px dashed #d1d5db',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          multiple: true,\n          onChange: e => handleFileUpload(e.target.files),\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2527,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            background: '#3b82f6',\n            color: 'white',\n            padding: '0.75rem 1.5rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            margin: '0 auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2549,\n            columnNumber: 25\n          }, this), \"Add Files\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2534,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#6b7280',\n            marginTop: '0.5rem',\n            fontSize: '0.875rem'\n          },\n          children: \"Upload images, documents, or other files relevant to the assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2552,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2521,\n        columnNumber: 21\n      }, this), gradingData.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            fontWeight: '600',\n            color: '#374151',\n            marginBottom: '0.75rem'\n          },\n          children: [\"Uploaded Files (\", gradingData.attachments.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2559,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: gradingData.attachments.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              overflow: 'hidden',\n              background: 'white'\n            },\n            children: [file.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'relative'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: file.base64Data || URL.createObjectURL(file.file),\n                alt: file.name,\n                style: {\n                  width: '100%',\n                  height: '150px',\n                  objectFit: 'cover'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2576,\n                columnNumber: 35\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeAttachment(file.id),\n                style: {\n                  position: 'absolute',\n                  top: '0.5rem',\n                  right: '0.5rem',\n                  background: '#dc2626',\n                  color: 'white',\n                  borderRadius: '50%',\n                  width: '24px',\n                  height: '24px',\n                  border: 'none',\n                  cursor: 'pointer',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 12\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2603,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2585,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2575,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(FileText, {\n                size: 40,\n                style: {\n                  color: '#6b7280',\n                  margin: '0 auto 0.5rem auto',\n                  display: 'block'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2608,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2607,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '0.75rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontWeight: '500',\n                  fontSize: '0.875rem',\n                  marginBottom: '0.25rem'\n                },\n                children: file.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2612,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '0.75rem',\n                  color: '#6b7280'\n                },\n                children: [(file.size / 1024).toFixed(1), \" KB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2615,\n                columnNumber: 33\n              }, this), !file.type.startsWith('image/') && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeAttachment(file.id),\n                style: {\n                  marginTop: '0.5rem',\n                  color: '#dc2626',\n                  background: 'none',\n                  border: 'none',\n                  fontSize: '0.75rem',\n                  cursor: 'pointer'\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2619,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2611,\n              columnNumber: 31\n            }, this)]\n          }, file.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2568,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2562,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2558,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2517,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '1rem',\n          color: '#374151'\n        },\n        children: \"\\uD83C\\uDFA5 Video Links\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2643,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n          border: '1px solid #d1d5db',\n          borderRadius: '0.75rem',\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            value: videoLinkInput,\n            onChange: e => setVideoLinkInput(e.target.value),\n            placeholder: \"Enter video URL (YouTube, Vimeo, etc.)\",\n            style: {\n              flex: 1,\n              padding: '0.75rem',\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2653,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: videoTitle,\n            onChange: e => setVideoTitle(e.target.value),\n            placeholder: \"Video title (optional)\",\n            style: {\n              width: '200px',\n              padding: '0.75rem',\n              border: '1px solid #d1d5db',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2666,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addVideoLink,\n            disabled: !videoLinkInput.trim(),\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.75rem 1rem',\n              background: videoLinkInput.trim() ? '#10b981' : '#d1d5db',\n              color: 'white',\n              border: 'none',\n              borderRadius: '0.5rem',\n              cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem',\n              fontWeight: '600'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Video, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2696,\n              columnNumber: 15\n            }, this), \"Add\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2679,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2652,\n          columnNumber: 11\n        }, this), gradingData.videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              marginBottom: '0.5rem',\n              color: '#374151'\n            },\n            children: \"Video Links:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2703,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '0.5rem'\n            },\n            children: gradingData.videoLinks.map(link => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem',\n                background: '#ffffff',\n                border: '1px solid #e5e7eb',\n                borderRadius: '0.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 16,\n                style: {\n                  color: '#6b7280'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2720,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: '500',\n                    fontSize: '0.875rem',\n                    color: '#374151'\n                  },\n                  children: link.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2722,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: link.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  style: {\n                    fontSize: '0.75rem',\n                    color: '#3b82f6',\n                    textDecoration: 'none'\n                  },\n                  children: link.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2725,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2721,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '0.75rem',\n                  color: '#6b7280'\n                },\n                children: link.addedDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2738,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeVideoLink(link.id),\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  color: '#ef4444',\n                  cursor: 'pointer',\n                  padding: '0.25rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2751,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2741,\n                columnNumber: 21\n              }, this)]\n            }, link.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2708,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2706,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2702,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2646,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2642,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1110,\n    columnNumber: 5\n  }, this);\n};\n_s(GradingTemplate, \"2wuuTWSyuN1WXHEwt7taCLkvlhI=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Upload","FileText","Video","Plus","X","Save","FileDown","Bot","ChevronDown","ChevronUp","ArrowLeft","ArrowRight","Users","PlayCircle","CheckCircle","Clock","SkipForward","SkipBack","Pause","RotateCcw","AlertTriangle","BookOpen","Settings","useAssessment","DEFAULT_LATE_POLICY","jsxDEV","_jsxDEV","Fragment","_Fragment","GradingTemplate","_s","_loadedRubric$assignm8","_loadedRubric$assignm9","_loadedRubric$assignm0","_loadedRubric$criteri","_gradingSession$stude","_gradingSession$stude2","_gradingSession$stude3","_gradingSession$stude4","_gradingSession$stude5","_gradingSession$stude6","_levels$gradingData$l","sharedRubric","sharedCourseDetails","setSharedCourseDetails","gradingData","sharedGradingData","setGradingData","setSharedGradingData","updateStudentInfo","updateCourseInfo","updateAssignmentInfo","clearGradingFormData","classList","setClassList","setCurrentStudent","gradingSession","setGradingSession","nextStudentInSession","previousStudentInSession","updateGradingSession","initializeGradingSession","setActiveTab","currentStudent","saveDraft","loadDraft","saveFinalGrade","loadFinalGrade","finalGrades","getGradeStatus","currentLatePolicy","customLatePolicies","renderFormattedContent","htmlContent","textContent","replace","trim","localGradingData","setLocalGradingData","id","draft","student","name","email","course","code","instructor","term","assignment","dueDate","maxPoints","feedback","general","strengths","improvements","attachments","videoLinks","latePolicy","level","penaltyApplied","metadata","gradedBy","gradedDate","aiAssisted","rubricIntegrated","rubricGrading","loadedRubric","setLoadedRubric","showRubricComments","setShowRubricComments","showHeaderGuide","setShowHeaderGuide","fileInputRef","moduleInputRef","rubricInputRef","videoLinkInput","setVideoLinkInput","videoTitle","setVideoTitle","showComments","setShowComments","console","log","needsSync","prev","_sharedRubric$assignm","assignmentInfo","title","initialGrading","criteria","forEach","criterion","criterionId","selectedLevel","customComments","prevData","_loadedRubric$assignm","_loadedRubric$assignm2","totalPoints","Object","keys","length","timeoutId","setTimeout","clearTimeout","status","saved","calculateTotalScore","rawScore","finalScore","latePolicyDescription","totalRawScore","maxPossiblePoints","grading","rubricLevels","find","multiplier","activeLatePolicy","latePolicyLevel","levels","none","description","scoreSummary","setScoreSummary","updateLatePolicy","policyId","updateRubricGrading","comments","existingGrading","existingComments","newRubricState","addCriterionFeedback","comment","currentGrading","currentComments","newComments","getEffectiveCourseData","courseMetadata","courseCode","courseName","professors","pullCourseDataFromClassList","alert","getLetterGrade","percentage","generateStudentReportHTML","_gradingData$course$c","_gradingData$course","_gradingData$course$n","_gradingData$course2","_gradingData$course$i","_gradingData$course3","_gradingData$course$t","_gradingData$course4","_gradingData$latePoli","_gradingData$latePoli2","_gradingData$latePoli3","totalScore","toFixed","attachmentsHTML","map","att","index","base64Data","size","join","videoLinksHTML","link","url","rubricTableHTML","weight","passingThreshold","l","points","levelDescription","additionalComments","color","Math","round","getSafeLatePolicy","policy","getPolicyById","activeLevels","p","entries","filter","e","t","charAt","toUpperCase","slice","Date","toLocaleDateString","toLocaleTimeString","JSON","stringify","exportAIFeedbackData","_localGradingData$stu","_loadedRubric$assignm3","_loadedRubric$assignm4","_loadedRubric$assignm5","_loadedRubric$assignm6","_loadedRubric$assignm7","criteriaPerformance","earnedPoints","aiGradeData","firstName","split","fullName","gradeData","overallScore","overallPercentage","letterGrade","passed","latePenaltyApplied","existingFeedback","toISOString","rubricUsed","totalCriteria","exportedForAI","dataStr","dataBlob","Blob","type","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","generateAIFeedbackPrompt","studentFirstName","assignmentTitle","getStudentLevel","includes","prompt","promptBlob","exportForAIFeedback","error","handleFileUpload","event","files","Array","from","target","processFiles","file","Promise","resolve","newAttachment","now","random","startsWith","reader","FileReader","onload","result","readAsDataURL","all","then","newAttachments","removeAttachment","attachmentId","addVideoLink","newVideoLink","addedDate","removeVideoLink","linkId","handleRubricUpload","rubricData","parse","readAsText","getTotalScore","score","exportToHTML","htmlBlob","exportToPDF","html","printWindow","window","open","write","close","focus","print","exportGradingData","_gradingData$student$","exportData","rubric","exportDate","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","setAttribute","handleNextStudent","students","success","nextStudent","currentIndex","handlePreviousStudent","prevStudent","handleSaveDraft","handleNextStudentAsDraft","resetGradingForm","scrollTo","top","behavior","handleNextStudentAsFinal","finalGradeData","initialRubricGrading","_sharedCourseDetails$","_sharedCourseDetails$2","NoRubricUI","style","display","flexDirection","alignItems","justifyContent","minHeight","background","borderRadius","border","padding","margin","textAlign","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","fontWeight","textShadow","maxWidth","lineHeight","gap","flexWrap","onClick","cursor","boxShadow","transition","onMouseOver","transform","onMouseOut","_rubricInputRef$curre","current","marginTop","ref","accept","onChange","fontFamily","gradeStatus","flex","backgroundColor","width","height","disabled","active","overflow","gridTemplateColumns","value","placeholder","parseInt","min","levelKey","levelData","checked","opacity","_loadedRubric$rubricL","_criterion$levels$cur","_criterion$levels$cur2","marginLeft","textDecoration","isSelected","_criterion$levels$lev","_criterion$levels$lev2","borderLeft","pointRange","feedbackLibrary","category","defaultValue","idx","resize","rows","button","activeElement","originalText","innerHTML","originalBg","currentTarget","multiple","_fileInputRef$current","position","src","alt","objectFit","right","rel","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/GradingTemplate.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  Download, Upload, FileText, Video, Plus, X, Save, FileDown, Bot,\r\n  ChevronDown, ChevronUp, ArrowLeft, ArrowRight, Users, PlayCircle,\r\n  CheckCircle, Clock, SkipForward, SkipBack, Pause, RotateCcw, AlertTriangle,\r\n  BookOpen, Settings\r\n} from 'lucide-react';\r\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\r\n\r\n// NO SAMPLE RUBRIC - START WITH EMPTY STATE\r\n// This forces users to create or load a rubric before grading\r\n\r\nconst GradingTemplate = () => {\r\n  // Get shared context - ENHANCED with new functions\r\n  const {\r\n    sharedRubric,\r\n    sharedCourseDetails,\r\n    setSharedCourseDetails,\r\n    gradingData: sharedGradingData,\r\n    setGradingData: setSharedGradingData,\r\n    updateStudentInfo,\r\n    updateCourseInfo,\r\n    updateAssignmentInfo,\r\n    clearGradingFormData,\r\n    classList,\r\n    setClassList,\r\n    setCurrentStudent,\r\n    gradingSession,\r\n    setGradingSession,\r\n    nextStudentInSession,\r\n    previousStudentInSession,\r\n    updateGradingSession,\r\n    initializeGradingSession,\r\n    setActiveTab,\r\n    currentStudent,\r\n    saveDraft,\r\n    loadDraft,\r\n    // NEW: Add the draft/final grade functions\r\n    saveFinalGrade,\r\n    loadFinalGrade,\r\n    finalGrades,\r\n    getGradeStatus,\r\n    currentLatePolicy,\r\n    customLatePolicies\r\n  } = useAssessment();\r\n\r\n  // Helper function to convert HTML content to readable text format\r\n  const renderFormattedContent = (htmlContent) => {\r\n    if (!htmlContent) return '';\r\n\r\n    // Convert basic HTML to readable text format\r\n    let textContent = htmlContent\r\n      .replace(/<br\\s*\\/?>/gi, '\\n')\r\n      .replace(/<\\/p>/gi, '\\n')\r\n      .replace(/<p[^>]*>/gi, '')\r\n      .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\r\n      .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\r\n      .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\r\n      .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\r\n      .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\r\n      .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\r\n      .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\r\n      .replace(/<\\/ul>/gi, '\\n')\r\n      .replace(/<ul[^>]*>/gi, '')\r\n      .replace(/<\\/ol>/gi, '\\n')\r\n      .replace(/<ol[^>]*>/gi, '')\r\n      .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\r\n      .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\r\n      .trim();\r\n\r\n    return textContent;\r\n  };\r\n\r\n  // State for all grading data - initialize from shared context or defaults\r\n  const [localGradingData, setLocalGradingData] = useState(() => {\r\n    // 1) Try loading a saved draft first\r\n    if (currentStudent?.id) {\r\n      const draft = loadDraft(currentStudent.id);\r\n      if (draft) {\r\n        return draft;\r\n      }\r\n    }\r\n    // 2) If rubric was just transferred, use that\r\n    if (sharedGradingData) {\r\n      return {\r\n        ...sharedGradingData,\r\n        student: currentStudent || sharedGradingData.student || { name: '', id: '', email: '' }\r\n      };\r\n    }\r\n    // 3) Otherwise, start fresh for this student\r\n    return {\r\n      student: currentStudent || { name: '', id: '', email: '' },\r\n      course: sharedCourseDetails?.course || { code: '', name: '', instructor: '', term: '' },\r\n      assignment: sharedCourseDetails?.assignment || { name: '', dueDate: '', maxPoints: 100 },\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false },\r\n      metadata: {\r\n        gradedBy: '',\r\n        gradedDate: '',\r\n        aiAssisted: false,\r\n        rubricIntegrated: false\r\n      },\r\n      rubricGrading: {}\r\n    };\r\n  });\r\n\r\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\r\n  const gradingData = localGradingData;\r\n  const setGradingData = setLocalGradingData;\r\n\r\n  // Rubric-specific state - MODIFIED: Default to null instead of sampleRubric\r\n  const [loadedRubric, setLoadedRubric] = useState(() => {\r\n    return sharedRubric || null; // NO DEFAULT SAMPLE RUBRIC\r\n  });\r\n  const [showRubricComments, setShowRubricComments] = useState({});\r\n  const [showHeaderGuide, setShowHeaderGuide] = useState(false);\r\n\r\n  const fileInputRef = useRef(null);\r\n  const moduleInputRef = useRef(null);\r\n  const rubricInputRef = useRef(null);\r\n\r\n  // Video link management\r\n  const [videoLinkInput, setVideoLinkInput] = useState('');\r\n  const [videoTitle, setVideoTitle] = useState('');\r\n\r\n  // Additional state for comments display\r\n  const [showComments, setShowComments] = useState(false);\r\n\r\n  // Enhanced shared data synchronization\r\n  useEffect(() => {\r\n    if (!sharedGradingData) return;\r\n\r\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\r\n\r\n    // Only update course info if it's not empty and different from current\r\n    if (sharedGradingData.course &&\r\n      (sharedGradingData.course.code || sharedGradingData.course.name ||\r\n        sharedGradingData.course.instructor || sharedGradingData.course.term)) {\r\n\r\n      const needsSync =\r\n        sharedGradingData.course.code !== localGradingData.course.code ||\r\n        sharedGradingData.course.name !== localGradingData.course.name ||\r\n        sharedGradingData.course.instructor !== localGradingData.course.instructor ||\r\n        sharedGradingData.course.term !== localGradingData.course.term;\r\n\r\n      if (needsSync) {\r\n        console.log('✅ Syncing course data from shared context to local state');\r\n        setLocalGradingData(prev => ({\r\n          ...prev,\r\n          course: {\r\n            code: sharedGradingData.course.code || prev.course.code,\r\n            name: sharedGradingData.course.name || prev.course.name,\r\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\r\n            term: sharedGradingData.course.term || prev.course.term\r\n          }\r\n        }));\r\n      }\r\n    }\r\n  }, [sharedGradingData]);\r\n\r\n  // Sync with sharedRubric\r\n  useEffect(() => {\r\n    if (sharedRubric && sharedRubric !== loadedRubric) {\r\n      console.log('✅ Syncing rubric from shared context:', sharedRubric.assignmentInfo?.title || 'Untitled');\r\n      setLoadedRubric(sharedRubric);\r\n    }\r\n  }, [sharedRubric, loadedRubric]);\r\n\r\n  // Auto-populate assignment info when rubric is loaded\r\n  useEffect(() => {\r\n    if (loadedRubric) {\r\n      const initialGrading = {};\r\n      loadedRubric.criteria.forEach(criterion => {\r\n        initialGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n\r\n      setLocalGradingData(prevData => ({\r\n        ...prevData,\r\n        assignment: {\r\n          ...prevData.assignment,\r\n          name: loadedRubric.assignmentInfo?.title || prevData.assignment.name,\r\n          maxPoints: loadedRubric.assignmentInfo?.totalPoints || prevData.assignment.maxPoints\r\n        },\r\n        rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\r\n        metadata: {\r\n          ...prevData.metadata,\r\n          rubricIntegrated: true\r\n        }\r\n      }));\r\n    }\r\n  }, [loadedRubric]);\r\n\r\n  // Auto-save to shared context whenever gradingData changes (with debounce)\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      setSharedGradingData(gradingData);\r\n      setSharedCourseDetails({\r\n        student: gradingData.student,\r\n        course: gradingData.course,\r\n        assignment: gradingData.assignment\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails]);\r\n\r\n  // When we get new sharedCourseDetails, merge them in\r\n  useEffect(() => {\r\n    if (!sharedCourseDetails) return;\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      student: sharedCourseDetails.student || prev.student,\r\n      course: sharedCourseDetails.course || prev.course,\r\n      assignment: sharedCourseDetails.assignment || prev.assignment\r\n    }));\r\n  }, [sharedCourseDetails]);\r\n\r\n  // When student changes, load any saved draft/final but keep course+assignment\r\n  useEffect(() => {\r\n    if (!currentStudent?.id) return;\r\n\r\n    const status = getGradeStatus(currentStudent.id);\r\n    let saved = null;\r\n    if (status === 'final' && loadFinalGrade) {\r\n      saved = loadFinalGrade(currentStudent.id);\r\n    } else if (status === 'draft') {\r\n      saved = loadDraft(currentStudent.id);\r\n    }\r\n\r\n    if (saved) {\r\n      setLocalGradingData(prev => ({\r\n        ...saved, // Use saved data\r\n        course: prev.course, // Keep current course info\r\n        assignment: prev.assignment // Keep current assignment info\r\n      }));\r\n    } else {\r\n      // Fresh slate for this student, but keep course/assignment\r\n      setLocalGradingData(prev => ({\r\n        ...prev,\r\n        student: currentStudent,\r\n        feedback: { general: '', strengths: '', improvements: '' },\r\n        attachments: [],\r\n        videoLinks: [],\r\n        latePolicy: { level: 'none', penaltyApplied: false },\r\n        rubricGrading: {}\r\n      }));\r\n    }\r\n  }, [currentStudent?.id, getGradeStatus, loadFinalGrade, loadDraft]);\r\n\r\n  // Enhanced calculation function\r\n  const calculateTotalScore = () => {\r\n    if (!loadedRubric || !loadedRubric.criteria) return { rawScore: 0, finalScore: 0, penaltyApplied: false, latePolicyDescription: '' };\r\n\r\n    let totalRawScore = 0;\r\n    let maxPossiblePoints = 0;\r\n\r\n    // Calculate raw score from rubric grading\r\n    loadedRubric.criteria.forEach(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      if (grading && grading.selectedLevel && loadedRubric.rubricLevels) {\r\n        const selectedLevel = loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\r\n        if (selectedLevel) {\r\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\r\n        }\r\n      }\r\n      maxPossiblePoints += criterion.maxPoints;\r\n    });\r\n\r\n    // Apply late policy penalty\r\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\r\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\r\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\r\n\r\n    return {\r\n      rawScore: totalRawScore,\r\n      finalScore: finalScore,\r\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\r\n      latePolicyDescription: latePolicyLevel.description\r\n    };\r\n  };\r\n\r\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\r\n\r\n  useEffect(() => {\r\n    setScoreSummary(calculateTotalScore());\r\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, loadedRubric]);\r\n\r\n  const updateLatePolicy = (level) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      latePolicy: {\r\n        level: level,\r\n        penaltyApplied: level !== 'none',\r\n        policyId: currentLatePolicy?.id || DEFAULT_LATE_POLICY.id\r\n      }\r\n    }));\r\n  };\r\n\r\n  const updateRubricGrading = (criterionId, level, comments = null) => {\r\n    if (!loadedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const existingGrading = prevData.rubricGrading[criterionId];\r\n      const existingComments = existingGrading?.customComments || '';\r\n      const newRubricState = {\r\n        ...prevData.rubricGrading,\r\n        [criterionId]: {\r\n          criterionId,\r\n          selectedLevel: level,\r\n          customComments: comments !== null ? comments : existingComments\r\n        }\r\n      };\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: newRubricState\r\n      };\r\n    });\r\n  };\r\n\r\n  const addCriterionFeedback = (criterionId, comment) => {\r\n    if (!loadedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const currentGrading = prevData.rubricGrading[criterionId];\r\n      const currentComments = currentGrading?.customComments || '';\r\n      const newComments = currentComments ?\r\n        `${currentComments}\\n${comment}` : comment;\r\n\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: {\r\n          ...prevData.rubricGrading,\r\n          [criterionId]: {\r\n            ...currentGrading,\r\n            customComments: newComments\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  // HELPER FUNCTIONS FOR COURSE INFO\r\n  const getEffectiveCourseData = () => {\r\n    const course = gradingData?.course || {};\r\n    const metadata = classList?.courseMetadata;\r\n\r\n    return {\r\n      code: course.code || metadata?.courseCode || '',\r\n      name: course.name || metadata?.courseName || '',\r\n      instructor: course.instructor || metadata?.instructor || metadata?.professors || '',\r\n      term: course.term || metadata?.term || ''\r\n    };\r\n  };\r\n\r\n  const pullCourseDataFromClassList = () => {\r\n    if (!classList?.courseMetadata) {\r\n      alert('No class list course metadata available to pull from.');\r\n      return;\r\n    }\r\n\r\n    const metadata = classList.courseMetadata;\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      course: {\r\n        code: metadata.courseCode || prevData.course.code,\r\n        name: metadata.courseName || prevData.course.name,\r\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\r\n        term: metadata.term || prevData.course.term\r\n      }\r\n    }));\r\n\r\n    alert('Course information has been pulled from the class list!');\r\n  };\r\n\r\n  // LETTER GRADE CALCULATION\r\n  const getLetterGrade = (percentage) => {\r\n    if (percentage >= 97) return 'A+';\r\n    if (percentage >= 93) return 'A';\r\n    if (percentage >= 90) return 'A-';\r\n    if (percentage >= 87) return 'B+';\r\n    if (percentage >= 83) return 'B';\r\n    if (percentage >= 80) return 'B-';\r\n    if (percentage >= 77) return 'C+';\r\n    if (percentage >= 73) return 'C';\r\n    if (percentage >= 70) return 'C-';\r\n    if (percentage >= 67) return 'D+';\r\n    if (percentage >= 63) return 'D';\r\n    if (percentage >= 60) return 'D-';\r\n    return 'F';\r\n  };\r\n\r\n  // Helper function to generate the student report HTML. This avoids code duplication.\r\n  const generateStudentReportHTML = () => {\r\n    const totalScore = scoreSummary.finalScore;\r\n    const rawScore = scoreSummary.rawScore;\r\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n    const percentage = ((totalScore / (maxPoints || 1)) * 100).toFixed(1);\r\n    const penaltyApplied = scoreSummary.penaltyApplied;\r\n\r\n    const attachmentsHTML = gradingData.attachments.map((att, index) => {\r\n      if (att.base64Data) {\r\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\r\n      } else {\r\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\r\n      }\r\n    }).join('');\r\n\r\n    const videoLinksHTML = gradingData.videoLinks.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('');\r\n\r\n    const rubricTableHTML = loadedRubric ? `\r\n      <div class=\"rubric-section\" style=\"margin-top: 30px;\">\r\n          <h3>📋 Detailed Rubric Assessment</h3>\r\n          <div style=\"background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;\">\r\n              <strong>Assignment:</strong> ${loadedRubric.assignmentInfo.title}<br>\r\n              <strong>Description:</strong> ${renderFormattedContent(loadedRubric.assignmentInfo.description)}<br>\r\n              <strong>Weight:</strong> ${loadedRubric.assignmentInfo.weight}% of Final Grade<br>\r\n              <strong>Passing Threshold:</strong> ${loadedRubric.assignmentInfo.passingThreshold}%  \r\n          </div>\r\n          <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.9rem;\">\r\n              <thead><tr style=\"background: #2c3e50; color: white;\"><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Max Points</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Level Achieved</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: center;\">Points Earned</th><th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Assessment & Comments</th></tr></thead>\r\n              <tbody>\r\n                  ${loadedRubric.criteria.map(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      const level = grading?.selectedLevel ? loadedRubric.rubricLevels.find(l => l.level === grading.selectedLevel) : null;\r\n      const points = level ? (criterion.maxPoints * level.multiplier).toFixed(1) : '0';\r\n      const levelDescription = level && criterion.levels[level.level] ? renderFormattedContent(criterion.levels[level.level].description) : '';\r\n      const additionalComments = grading?.customComments || '';\r\n      return `<tr><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\"><strong style=\"color: #2c3e50;\">${criterion.name}</strong><br><small style=\"color: #666; font-style: italic;\">${renderFormattedContent(criterion.description)}</small></td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold;\">${criterion.maxPoints}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; ${level ? `background-color: ${level.color}15; color: ${level.color}; font-weight: bold;` : ''}\">${level ? level.name : 'Not Assessed'}</td><td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td><td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}${(!levelDescription && !additionalComments) ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}</td></tr>`;\r\n    }).join('')}\r\n              </tbody>\r\n          </table>\r\n          <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\"><h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4><div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\"><div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div><div><strong>Grade Status:</strong><span style=\"color: ${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= loadedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}</div></div>\r\n      </div>` : '';\r\n\r\n    const getSafeLatePolicy = (level, policyId) => {\r\n      const policy = getPolicyById(policyId) || currentLatePolicy || DEFAULT_LATE_POLICY;\r\n      const activeLevels = policy.levels || DEFAULT_LATE_POLICY.levels;\r\n      if (!level || typeof level !== \"string\" || !activeLevels[level]) {\r\n        return activeLevels.none;\r\n      }\r\n      return activeLevels[level];\r\n    };\r\n\r\n    const getPolicyById = (policyId) => {\r\n      if (!policyId) return null;\r\n      if (policyId === DEFAULT_LATE_POLICY.id) return DEFAULT_LATE_POLICY;\r\n      return customLatePolicies.find(p => p.id === policyId) || null;\r\n    };\r\n\r\n    const htmlContent = `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Grade Report - ${gradingData.student.name}</title><style>body{font-family:Arial,sans-serif;max-width:800px;margin:20px auto;padding:20px;line-height:1.6}.header{background:#f8f9fa;padding:20px;border-radius:8px;margin-bottom:30px}.score-summary{background:#e8f5e8;border:2px solid #4caf50;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.late-policy-section{margin:30px 0;background:#fff5f5;border:1px solid #f87171;border-radius:8px;padding:20px}.feedback-section{margin:20px 0;padding:15px;background:#f9f9f9;border-radius:8px}.attachments{margin:30px 0}.attachment-item{display:inline-block;text-align:center;margin:1rem;padding:1rem;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);max-width:250px;vertical-align:top}.clickable-image{cursor:pointer;transition:all .3s ease;position:relative}.clickable-image:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.2)}.video-links{margin:30px 0}.video-link-item{margin-bottom:1rem}.video-link-item a{color:#007bff;text-decoration:none}.video-link-item a:hover{text-decoration:underline}h1,h2,h3{color:#333}.image-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.9);animation:fadeIn .3s ease}.image-modal.show{display:flex;align-items:center;justify-content:center}.modal-content{max-width:95%;max-height:95%;object-fit:contain;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.5);animation:zoomIn .3s ease}.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:40px;font-weight:700;cursor:pointer;z-index:1001;background:rgba(0,0,0,.5);border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;line-height:1}.close-modal:hover{background:rgba(0,0,0,.8)}.modal-caption{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.7);padding:10px 20px;border-radius:6px;text-align:center;max-width:80%}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes zoomIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@media print{.attachment-item,.video-link-item{break-inside:avoid}.image-modal{display:none!important}}</style></head><body><div class=\"header\"><h1>📋 Grade Report</h1><p><strong>Student:</strong> ${gradingData.student.name} (${gradingData.student.id})</p><p><strong>Course:</strong> ${gradingData.course?.code ?? ''} - ${gradingData.course?.name ?? ''}</p><p><strong>Assignment:</strong> ${gradingData.assignment.name}</p><p><strong>Instructor:</strong> ${gradingData.course?.instructor ?? ''}</p><p><strong>Term:</strong> ${gradingData.course?.term ?? ''}</p></div><div class=\"score-summary\"><h2>📊 Final Score</h2><div style=\"font-size:2rem;font-weight:700;color:#2e7d32;margin:15px 0\">${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)</div><p style=\"margin:10px 0;color:#555\">${loadedRubric ? `Rubric: ${loadedRubric.assignmentInfo.title}` : \"\"}${penaltyApplied ? ` | Late Policy: ${getSafeLatePolicy(gradingData.latePolicy?.level).name}` : \"\"}</p></div>${penaltyApplied ? `<div class=\"late-policy-section\"><h3 style=\"color:#dc2626\">📅 Late Submission Policy Applied</h3><p><strong>Policy Status:</strong> ${getSafeLatePolicy(gradingData.latePolicy?.level).name}</p><p>${getSafeLatePolicy(gradingData.latePolicy?.level).description}</p><p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p></div>` : \"\"}${rubricTableHTML}${Object.entries(gradingData.feedback).filter(([e, t]) => t).map(([e, t]) => `<div class=\"feedback-section\"><h3>${e.charAt(0).toUpperCase() + e.slice(1)} Feedback</h3><p>${t.replace(/\\n/g, \"<br>\")}</p></div>`).join(\"\")}${attachmentsHTML ? `<div class=\"attachments\"><h3>📎 File Attachments</h3><div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">${attachmentsHTML}</div></div>` : \"\"}${videoLinksHTML ? `<div class=\"video-links\"><h3>🎥 Video Review Links</h3>${videoLinksHTML}</div>` : \"\"}<p style=\"margin-top:40px;text-align:center;color:#666;font-size:.9rem\">Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p><div id=\"imageModal\" class=\"image-modal\"><span class=\"close-modal\" onclick=\"closeImageModal()\">&times;</span><img class=\"modal-content\" id=\"modalImage\"><div class=\"modal-caption\" id=\"modalCaption\"></div></div><script>const attachmentData=${JSON.stringify(gradingData.attachments)};function openImageModal(e,t){const n=document.getElementById(\"imageModal\"),o=document.getElementById(\"modalImage\"),a=document.getElementById(\"modalCaption\");n.classList.add(\"show\"),o.src=e,a.textContent=t,document.body.style.overflow=\"hidden\"}function closeImageModal(){document.getElementById(\"imageModal\").classList.remove(\"show\"),document.body.style.overflow=\"auto\"}document.addEventListener(\"DOMContentLoaded\",function(){document.querySelectorAll(\".clickable-image\").forEach(e=>{e.addEventListener(\"click\",function(){const e=parseInt(this.getAttribute(\"data-index\")),t=attachmentData[e];t&&t.base64Data&&openImageModal(t.base64Data,t.name)})}),document.getElementById(\"imageModal\").addEventListener(\"click\",function(e){e.target===this&&closeImageModal()}),document.addEventListener(\"keydown\",function(e){\"Escape\"===e.key&&closeImageModal()})})</script></body></html>`;\r\n\r\n    return htmlContent;\r\n  };\r\n\r\n  // AI FEEDBACK EXPORT FUNCTIONS\r\n  const exportAIFeedbackData = () => {\r\n    if (!localGradingData.student?.name) {\r\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\r\n      return;\r\n    }\r\n\r\n    // Calculate scores\r\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\r\n\r\n    // Build criteria performance data\r\n    const criteriaPerformance = (loadedRubric && loadedRubric.criteria) ? loadedRubric.criteria.map(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      const selectedLevel = (grading?.selectedLevel && loadedRubric.rubricLevels) ?\r\n        loadedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\r\n\r\n      return {\r\n        name: criterion.name,\r\n        maxPoints: criterion.maxPoints,\r\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\r\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\r\n        levelDescription: selectedLevel ? selectedLevel.description : '',\r\n        customComments: grading?.customComments || '',\r\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\r\n      };\r\n    }) : [];\r\n\r\n    const aiGradeData = {\r\n      student: {\r\n        firstName: localGradingData.student.name.split(' ')[0] || '',\r\n        fullName: localGradingData.student.name,\r\n        id: localGradingData.student.id,\r\n        email: localGradingData.student.email\r\n      },\r\n      course: {\r\n        code: localGradingData.course.code,\r\n        name: localGradingData.course.name,\r\n        instructor: localGradingData.course.instructor,\r\n        term: localGradingData.course.term\r\n      },\r\n      assignment: {\r\n        title: localGradingData.assignment.name || (loadedRubric?.assignmentInfo?.title),\r\n        description: loadedRubric?.assignmentInfo?.description || '',\r\n        totalPoints: maxPoints,\r\n        passingThreshold: loadedRubric?.assignmentInfo?.passingThreshold || 60,\r\n        dueDate: localGradingData.assignment.dueDate\r\n      },\r\n      gradeData: {\r\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\r\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\r\n        overallPercentage: percentage,\r\n        letterGrade: getLetterGrade(percentage),\r\n        passed: percentage >= (loadedRubric?.assignmentInfo?.passingThreshold || 60),\r\n        latePenaltyApplied: scoreSummary.penaltyApplied,\r\n        latePolicyDescription: scoreSummary.latePolicyDescription,\r\n        criteria: criteriaPerformance\r\n      },\r\n      existingFeedback: {\r\n        general: localGradingData.feedback.general || '',\r\n        strengths: localGradingData.feedback.strengths || '',\r\n        improvements: localGradingData.feedback.improvements || ''\r\n      },\r\n      metadata: {\r\n        gradedDate: new Date().toISOString(),\r\n        rubricUsed: loadedRubric?.assignmentInfo?.title || 'Custom Rubric',\r\n        totalCriteria: criteriaPerformance.length,\r\n        exportedForAI: true\r\n      }\r\n    };\r\n\r\n    // Export as JSON file\r\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    return aiGradeData;\r\n  };\r\n\r\n  const generateAIFeedbackPrompt = () => {\r\n    const gradeData = exportAIFeedbackData();\r\n    if (!gradeData) return;\r\n\r\n    const studentFirstName = gradeData.student.firstName;\r\n    const courseName = gradeData.course.name || 'this course';\r\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\r\n\r\n    // Determine student level context\r\n    const getStudentLevel = () => {\r\n      const courseCode = gradeData.course.code.toUpperCase();\r\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\r\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\r\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\r\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\r\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\r\n      return 'undergraduate';\r\n    };\r\n\r\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\r\n\r\nSTUDENT GRADE DATA:\r\n${JSON.stringify(gradeData, null, 2)}\r\n\r\nWrite feedback in this exact structure:\r\n\r\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\r\n\r\n**Key Observations:**\r\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\r\n• Their strongest performance area (mention specific criteria that scored highest)\r\n• One area showing good progress or solid competency  \r\n• One specific area for improvement with a concrete suggestion\r\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\r\n• One forward-looking suggestion for growth in ${courseName}\r\n\r\n**Conclusion:**\r\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\r\n\r\n**Final Note:**\r\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\r\n\r\n**WRITING STYLE:**\r\n- Conversational and personal, like speaking directly to ${studentFirstName}\r\n- Specific to their actual performance levels and criteria\r\n- Encouraging but honest\r\n- Professional yet warm\r\n- Use their actual criterion names and performance levels from the data\r\n- Keep each bullet point to 1-2 sentences maximum\r\n\r\n**Context:**\r\n- Student: ${gradeData.student.fullName}\r\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\r\n- Assignment: ${assignmentTitle}\r\n- Instructor: ${gradeData.course.instructor}\r\n\r\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\r\n\r\n    // Export prompt as text file\r\n    const promptBlob = new Blob([prompt], { type: 'text/plain' });\r\n    const url = URL.createObjectURL(promptBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    console.log('AI Feedback Prompt Generated:', prompt);\r\n    return prompt;\r\n  };\r\n\r\n  const exportForAIFeedback = () => {\r\n    try {\r\n      // First export the grade data\r\n      const gradeData = exportAIFeedbackData();\r\n      if (!gradeData) return;\r\n\r\n      // Then generate and export the prompt\r\n      setTimeout(() => {\r\n        generateAIFeedbackPrompt();\r\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\r\n      }, 500); // Small delay to ensure first download completes\r\n\r\n    } catch (error) {\r\n      console.error('Error exporting AI feedback data:', error);\r\n      alert('Error exporting AI feedback data. Please check the console for details.');\r\n    }\r\n  };\r\n\r\n  // FILE UPLOAD HANDLERS\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    const processFiles = files.map(file => {\r\n      return new Promise((resolve) => {\r\n        const newAttachment = {\r\n          id: Date.now() + Math.random(),\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          file: file\r\n        };\r\n\r\n        // If it's an image, convert to base64 for display\r\n        if (file.type.startsWith('image/')) {\r\n          const reader = new FileReader();\r\n          reader.onload = (e) => {\r\n            newAttachment.base64Data = e.target.result;\r\n            resolve(newAttachment);\r\n          };\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          resolve(newAttachment);\r\n        }\r\n      });\r\n    });\r\n\r\n    Promise.all(processFiles).then(newAttachments => {\r\n      setGradingData(prevData => ({\r\n        ...prevData,\r\n        attachments: [...prevData.attachments, ...newAttachments]\r\n      }));\r\n    });\r\n  };\r\n\r\n  const removeAttachment = (attachmentId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\r\n    }));\r\n  };\r\n\r\n  // VIDEO LINK HANDLERS\r\n  const addVideoLink = () => {\r\n    if (!videoLinkInput.trim()) return;\r\n\r\n    const newVideoLink = {\r\n      id: Date.now(),\r\n      url: videoLinkInput,\r\n      title: videoTitle || 'Video Link',\r\n      addedDate: new Date().toLocaleDateString()\r\n    };\r\n\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: [...prevData.videoLinks, newVideoLink]\r\n    }));\r\n\r\n    setVideoLinkInput('');\r\n    setVideoTitle('');\r\n  };\r\n\r\n  const removeVideoLink = (linkId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\r\n    }));\r\n  };\r\n\r\n  // RUBRIC LOADING\r\n  const handleRubricUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const rubricData = JSON.parse(e.target.result);\r\n\r\n        // Validate required structure\r\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\r\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\r\n          return;\r\n        }\r\n\r\n        setLoadedRubric(rubricData);\r\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\r\n\r\n        // Reset rubric grading when new rubric is loaded\r\n        setGradingData(prevData => ({\r\n          ...prevData,\r\n          rubricGrading: {}\r\n        }));\r\n      } catch (error) {\r\n        alert('Error loading rubric: Invalid JSON format');\r\n        console.error('Rubric loading error:', error);\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  // Enhanced total score calculation with grade percentage\r\n  const getTotalScore = () => {\r\n    const score = calculateTotalScore();\r\n    const percentage = loadedRubric ?\r\n      (score.finalScore / loadedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\r\n    return { ...score, percentage };\r\n  };\r\n\r\n  // EXPORT FUNCTIONS\r\n  const exportToHTML = () => {\r\n    const htmlContent = generateStudentReportHTML();\r\n    const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n    const url = URL.createObjectURL(htmlBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToPDF = () => {\r\n    const html = generateStudentReportHTML();\r\n    const printWindow = window.open('', '_blank');\r\n    printWindow.document.open();\r\n    printWindow.document.write(html);\r\n    printWindow.document.close();\r\n    printWindow.focus();\r\n    printWindow.print();\r\n  };\r\n\r\n  const exportGradingData = () => {\r\n    const exportData = {\r\n      ...gradingData,\r\n      rubric: loadedRubric,\r\n      totalScore: getTotalScore(),\r\n      exportDate: new Date().toISOString()\r\n    };\r\n\r\n    const dataStr = JSON.stringify(exportData, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\r\n\r\n    const exportFileDefaultName = `grading-${gradingData.student.name?.replace(/\\s+/g, '-') || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\r\n\r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', exportFileDefaultName);\r\n    linkElement.click();\r\n  };\r\n\r\n  // GRADING SESSION HANDLERS\r\n  const handleNextStudent = () => {\r\n    if (!gradingSession || !gradingSession.students) return;\r\n\r\n    const success = nextStudentInSession();\r\n    if (success) {\r\n      // Clear current grading data and load next student's draft if available\r\n      const nextStudent = gradingSession.students[gradingSession.currentIndex];\r\n      if (!nextStudent) return;\r\n\r\n      const draft = loadDraft(nextStudent.id);\r\n\r\n      if (draft) {\r\n        setLocalGradingData(draft);\r\n      } else {\r\n        // Initialize fresh data for next student\r\n        setLocalGradingData({\r\n          student: nextStudent,\r\n          course: gradingData.course,\r\n          assignment: gradingData.assignment,\r\n          feedback: { general: '', strengths: '', improvements: '' },\r\n          attachments: [],\r\n          videoLinks: [],\r\n          latePolicy: { level: 'none', penaltyApplied: false },\r\n          metadata: {\r\n            gradedBy: '',\r\n            gradedDate: '',\r\n            aiAssisted: false,\r\n            rubricIntegrated: false\r\n          },\r\n          rubricGrading: {}\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePreviousStudent = () => {\r\n    if (!gradingSession || !gradingSession.students) return;\r\n\r\n    const success = previousStudentInSession();\r\n    if (success) {\r\n      const prevStudent = gradingSession.students[gradingSession.currentIndex];\r\n      if (!prevStudent) return;\r\n\r\n      const draft = loadDraft(prevStudent.id);\r\n\r\n      if (draft) {\r\n        setLocalGradingData(draft);\r\n      } else {\r\n        setLocalGradingData({\r\n          student: prevStudent,\r\n          course: gradingData.course,\r\n          assignment: gradingData.assignment,\r\n          feedback: { general: '', strengths: '', improvements: '' },\r\n          attachments: [],\r\n          videoLinks: [],\r\n          latePolicy: { level: 'none', penaltyApplied: false },\r\n          metadata: {\r\n            gradedBy: '',\r\n            gradedDate: '',\r\n            aiAssisted: false,\r\n            rubricIntegrated: false\r\n          },\r\n          rubricGrading: {}\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // SAVING HANDLERS\r\n  const handleSaveDraft = () => {\r\n    if (!currentStudent?.id) {\r\n      alert('No student selected for saving draft');\r\n      return;\r\n    }\r\n\r\n    saveDraft(currentStudent.id, gradingData);\r\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\r\n  };\r\n\r\n  const handleNextStudentAsDraft = () => {\r\n    if (currentStudent?.id) {\r\n      console.log('💾 Saving as draft for student:', currentStudent.name);\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n    const success = nextStudentInSession('draft');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      console.log('✅ Draft saved, moved to next student (and scrolled to top)');\r\n    }\r\n  };\r\n\r\n  const handleNextStudentAsFinal = () => {\r\n    if (currentStudent?.id) {\r\n      console.log('✅ Finalizing grade for student:', currentStudent.name);\r\n      const finalGradeData = {\r\n        ...localGradingData,\r\n        totalScore: getTotalScore(),\r\n        metadata: {\r\n          ...localGradingData.metadata,\r\n          gradedDate: new Date().toISOString(),\r\n          rubricIntegrated: !!loadedRubric\r\n        }\r\n      };\r\n      saveFinalGrade(currentStudent.id, finalGradeData);\r\n    }\r\n    const success = nextStudentInSession('final');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\r\n    }\r\n  };\r\n\r\n  const resetGradingForm = () => {\r\n    const initialRubricGrading = {};\r\n    if (loadedRubric) {\r\n      loadedRubric.criteria.forEach(criterion => {\r\n        initialRubricGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n    }\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      course: sharedCourseDetails?.course ?? prev.course,\r\n      assignment: sharedCourseDetails?.assignment ?? prev.assignment,\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false },\r\n      rubricGrading: initialRubricGrading\r\n    }));\r\n  };\r\n\r\n  // NEW: No Rubric UI Component\r\n  const NoRubricUI = () => (\r\n    <div style={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      minHeight: '60vh',\r\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\r\n      borderRadius: '1rem',\r\n      border: '2px dashed #f59e0b',\r\n      padding: '3rem',\r\n      margin: '2rem 0',\r\n      textAlign: 'center'\r\n    }}>\r\n      <AlertTriangle\r\n        size={80}\r\n        style={{\r\n          color: '#d97706',\r\n          marginBottom: '1.5rem',\r\n          filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\r\n        }}\r\n      />\r\n\r\n      <h2 style={{\r\n        fontSize: '2rem',\r\n        fontWeight: '700',\r\n        color: '#92400e',\r\n        marginBottom: '1rem',\r\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\r\n      }}>\r\n        No Rubric Loaded\r\n      </h2>\r\n\r\n      <p style={{\r\n        fontSize: '1.1rem',\r\n        color: '#a16207',\r\n        marginBottom: '2rem',\r\n        maxWidth: '600px',\r\n        lineHeight: '1.6'\r\n      }}>\r\n        A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\r\n      </p>\r\n\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '1rem',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <button\r\n          onClick={() => setActiveTab('rubric-creator')}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\r\n          }}\r\n        >\r\n          <FileText size={20} />\r\n          Create New Rubric\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => rubricInputRef.current?.click()}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\r\n          }}\r\n        >\r\n          <Upload size={20} />\r\n          Load Existing Rubric\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{\r\n        marginTop: '2rem',\r\n        padding: '1rem',\r\n        background: 'rgba(255, 255, 255, 0.7)',\r\n        borderRadius: '0.5rem',\r\n        fontSize: '0.9rem',\r\n        color: '#78350f',\r\n        maxWidth: '500px'\r\n      }}>\r\n        <strong>💡 Tip:</strong> You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\r\n      </div>\r\n\r\n      <input\r\n        ref={rubricInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleRubricUpload}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  // If no rubric is loaded, show the No Rubric UI\r\n  if (!loadedRubric) {\r\n    return (\r\n      <div style={{\r\n        padding: '2rem',\r\n        maxWidth: '1200px',\r\n        margin: '0 auto',\r\n        fontFamily: 'system-ui, -apple-system, sans-serif'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem',\r\n          marginBottom: '2rem',\r\n          padding: '1rem',\r\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n          borderRadius: '0.75rem',\r\n          border: '1px solid #d1d5db'\r\n        }}>\r\n          <Settings size={32} style={{ color: '#6b7280' }} />\r\n          <div>\r\n            <h1 style={{\r\n              fontSize: '2rem',\r\n              fontWeight: '700',\r\n              color: '#1f2937',\r\n              margin: 0\r\n            }}>\r\n              🎯 Grading Tool\r\n            </h1>\r\n            <p style={{\r\n              color: '#6b7280',\r\n              margin: 0,\r\n              fontSize: '1rem'\r\n            }}>\r\n              Assessment and feedback management system\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <NoRubricUI />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Regular grading interface when rubric is loaded\r\n  const totalScore = getTotalScore();\r\n  const gradeStatus = currentStudent?.id ? getGradeStatus(currentStudent.id) : 'none';\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '2rem',\r\n      maxWidth: '1200px',\r\n      margin: '0 auto',\r\n      fontFamily: 'system-ui, -apple-system, sans-serif'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem',\r\n        marginBottom: '2rem',\r\n        padding: '1rem',\r\n        background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n        borderRadius: '0.75rem',\r\n        border: '1px solid #d1d5db'\r\n      }}>\r\n        <Settings size={32} style={{ color: '#6b7280' }} />\r\n        <div style={{ flex: 1 }}>\r\n          <h1 style={{\r\n            fontSize: '2rem',\r\n            fontWeight: '700',\r\n            color: '#1f2937',\r\n            margin: 0\r\n          }}>\r\n            🎯 Grading Tool\r\n          </h1>\r\n          <p style={{\r\n            color: '#6b7280',\r\n            margin: 0,\r\n            fontSize: '1rem'\r\n          }}>\r\n            Assessment and feedback management system\r\n          </p>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', gap: '0.75rem' }}>\r\n          <button\r\n            onClick={exportToHTML}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              background: '#16a34a',\r\n              color: 'white',\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.5rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          >\r\n            <FileDown size={16} />\r\n            Export HTML\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={exportToPDF}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              backgroundColor: '#dc2626',\r\n              color: '#ffffff',\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.5rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          >\r\n            <FileText size={16} />\r\n            Export PDF\r\n          </button>\r\n          <button\r\n            onClick={exportForAIFeedback}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              background: '#7c3aed',\r\n              color: 'white',\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.5rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontSize: '0.875rem'\r\n            }}\r\n            title=\"Export grade data and AI prompt for generating personalized feedback\"\r\n          >\r\n            <Bot size={16} />\r\n            Export for AI Feedback\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <input\r\n        ref={rubricInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleRubricUpload}\r\n      />\r\n      {/* Student Navigation Bar */}\r\n      {currentStudent && gradingSession && gradingSession.students && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\r\n          border: '1px solid #0284c7',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n              <div style={{\r\n                width: '40px',\r\n                height: '40px',\r\n                background: '#0284c7',\r\n                borderRadius: '50%',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                color: 'white',\r\n                fontSize: '1.2rem',\r\n                fontWeight: 'bold'\r\n              }}>\r\n                {gradingSession.currentIndex + 1}\r\n              </div>\r\n              <div>\r\n                <h2 style={{ margin: 0, fontSize: '1.5rem', fontWeight: '700', color: '#0c4a6e' }}>\r\n                  {currentStudent.name}\r\n                </h2>\r\n                <p style={{ margin: 0, color: '#0369a1', fontSize: '0.875rem' }}>\r\n                  Student ID: {currentStudent.id} | Email: {currentStudent.email}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\r\n              <div style={{ textAlign: 'center', color: '#0369a1' }}>\r\n                <div style={{ fontSize: '1.25rem', fontWeight: 'bold' }}>\r\n                  {gradingSession.currentIndex + 1}/{gradingSession.students.length}\r\n                </div>\r\n                <div style={{ fontSize: '0.75rem' }}>Progress</div>\r\n              </div>\r\n\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                <button\r\n                  onClick={handlePreviousStudent}\r\n                  disabled={gradingSession.currentIndex === 0}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    background: gradingSession.currentIndex === 0 ? '#94a3b8' : '#3b82f6',\r\n                    color: 'white',\r\n                    padding: '0.75rem 1rem',\r\n                    borderRadius: '0.5rem',\r\n                    border: 'none',\r\n                    cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  <ArrowLeft size={16} />\r\n                  Previous\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => {\r\n                    updateGradingSession({ active: false });\r\n                    setActiveTab('class-manager');\r\n                  }}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    background: '#f59e0b',\r\n                    color: 'white',\r\n                    padding: '0.75rem 1rem',\r\n                    borderRadius: '0.5rem',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  <Pause size={16} />\r\n                  Pause Session\r\n                </button>\r\n\r\n                <button\r\n                  onClick={handleNextStudent}\r\n                  disabled={gradingSession.currentIndex >= gradingSession.students.length - 1}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    background: gradingSession.currentIndex >= gradingSession.students.length - 1 ? '#94a3b8' : '#10b981',\r\n                    color: 'white',\r\n                    padding: '0.75rem 1rem',\r\n                    borderRadius: '0.5rem',\r\n                    border: 'none',\r\n                    cursor: gradingSession.currentIndex >= gradingSession.students.length - 1 ? 'not-allowed' : 'pointer',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  {gradingSession.currentIndex >= gradingSession.students.length - 1 ? (\r\n                    <>\r\n                      <CheckCircle size={16} />\r\n                      Complete Session\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      Next\r\n                      <ArrowRight size={16} />\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Progress Bar */}\r\n          <div style={{\r\n            width: '100%',\r\n            background: '#e0f2fe',\r\n            borderRadius: '0.5rem',\r\n            height: '8px',\r\n            overflow: 'hidden'\r\n          }}>\r\n            <div style={{\r\n              width: `${((gradingSession.currentIndex + 1) / gradingSession.students.length) * 100}%`,\r\n              background: 'linear-gradient(90deg, #0284c7 0%, #0ea5e9 100%)',\r\n              height: '100%',\r\n              transition: 'width 0.5s ease'\r\n            }}></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Current Rubric Info */}\r\n      {loadedRubric && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\r\n          border: '1px solid #93c5fd',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: '600',\r\n            color: '#1e40af',\r\n            margin: '0 0 0.5rem 0',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <FileText size={20} />\r\n            Current Rubric: {loadedRubric.assignmentInfo.title}\r\n          </h2>\r\n          <p style={{ color: '#1e40af', margin: 0, fontSize: '0.9rem' }}>\r\n            {loadedRubric.assignmentInfo.description || 'No description provided'}\r\n          </p>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '2rem',\r\n            marginTop: '0.75rem',\r\n            fontSize: '0.875rem',\r\n            color: '#1d4ed8'\r\n          }}>\r\n            <span><strong>Weight:</strong> {loadedRubric.assignmentInfo?.weight || 0}%</span>\r\n            <span><strong>Total Points:</strong> {loadedRubric.assignmentInfo?.totalPoints || 0}</span>\r\n            <span><strong>Passing:</strong> {loadedRubric.assignmentInfo?.passingThreshold || 0}%</span>\r\n            <span><strong>Criteria:</strong> {loadedRubric.criteria?.length || 0}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Grading Session Status */}\r\n      {gradingSession && gradingSession.students && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\r\n          border: '1px solid #6ee7b7',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <div>\r\n              <h3 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#047857',\r\n                margin: '0 0 0.5rem 0',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem'\r\n              }}>\r\n                <Users size={18} />\r\n                Batch Grading Session Active\r\n              </h3>\r\n              <p style={{ color: '#047857', margin: 0, fontSize: '0.9rem' }}>\r\n                Student {gradingSession.currentIndex + 1} of {gradingSession.students?.length || 0}:\r\n                <strong> {gradingSession.students[gradingSession.currentIndex]?.name || 'Unknown'}</strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n              <button\r\n                onClick={handlePreviousStudent}\r\n                disabled={gradingSession.currentIndex === 0}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  padding: '0.5rem 1rem',\r\n                  background: gradingSession.currentIndex === 0 ? '#f3f4f6' : '#10b981',\r\n                  color: gradingSession.currentIndex === 0 ? '#9ca3af' : 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  cursor: gradingSession.currentIndex === 0 ? 'not-allowed' : 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                <SkipBack size={16} />\r\n                Previous\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleNextStudent}\r\n                disabled={gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  padding: '0.5rem 1rem',\r\n                  background: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? '#f3f4f6' : '#10b981',\r\n                  color: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? '#9ca3af' : 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  cursor: gradingSession.currentIndex >= (gradingSession.students?.length || 0) - 1 ? 'not-allowed' : 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Next\r\n                <SkipForward size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Student Information */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          👤 Student Information\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Student Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.student.name}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter student name\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Student ID\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.student.id}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, id: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter student ID\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={gradingData.student.email}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  student: { ...prevData.student, email: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Enter email address\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {gradeStatus !== 'none' && (\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\r\n              border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              color: gradeStatus === 'final' ? '#047857' : '#a16207'\r\n            }}>\r\n              <strong>\r\n                {gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'}\r\n              </strong>\r\n              {gradeStatus === 'final' && ' - This student has been fully graded'}\r\n              {gradeStatus === 'draft' && ' - You can continue editing this draft'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Course Information */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', margin: 0, color: '#374151' }}>\r\n            🏫 Course Information\r\n          </h3>\r\n          {classList && classList.courseMetadata && (\r\n            <button\r\n              onClick={pullCourseDataFromClassList}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.25rem',\r\n                padding: '0.375rem 0.75rem',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.375rem',\r\n                fontSize: '0.75rem',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              <Download size={14} />\r\n              Pull Course Data\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Course Code\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.course.code}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  course: { ...prevData.course, code: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"e.g., CS 101\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Course Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.course.name}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  course: { ...prevData.course, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"e.g., Introduction to Computer Science\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Instructor\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.course.instructor}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  course: { ...prevData.course, instructor: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Instructor name\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Term\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.course.term}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  course: { ...prevData.course, term: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"e.g., Fall 2024\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Assignment Information */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📋 Assignment Information\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Assignment Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={gradingData.assignment.name}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                placeholder=\"Assignment title\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Due Date\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={gradingData.assignment.dueDate}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, dueDate: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Max Points\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={gradingData.assignment.maxPoints}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  assignment: { ...prevData.assignment, maxPoints: parseInt(e.target.value) || 100 }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Late Policy */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          ⏰ Late Policy\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n            {Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => (\r\n              <label\r\n                key={levelKey}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.75rem 1rem',\r\n                  background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\r\n                  color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\r\n                  borderRadius: '0.5rem',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"latePolicy\"\r\n                  value={levelKey}\r\n                  checked={gradingData.latePolicy.level === levelKey}\r\n                  onChange={(e) => updateLatePolicy(e.target.value)}\r\n                  style={{ margin: 0 }}\r\n                />\r\n                {levelData.name}\r\n                <span style={{ fontSize: '0.75rem', opacity: 0.8 }}>\r\n                  ({Math.round(levelData.multiplier * 100)}%)\r\n                </span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n\r\n          {gradingData.latePolicy.level !== 'none' && (\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: '#fef3c7',\r\n              border: '1px solid #fde047',\r\n              borderRadius: '0.5rem',\r\n              fontSize: '0.875rem',\r\n              color: '#a16207'\r\n            }}>\r\n              <strong>Late Policy Applied:</strong> {(currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]?.description}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rubric Grading */}\r\n      \r\n      {loadedRubric && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n          border: '1px solid #bbf7d0',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n            <div>\r\n              <h3 style={{ fontSize: '1.25rem', fontWeight: '700', color: '#15803d', marginBottom: '0.5rem' }}>\r\n                📋 Active Assignment Rubric\r\n              </h3>\r\n              <p style={{ color: '#16a34a', fontWeight: '600', fontSize: '1.1rem' }}>\r\n                {loadedRubric.assignmentInfo.title}\r\n              </p>\r\n              <p style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                {renderFormattedContent(loadedRubric.assignmentInfo.description)}\r\n              </p>\r\n            </div>\r\n            <div style={{ textAlign: 'right' }}>\r\n              <div style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                <p style={{ margin: '0.25rem 0' }}>\r\n                  <strong>Weight:</strong> {loadedRubric.assignmentInfo.weight}% of Final Grade\r\n                </p>\r\n                <p style={{ margin: '0.25rem 0' }}>\r\n                  <strong>Passing:</strong> {loadedRubric.assignmentInfo.passingThreshold}%\r\n                </p>\r\n                <p style={{ margin: '0.25rem 0' }}>\r\n                  <strong>Total Points:</strong> {loadedRubric.assignmentInfo.totalPoints}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Rubric Grading Interface */}\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n            {loadedRubric.criteria.map((criterion) => {\r\n              const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\r\n              const showComments = showRubricComments[criterion.id];\r\n\r\n              return (\r\n                <div key={criterion.id} style={{\r\n                  background: 'white',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  padding: '1.25rem',\r\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n                }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                    <div style={{ flex: 1 }}>\r\n                      <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                        {criterion.name}\r\n                        <span style={{ color: '#3b82f6', marginLeft: '0.5rem' }}>\r\n                          ({criterion.maxPoints} pts)\r\n                        </span>\r\n                      </h4>\r\n                      <p style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.25rem' }}>\r\n                        {renderFormattedContent(criterion.description)}\r\n                      </p>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => setShowRubricComments(prev => ({\r\n                        ...prev,\r\n                        [criterion.id]: !prev[criterion.id]\r\n                      }))}\r\n                      style={{\r\n                        color: '#3b82f6',\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        fontSize: '0.875rem',\r\n                        textDecoration: 'underline',\r\n                        cursor: 'pointer',\r\n                        marginLeft: '1rem'\r\n                      }}\r\n                    >\r\n                      {showComments ? 'Hide' : 'Show'} Level Details\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Level Selection */}\r\n                  <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\r\n                    gap: '0.5rem',\r\n                    marginBottom: '1rem'\r\n                  }}>\r\n                    {loadedRubric.rubricLevels.map((level) => {\r\n                      const isSelected = currentGrading?.selectedLevel === level.level;\r\n                      const points = Math.round(criterion.maxPoints * level.multiplier);\r\n\r\n                      return (\r\n                        <button\r\n                          key={level.level}\r\n                          onClick={() => updateRubricGrading(criterion.id, level.level)}\r\n                          style={{\r\n                            padding: '0.75rem',\r\n                            borderRadius: '0.5rem',\r\n                            border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\r\n                            fontSize: '0.875rem',\r\n                            fontWeight: '500',\r\n                            cursor: 'pointer',\r\n                            transition: 'all 0.2s ease',\r\n                            backgroundColor: isSelected ? level.color : 'white',\r\n                            color: isSelected ? 'white' : '#374151',\r\n                            transform: isSelected ? 'scale(1.05)' : 'none',\r\n                            textAlign: 'center'\r\n                          }}\r\n                        >\r\n                          <div style={{ fontWeight: '600' }}>{level.name}</div>\r\n                          <div style={{ fontSize: '0.75rem', marginTop: '0.25rem' }}>\r\n                            {level.level === 'incomplete' ? '0' : points} pts\r\n                          </div>\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n\r\n                  {/* Level Descriptions */}\r\n                  {showComments && (\r\n                    <div style={{\r\n                      background: '#f9fafb',\r\n                      borderRadius: '0.5rem',\r\n                      padding: '1rem',\r\n                      marginBottom: '1rem'\r\n                    }}>\r\n                      <h5 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                        Level Descriptions:\r\n                      </h5>\r\n                      <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n                        gap: '0.75rem'\r\n                      }}>\r\n                        {loadedRubric.rubricLevels.map((level) => (\r\n                          <div\r\n                            key={level.level}\r\n                            style={{\r\n                              background: 'white',\r\n                              borderRadius: '0.25rem',\r\n                              border: '1px solid #d1d5db',\r\n                              borderLeft: `4px solid ${level.color}`,\r\n                              padding: '0.75rem'\r\n                            }}\r\n                          >\r\n                            <div style={{ fontWeight: '500', fontSize: '0.875rem', color: level.color }}>\r\n                              {level.name}\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem' }}>\r\n                              {criterion.levels[level.level]?.pointRange} pts\r\n                            </div>\r\n                            <div style={{ fontSize: '0.75rem', color: '#374151' }}>\r\n                              {renderFormattedContent(criterion.levels[level.level]?.description)}\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Custom Comments */}\r\n                  <div>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '500',\r\n                      color: '#374151',\r\n                      marginBottom: '0.5rem'\r\n                    }}>\r\n                      Additional Comments:\r\n                    </label>\r\n\r\n                    {/* Quick Feedback Dropdowns */}\r\n                    {criterion.feedbackLibrary && (\r\n                      <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.75rem', flexWrap: 'wrap' }}>\r\n                        {Object.entries(criterion.feedbackLibrary).map(([category, comments]) => (\r\n                          <select\r\n                            key={category}\r\n                            onChange={(e) => {\r\n                              if (e.target.value) {\r\n                                addCriterionFeedback(criterion.id, e.target.value);\r\n                                e.target.value = '';\r\n                              }\r\n                            }}\r\n                            defaultValue=\"\"\r\n                            style={{\r\n                              padding: '0.5rem',\r\n                              border: '1px solid #d1d5db',\r\n                              borderRadius: '0.25rem',\r\n                              fontSize: '0.75rem',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                          >\r\n                            <option value=\"\">Add {category}...</option>\r\n                            {comments.map((comment, idx) => (\r\n                              <option key={idx} value={comment}>{renderFormattedContent(comment)}</option>\r\n                            ))}\r\n                          </select>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n\r\n                    <textarea\r\n                      value={currentGrading?.customComments || ''}\r\n                      onChange={(e) => updateRubricGrading(criterion.id, currentGrading?.selectedLevel, e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.75rem',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '0.5rem',\r\n                        fontSize: '0.875rem',\r\n                        resize: 'none',\r\n                        minHeight: '80px'\r\n                      }}\r\n                      rows=\"3\"\r\n                      placeholder=\"Add specific feedback for this criterion...\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Selected Level Feedback */}\r\n                  {currentGrading?.selectedLevel && (\r\n                    <div style={{\r\n                      marginTop: '0.75rem',\r\n                      padding: '0.75rem',\r\n                      background: '#eff6ff',\r\n                      borderRadius: '0.25rem',\r\n                      border: '1px solid #bfdbfe'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.875rem' }}>\r\n                        <strong>Selected Level:</strong> {loadedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)?.name}\r\n                        {' '}({criterion.levels[currentGrading.selectedLevel]?.pointRange} pts)\r\n                      </div>\r\n                      <div style={{ fontSize: '0.875rem', color: '#374151', marginTop: '0.25rem' }}>\r\n                        {renderFormattedContent(criterion.levels[currentGrading.selectedLevel]?.description)}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Rubric Summary */}\r\n          <div style={{\r\n            marginTop: '1.5rem',\r\n            background: 'white',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.5rem',\r\n            padding: '1rem'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <div>\r\n                <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                  Rubric Score Summary\r\n                </h4>\r\n                <p style={{ fontSize: '0.875rem', color: '#6b7280' }}>\r\n                  Based on selected levels across all criteria\r\n                </p>\r\n              </div>\r\n              <div style={{ textAlign: 'right' }}>\r\n                <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#3b82f6' }}>\r\n                  {Math.round(scoreSummary.finalScore * 10) / 10}/{loadedRubric.assignmentInfo.totalPoints}\r\n                </div>\r\n                <div style={{ fontSize: '1.125rem', color: '#6b7280' }}>\r\n                  ({Math.round((scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 1000) / 10}%)\r\n                </div>\r\n                {scoreSummary.penaltyApplied && (\r\n                  <div style={{ fontSize: '0.875rem', color: '#dc2626', marginTop: '0.25rem' }}>\r\n                    Raw: {Math.round(scoreSummary.rawScore * 10) / 10} (Late Penalty Applied)\r\n                  </div>\r\n                )}\r\n                <div style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: (scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 100 >= loadedRubric.assignmentInfo.passingThreshold\r\n                    ? '#16a34a' : '#dc2626'\r\n                }}>\r\n                  {(scoreSummary.finalScore / (loadedRubric.assignmentInfo.totalPoints || 1)) * 100 >= loadedRubric.assignmentInfo.passingThreshold\r\n                    ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Enhanced Complete and Grade Next Section */}\r\n      {loadedRubric && currentStudent && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\r\n          border: '2px solid #10b981',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#047857', marginBottom: '1rem' }}>\r\n            Ready to move to the next student?\r\n          </h3>\r\n          <p style={{ color: '#065f46', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n            Choose how to save the current grading before proceeding.\r\n          </p>\r\n\r\n          <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n            {/* Save as Draft Button */}\r\n            <button\r\n              onClick={handleNextStudentAsDraft}\r\n              style={{\r\n                display: 'inline-flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\r\n                color: 'white',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '600',\r\n                boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = 'translateY(-2px)';\r\n                e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '1.1rem' }}>📝</span>\r\n              Save & Grade Next Student\r\n            </button>\r\n\r\n            {/* Finalize & Grade Next Button */}\r\n            <button\r\n              onClick={handleNextStudentAsFinal}\r\n              style={{\r\n                display: 'inline-flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                color: 'white',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '600',\r\n                boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.target.style.transform = 'translateY(-2px)';\r\n                e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.target.style.transform = 'translateY(0)';\r\n                e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '1.1rem' }}>✅</span>\r\n              Finalize & Grade Next Student\r\n            </button>\r\n          </div>\r\n\r\n          <div style={{\r\n            marginTop: '1rem',\r\n            padding: '0.75rem',\r\n            background: 'rgba(255, 255, 255, 0.6)',\r\n            borderRadius: '0.375rem',\r\n            fontSize: '0.75rem',\r\n            color: '#065f46'\r\n          }}>\r\n            <strong>Draft:</strong> Save progress, can edit later • <strong>Finalize:</strong> Complete grading, ready for student/LMS\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Score Summary */}\r\n      <div style={{\r\n        textAlign: 'center',\r\n        background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n        border: '1px solid #bbf7d0',\r\n        borderRadius: '0.75rem',\r\n        padding: '1.5rem',\r\n        marginBottom: '2rem'\r\n      }}>\r\n        <h2 style={{ fontSize: '1.5rem', fontWeight: '700', color: '#15803d', marginBottom: '1rem' }}>\r\n          📊 Final Score\r\n        </h2>\r\n        <div style={{ fontSize: '3rem', fontWeight: '700', color: '#16a34a', marginBottom: '1rem' }}>\r\n          {Math.round(scoreSummary.finalScore * 10) / 10}\r\n          <span style={{ fontSize: '1.5rem', color: '#6b7280' }}>\r\n            / {loadedRubric ? loadedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n          </span>\r\n        </div>\r\n        <div style={{ fontSize: '1.25rem', color: '#6b7280', marginBottom: '1rem' }}>\r\n          ({Math.round((scoreSummary.finalScore / (loadedRubric ? (loadedRubric.assignmentInfo.totalPoints || 1) : (gradingData.assignment.maxPoints || 1))) * 1000) / 10}%)\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'center', gap: '1rem', flexWrap: 'wrap' }}>\r\n          {loadedRubric && (\r\n            <div style={{\r\n              fontSize: '0.875rem',\r\n              background: '#dcfce7',\r\n              color: '#15803d',\r\n              padding: '0.25rem 0.75rem',\r\n              borderRadius: '1rem'\r\n            }}>\r\n              📋 Rubric Assessment Active\r\n            </div>\r\n          )}\r\n          {scoreSummary.penaltyApplied && (\r\n            <div style={{\r\n              fontSize: '0.875rem',\r\n              background: '#fee2e2',\r\n              color: '#dc2626',\r\n              padding: '0.25rem 0.75rem',\r\n              borderRadius: '1rem'\r\n            }}>\r\n              ⏰ Late Penalty Applied\r\n            </div>\r\n          )}\r\n          {gradingSession && gradingSession.students && (\r\n            <div style={{\r\n              fontSize: '0.875rem',\r\n              background: '#dbeafe',\r\n              color: '#2563eb',\r\n              padding: '0.25rem 0.75rem',\r\n              borderRadius: '1rem'\r\n            }}>\r\n              👥 Batch Session Active\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Save Draft Section */}\r\n      {currentStudent && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\r\n          border: '1px solid #f59e0b',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#92400e', marginBottom: '0.75rem' }}>\r\n            💾 Save Your Progress\r\n          </h3>\r\n          <p style={{ color: '#a16207', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n            Save your current grading progress as a draft. You can return to complete it later.\r\n          </p>\r\n          <button\r\n            onClick={() => {\r\n              if (currentStudent?.id) {\r\n                saveDraft(currentStudent.id, localGradingData);\r\n                // Show success feedback\r\n                const button = document.activeElement;\r\n                const originalText = button.innerHTML;\r\n                const originalBg = button.style.background;\r\n                button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\r\n                button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\r\n                setTimeout(() => {\r\n                  button.innerHTML = originalText;\r\n                  button.style.background = originalBg;\r\n                }, 2000);\r\n              }\r\n            }}\r\n            disabled={!currentStudent?.id}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              background: currentStudent?.id ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\r\n              color: 'white',\r\n              padding: '1rem 2rem',\r\n              borderRadius: '0.75rem',\r\n              border: 'none',\r\n              cursor: currentStudent?.id ? 'pointer' : 'not-allowed',\r\n              fontSize: '1rem',\r\n              fontWeight: '600',\r\n              boxShadow: currentStudent?.id ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\r\n              transform: 'translateY(0)',\r\n              transition: 'all 0.2s ease'\r\n            }}\r\n            onMouseOver={(e) => {\r\n              if (currentStudent?.id) {\r\n                e.currentTarget.style.transform = 'translateY(-2px)';\r\n                e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\r\n              }\r\n            }}\r\n            onMouseOut={(e) => {\r\n              if (currentStudent?.id) {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\r\n              }\r\n            }}\r\n            title={currentStudent?.id ? 'Save current grading progress' : 'No student selected to save'}\r\n          >\r\n            <Save size={20} />\r\n            Save Draft\r\n          </button>\r\n          {!currentStudent?.id && (\r\n            <p style={{ marginTop: '0.75rem', fontSize: '0.75rem', color: '#6b7280' }}>\r\n              Select a student from the Class Manager to enable draft saving\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* General Feedback Section */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          📝 General Feedback\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1.5rem' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Overall Comments\r\n              </label>\r\n              <textarea\r\n                value={gradingData.feedback.general}\r\n                onChange={(e) => setGradingData(prevData => ({\r\n                  ...prevData,\r\n                  feedback: { ...prevData.feedback, general: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  resize: 'none',\r\n                  minHeight: '100px'\r\n                }}\r\n                rows=\"4\"\r\n                placeholder=\"General comments about the assignment...\"\r\n              />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Strengths\r\n                </label>\r\n                <textarea\r\n                  value={gradingData.feedback.strengths}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    feedback: { ...prevData.feedback, strengths: e.target.value }\r\n                  }))}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    resize: 'none',\r\n                    minHeight: '100px'\r\n                  }}\r\n                  rows=\"4\"\r\n                  placeholder=\"What the student did well...\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Areas for Improvement\r\n                </label>\r\n                <textarea\r\n                  value={gradingData.feedback.improvements}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    feedback: { ...prevData.feedback, improvements: e.target.value }\r\n                  }))}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    resize: 'none',\r\n                    minHeight: '100px'\r\n                  }}\r\n                  rows=\"4\"\r\n                  placeholder=\"Suggestions for improvement...\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* File Attachments */}\r\n                  <div style={{ marginBottom: '2rem' }}>\r\n                    <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n                      📎 File Attachments\r\n                    </h3>\r\n                    <div style={{\r\n                      border: '2px dashed #d1d5db',\r\n                      borderRadius: '0.5rem',\r\n                      padding: '1.5rem',\r\n                      textAlign: 'center'\r\n                    }}>\r\n                      <input\r\n                        ref={fileInputRef}\r\n                        type=\"file\"\r\n                        multiple\r\n                        onChange={(e) => handleFileUpload(e.target.files)}\r\n                        style={{ display: 'none' }}\r\n                      />\r\n                      <button\r\n                        onClick={() => fileInputRef.current?.click()}\r\n                        style={{\r\n                          display: 'flex',\r\n                          alignItems: 'center',\r\n                          gap: '0.5rem',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          padding: '0.75rem 1.5rem',\r\n                          borderRadius: '0.5rem',\r\n                          border: 'none',\r\n                          cursor: 'pointer',\r\n                          margin: '0 auto'\r\n                        }}\r\n                      >\r\n                        <Plus size={20} />\r\n                        Add Files\r\n                      </button>\r\n                      <p style={{ color: '#6b7280', marginTop: '0.5rem', fontSize: '0.875rem' }}>\r\n                        Upload images, documents, or other files relevant to the assignment\r\n                      </p>\r\n                    </div>\r\n      \r\n                    {gradingData.attachments.length > 0 && (\r\n                      <div style={{ marginTop: '1rem' }}>\r\n                        <h4 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                          Uploaded Files ({gradingData.attachments.length})\r\n                        </h4>\r\n                        <div style={{\r\n                          display: 'grid',\r\n                          gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                          gap: '1rem'\r\n                        }}>\r\n                          {gradingData.attachments.map((file) => (\r\n                            <div key={file.id} style={{\r\n                              border: '1px solid #d1d5db',\r\n                              borderRadius: '0.5rem',\r\n                              overflow: 'hidden',\r\n                              background: 'white'\r\n                            }}>\r\n                              {file.type.startsWith('image/') ? (\r\n                                <div style={{ position: 'relative' }}>\r\n                                  <img\r\n                                    src={file.base64Data || URL.createObjectURL(file.file)}\r\n                                    alt={file.name}\r\n                                    style={{\r\n                                      width: '100%',\r\n                                      height: '150px',\r\n                                      objectFit: 'cover'\r\n                                    }}\r\n                                  />\r\n                                  <button\r\n                                    onClick={() => removeAttachment(file.id)}\r\n                                    style={{\r\n                                      position: 'absolute',\r\n                                      top: '0.5rem',\r\n                                      right: '0.5rem',\r\n                                      background: '#dc2626',\r\n                                      color: 'white',\r\n                                      borderRadius: '50%',\r\n                                      width: '24px',\r\n                                      height: '24px',\r\n                                      border: 'none',\r\n                                      cursor: 'pointer',\r\n                                      display: 'flex',\r\n                                      alignItems: 'center',\r\n                                      justifyContent: 'center'\r\n                                    }}\r\n                                  >\r\n                                    <X size={12} />\r\n                                  </button>\r\n                                </div>\r\n                              ) : (\r\n                                <div style={{ padding: '1rem' }}>\r\n                                  <FileText size={40} style={{ color: '#6b7280', margin: '0 auto 0.5rem auto', display: 'block' }} />\r\n                                </div>\r\n                              )}\r\n                              <div style={{ padding: '0.75rem' }}>\r\n                                <p style={{ fontWeight: '500', fontSize: '0.875rem', marginBottom: '0.25rem' }}>\r\n                                  {file.name}\r\n                                </p>\r\n                                <p style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                                  {(file.size / 1024).toFixed(1)} KB\r\n                                </p>\r\n                                {!file.type.startsWith('image/') && (\r\n                                  <button\r\n                                    onClick={() => removeAttachment(file.id)}\r\n                                    style={{\r\n                                      marginTop: '0.5rem',\r\n                                      color: '#dc2626',\r\n                                      background: 'none',\r\n                                      border: 'none',\r\n                                      fontSize: '0.75rem',\r\n                                      cursor: 'pointer'\r\n                                    }}\r\n                                  >\r\n                                    Remove\r\n                                  </button>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n      {/* Video Links */}\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n          🎥 Video Links\r\n        </h3>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n          border: '1px solid #d1d5db',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem'\r\n        }}>\r\n          <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n            <input\r\n              type=\"url\"\r\n              value={videoLinkInput}\r\n              onChange={(e) => setVideoLinkInput(e.target.value)}\r\n              placeholder=\"Enter video URL (YouTube, Vimeo, etc.)\"\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.75rem',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              value={videoTitle}\r\n              onChange={(e) => setVideoTitle(e.target.value)}\r\n              placeholder=\"Video title (optional)\"\r\n              style={{\r\n                width: '200px',\r\n                padding: '0.75rem',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <button\r\n              onClick={addVideoLink}\r\n              disabled={!videoLinkInput.trim()}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                padding: '0.75rem 1rem',\r\n                background: videoLinkInput.trim() ? '#10b981' : '#d1d5db',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.5rem',\r\n                cursor: videoLinkInput.trim() ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              <Video size={16} />\r\n              Add\r\n            </button>\r\n          </div>\r\n\r\n          {gradingData.videoLinks.length > 0 && (\r\n            <div>\r\n              <h4 style={{ fontSize: '0.875rem', fontWeight: '600', marginBottom: '0.5rem', color: '#374151' }}>\r\n                Video Links:\r\n              </h4>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                {gradingData.videoLinks.map((link) => (\r\n                  <div\r\n                    key={link.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.75rem',\r\n                      background: '#ffffff',\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '0.5rem'\r\n                    }}\r\n                  >\r\n                    <Video size={16} style={{ color: '#6b7280' }} />\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ fontWeight: '500', fontSize: '0.875rem', color: '#374151' }}>\r\n                        {link.title}\r\n                      </div>\r\n                      <a\r\n                        href={link.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          fontSize: '0.75rem',\r\n                          color: '#3b82f6',\r\n                          textDecoration: 'none'\r\n                        }}\r\n                      >\r\n                        {link.url}\r\n                      </a>\r\n                    </div>\r\n                    <span style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                      {link.addedDate}\r\n                    </span>\r\n                    <button\r\n                      onClick={() => removeVideoLink(link.id)}\r\n                      style={{\r\n                        background: 'none',\r\n                        border: 'none',\r\n                        color: '#ef4444',\r\n                        cursor: 'pointer',\r\n                        padding: '0.25rem'\r\n                      }}\r\n                    >\r\n                      <X size={16} />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradingTemplate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}