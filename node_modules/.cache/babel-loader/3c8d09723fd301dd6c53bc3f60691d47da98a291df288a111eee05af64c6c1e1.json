{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2, Edit3 } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RubricCreator = () => {\n  _s();\n  // Get shared context functions and state\n  const {\n    sharedRubric,\n    setSharedRubric,\n    transferRubricToGradingWithDetails,\n    activeTab\n  } = useAssessment();\n\n  // Default rubric levels (7-level system)\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // Initialize state from shared context or defaults\n  const [rubricData, setRubricData] = useState(() => {\n    if (sharedRubric) {\n      return sharedRubric;\n    }\n    return {\n      assignmentInfo: {\n        title: '',\n        description: '',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: [...defaultLevels],\n      criteria: [{\n        id: 'criterion-1',\n        name: '',\n        description: '',\n        maxPoints: 20,\n        weight: 20,\n        levels: {},\n        feedbackLibrary: {\n          strengths: [],\n          improvements: [],\n          general: []\n        }\n      }]\n    };\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [inlineEditor, setInlineEditor] = useState({\n    show: false,\n    content: '',\n    field: null,\n    onSave: null,\n    criterionId: null,\n    level: null,\n    type: null // 'assignment', 'criterion', or 'level'\n  });\n  const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n  // Use refs instead of state for rich text content to prevent cursor jumping\n  const richTextContentRef = useRef('');\n  const editorRef = useRef(null);\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n\n  // Helper functions for HTML content handling\n  const containsHtml = content => {\n    return content && /<[^>]*>/.test(content);\n  };\n  const stripHtml = html => {\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n    return tempDiv.textContent || tempDiv.innerText || '';\n  };\n  const sanitizeHtml = html => {\n    // Create a temporary div to clean and validate HTML\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n    return tempDiv.innerHTML;\n  };\n\n  // FIXED: Improved clean pasted content function based on corrections document\n  // --- RubricCreator.js ---\n  const cleanPastedContent = rawHtml => {\n    if (!rawHtml) return '';\n\n    // Parse into DOM so we can manipulate nodes safely\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = rawHtml;\n\n    ////////////////////////////////////////////////////////////\n    // 1.  Unwrap <p> elements that live directly under an <li>\n    ////////////////////////////////////////////////////////////\n    tempDiv.querySelectorAll('li > p').forEach(p => {\n      const parentLi = p.parentNode;\n      // Move every child of <p> in front of the <p> itself\n      while (p.firstChild) parentLi.insertBefore(p.firstChild, p);\n      parentLi.removeChild(p); // remove the now-empty <p>\n    });\n\n    ////////////////////////////////////////////////////////////\n    // 2.  Strip junk attributes & disallowed tags\n    ////////////////////////////////////////////////////////////\n    const allowed = ['p', 'br', 'strong', 'em', 'u', 'b', 'i', 'ol', 'ul', 'li', 'blockquote', 'pre', 'code', 'sup', 'sub', 'a', 'h1', 'h2', 'h3'];\n    const walk = node => {\n      // text nodes are fine – clone them\n      if (node.nodeType === Node.TEXT_NODE) return node.cloneNode();\n\n      // element nodes\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        const tag = node.tagName.toLowerCase();\n\n        // If the tag isn’t on our whitelist, just recurse its children\n        if (!allowed.includes(tag)) {\n          const frag = document.createDocumentFragment();\n          node.childNodes.forEach(child => {\n            const cleaned = walk(child);\n            if (cleaned) frag.appendChild(cleaned);\n          });\n          return frag;\n        }\n\n        // Build a clean copy of the allowed element\n        const el = document.createElement(tag);\n\n        // Keep only safe attributes\n        if (tag === 'a' && node.hasAttribute('href')) {\n          el.setAttribute('href', node.getAttribute('href'));\n        }\n        node.childNodes.forEach(child => {\n          const cleaned = walk(child);\n          if (cleaned) el.appendChild(cleaned);\n        });\n        return el;\n      }\n      return null; // skip comments etc.\n    };\n    const cleanRoot = walk(tempDiv);\n\n    ////////////////////////////////////////////////////////////\n    // 3.  Serialize + light whitespace normalisation\n    ////////////////////////////////////////////////////////////\n    // Wrap fragment in a temporary <div> so we can read .innerHTML\n    const wrapper = document.createElement('div');\n    wrapper.appendChild(cleanRoot); // cleanRoot is a fragment\n\n    let html = wrapper.innerHTML.replace(/&nbsp;{2,}/g, '&nbsp;') // ≥2 nbsp → 1\n    .replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>') // max 3 <br>\n    .replace(/^\\s*(<br\\s*\\/?>\\s*)+/gi, '') // leading breaks\n    .replace(/(<br\\s*\\/?>\\s*)+\\s*$/gi, '') // trailing breaks\n    .trim();\n    return html;\n  };\n\n  // Cursor position management functions\n  const saveCursorPosition = () => {\n    const editor = editorRef.current;\n    if (!editor) return null;\n    const selection = window.getSelection();\n    if (selection.rangeCount === 0) return null;\n    const range = selection.getRangeAt(0);\n    return {\n      startContainer: range.startContainer,\n      startOffset: range.startOffset,\n      endContainer: range.endContainer,\n      endOffset: range.endOffset\n    };\n  };\n  const restoreCursorPosition = savedPosition => {\n    if (!savedPosition || !editorRef.current) return;\n    try {\n      const selection = window.getSelection();\n      const range = document.createRange();\n      range.setStart(savedPosition.startContainer, savedPosition.startOffset);\n      range.setEnd(savedPosition.endContainer, savedPosition.endOffset);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } catch (error) {\n      // If cursor restoration fails, place cursor at end\n      const editor = editorRef.current;\n      const range = document.createRange();\n      const selection = window.getSelection();\n      range.selectNodeContents(editor);\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  };\n\n  // Auto-save to shared context whenever rubricData changes\n  useEffect(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout);\n    }\n    const timeoutId = setTimeout(() => {\n      setSharedRubric(rubricData);\n    }, 1000); // Auto-save after 1 second of inactivity\n\n    setAutoSaveTimeout(timeoutId);\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [rubricData, setSharedRubric]);\n\n  // Load shared rubric when it changes externally\n  useEffect(() => {\n    if (sharedRubric && activeTab === 'rubric-creator') {\n      setRubricData(sharedRubric);\n    }\n  }, [sharedRubric, activeTab]);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Open inline editor for text editing - FIXED to preserve HTML\n  const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\n    // Initialize the ref with current content (preserve HTML)\n    richTextContentRef.current = content || '';\n    setInlineEditor({\n      show: true,\n      content: content || '',\n      field,\n      onSave,\n      criterionId,\n      level,\n      type\n    });\n\n    // Focus the editor after it's rendered\n    setTimeout(() => {\n      const editor = editorRef.current;\n      if (editor) {\n        // FIXED: Preserve HTML formatting when opening editor\n        editor.innerHTML = content || '';\n        editor.focus();\n        // Place cursor at end\n        const range = document.createRange();\n        const selection = window.getSelection();\n        range.selectNodeContents(editor);\n        range.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }, 100);\n  };\n\n  // Enhanced rich text editor functions\n  const handleRichTextCommand = (command, value = null) => {\n    const editor = editorRef.current;\n    if (editor) {\n      editor.focus();\n\n      // Save cursor position before command\n      const cursorPos = saveCursorPosition();\n      document.execCommand(command, false, value);\n\n      // Update our ref content with light cleaning to maintain consistency\n      const currentContent = editor.innerHTML;\n      // Only apply light cleaning for commands, not the heavy paste cleaning\n      const lightCleaned = currentContent.replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>') // Limit consecutive line breaks\n      .replace(/&nbsp;{3,}/gi, '&nbsp;&nbsp;'); // Limit consecutive spaces\n\n      if (lightCleaned !== currentContent) {\n        editor.innerHTML = lightCleaned;\n      }\n      richTextContentRef.current = editor.innerHTML;\n\n      // Restore cursor position if needed\n      setTimeout(() => {\n        if (cursorPos && editor.contains(cursorPos.startContainer)) {\n          restoreCursorPosition(cursorPos);\n        }\n      }, 0);\n    }\n  };\n\n  // Handle rich text changes without state updates\n  const handleRichTextChange = e => {\n    const editor = editorRef.current;\n    if (editor) {\n      // Update our ref with current content\n      richTextContentRef.current = editor.innerHTML;\n    }\n  };\n\n  // FIXED: Handle paste events to clean up content while preserving formatting\n  const handlePaste = e => {\n    e.preventDefault();\n    const editor = editorRef.current;\n    if (!editor) return;\n    const clipboardData = e.clipboardData || window.clipboardData;\n\n    // Try to get HTML first (preserves formatting), fallback to plain text\n    let pastedData = clipboardData.getData('text/html');\n    if (!pastedData) {\n      // If no HTML, get plain text and convert line breaks\n      pastedData = clipboardData.getData('text/plain');\n      if (pastedData) {\n        // Convert plain text line breaks to HTML, but don't add manual br conversion\n        pastedData = pastedData;\n      }\n    }\n    if (pastedData) {\n      // Clean the pasted content while preserving formatting structure\n      const cleanedContent = cleanPastedContent(pastedData);\n\n      // Insert the cleaned content\n      if (cleanedContent) {\n        document.execCommand('insertHTML', false, cleanedContent);\n\n        // Update our ref with the current editor content\n        setTimeout(() => {\n          if (editor) {\n            richTextContentRef.current = editor.innerHTML;\n          }\n        }, 0);\n      }\n    }\n  };\n\n  // FIXED: Handle key events properly\n  const handleKeyDown = e => {\n    const editor = editorRef.current;\n    if (!editor) return;\n    if (e.key === 'Enter' && !e.shiftKey) {\n      // Let the browser handle normal paragraph creation by default\n      // Only clean afterwards if needed\n      setTimeout(() => {\n        const currentContent = editor.innerHTML;\n        // Only clean if there are excessive breaks\n        const cleaned = currentContent.replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>');\n        if (cleaned !== currentContent) {\n          editor.innerHTML = cleaned;\n        }\n        richTextContentRef.current = editor.innerHTML;\n      }, 0);\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      document.execCommand('insertHTML', false, '&nbsp;&nbsp;&nbsp;&nbsp;');\n      richTextContentRef.current = editor.innerHTML;\n    }\n\n    // Handle common keyboard shortcuts\n    if (e.ctrlKey || e.metaKey) {\n      switch (e.key) {\n        case 'b':\n          e.preventDefault();\n          handleRichTextCommand('bold');\n          break;\n        case 'i':\n          e.preventDefault();\n          handleRichTextCommand('italic');\n          break;\n        case 'u':\n          e.preventDefault();\n          handleRichTextCommand('underline');\n          break;\n      }\n    }\n  };\n\n  // FIXED: Close inline editor and save HTML content instead of plain text\n  const closeInlineEditor = (save = false) => {\n    if (save && inlineEditor.onSave) {\n      // Get the current content from ref (most up-to-date)\n      const finalContent = richTextContentRef.current;\n      // FIXED: Save HTML content instead of converting to plain text\n      const sanitizedHtml = sanitizeHtml(finalContent);\n      inlineEditor.onSave(sanitizedHtml);\n    }\n    setInlineEditor({\n      show: false,\n      content: '',\n      field: null,\n      onSave: null,\n      criterionId: null,\n      level: null,\n      type: null\n    });\n    richTextContentRef.current = '';\n  };\n\n  // Reset textarea sizes to original dimensions\n  const resetTextareaSizes = () => {\n    const textareas = document.querySelectorAll('textarea');\n    textareas.forEach(textarea => {\n      // Reset to default sizes based on context\n      if (textarea.closest('.assignment-info')) {\n        textarea.style.height = '80px';\n        textarea.style.maxHeight = '200px';\n      } else if (textarea.closest('td')) {\n        // Criterion or level descriptions\n        if (textarea.rows <= 2) {\n          textarea.style.height = '48px';\n          textarea.style.maxHeight = '200px';\n        } else {\n          textarea.style.height = '80px';\n          textarea.style.maxHeight = '300px';\n        }\n      }\n      textarea.style.width = '100%';\n    });\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n\n  // Update assignment info and recalculate total points\n  const updateAssignmentInfo = (field, value) => {\n    setRubricData(prev => {\n      const updated = {\n        ...prev,\n        assignmentInfo: {\n          ...prev.assignmentInfo,\n          [field]: value\n        }\n      };\n\n      // Auto-calculate total points\n      if (field !== 'totalPoints') {\n        updated.assignmentInfo.totalPoints = calculateTotalPoints();\n      }\n      return updated;\n    });\n  };\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    if (!item || !item.trim()) return;\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], item.trim()]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as backup\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Prepare rubric data for export/transfer\n  const prepareRubricForExport = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Update total points\n    exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n    return exportData;\n  };\n\n  // Transfer to grading tool directly\n  const transferToGrading = () => {\n    const exportData = prepareRubricForExport();\n    transferRubricToGradingWithDetails(exportData);\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n\n          // Validate the imported data structure\n          if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n            setRubricData(importedData);\n          } else {\n            alert('Invalid rubric format. Please check the JSON structure.');\n          }\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n          console.error('Import error:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Reset to default rubric\n  const resetRubric = () => {\n    if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n      const defaultRubric = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100\n        },\n        rubricLevels: [...defaultLevels],\n        criteria: [{\n          id: 'criterion-1',\n          name: '',\n          description: '',\n          maxPoints: 20,\n          weight: 20,\n          levels: {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: []\n          }\n        }]\n      };\n      setRubricData(defaultRubric);\n    }\n  };\n\n  // Export to HTML\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const totalPoints = calculateTotalPoints();\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <p style=\"color: #64748b; font-size: 1.1em;\">${stripHtml(rubricData.assignmentInfo.description) || 'No description provided'}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\n                            ${stripHtml(criterion.description) || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => {\n      var _criterion$levels$lev3;\n      return `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${stripHtml((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // FIXED: Content display component that handles both HTML and plain text\n  const ContentDisplay = ({\n    content,\n    onEdit,\n    placeholder,\n    isTextarea = false,\n    className = \"\"\n  }) => {\n    const hasHtml = containsHtml(content);\n    if (hasHtml && !isTextarea) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `relative group ${className}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 border rounded text-xs bg-white min-h-[80px] max-h-[300px] overflow-y-auto\",\n          style: {\n            wordWrap: 'break-word',\n            overflowWrap: 'break-word',\n            whiteSpace: 'pre-wrap',\n            maxWidth: '100%'\n          },\n          dangerouslySetInnerHTML: {\n            __html: content\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: onEdit,\n          className: \"absolute top-1 right-1 opacity-70 group-hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n          title: \"Open rich text editor\",\n          children: /*#__PURE__*/_jsxDEV(Edit3, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 857,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 17\n      }, this);\n    }\n    if (isTextarea) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: content,\n          onChange: e => onEdit(e.target.value),\n          className: `w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12 ${className}`,\n          rows: \"3\",\n          placeholder: placeholder,\n          title: \"Type here for quick editing, or click the expand button for rich text editor\",\n          style: {\n            minHeight: '80px',\n            maxHeight: '200px',\n            resize: 'both',\n            wordWrap: 'break-word',\n            overflowWrap: 'break-word'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => onEdit(null, true) // Signal to open rich editor\n          ,\n          className: \"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n          title: \"Open rich text editor\",\n          children: /*#__PURE__*/_jsxDEV(Maximize2, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 865,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: content,\n        onChange: e => onEdit(e.target.value),\n        className: `w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 ${className}`,\n        rows: \"2\",\n        placeholder: placeholder,\n        title: \"Type here for quick editing, or click the expand button for rich text editor\",\n        style: {\n          minHeight: '48px',\n          maxHeight: '200px',\n          resize: 'both',\n          wordWrap: 'break-word',\n          overflowWrap: 'break-word'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 895,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => onEdit(null, true) // Signal to open rich editor\n        ,\n        className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n        title: \"Open rich text editor\",\n        children: /*#__PURE__*/_jsxDEV(Maximize2, {\n          size: 12\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 916,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 894,\n      columnNumber: 13\n    }, this);\n  };\n\n  // Enhanced Rich Text Toolbar Component\n  const RichTextToolbar = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border-b bg-gray-50 p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-1 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => {\n            if (e.target.value) {\n              handleRichTextCommand('formatBlock', e.target.value);\n              e.target.value = '';\n            }\n          },\n          className: \"p-1 text-xs border rounded\",\n          title: \"Text Format\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 939,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"h1\",\n            children: \"Heading 1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"h2\",\n            children: \"Heading 2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"h3\",\n            children: \"Heading 3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 942,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"p\",\n            children: \"Paragraph\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 943,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"blockquote\",\n            children: \"Quote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 944,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pre\",\n            children: \"Code Block\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 929,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 928,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => {\n            if (e.target.value) {\n              handleRichTextCommand('fontSize', e.target.value);\n              e.target.value = '';\n            }\n          },\n          className: \"p-1 text-xs border rounded\",\n          title: \"Font Size\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 961,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"Small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 962,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"Normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 963,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            children: \"Medium\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 964,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5\",\n            children: \"Large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 965,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"6\",\n            children: \"X-Large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 966,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 951,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 950,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('bold'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Bold (Ctrl+B)\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: \"B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 978,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 972,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('italic'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Italic (Ctrl+I)\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"italic\",\n            children: \"I\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('underline'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Underline (Ctrl+U)\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"underline\",\n            children: \"U\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 988,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('strikeThrough'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Strikethrough\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"line-through\",\n            children: \"S\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1002,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 996,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 971,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          onChange: e => handleRichTextCommand('foreColor', e.target.value),\n          className: \"w-8 h-8 border rounded cursor-pointer\",\n          title: \"Text Color\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          onChange: e => handleRichTextCommand('hiliteColor', e.target.value),\n          className: \"w-8 h-8 border rounded cursor-pointer ml-1\",\n          title: \"Highlight Color\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertUnorderedList'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Bullet List\",\n          children: \"\\u2022 List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1024,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertOrderedList'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Numbered List\",\n          children: \"1. List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('outdent'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Decrease Indent\",\n          children: \"\\u21E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1040,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('indent'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Increase Indent\",\n          children: \"\\u21E5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1023,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('justifyLeft'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Align Left\",\n          children: \"\\u2AF7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('justifyCenter'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Align Center\",\n          children: \"\\u2261\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1068,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('justifyRight'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Align Right\",\n          children: \"\\u2AF8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1076,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('justifyFull'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Justify\",\n          children: \"\\u2AFC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1084,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex border-r border-gray-300 pr-2 mr-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => {\n            const url = prompt('Enter URL:');\n            if (url) handleRichTextCommand('createLink', url);\n          },\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Insert Link\",\n          children: \"\\uD83D\\uDD17\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1096,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertHorizontalRule'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Insert Line\",\n          children: \"\\u2500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('superscript'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Superscript\",\n          children: \"x\\xB2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('subscript'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Subscript\",\n          children: \"x\\u2082\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1095,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('undo'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Undo\",\n          children: \"\\u21B6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('redo'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Redo\",\n          children: \"\\u21B7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('removeFormat'),\n          className: \"p-2 hover:bg-gray-200 rounded transition-colors\",\n          title: \"Clear Formatting\",\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1134,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 926,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-2 border-t border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-1 text-xs\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-600 mr-2\",\n          children: \"Quick Insert:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1165,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertHTML', '<strong>Example:</strong> '),\n          className: \"px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded transition-colors\",\n          children: \"Add \\\"Example:\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertHTML', '<em>Note:</em> '),\n          className: \"px-2 py-1 bg-green-100 hover:bg-green-200 rounded transition-colors\",\n          children: \"Add \\\"Note:\\\"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertHTML', '<strong>Requirements:</strong><ul><li></li><li></li><li></li></ul>'),\n          className: \"px-2 py-1 bg-purple-100 hover:bg-purple-200 rounded transition-colors\",\n          children: \"Add Requirements List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleRichTextCommand('insertHTML', '<ol><li><strong>First step</strong> - <em>description</em></li><li><strong>Second step</strong> - <em>description</em></li><li><strong>Third step</strong> - <em>description</em></li></ol>'),\n          className: \"px-2 py-1 bg-indigo-100 hover:bg-indigo-200 rounded transition-colors\",\n          children: \"Add Formatted Steps\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => {\n            const editor = editorRef.current;\n            if (editor) {\n              editor.innerHTML = '';\n              richTextContentRef.current = '';\n            }\n          },\n          className: \"px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors\",\n          children: \"Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1164,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1163,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 924,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                .rubric-table-container table {\n                    table-layout: fixed;\n                    width: 100%;\n                }\n                .rubric-table-container td {\n                    max-width: 0;\n                    word-wrap: break-word;\n                    overflow-wrap: break-word;\n                    white-space: pre-wrap;\n                    vertical-align: top;\n                }\n                .rubric-table-container .criterion-column {\n                    width: 200px;\n                }\n                .rubric-table-container .level-column {\n                    width: calc((100% - 200px - 80px) / 7);\n                }\n                .rubric-table-container .actions-column {\n                    width: 80px;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1215,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Professional Rubric Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-200\",\n              children: \"Create comprehensive assessment rubrics with detailed criteria and feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1244,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1242,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetRubric,\n              className: \"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Reset to blank rubric\",\n              children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 33\n              }, this), \"Reset\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1247,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _importInputRef$curre;\n                return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n              },\n              className: \"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Import existing rubric JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1260,\n                columnNumber: 33\n              }, this), \"Import\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1255,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferToGrading,\n              className: \"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Transfer rubric directly to grading tool\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1268,\n                columnNumber: 33\n              }, this), \"Use for Grading\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1263,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveRubric,\n              className: \"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Save work in progress as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1276,\n                columnNumber: 33\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1271,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForGrading,\n              className: \"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export final rubric for grading template\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1284,\n                columnNumber: 33\n              }, this), \"Export JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1279,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              className: \"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export HTML version for distribution\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1292,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1246,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1241,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1304,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"Auto-saved - Ready for grading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1305,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1303,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1302,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Quick Start Guide & Button Functions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1317,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1312,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Building Your Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1323,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1325,\n                      columnNumber: 49\n                    }, this), \" Clear all data and start fresh\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1325,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset Sizes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1326,\n                      columnNumber: 49\n                    }, this), \" Return all text boxes to original size\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1326,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1327,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated or existing rubric files\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1327,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Use for Grading:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1328,\n                      columnNumber: 49\n                    }, this), \" Send directly to grading tool\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1328,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1329,\n                      columnNumber: 49\n                    }, this), \" Download work-in-progress (JSON)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1329,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1330,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1330,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1331,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1331,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1324,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Step-by-Step Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1335,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment details and requirements\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1337,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add criteria using \\\"Add Criterion\\\" button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1338,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1339,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional but recommended)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1340,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Use \\\"Use for Grading\\\" to switch to grading tool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1341,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1342,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1336,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1334,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1321,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCA1 Tip:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1348,\n                  columnNumber: 41\n                }, this), \" Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1347,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCDD Rich Text Editing:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 41\n                }, this), \" Type directly in any description box for quick editing, OR click the blue expand button (\\u2922) for powerful inline rich text editor with full formatting toolbar including headings, colors, links, lists, and more!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1350,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83C\\uDFAF FIXED:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1354,\n                  columnNumber: 41\n                }, this), \" Copy/paste from Word and Google Docs now preserves lists, formatting, and proper spacing!\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1353,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1346,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1320,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1311,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1363,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1366,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => updateAssignmentInfo('title', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project - Final Showcase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1367,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1365,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1376,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => updateAssignmentInfo('weight', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1377,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1375,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1387,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ContentDisplay, {\n                content: rubricData.assignmentInfo.description,\n                onEdit: (value, openRichEditor) => {\n                  if (openRichEditor) {\n                    openInlineEditor(rubricData.assignmentInfo.description, 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), null, null, 'assignment');\n                  } else {\n                    updateAssignmentInfo('description', value);\n                  }\n                },\n                placeholder: \"Detailed description of assignment requirements and expectations...\",\n                isTextarea: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1388,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1386,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1409,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1410,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1408,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Auto-calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1420,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1421,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1419,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1364,\n            columnNumber: 25\n          }, this), inlineEditor.show && inlineEditor.type === 'assignment' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                  size: 20,\n                  className: \"text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1436,\n                  columnNumber: 41\n                }, this), \"Rich Text Editor: \", inlineEditor.field]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1435,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(true),\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1444,\n                    columnNumber: 45\n                  }, this), \"Save & Close\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1440,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(false),\n                  className: \"bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1452,\n                    columnNumber: 45\n                  }, this), \"Cancel\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1448,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1439,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1434,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(RichTextToolbar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1458,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"style\", {\n                children: `\n                                        .rich-text-editor { line-height: 1.5; }\n                                        .rich-text-editor h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; line-height: 1.2; }\n                                        .rich-text-editor h2 { font-size: 1.3em; font-weight: bold; margin: 0.4em 0; line-height: 1.2; }\n                                        .rich-text-editor h3 { font-size: 1.1em; font-weight: bold; margin: 0.3em 0; line-height: 1.2; }\n                                        .rich-text-editor p { margin: 0.5em 0; line-height: 1.5; }\n                                        .rich-text-editor ul, .rich-text-editor ol { margin: 0.5em 0; padding-left: 1.5em; line-height: 1.5; }\n                                        .rich-text-editor li { margin: 0.2em 0; line-height: 1.4; }\n                                        .rich-text-editor blockquote { \n                                            margin: 0.5em 0; \n                                            padding: 0.5em 1em; \n                                            border-left: 4px solid #e5e7eb; \n                                            background: #f9fafb; \n                                            font-style: italic;\n                                            line-height: 1.5;\n                                        }\n                                        .rich-text-editor pre { \n                                            background: #f3f4f6; \n                                            padding: 0.5em; \n                                            border-radius: 4px; \n                                            font-family: monospace; \n                                            font-size: 0.9em; \n                                            white-space: pre-wrap;\n                                            line-height: 1.3;\n                                            margin: 0.5em 0;\n                                        }\n                                        .rich-text-editor a { color: #3b82f6; text-decoration: underline; }\n                                        .rich-text-editor hr { margin: 1em 0; border: none; border-top: 1px solid #d1d5db; }\n                                        .rich-text-editor div { margin: 0; }\n                                        .rich-text-editor * { max-width: 100%; word-wrap: break-word; }\n                                        \n                                        /* Enhanced formatting support */\n                                        .rich-text-editor strong, .rich-text-editor b { font-weight: bold; }\n                                        .rich-text-editor em, .rich-text-editor i { font-style: italic; }\n                                        .rich-text-editor u { text-decoration: underline; }\n                                        .rich-text-editor strike, .rich-text-editor s { text-decoration: line-through; }\n                                        .rich-text-editor sub { vertical-align: sub; font-size: smaller; }\n                                        .rich-text-editor sup { vertical-align: super; font-size: smaller; }\n                                    `\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1462,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: editorRef,\n                contentEditable: true,\n                onInput: handleRichTextChange,\n                onKeyDown: handleKeyDown,\n                onPaste: handlePaste,\n                className: \"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rich-text-editor\",\n                style: {\n                  minHeight: '200px',\n                  backgroundColor: '#fff',\n                  fontSize: '14px',\n                  lineHeight: '1.5',\n                  fontFamily: 'inherit',\n                  whiteSpace: 'pre-wrap',\n                  wordBreak: 'break-word'\n                },\n                suppressContentEditableWarning: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1501,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1461,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4 text-sm text-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-green-500 rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1526,\n                      columnNumber: 49\n                    }, this), \"Rich Text Editor Active\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1525,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Use toolbar for advanced formatting\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1529,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1524,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Shortcuts:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1532,\n                    columnNumber: 45\n                  }, this), \" Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Paragraph), Tab (Indent)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1532,\n                    columnNumber: 160\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Paste Support:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1533,\n                    columnNumber: 45\n                  }, this), \" Copy formatted text from Word/Google Docs - lists and formatting will be preserved!\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1531,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1523,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1522,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1432,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1543,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1546,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Automatic (Recommended):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1555,\n                  columnNumber: 37\n                }, this), \" Points calculated using level multipliers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1554,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1545,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1559,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Custom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1568,\n                  columnNumber: 37\n                }, this), \" Manually set point ranges for each level\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1567,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1558,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1544,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1542,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6 rubric-table-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Assessment Criteria Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1577,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1584,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'High→Low' : 'Low→High']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1579,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: resetTextareaSizes,\n                className: \"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Reset all textarea sizes to original dimensions\",\n                children: [/*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1592,\n                  columnNumber: 37\n                }, this), \"Reset Sizes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1587,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1599,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1595,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1578,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1576,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold criterion-column\",\n                    children: [\"Criterion (\", rubricData.criteria.length, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1609,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold level-column\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      border: `2px solid ${level.color}`\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-bold\",\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1622,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs font-normal mt-1 opacity-75\",\n                      children: level.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1623,\n                      columnNumber: 49\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1613,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold actions-column\",\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1628,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1608,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1607,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map((criterion, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 bg-gray-50 criterion-column\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: criterion.name,\n                          onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                          className: \"w-full p-2 border rounded text-sm font-medium\",\n                          placeholder: `Criterion ${index + 1} name`,\n                          style: {\n                            wordWrap: 'break-word',\n                            overflowWrap: 'break-word'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1640,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(ContentDisplay, {\n                          content: criterion.description,\n                          onEdit: (value, openRichEditor) => {\n                            if (openRichEditor) {\n                              openInlineEditor(criterion.description, `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), criterion.id, null, 'criterion');\n                            } else {\n                              updateCriterion(criterion.id, 'description', value);\n                            }\n                          },\n                          placeholder: \"Brief description of what this criterion measures\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1648,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex gap-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex-1\",\n                            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                              className: \"text-xs text-gray-600\",\n                              children: \"Max Points\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1668,\n                              columnNumber: 65\n                            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                              type: \"number\",\n                              value: criterion.maxPoints,\n                              onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                              className: \"w-full p-1 border rounded text-sm\",\n                              min: \"0\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1669,\n                              columnNumber: 65\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1667,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1666,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1639,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1638,\n                      columnNumber: 49\n                    }, this), getDisplayLevels().map(level => {\n                      var _criterion$levels$lev4, _criterion$levels$lev6;\n                      return /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"border p-3 align-top level-column\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"space-y-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-center\",\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"font-bold text-sm px-2 py-1 rounded\",\n                              style: {\n                                color: level.color,\n                                backgroundColor: level.color + '20'\n                              },\n                              children: [calculatePointRange(criterion, level.level), \" pts\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1686,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1685,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(ContentDisplay, {\n                            content: ((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || '',\n                            onEdit: (value, openRichEditor) => {\n                              if (openRichEditor) {\n                                var _criterion$levels$lev5;\n                                openInlineEditor(((_criterion$levels$lev5 = criterion.levels[level.level]) === null || _criterion$levels$lev5 === void 0 ? void 0 : _criterion$levels$lev5.description) || '', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), criterion.id, level.level, 'level');\n                              } else {\n                                updateCriterionLevel(criterion.id, level.level, 'description', value);\n                              }\n                            },\n                            placeholder: `Describe ${level.name.toLowerCase()} performance...`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1696,\n                            columnNumber: 61\n                          }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            value: ((_criterion$levels$lev6 = criterion.levels[level.level]) === null || _criterion$levels$lev6 === void 0 ? void 0 : _criterion$levels$lev6.pointRange) || '',\n                            onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                            className: \"w-full p-1 border rounded text-xs text-center\",\n                            placeholder: \"e.g., 18-20\",\n                            style: {\n                              wordWrap: 'break-word',\n                              overflowWrap: 'break-word'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1715,\n                            columnNumber: 65\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1684,\n                          columnNumber: 57\n                        }, this)\n                      }, level.level, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 53\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 text-center actions-column\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => removeCriterion(criterion.id),\n                        className: \"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\",\n                        disabled: rubricData.criteria.length === 1,\n                        title: rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\",\n                        children: /*#__PURE__*/_jsxDEV(X, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1736,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1730,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1729,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1636,\n                    columnNumber: 45\n                  }, this), inlineEditor.show && inlineEditor.criterionId === criterion.id && (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: getDisplayLevels().length + 2,\n                      className: \"border-0 p-0\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                            className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 20,\n                              className: \"text-blue-600\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1751,\n                              columnNumber: 73\n                            }, this), \"Rich Text Editor: \", inlineEditor.field]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1750,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(true),\n                              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(Save, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1759,\n                                columnNumber: 77\n                              }, this), \"Save & Close\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1755,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(false),\n                              className: \"bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(X, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1767,\n                                columnNumber: 77\n                              }, this), \"Cancel\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1763,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1754,\n                            columnNumber: 69\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1749,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(RichTextToolbar, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1773,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4\",\n                          children: [/*#__PURE__*/_jsxDEV(\"style\", {\n                            children: `\n                                                                    .rich-text-editor { line-height: 1.5; }\n                                                                    .rich-text-editor h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; line-height: 1.2; }\n                                                                    .rich-text-editor h2 { font-size: 1.3em; font-weight: bold; margin: 0.4em 0; line-height: 1.2; }\n                                                                    .rich-text-editor h3 { font-size: 1.1em; font-weight: bold; margin: 0.3em 0; line-height: 1.2; }\n                                                                    .rich-text-editor p { margin: 0.5em 0; line-height: 1.5; }\n                                                                    .rich-text-editor ul, .rich-text-editor ol { margin: 0.5em 0; padding-left: 1.5em; line-height: 1.5; }\n                                                                    .rich-text-editor li { margin: 0.2em 0; line-height: 1.4; }\n                                                                    .rich-text-editor blockquote { \n                                                                        margin: 0.5em 0; \n                                                                        padding: 0.5em 1em; \n                                                                        border-left: 4px solid #e5e7eb; \n                                                                        background: #f9fafb; \n                                                                        font-style: italic;\n                                                                        line-height: 1.5;\n                                                                    }\n                                                                    .rich-text-editor pre { \n                                                                        background: #f3f4f6; \n                                                                        padding: 0.5em; \n                                                                        border-radius: 4px; \n                                                                        font-family: monospace; \n                                                                        font-size: 0.9em; \n                                                                        white-space: pre-wrap;\n                                                                        line-height: 1.3;\n                                                                        margin: 0.5em 0;\n                                                                    }\n                                                                    .rich-text-editor a { color: #3b82f6; text-decoration: underline; }\n                                                                    .rich-text-editor hr { margin: 1em 0; border: none; border-top: 1px solid #d1d5db; }\n                                                                    .rich-text-editor div { margin: 0; }\n                                                                    .rich-text-editor * { max-width: 100%; word-wrap: break-word; }\n                                                                    \n                                                                    /* Enhanced formatting support */\n                                                                    .rich-text-editor strong, .rich-text-editor b { font-weight: bold; }\n                                                                    .rich-text-editor em, .rich-text-editor i { font-style: italic; }\n                                                                    .rich-text-editor u { text-decoration: underline; }\n                                                                    .rich-text-editor strike, .rich-text-editor s { text-decoration: line-through; }\n                                                                    .rich-text-editor sub { vertical-align: sub; font-size: smaller; }\n                                                                    .rich-text-editor sup { vertical-align: super; font-size: smaller; }\n                                                                `\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1777,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            ref: editorRef,\n                            contentEditable: true,\n                            onInput: handleRichTextChange,\n                            onKeyDown: handleKeyDown,\n                            onPaste: handlePaste,\n                            className: \"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rich-text-editor\",\n                            style: {\n                              minHeight: '150px',\n                              backgroundColor: '#fff',\n                              fontSize: '14px',\n                              lineHeight: '1.5',\n                              fontFamily: 'inherit',\n                              whiteSpace: 'pre-wrap',\n                              wordBreak: 'break-word'\n                            },\n                            suppressContentEditableWarning: true\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1816,\n                            columnNumber: 69\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1776,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex justify-between items-center\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"flex items-center gap-4 text-sm text-gray-600\",\n                              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"flex items-center gap-2\",\n                                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"w-2 h-2 bg-green-500 rounded-full\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1841,\n                                  columnNumber: 81\n                                }, this), \"Rich Text Editor Active\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1840,\n                                columnNumber: 77\n                              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                children: \"Use toolbar for formatting\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1844,\n                                columnNumber: 77\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1839,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"text-xs text-gray-500\",\n                              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                                children: \"Shortcuts:\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1847,\n                                columnNumber: 77\n                              }, this), \" Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Paragraph), Tab (Indent)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1847,\n                                columnNumber: 192\n                              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                                children: \"Paste Support:\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1848,\n                                columnNumber: 77\n                              }, this), \" Copy formatted text from Word/Google Docs - lists and formatting will be preserved!\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1846,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1838,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1837,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1747,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1746,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1745,\n                    columnNumber: 53\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1635,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1633,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1606,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1605,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1575,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"\\uD83D\\uDCDD Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1865,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-4\",\n            children: \"Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1866,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`, \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1876,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items stored\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1879,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1875,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1886,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1888,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1871,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category === 'strengths' ? '👍 Strengths' : category === 'improvements' ? '🔧 Improvements' : '💬 General', \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1898,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => {\n                          const newComment = prompt(`Add ${category} comment:`);\n                          if (newComment && newComment.trim()) {\n                            addFeedbackItem(criterion.id, category, newComment.trim());\n                          }\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1903,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1897,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-start gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\",\n                          onClick: () => {\n                            openInlineEditor(item, `${category} Comment`, newContent => {\n                              const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                              updatedFeedback[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updatedFeedback\n                                  }\n                                } : c)\n                              }));\n                            }, criterion.id, null, 'feedback');\n                          },\n                          title: \"Click to edit with rich text editor\",\n                          style: {\n                            wordWrap: 'break-word',\n                            overflowWrap: 'break-word',\n                            whiteSpace: 'pre-wrap'\n                          },\n                          children: stripHtml(item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1918,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\",\n                          title: \"Remove this comment\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1961,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1956,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1917,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\",\n                        children: [\"No \", category, \" comments yet - click \\\"Add\\\" to create some\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1966,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1915,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1896,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1894,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1893,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1870,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1868,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1864,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"\\uD83D\\uDCCA Achievement Level Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1983,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1984,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\",\n            children: getDisplayLevels().map(level => {\n              const totalPoints = calculateTotalPoints();\n              const pointsForLevel = Math.round(totalPoints * level.multiplier);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\",\n                style: {\n                  borderColor: level.color,\n                  backgroundColor: level.color + '15'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-sm\",\n                  style: {\n                    color: level.color\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2001,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-bold mt-1\",\n                  style: {\n                    color: level.color\n                  },\n                  children: [pointsForLevel, \"+\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2004,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600\",\n                  children: totalPoints > 0 ? `${Math.round(pointsForLevel / totalPoints * 100)}%+` : '-%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2007,\n                  columnNumber: 41\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1993,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1988,\n            columnNumber: 25\n          }, this), calculateTotalPoints() === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-yellow-800 text-sm\",\n              children: \"Add criteria with point values to see the achievement level breakdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2017,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2016,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1982,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1299,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2026,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1238,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1213,\n    columnNumber: 9\n  }, this);\n};\n_s(RubricCreator, \"QYW9Z872nJliAzly8/cS2FFxJAM=\", false, function () {\n  return [useAssessment];\n});\n_c = RubricCreator;\nexport default RubricCreator;\nvar _c;\n$RefreshReg$(_c, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Plus","X","Upload","Download","Save","FileText","RotateCcw","ChevronDown","ChevronUp","Maximize2","ArrowRight","Minimize2","Edit3","useAssessment","jsxDEV","_jsxDEV","RubricCreator","_s","sharedRubric","setSharedRubric","transferRubricToGradingWithDetails","activeTab","defaultLevels","level","name","description","color","multiplier","rubricData","setRubricData","assignmentInfo","title","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","maxPoints","levels","feedbackLibrary","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","inlineEditor","setInlineEditor","show","content","field","onSave","criterionId","type","autoSaveTimeout","setAutoSaveTimeout","richTextContentRef","editorRef","importInputRef","containsHtml","test","stripHtml","html","tempDiv","document","createElement","innerHTML","textContent","innerText","sanitizeHtml","cleanPastedContent","rawHtml","querySelectorAll","forEach","p","parentLi","parentNode","firstChild","insertBefore","removeChild","allowed","walk","node","nodeType","Node","TEXT_NODE","cloneNode","ELEMENT_NODE","tag","tagName","toLowerCase","includes","frag","createDocumentFragment","childNodes","child","cleaned","appendChild","el","hasAttribute","setAttribute","getAttribute","cleanRoot","wrapper","replace","trim","saveCursorPosition","editor","current","selection","window","getSelection","rangeCount","range","getRangeAt","startContainer","startOffset","endContainer","endOffset","restoreCursorPosition","savedPosition","createRange","setStart","setEnd","removeAllRanges","addRange","error","selectNodeContents","collapse","clearTimeout","timeoutId","setTimeout","toggleFeedbackExpansion","prev","openInlineEditor","focus","handleRichTextCommand","command","value","cursorPos","execCommand","currentContent","lightCleaned","contains","handleRichTextChange","e","handlePaste","preventDefault","clipboardData","pastedData","getData","cleanedContent","handleKeyDown","key","shiftKey","ctrlKey","metaKey","closeInlineEditor","save","finalContent","sanitizedHtml","resetTextareaSizes","textareas","textarea","closest","style","height","maxHeight","rows","width","calculateTotalPoints","reduce","total","criterion","updateAssignmentInfo","updated","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","map","updateCriterionLevel","addFeedbackItem","category","item","removeFeedbackItem","index","_","i","calculatePointRange","rubricLevel","find","l","points","Math","round","toString","_criterion$levels$lev","pointRange","getDisplayLevels","reverse","saveRubric","dataStr","JSON","stringify","dataBlob","Blob","url","URL","createObjectURL","link","href","download","toISOString","split","click","revokeObjectURL","exportForGrading","exportData","prepareRubricForExport","Object","fromEntries","_criterion$levels$lev2","transferToGrading","importRubric","event","file","target","files","reader","FileReader","onload","importedData","parse","result","alert","console","readAsText","resetRubric","confirm","defaultRubric","exportToHTML","displayLevels","htmlContent","length","join","_criterion$levels$lev3","toFixed","toLocaleDateString","weekday","year","month","day","hour","minute","htmlBlob","ContentDisplay","onEdit","placeholder","isTextarea","className","hasHtml","children","wordWrap","overflowWrap","whiteSpace","maxWidth","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","onChange","minHeight","resize","RichTextToolbar","prompt","_importInputRef$curre","parseInt","min","max","openRichEditor","newContent","disabled","ref","contentEditable","onInput","onKeyDown","onPaste","backgroundColor","fontSize","lineHeight","fontFamily","wordBreak","suppressContentEditableWarning","checked","border","Fragment","_criterion$levels$lev4","_criterion$levels$lev6","_criterion$levels$lev5","colSpan","indexOf","newComment","updatedFeedback","pointsForLevel","borderColor","accept","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2, Edit3 } from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\n\r\nconst RubricCreator = () => {\r\n    // Get shared context functions and state\r\n    const {\r\n        sharedRubric,\r\n        setSharedRubric,\r\n        transferRubricToGradingWithDetails,\r\n        activeTab\r\n    } = useAssessment();\r\n\r\n    // Default rubric levels (7-level system)\r\n    const defaultLevels = [\r\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\r\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\r\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\r\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\r\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\r\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\r\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\r\n    ];\r\n\r\n    // Initialize state from shared context or defaults\r\n    const [rubricData, setRubricData] = useState(() => {\r\n        if (sharedRubric) {\r\n            return sharedRubric;\r\n        }\r\n        return {\r\n            assignmentInfo: {\r\n                title: '',\r\n                description: '',\r\n                weight: 25,\r\n                passingThreshold: 60,\r\n                totalPoints: 100\r\n            },\r\n            rubricLevels: [...defaultLevels],\r\n            criteria: [\r\n                {\r\n                    id: 'criterion-1',\r\n                    name: '',\r\n                    description: '',\r\n                    maxPoints: 20,\r\n                    weight: 20,\r\n                    levels: {},\r\n                    feedbackLibrary: {\r\n                        strengths: [],\r\n                        improvements: [],\r\n                        general: []\r\n                    }\r\n                }\r\n            ]\r\n        };\r\n    });\r\n\r\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\r\n    const [reversedOrder, setReversedOrder] = useState(false);\r\n    const [showGuide, setShowGuide] = useState(false);\r\n    const [expandedFeedback, setExpandedFeedback] = useState({});\r\n    const [inlineEditor, setInlineEditor] = useState({\r\n        show: false,\r\n        content: '',\r\n        field: null,\r\n        onSave: null,\r\n        criterionId: null,\r\n        level: null,\r\n        type: null // 'assignment', 'criterion', or 'level'\r\n    });\r\n    const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\r\n\r\n    // Use refs instead of state for rich text content to prevent cursor jumping\r\n    const richTextContentRef = useRef('');\r\n    const editorRef = useRef(null);\r\n\r\n    // Refs for file inputs\r\n    const importInputRef = useRef(null);\r\n\r\n    // Helper functions for HTML content handling\r\n    const containsHtml = (content) => {\r\n        return content && /<[^>]*>/.test(content);\r\n    };\r\n\r\n    const stripHtml = (html) => {\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = html;\r\n        return tempDiv.textContent || tempDiv.innerText || '';\r\n    };\r\n\r\n    const sanitizeHtml = (html) => {\r\n        // Create a temporary div to clean and validate HTML\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = html;\r\n        return tempDiv.innerHTML;\r\n    };\r\n\r\n    // FIXED: Improved clean pasted content function based on corrections document\r\n    // --- RubricCreator.js ---\r\n    const cleanPastedContent = (rawHtml) => {\r\n        if (!rawHtml) return '';\r\n\r\n        // Parse into DOM so we can manipulate nodes safely\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = rawHtml;\r\n\r\n        ////////////////////////////////////////////////////////////\r\n        // 1.  Unwrap <p> elements that live directly under an <li>\r\n        ////////////////////////////////////////////////////////////\r\n        tempDiv.querySelectorAll('li > p').forEach(p => {\r\n            const parentLi = p.parentNode;\r\n            // Move every child of <p> in front of the <p> itself\r\n            while (p.firstChild) parentLi.insertBefore(p.firstChild, p);\r\n            parentLi.removeChild(p);          // remove the now-empty <p>\r\n        });\r\n\r\n        ////////////////////////////////////////////////////////////\r\n        // 2.  Strip junk attributes & disallowed tags\r\n        ////////////////////////////////////////////////////////////\r\n        const allowed = [\r\n            'p', 'br', 'strong', 'em', 'u', 'b', 'i',\r\n            'ol', 'ul', 'li',\r\n            'blockquote', 'pre', 'code',\r\n            'sup', 'sub', 'a', 'h1', 'h2', 'h3'\r\n        ];\r\n\r\n        const walk = node => {\r\n            // text nodes are fine – clone them\r\n            if (node.nodeType === Node.TEXT_NODE) return node.cloneNode();\r\n\r\n            // element nodes\r\n            if (node.nodeType === Node.ELEMENT_NODE) {\r\n                const tag = node.tagName.toLowerCase();\r\n\r\n                // If the tag isn’t on our whitelist, just recurse its children\r\n                if (!allowed.includes(tag)) {\r\n                    const frag = document.createDocumentFragment();\r\n                    node.childNodes.forEach(child => {\r\n                        const cleaned = walk(child);\r\n                        if (cleaned) frag.appendChild(cleaned);\r\n                    });\r\n                    return frag;\r\n                }\r\n\r\n                // Build a clean copy of the allowed element\r\n                const el = document.createElement(tag);\r\n\r\n                // Keep only safe attributes\r\n                if (tag === 'a' && node.hasAttribute('href')) {\r\n                    el.setAttribute('href', node.getAttribute('href'));\r\n                }\r\n\r\n                node.childNodes.forEach(child => {\r\n                    const cleaned = walk(child);\r\n                    if (cleaned) el.appendChild(cleaned);\r\n                });\r\n                return el;\r\n            }\r\n            return null;                      // skip comments etc.\r\n        };\r\n\r\n        const cleanRoot = walk(tempDiv);\r\n\r\n        ////////////////////////////////////////////////////////////\r\n        // 3.  Serialize + light whitespace normalisation\r\n        ////////////////////////////////////////////////////////////\r\n        // Wrap fragment in a temporary <div> so we can read .innerHTML\r\n        const wrapper = document.createElement('div');\r\n        wrapper.appendChild(cleanRoot);          // cleanRoot is a fragment\r\n\r\n        let html = wrapper.innerHTML\r\n            .replace(/&nbsp;{2,}/g, '&nbsp;')               // ≥2 nbsp → 1\r\n            .replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>') // max 3 <br>\r\n            .replace(/^\\s*(<br\\s*\\/?>\\s*)+/gi, '')           // leading breaks\r\n            .replace(/(<br\\s*\\/?>\\s*)+\\s*$/gi, '')           // trailing breaks\r\n            .trim();\r\n\r\n        return html;\r\n    };\r\n\r\n    \r\n  \r\n    // Cursor position management functions\r\n    const saveCursorPosition = () => {\r\n        const editor = editorRef.current;\r\n        if (!editor) return null;\r\n\r\n        const selection = window.getSelection();\r\n        if (selection.rangeCount === 0) return null;\r\n\r\n        const range = selection.getRangeAt(0);\r\n        return {\r\n            startContainer: range.startContainer,\r\n            startOffset: range.startOffset,\r\n            endContainer: range.endContainer,\r\n            endOffset: range.endOffset\r\n        };\r\n    };\r\n\r\n    const restoreCursorPosition = (savedPosition) => {\r\n        if (!savedPosition || !editorRef.current) return;\r\n\r\n        try {\r\n            const selection = window.getSelection();\r\n            const range = document.createRange();\r\n\r\n            range.setStart(savedPosition.startContainer, savedPosition.startOffset);\r\n            range.setEnd(savedPosition.endContainer, savedPosition.endOffset);\r\n\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n        } catch (error) {\r\n            // If cursor restoration fails, place cursor at end\r\n            const editor = editorRef.current;\r\n            const range = document.createRange();\r\n            const selection = window.getSelection();\r\n\r\n            range.selectNodeContents(editor);\r\n            range.collapse(false);\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n        }\r\n    };\r\n\r\n    // Auto-save to shared context whenever rubricData changes\r\n    useEffect(() => {\r\n        if (autoSaveTimeout) {\r\n            clearTimeout(autoSaveTimeout);\r\n        }\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            setSharedRubric(rubricData);\r\n        }, 1000); // Auto-save after 1 second of inactivity\r\n\r\n        setAutoSaveTimeout(timeoutId);\r\n\r\n        return () => {\r\n            if (timeoutId) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n        };\r\n    }, [rubricData, setSharedRubric]);\r\n\r\n    // Load shared rubric when it changes externally\r\n    useEffect(() => {\r\n        if (sharedRubric && activeTab === 'rubric-creator') {\r\n            setRubricData(sharedRubric);\r\n        }\r\n    }, [sharedRubric, activeTab]);\r\n\r\n    // Toggle feedback section expansion\r\n    const toggleFeedbackExpansion = (criterionId) => {\r\n        setExpandedFeedback(prev => ({\r\n            ...prev,\r\n            [criterionId]: !prev[criterionId]\r\n        }));\r\n    };\r\n\r\n    // Open inline editor for text editing - FIXED to preserve HTML\r\n    const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\r\n        // Initialize the ref with current content (preserve HTML)\r\n        richTextContentRef.current = content || '';\r\n\r\n        setInlineEditor({\r\n            show: true,\r\n            content: content || '',\r\n            field,\r\n            onSave,\r\n            criterionId,\r\n            level,\r\n            type\r\n        });\r\n\r\n        // Focus the editor after it's rendered\r\n        setTimeout(() => {\r\n            const editor = editorRef.current;\r\n            if (editor) {\r\n                // FIXED: Preserve HTML formatting when opening editor\r\n                editor.innerHTML = content || '';\r\n                editor.focus();\r\n                // Place cursor at end\r\n                const range = document.createRange();\r\n                const selection = window.getSelection();\r\n                range.selectNodeContents(editor);\r\n                range.collapse(false);\r\n                selection.removeAllRanges();\r\n                selection.addRange(range);\r\n            }\r\n        }, 100);\r\n    };\r\n\r\n    // Enhanced rich text editor functions\r\n    const handleRichTextCommand = (command, value = null) => {\r\n        const editor = editorRef.current;\r\n        if (editor) {\r\n            editor.focus();\r\n\r\n            // Save cursor position before command\r\n            const cursorPos = saveCursorPosition();\r\n\r\n            document.execCommand(command, false, value);\r\n\r\n            // Update our ref content with light cleaning to maintain consistency\r\n            const currentContent = editor.innerHTML;\r\n            // Only apply light cleaning for commands, not the heavy paste cleaning\r\n            const lightCleaned = currentContent\r\n                .replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>') // Limit consecutive line breaks\r\n                .replace(/&nbsp;{3,}/gi, '&nbsp;&nbsp;'); // Limit consecutive spaces\r\n\r\n            if (lightCleaned !== currentContent) {\r\n                editor.innerHTML = lightCleaned;\r\n            }\r\n\r\n            richTextContentRef.current = editor.innerHTML;\r\n\r\n            // Restore cursor position if needed\r\n            setTimeout(() => {\r\n                if (cursorPos && editor.contains(cursorPos.startContainer)) {\r\n                    restoreCursorPosition(cursorPos);\r\n                }\r\n            }, 0);\r\n        }\r\n    };\r\n\r\n    // Handle rich text changes without state updates\r\n    const handleRichTextChange = (e) => {\r\n        const editor = editorRef.current;\r\n        if (editor) {\r\n            // Update our ref with current content\r\n            richTextContentRef.current = editor.innerHTML;\r\n        }\r\n    };\r\n\r\n    // FIXED: Handle paste events to clean up content while preserving formatting\r\n    const handlePaste = (e) => {\r\n        e.preventDefault();\r\n        const editor = editorRef.current;\r\n        if (!editor) return;\r\n\r\n        const clipboardData = e.clipboardData || window.clipboardData;\r\n\r\n        // Try to get HTML first (preserves formatting), fallback to plain text\r\n        let pastedData = clipboardData.getData('text/html');\r\n\r\n        if (!pastedData) {\r\n            // If no HTML, get plain text and convert line breaks\r\n            pastedData = clipboardData.getData('text/plain');\r\n            if (pastedData) {\r\n                // Convert plain text line breaks to HTML, but don't add manual br conversion\r\n                pastedData = pastedData;\r\n            }\r\n        }\r\n\r\n        if (pastedData) {\r\n            // Clean the pasted content while preserving formatting structure\r\n            const cleanedContent = cleanPastedContent(pastedData);\r\n\r\n            // Insert the cleaned content\r\n            if (cleanedContent) {\r\n                document.execCommand('insertHTML', false, cleanedContent);\r\n\r\n                // Update our ref with the current editor content\r\n                setTimeout(() => {\r\n                    if (editor) {\r\n                        richTextContentRef.current = editor.innerHTML;\r\n                    }\r\n                }, 0);\r\n            }\r\n        }\r\n    };\r\n\r\n    // FIXED: Handle key events properly\r\n    const handleKeyDown = (e) => {\r\n        const editor = editorRef.current;\r\n        if (!editor) return;\r\n\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            // Let the browser handle normal paragraph creation by default\r\n            // Only clean afterwards if needed\r\n            setTimeout(() => {\r\n                const currentContent = editor.innerHTML;\r\n                // Only clean if there are excessive breaks\r\n                const cleaned = currentContent.replace(/(<br\\s*\\/?>\\s*){4,}/gi, '<br><br><br>');\r\n                if (cleaned !== currentContent) {\r\n                    editor.innerHTML = cleaned;\r\n                }\r\n                richTextContentRef.current = editor.innerHTML;\r\n            }, 0);\r\n        } else if (e.key === 'Tab') {\r\n            e.preventDefault();\r\n            document.execCommand('insertHTML', false, '&nbsp;&nbsp;&nbsp;&nbsp;');\r\n            richTextContentRef.current = editor.innerHTML;\r\n        }\r\n\r\n        // Handle common keyboard shortcuts\r\n        if (e.ctrlKey || e.metaKey) {\r\n            switch (e.key) {\r\n                case 'b':\r\n                    e.preventDefault();\r\n                    handleRichTextCommand('bold');\r\n                    break;\r\n                case 'i':\r\n                    e.preventDefault();\r\n                    handleRichTextCommand('italic');\r\n                    break;\r\n                case 'u':\r\n                    e.preventDefault();\r\n                    handleRichTextCommand('underline');\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    // FIXED: Close inline editor and save HTML content instead of plain text\r\n    const closeInlineEditor = (save = false) => {\r\n        if (save && inlineEditor.onSave) {\r\n            // Get the current content from ref (most up-to-date)\r\n            const finalContent = richTextContentRef.current;\r\n            // FIXED: Save HTML content instead of converting to plain text\r\n            const sanitizedHtml = sanitizeHtml(finalContent);\r\n            inlineEditor.onSave(sanitizedHtml);\r\n        }\r\n\r\n        setInlineEditor({\r\n            show: false,\r\n            content: '',\r\n            field: null,\r\n            onSave: null,\r\n            criterionId: null,\r\n            level: null,\r\n            type: null\r\n        });\r\n        richTextContentRef.current = '';\r\n    };\r\n\r\n    // Reset textarea sizes to original dimensions\r\n    const resetTextareaSizes = () => {\r\n        const textareas = document.querySelectorAll('textarea');\r\n        textareas.forEach(textarea => {\r\n            // Reset to default sizes based on context\r\n            if (textarea.closest('.assignment-info')) {\r\n                textarea.style.height = '80px';\r\n                textarea.style.maxHeight = '200px';\r\n            } else if (textarea.closest('td')) {\r\n                // Criterion or level descriptions\r\n                if (textarea.rows <= 2) {\r\n                    textarea.style.height = '48px';\r\n                    textarea.style.maxHeight = '200px';\r\n                } else {\r\n                    textarea.style.height = '80px';\r\n                    textarea.style.maxHeight = '300px';\r\n                }\r\n            }\r\n            textarea.style.width = '100%';\r\n        });\r\n    };\r\n\r\n    // Calculate total points based on current settings\r\n    const calculateTotalPoints = () => {\r\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\r\n    };\r\n\r\n    // Update assignment info and recalculate total points\r\n    const updateAssignmentInfo = (field, value) => {\r\n        setRubricData(prev => {\r\n            const updated = {\r\n                ...prev,\r\n                assignmentInfo: { ...prev.assignmentInfo, [field]: value }\r\n            };\r\n\r\n            // Auto-calculate total points\r\n            if (field !== 'totalPoints') {\r\n                updated.assignmentInfo.totalPoints = calculateTotalPoints();\r\n            }\r\n\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    // Add new criterion\r\n    const addCriterion = () => {\r\n        const newCriterion = {\r\n            id: `criterion-${Date.now()}`,\r\n            name: '',\r\n            description: '',\r\n            maxPoints: 20,\r\n            weight: 20,\r\n            levels: {},\r\n            feedbackLibrary: {\r\n                strengths: [],\r\n                improvements: [],\r\n                general: []\r\n            }\r\n        };\r\n\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: [...prev.criteria, newCriterion]\r\n        }));\r\n    };\r\n\r\n    // Remove criterion\r\n    const removeCriterion = (criterionId) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\r\n        }));\r\n    };\r\n\r\n    // Update criterion\r\n    const updateCriterion = (criterionId, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? { ...criterion, [field]: value }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Update criterion level description\r\n    const updateCriterionLevel = (criterionId, level, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        levels: {\r\n                            ...criterion.levels,\r\n                            [level]: {\r\n                                ...criterion.levels[level],\r\n                                [field]: value\r\n                            }\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Add feedback item to criterion\r\n    const addFeedbackItem = (criterionId, category, item) => {\r\n        if (!item || !item.trim()) return;\r\n\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: [...criterion.feedbackLibrary[category], item.trim()]\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Remove feedback item\r\n    const removeFeedbackItem = (criterionId, category, index) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Calculate point range for a level\r\n    const calculatePointRange = (criterion, level) => {\r\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\r\n        if (!rubricLevel) return '0';\r\n\r\n        if (pointingSystem === 'multiplier') {\r\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\r\n            return level === 'incomplete' ? '0' : points.toString();\r\n        } else {\r\n            // Custom points would be entered directly\r\n            return criterion.levels[level]?.pointRange || '0';\r\n        }\r\n    };\r\n\r\n    // Get display levels (potentially reversed)\r\n    const getDisplayLevels = () => {\r\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\r\n    };\r\n\r\n    // Save rubric to JSON\r\n    const saveRubric = () => {\r\n        const dataStr = JSON.stringify(rubricData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Export rubric for grading template\r\n    const exportForGrading = () => {\r\n        const exportData = prepareRubricForExport();\r\n\r\n        // Save to shared context for grading tool\r\n        setSharedRubric(exportData);\r\n\r\n        // Also download as backup\r\n        const dataStr = JSON.stringify(exportData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Prepare rubric data for export/transfer\r\n    const prepareRubricForExport = () => {\r\n        const exportData = { ...rubricData };\r\n\r\n        // Ensure all criterion levels have proper point ranges\r\n        exportData.criteria = exportData.criteria.map(criterion => ({\r\n            ...criterion,\r\n            levels: Object.fromEntries(\r\n                rubricData.rubricLevels.map(level => [\r\n                    level.level,\r\n                    {\r\n                        pointRange: calculatePointRange(criterion, level.level),\r\n                        description: criterion.levels[level.level]?.description || ''\r\n                    }\r\n                ])\r\n            )\r\n        }));\r\n\r\n        // Update total points\r\n        exportData.assignmentInfo.totalPoints = calculateTotalPoints();\r\n\r\n        return exportData;\r\n    };\r\n\r\n    // Transfer to grading tool directly\r\n    const transferToGrading = () => {\r\n        const exportData = prepareRubricForExport();\r\n        transferRubricToGradingWithDetails(exportData);\r\n    };\r\n\r\n    // Import rubric data\r\n    const importRubric = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                try {\r\n                    const importedData = JSON.parse(e.target.result);\r\n\r\n                    // Validate the imported data structure\r\n                    if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\r\n                        setRubricData(importedData);\r\n                    } else {\r\n                        alert('Invalid rubric format. Please check the JSON structure.');\r\n                    }\r\n                } catch (error) {\r\n                    alert('Error loading rubric. Please check the JSON format.');\r\n                    console.error('Import error:', error);\r\n                }\r\n            };\r\n            reader.readAsText(file);\r\n        }\r\n        // Reset file input\r\n        event.target.value = '';\r\n    };\r\n\r\n    // Reset to default rubric\r\n    const resetRubric = () => {\r\n        if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\r\n            const defaultRubric = {\r\n                assignmentInfo: {\r\n                    title: '',\r\n                    description: '',\r\n                    weight: 25,\r\n                    passingThreshold: 60,\r\n                    totalPoints: 100\r\n                },\r\n                rubricLevels: [...defaultLevels],\r\n                criteria: [\r\n                    {\r\n                        id: 'criterion-1',\r\n                        name: '',\r\n                        description: '',\r\n                        maxPoints: 20,\r\n                        weight: 20,\r\n                        levels: {},\r\n                        feedbackLibrary: {\r\n                            strengths: [],\r\n                            improvements: [],\r\n                            general: []\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            setRubricData(defaultRubric);\r\n        }\r\n    };\r\n\r\n    // Export to HTML\r\n    const exportToHTML = () => {\r\n        const displayLevels = getDisplayLevels();\r\n        const totalPoints = calculateTotalPoints();\r\n\r\n        const htmlContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\r\n    <style>\r\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\r\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\r\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\r\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\r\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\r\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\r\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\r\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\r\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\r\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\r\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\r\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\r\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\r\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\r\n        <p style=\"color: #64748b; font-size: 1.1em;\">${stripHtml(rubricData.assignmentInfo.description) || 'No description provided'}</p>\r\n    </div>\r\n    \r\n    <div class=\"assignment-info\">\r\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\r\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\r\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\r\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\r\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\r\n        </div>\r\n    </div>\r\n    \r\n    <table class=\"rubric-table\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"width: 20%\">Criterion</th>\r\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${rubricData.criteria.map(criterion => `\r\n                <tr>\r\n                    <td class=\"criterion-name\">\r\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\r\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\r\n                            ${stripHtml(criterion.description) || 'No description provided'}\r\n                        </div>\r\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\r\n                            ${criterion.maxPoints} points\r\n                        </div>\r\n                    </td>\r\n                    ${displayLevels.map(level => `\r\n                        <td style=\"background-color: ${level.color}08;\">\r\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\r\n                                ${calculatePointRange(criterion, level.level)} pts\r\n                            </div>\r\n                            <div class=\"level-description\">\r\n                                ${stripHtml(criterion.levels[level.level]?.description) || '<em>Not defined</em>'}\r\n                            </div>\r\n                        </td>\r\n                    `).join('')}\r\n                </tr>\r\n            `).join('')}\r\n        </tbody>\r\n    </table>\r\n    \r\n    <div class=\"overall-score\">\r\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\r\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\r\n        <div class=\"level-grid\">\r\n            ${displayLevels.map(level => `\r\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\r\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\r\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\r\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\r\n                    </div>\r\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\r\n                </div>\r\n            `).join('')}\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"footer\">\r\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        })}</p>\r\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(htmlBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // FIXED: Content display component that handles both HTML and plain text\r\n    const ContentDisplay = ({ content, onEdit, placeholder, isTextarea = false, className = \"\" }) => {\r\n        const hasHtml = containsHtml(content);\r\n\r\n        if (hasHtml && !isTextarea) {\r\n            return (\r\n                <div className={`relative group ${className}`}>\r\n                    <div\r\n                        className=\"p-2 border rounded text-xs bg-white min-h-[80px] max-h-[300px] overflow-y-auto\"\r\n                        style={{\r\n                            wordWrap: 'break-word',\r\n                            overflowWrap: 'break-word',\r\n                            whiteSpace: 'pre-wrap',\r\n                            maxWidth: '100%'\r\n                        }}\r\n                        dangerouslySetInnerHTML={{ __html: content }}\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onEdit}\r\n                        className=\"absolute top-1 right-1 opacity-70 group-hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                        title=\"Open rich text editor\"\r\n                    >\r\n                        <Edit3 size={12} />\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (isTextarea) {\r\n            return (\r\n                <div className=\"relative\">\r\n                    <textarea\r\n                        value={content}\r\n                        onChange={(e) => onEdit(e.target.value)}\r\n                        className={`w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12 ${className}`}\r\n                        rows=\"3\"\r\n                        placeholder={placeholder}\r\n                        title=\"Type here for quick editing, or click the expand button for rich text editor\"\r\n                        style={{\r\n                            minHeight: '80px',\r\n                            maxHeight: '200px',\r\n                            resize: 'both',\r\n                            wordWrap: 'break-word',\r\n                            overflowWrap: 'break-word'\r\n                        }}\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => onEdit(null, true)} // Signal to open rich editor\r\n                        className=\"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                        title=\"Open rich text editor\"\r\n                    >\r\n                        <Maximize2 size={14} />\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"relative\">\r\n                <textarea\r\n                    value={content}\r\n                    onChange={(e) => onEdit(e.target.value)}\r\n                    className={`w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8 ${className}`}\r\n                    rows=\"2\"\r\n                    placeholder={placeholder}\r\n                    title=\"Type here for quick editing, or click the expand button for rich text editor\"\r\n                    style={{\r\n                        minHeight: '48px',\r\n                        maxHeight: '200px',\r\n                        resize: 'both',\r\n                        wordWrap: 'break-word',\r\n                        overflowWrap: 'break-word'\r\n                    }}\r\n                />\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={() => onEdit(null, true)} // Signal to open rich editor\r\n                    className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\r\n                    title=\"Open rich text editor\"\r\n                >\r\n                    <Maximize2 size={12} />\r\n                </button>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Enhanced Rich Text Toolbar Component\r\n    const RichTextToolbar = () => (\r\n        <div className=\"border-b bg-gray-50 p-3\">\r\n            {/* Main Toolbar */}\r\n            <div className=\"flex flex-wrap gap-1 mb-2\">\r\n                {/* Headings */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <select\r\n                        onChange={(e) => {\r\n                            if (e.target.value) {\r\n                                handleRichTextCommand('formatBlock', e.target.value);\r\n                                e.target.value = '';\r\n                            }\r\n                        }}\r\n                        className=\"p-1 text-xs border rounded\"\r\n                        title=\"Text Format\"\r\n                    >\r\n                        <option value=\"\">Format</option>\r\n                        <option value=\"h1\">Heading 1</option>\r\n                        <option value=\"h2\">Heading 2</option>\r\n                        <option value=\"h3\">Heading 3</option>\r\n                        <option value=\"p\">Paragraph</option>\r\n                        <option value=\"blockquote\">Quote</option>\r\n                        <option value=\"pre\">Code Block</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Font Size */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <select\r\n                        onChange={(e) => {\r\n                            if (e.target.value) {\r\n                                handleRichTextCommand('fontSize', e.target.value);\r\n                                e.target.value = '';\r\n                            }\r\n                        }}\r\n                        className=\"p-1 text-xs border rounded\"\r\n                        title=\"Font Size\"\r\n                    >\r\n                        <option value=\"\">Size</option>\r\n                        <option value=\"1\">Small</option>\r\n                        <option value=\"3\">Normal</option>\r\n                        <option value=\"4\">Medium</option>\r\n                        <option value=\"5\">Large</option>\r\n                        <option value=\"6\">X-Large</option>\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Text Formatting */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('bold')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Bold (Ctrl+B)\"\r\n                    >\r\n                        <span className=\"font-bold\">B</span>\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('italic')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Italic (Ctrl+I)\"\r\n                    >\r\n                        <span className=\"italic\">I</span>\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('underline')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Underline (Ctrl+U)\"\r\n                    >\r\n                        <span className=\"underline\">U</span>\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('strikeThrough')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Strikethrough\"\r\n                    >\r\n                        <span className=\"line-through\">S</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Colors */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <input\r\n                        type=\"color\"\r\n                        onChange={(e) => handleRichTextCommand('foreColor', e.target.value)}\r\n                        className=\"w-8 h-8 border rounded cursor-pointer\"\r\n                        title=\"Text Color\"\r\n                    />\r\n                    <input\r\n                        type=\"color\"\r\n                        onChange={(e) => handleRichTextCommand('hiliteColor', e.target.value)}\r\n                        className=\"w-8 h-8 border rounded cursor-pointer ml-1\"\r\n                        title=\"Highlight Color\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Lists */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertUnorderedList')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Bullet List\"\r\n                    >\r\n                        • List\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertOrderedList')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Numbered List\"\r\n                    >\r\n                        1. List\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('outdent')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Decrease Indent\"\r\n                    >\r\n                        ⇤\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('indent')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Increase Indent\"\r\n                    >\r\n                        ⇥\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Alignment */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('justifyLeft')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Align Left\"\r\n                    >\r\n                        ⫷\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('justifyCenter')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Align Center\"\r\n                    >\r\n                        ≡\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('justifyRight')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Align Right\"\r\n                    >\r\n                        ⫸\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('justifyFull')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Justify\"\r\n                    >\r\n                        ⫼\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Special */}\r\n                <div className=\"flex border-r border-gray-300 pr-2 mr-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                            const url = prompt('Enter URL:');\r\n                            if (url) handleRichTextCommand('createLink', url);\r\n                        }}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Insert Link\"\r\n                    >\r\n                        🔗\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertHorizontalRule')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Insert Line\"\r\n                    >\r\n                        ─\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('superscript')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Superscript\"\r\n                    >\r\n                        x²\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('subscript')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Subscript\"\r\n                    >\r\n                        x₂\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('undo')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Undo\"\r\n                    >\r\n                        ↶\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('redo')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Redo\"\r\n                    >\r\n                        ↷\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('removeFormat')}\r\n                        className=\"p-2 hover:bg-gray-200 rounded transition-colors\"\r\n                        title=\"Clear Formatting\"\r\n                    >\r\n                        Clear\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quick Actions Row */}\r\n            <div className=\"pt-2 border-t border-gray-200\">\r\n                <div className=\"flex flex-wrap gap-1 text-xs\">\r\n                    <span className=\"text-gray-600 mr-2\">Quick Insert:</span>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertHTML', '<strong>Example:</strong> ')}\r\n                        className=\"px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded transition-colors\"\r\n                    >\r\n                        Add \"Example:\"\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertHTML', '<em>Note:</em> ')}\r\n                        className=\"px-2 py-1 bg-green-100 hover:bg-green-200 rounded transition-colors\"\r\n                    >\r\n                        Add \"Note:\"\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertHTML', '<strong>Requirements:</strong><ul><li></li><li></li><li></li></ul>')}\r\n                        className=\"px-2 py-1 bg-purple-100 hover:bg-purple-200 rounded transition-colors\"\r\n                    >\r\n                        Add Requirements List\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => handleRichTextCommand('insertHTML', '<ol><li><strong>First step</strong> - <em>description</em></li><li><strong>Second step</strong> - <em>description</em></li><li><strong>Third step</strong> - <em>description</em></li></ol>')}\r\n                        className=\"px-2 py-1 bg-indigo-100 hover:bg-indigo-200 rounded transition-colors\"\r\n                    >\r\n                        Add Formatted Steps\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                            const editor = editorRef.current;\r\n                            if (editor) {\r\n                                editor.innerHTML = '';\r\n                                richTextContentRef.current = '';\r\n                            }\r\n                        }}\r\n                        className=\"px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors\"\r\n                    >\r\n                        Clear All\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            {/* FIXED: Added CSS for table width constraints */}\r\n            <style>{`\r\n                .rubric-table-container table {\r\n                    table-layout: fixed;\r\n                    width: 100%;\r\n                }\r\n                .rubric-table-container td {\r\n                    max-width: 0;\r\n                    word-wrap: break-word;\r\n                    overflow-wrap: break-word;\r\n                    white-space: pre-wrap;\r\n                    vertical-align: top;\r\n                }\r\n                .rubric-table-container .criterion-column {\r\n                    width: 200px;\r\n                }\r\n                .rubric-table-container .level-column {\r\n                    width: calc((100% - 200px - 80px) / 7);\r\n                }\r\n                .rubric-table-container .actions-column {\r\n                    width: 80px;\r\n                }\r\n            `}</style>\r\n\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\r\n                {/* Header */}\r\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl font-bold\">Professional Rubric Builder</h1>\r\n                            <p className=\"text-blue-200\">Create comprehensive assessment rubrics with detailed criteria and feedback</p>\r\n                        </div>\r\n                        <div className=\"flex gap-2 flex-wrap\">\r\n                            <button\r\n                                onClick={resetRubric}\r\n                                className=\"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Reset to blank rubric\"\r\n                            >\r\n                                <RotateCcw size={14} />\r\n                                Reset\r\n                            </button>\r\n                            <button\r\n                                onClick={() => importInputRef.current?.click()}\r\n                                className=\"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Import existing rubric JSON file\"\r\n                            >\r\n                                <Upload size={14} />\r\n                                Import\r\n                            </button>\r\n                            <button\r\n                                onClick={transferToGrading}\r\n                                className=\"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Transfer rubric directly to grading tool\"\r\n                            >\r\n                                <ArrowRight size={14} />\r\n                                Use for Grading\r\n                            </button>\r\n                            <button\r\n                                onClick={saveRubric}\r\n                                className=\"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Save work in progress as JSON file\"\r\n                            >\r\n                                <Save size={14} />\r\n                                Save Draft\r\n                            </button>\r\n                            <button\r\n                                onClick={exportForGrading}\r\n                                className=\"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export final rubric for grading template\"\r\n                            >\r\n                                <Download size={14} />\r\n                                Export JSON\r\n                            </button>\r\n                            <button\r\n                                onClick={exportToHTML}\r\n                                className=\"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export HTML version for distribution\"\r\n                            >\r\n                                <FileText size={14} />\r\n                                Export HTML\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    {/* Auto-save Indicator */}\r\n                    {sharedRubric && (\r\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\">\r\n                            <div className=\"flex items-center gap-2 text-green-800\">\r\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                                <span className=\"text-sm font-medium\">Auto-saved - Ready for grading tool</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Button Guide */}\r\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\r\n                        <button\r\n                            onClick={() => setShowGuide(!showGuide)}\r\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\r\n                        >\r\n                            📖 Quick Start Guide & Button Functions\r\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}>▼</span>\r\n                        </button>\r\n                        {showGuide && (\r\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">🔧 Building Your Rubric</h4>\r\n                                        <ul className=\"space-y-1 text-gray-700\">\r\n                                            <li><strong>Reset:</strong> Clear all data and start fresh</li>\r\n                                            <li><strong>Reset Sizes:</strong> Return all text boxes to original size</li>\r\n                                            <li><strong>Import:</strong> Load AI-generated or existing rubric files</li>\r\n                                            <li><strong>Use for Grading:</strong> Send directly to grading tool</li>\r\n                                            <li><strong>Save Draft:</strong> Download work-in-progress (JSON)</li>\r\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template</li>\r\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\r\n                                        </ul>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">📝 Step-by-Step Process</h4>\r\n                                        <ol className=\"space-y-1 text-gray-700\">\r\n                                            <li>1. Fill in assignment details and requirements</li>\r\n                                            <li>2. Add criteria using \"Add Criterion\" button</li>\r\n                                            <li>3. Define level descriptions for each criterion</li>\r\n                                            <li>4. Add feedback library items (optional but recommended)</li>\r\n                                            <li>5. Use \"Use for Grading\" to switch to grading tool</li>\r\n                                            <li>6. Export HTML for student distribution</li>\r\n                                        </ol>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\r\n                                    <p className=\"text-blue-800 text-sm\">\r\n                                        <strong>💡 Tip:</strong> Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\r\n                                    </p>\r\n                                    <p className=\"text-blue-800 text-sm mt-2\">\r\n                                        <strong>📝 Rich Text Editing:</strong> Type directly in any description box for quick editing, OR click the blue expand button (⤢) for powerful inline rich text editor with full formatting toolbar including headings, colors, links, lists, and more!\r\n                                    </p>\r\n                                    <p className=\"text-blue-800 text-sm mt-2\">\r\n                                        <strong>🎯 FIXED:</strong> Copy/paste from Word and Google Docs now preserves lists, formatting, and proper spacing!\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Assignment Information */}\r\n                    <div className=\"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={rubricData.assignmentInfo.title}\r\n                                    onChange={(e) => updateAssignmentInfo('title', e.target.value)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., Digital Portfolio Project - Final Showcase\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight (% of Final Grade)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.weight}\r\n                                    onChange={(e) => updateAssignmentInfo('weight', parseInt(e.target.value) || 0)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                                <ContentDisplay\r\n                                    content={rubricData.assignmentInfo.description}\r\n                                    onEdit={(value, openRichEditor) => {\r\n                                        if (openRichEditor) {\r\n                                            openInlineEditor(\r\n                                                rubricData.assignmentInfo.description,\r\n                                                'Assignment Description',\r\n                                                (newContent) => updateAssignmentInfo('description', newContent),\r\n                                                null,\r\n                                                null,\r\n                                                'assignment'\r\n                                            );\r\n                                        } else {\r\n                                            updateAssignmentInfo('description', value);\r\n                                        }\r\n                                    }}\r\n                                    placeholder=\"Detailed description of assignment requirements and expectations...\"\r\n                                    isTextarea={true}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Passing Threshold (%)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.passingThreshold}\r\n                                    onChange={(e) => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0)}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Points (Auto-calculated)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={calculateTotalPoints()}\r\n                                    disabled\r\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Inline Rich Text Editor for Assignment */}\r\n                        {inlineEditor.show && inlineEditor.type === 'assignment' && (\r\n                            <div className=\"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\">\r\n                                {/* Editor Header */}\r\n                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\r\n                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n                                        <Maximize2 size={20} className=\"text-blue-600\" />\r\n                                        Rich Text Editor: {inlineEditor.field}\r\n                                    </h4>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => closeInlineEditor(true)}\r\n                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                        >\r\n                                            <Save size={16} />\r\n                                            Save & Close\r\n                                        </button>\r\n                                        {/* FIXED: Improved Cancel button contrast */}\r\n                                        <button\r\n                                            onClick={() => closeInlineEditor(false)}\r\n                                            className=\"bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                        >\r\n                                            <X size={16} />\r\n                                            Cancel\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <RichTextToolbar />\r\n\r\n                                {/* Editor Content */}\r\n                                <div className=\"p-4\">\r\n                                    <style>{`\r\n                                        .rich-text-editor { line-height: 1.5; }\r\n                                        .rich-text-editor h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; line-height: 1.2; }\r\n                                        .rich-text-editor h2 { font-size: 1.3em; font-weight: bold; margin: 0.4em 0; line-height: 1.2; }\r\n                                        .rich-text-editor h3 { font-size: 1.1em; font-weight: bold; margin: 0.3em 0; line-height: 1.2; }\r\n                                        .rich-text-editor p { margin: 0.5em 0; line-height: 1.5; }\r\n                                        .rich-text-editor ul, .rich-text-editor ol { margin: 0.5em 0; padding-left: 1.5em; line-height: 1.5; }\r\n                                        .rich-text-editor li { margin: 0.2em 0; line-height: 1.4; }\r\n                                        .rich-text-editor blockquote { \r\n                                            margin: 0.5em 0; \r\n                                            padding: 0.5em 1em; \r\n                                            border-left: 4px solid #e5e7eb; \r\n                                            background: #f9fafb; \r\n                                            font-style: italic;\r\n                                            line-height: 1.5;\r\n                                        }\r\n                                        .rich-text-editor pre { \r\n                                            background: #f3f4f6; \r\n                                            padding: 0.5em; \r\n                                            border-radius: 4px; \r\n                                            font-family: monospace; \r\n                                            font-size: 0.9em; \r\n                                            white-space: pre-wrap;\r\n                                            line-height: 1.3;\r\n                                            margin: 0.5em 0;\r\n                                        }\r\n                                        .rich-text-editor a { color: #3b82f6; text-decoration: underline; }\r\n                                        .rich-text-editor hr { margin: 1em 0; border: none; border-top: 1px solid #d1d5db; }\r\n                                        .rich-text-editor div { margin: 0; }\r\n                                        .rich-text-editor * { max-width: 100%; word-wrap: break-word; }\r\n                                        \r\n                                        /* Enhanced formatting support */\r\n                                        .rich-text-editor strong, .rich-text-editor b { font-weight: bold; }\r\n                                        .rich-text-editor em, .rich-text-editor i { font-style: italic; }\r\n                                        .rich-text-editor u { text-decoration: underline; }\r\n                                        .rich-text-editor strike, .rich-text-editor s { text-decoration: line-through; }\r\n                                        .rich-text-editor sub { vertical-align: sub; font-size: smaller; }\r\n                                        .rich-text-editor sup { vertical-align: super; font-size: smaller; }\r\n                                    `}</style>\r\n                                    <div\r\n                                        ref={editorRef}\r\n                                        contentEditable={true}\r\n                                        onInput={handleRichTextChange}\r\n                                        onKeyDown={handleKeyDown}\r\n                                        onPaste={handlePaste}\r\n                                        className=\"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rich-text-editor\"\r\n                                        style={{\r\n                                            minHeight: '200px',\r\n                                            backgroundColor: '#fff',\r\n                                            fontSize: '14px',\r\n                                            lineHeight: '1.5',\r\n                                            fontFamily: 'inherit',\r\n                                            whiteSpace: 'pre-wrap',\r\n                                            wordBreak: 'break-word'\r\n                                        }}\r\n                                        suppressContentEditableWarning={true}\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Footer */}\r\n                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\r\n                                    <div className=\"flex justify-between items-center\">\r\n                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                                            <span className=\"flex items-center gap-2\">\r\n                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                                                Rich Text Editor Active\r\n                                            </span>\r\n                                            <span>Use toolbar for advanced formatting</span>\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-500\">\r\n                                            <strong>Shortcuts:</strong> Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Paragraph), Tab (Indent)<br />\r\n                                            <strong>Paste Support:</strong> Copy formatted text from Word/Google Docs - lists and formatting will be preserved!\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Point System Selection */}\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\r\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\r\n                        <div className=\"flex gap-6\">\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"multiplier\"\r\n                                    checked={pointingSystem === 'multiplier'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                <span className=\"text-sm\">\r\n                                    <strong>Automatic (Recommended):</strong> Points calculated using level multipliers\r\n                                </span>\r\n                            </label>\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"custom\"\r\n                                    checked={pointingSystem === 'custom'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                <span className=\"text-sm\">\r\n                                    <strong>Custom:</strong> Manually set point ranges for each level\r\n                                </span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* FIXED: Rubric Table with width constraints */}\r\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6 rubric-table-container\">\r\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Assessment Criteria Matrix</h3>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setReversedOrder(!reversedOrder)}\r\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                    title=\"Switch between ascending and descending level order\"\r\n                                >\r\n                                    <RotateCcw size={14} />\r\n                                    {reversedOrder ? 'High→Low' : 'Low→High'}\r\n                                </button>\r\n                                <button\r\n                                    onClick={resetTextareaSizes}\r\n                                    className=\"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                    title=\"Reset all textarea sizes to original dimensions\"\r\n                                >\r\n                                    <Minimize2 size={14} />\r\n                                    Reset Sizes\r\n                                </button>\r\n                                <button\r\n                                    onClick={addCriterion}\r\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\r\n                                >\r\n                                    <Plus size={16} />\r\n                                    Add Criterion\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full border-collapse\">\r\n                                <thead>\r\n                                    <tr className=\"bg-gray-100\">\r\n                                        <th className=\"border p-3 text-left font-semibold criterion-column\">\r\n                                            Criterion ({rubricData.criteria.length})\r\n                                        </th>\r\n                                        {getDisplayLevels().map((level) => (\r\n                                            <th\r\n                                                key={level.level}\r\n                                                className=\"border p-3 text-center font-semibold level-column\"\r\n                                                style={{\r\n                                                    backgroundColor: level.color + '20',\r\n                                                    color: level.color,\r\n                                                    border: `2px solid ${level.color}`\r\n                                                }}\r\n                                            >\r\n                                                <div className=\"font-bold\">{level.name}</div>\r\n                                                <div className=\"text-xs font-normal mt-1 opacity-75\">\r\n                                                    {level.description}\r\n                                                </div>\r\n                                            </th>\r\n                                        ))}\r\n                                        <th className=\"border p-3 text-center font-semibold actions-column\">\r\n                                            Actions\r\n                                        </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {rubricData.criteria.map((criterion, index) => (\r\n                                        <React.Fragment key={criterion.id}>\r\n                                            <tr>\r\n                                                {/* Criterion Column */}\r\n                                                <td className=\"border p-3 bg-gray-50 criterion-column\">\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <input\r\n                                                            type=\"text\"\r\n                                                            value={criterion.name}\r\n                                                            onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\r\n                                                            className=\"w-full p-2 border rounded text-sm font-medium\"\r\n                                                            placeholder={`Criterion ${index + 1} name`}\r\n                                                            style={{ wordWrap: 'break-word', overflowWrap: 'break-word' }}\r\n                                                        />\r\n                                                        <ContentDisplay\r\n                                                            content={criterion.description}\r\n                                                            onEdit={(value, openRichEditor) => {\r\n                                                                if (openRichEditor) {\r\n                                                                    openInlineEditor(\r\n                                                                        criterion.description,\r\n                                                                        `Criterion Description - ${criterion.name || 'Criterion'}`,\r\n                                                                        (newContent) => updateCriterion(criterion.id, 'description', newContent),\r\n                                                                        criterion.id,\r\n                                                                        null,\r\n                                                                        'criterion'\r\n                                                                    );\r\n                                                                } else {\r\n                                                                    updateCriterion(criterion.id, 'description', value);\r\n                                                                }\r\n                                                            }}\r\n                                                            placeholder=\"Brief description of what this criterion measures\"\r\n                                                        />\r\n                                                        <div className=\"flex gap-2\">\r\n                                                            <div className=\"flex-1\">\r\n                                                                <label className=\"text-xs text-gray-600\">Max Points</label>\r\n                                                                <input\r\n                                                                    type=\"number\"\r\n                                                                    value={criterion.maxPoints}\r\n                                                                    onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\r\n                                                                    className=\"w-full p-1 border rounded text-sm\"\r\n                                                                    min=\"0\"\r\n                                                                />\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </td>\r\n\r\n                                                {/* Level Columns */}\r\n                                                {getDisplayLevels().map((level) => (\r\n                                                    <td key={level.level} className=\"border p-3 align-top level-column\">\r\n                                                        <div className=\"space-y-2\">\r\n                                                            <div className=\"text-center\">\r\n                                                                <div\r\n                                                                    className=\"font-bold text-sm px-2 py-1 rounded\"\r\n                                                                    style={{\r\n                                                                        color: level.color,\r\n                                                                        backgroundColor: level.color + '20'\r\n                                                                    }}\r\n                                                                >\r\n                                                                    {calculatePointRange(criterion, level.level)} pts\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <ContentDisplay\r\n                                                                content={criterion.levels[level.level]?.description || ''}\r\n                                                                onEdit={(value, openRichEditor) => {\r\n                                                                    if (openRichEditor) {\r\n                                                                        openInlineEditor(\r\n                                                                            criterion.levels[level.level]?.description || '',\r\n                                                                            `${level.name} Level - ${criterion.name || 'Criterion'}`,\r\n                                                                            (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\r\n                                                                            criterion.id,\r\n                                                                            level.level,\r\n                                                                            'level'\r\n                                                                        );\r\n                                                                    } else {\r\n                                                                        updateCriterionLevel(criterion.id, level.level, 'description', value);\r\n                                                                    }\r\n                                                                }}\r\n                                                                placeholder={`Describe ${level.name.toLowerCase()} performance...`}\r\n                                                            />\r\n                                                            {pointingSystem === 'custom' && (\r\n                                                                <input\r\n                                                                    type=\"text\"\r\n                                                                    value={criterion.levels[level.level]?.pointRange || ''}\r\n                                                                    onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\r\n                                                                    className=\"w-full p-1 border rounded text-xs text-center\"\r\n                                                                    placeholder=\"e.g., 18-20\"\r\n                                                                    style={{ wordWrap: 'break-word', overflowWrap: 'break-word' }}\r\n                                                                />\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </td>\r\n                                                ))}\r\n\r\n                                                {/* Actions Column */}\r\n                                                <td className=\"border p-3 text-center actions-column\">\r\n                                                    <button\r\n                                                        onClick={() => removeCriterion(criterion.id)}\r\n                                                        className=\"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\"\r\n                                                        disabled={rubricData.criteria.length === 1}\r\n                                                        title={rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\"}\r\n                                                    >\r\n                                                        <X size={16} />\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            {/* Inline Rich Text Editor for Criterion or Level */}\r\n                                            {inlineEditor.show &&\r\n                                                inlineEditor.criterionId === criterion.id &&\r\n                                                (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && (\r\n                                                    <tr>\r\n                                                        <td colSpan={getDisplayLevels().length + 2} className=\"border-0 p-0\">\r\n                                                            <div className=\"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\">\r\n                                                                {/* Editor Header */}\r\n                                                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\r\n                                                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n                                                                        <Maximize2 size={20} className=\"text-blue-600\" />\r\n                                                                        Rich Text Editor: {inlineEditor.field}\r\n                                                                    </h4>\r\n                                                                    <div className=\"flex gap-2\">\r\n                                                                        <button\r\n                                                                            onClick={() => closeInlineEditor(true)}\r\n                                                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                                                        >\r\n                                                                            <Save size={16} />\r\n                                                                            Save & Close\r\n                                                                        </button>\r\n                                                                        {/* FIXED: Improved Cancel button contrast */}\r\n                                                                        <button\r\n                                                                            onClick={() => closeInlineEditor(false)}\r\n                                                                            className=\"bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\r\n                                                                        >\r\n                                                                            <X size={16} />\r\n                                                                            Cancel\r\n                                                                        </button>\r\n                                                                    </div>\r\n                                                                </div>\r\n\r\n                                                                <RichTextToolbar />\r\n\r\n                                                                {/* Editor Content */}\r\n                                                                <div className=\"p-4\">\r\n                                                                    <style>{`\r\n                                                                    .rich-text-editor { line-height: 1.5; }\r\n                                                                    .rich-text-editor h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; line-height: 1.2; }\r\n                                                                    .rich-text-editor h2 { font-size: 1.3em; font-weight: bold; margin: 0.4em 0; line-height: 1.2; }\r\n                                                                    .rich-text-editor h3 { font-size: 1.1em; font-weight: bold; margin: 0.3em 0; line-height: 1.2; }\r\n                                                                    .rich-text-editor p { margin: 0.5em 0; line-height: 1.5; }\r\n                                                                    .rich-text-editor ul, .rich-text-editor ol { margin: 0.5em 0; padding-left: 1.5em; line-height: 1.5; }\r\n                                                                    .rich-text-editor li { margin: 0.2em 0; line-height: 1.4; }\r\n                                                                    .rich-text-editor blockquote { \r\n                                                                        margin: 0.5em 0; \r\n                                                                        padding: 0.5em 1em; \r\n                                                                        border-left: 4px solid #e5e7eb; \r\n                                                                        background: #f9fafb; \r\n                                                                        font-style: italic;\r\n                                                                        line-height: 1.5;\r\n                                                                    }\r\n                                                                    .rich-text-editor pre { \r\n                                                                        background: #f3f4f6; \r\n                                                                        padding: 0.5em; \r\n                                                                        border-radius: 4px; \r\n                                                                        font-family: monospace; \r\n                                                                        font-size: 0.9em; \r\n                                                                        white-space: pre-wrap;\r\n                                                                        line-height: 1.3;\r\n                                                                        margin: 0.5em 0;\r\n                                                                    }\r\n                                                                    .rich-text-editor a { color: #3b82f6; text-decoration: underline; }\r\n                                                                    .rich-text-editor hr { margin: 1em 0; border: none; border-top: 1px solid #d1d5db; }\r\n                                                                    .rich-text-editor div { margin: 0; }\r\n                                                                    .rich-text-editor * { max-width: 100%; word-wrap: break-word; }\r\n                                                                    \r\n                                                                    /* Enhanced formatting support */\r\n                                                                    .rich-text-editor strong, .rich-text-editor b { font-weight: bold; }\r\n                                                                    .rich-text-editor em, .rich-text-editor i { font-style: italic; }\r\n                                                                    .rich-text-editor u { text-decoration: underline; }\r\n                                                                    .rich-text-editor strike, .rich-text-editor s { text-decoration: line-through; }\r\n                                                                    .rich-text-editor sub { vertical-align: sub; font-size: smaller; }\r\n                                                                    .rich-text-editor sup { vertical-align: super; font-size: smaller; }\r\n                                                                `}</style>\r\n                                                                    <div\r\n                                                                        ref={editorRef}\r\n                                                                        contentEditable={true}\r\n                                                                        onInput={handleRichTextChange}\r\n                                                                        onKeyDown={handleKeyDown}\r\n                                                                        onPaste={handlePaste}\r\n                                                                        className=\"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rich-text-editor\"\r\n                                                                        style={{\r\n                                                                            minHeight: '150px',\r\n                                                                            backgroundColor: '#fff',\r\n                                                                            fontSize: '14px',\r\n                                                                            lineHeight: '1.5',\r\n                                                                            fontFamily: 'inherit',\r\n                                                                            whiteSpace: 'pre-wrap',\r\n                                                                            wordBreak: 'break-word'\r\n                                                                        }}\r\n                                                                        suppressContentEditableWarning={true}\r\n                                                                    />\r\n                                                                </div>\r\n\r\n                                                                {/* Footer */}\r\n                                                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\r\n                                                                    <div className=\"flex justify-between items-center\">\r\n                                                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                                                                            <span className=\"flex items-center gap-2\">\r\n                                                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                                                                                Rich Text Editor Active\r\n                                                                            </span>\r\n                                                                            <span>Use toolbar for formatting</span>\r\n                                                                        </div>\r\n                                                                        <div className=\"text-xs text-gray-500\">\r\n                                                                            <strong>Shortcuts:</strong> Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Paragraph), Tab (Indent)<br />\r\n                                                                            <strong>Paste Support:</strong> Copy formatted text from Word/Google Docs - lists and formatting will be preserved!\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                )}\r\n                                        </React.Fragment>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Feedback Library Management */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">📝 Feedback Libraries</h3>\r\n                        <p className=\"text-sm text-gray-600 mb-4\">Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.</p>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            {rubricData.criteria.map((criterion) => (\r\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\r\n                                    <button\r\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\r\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\r\n                                    >\r\n                                        <div>\r\n                                            <h4 className=\"font-semibold text-gray-800\">\r\n                                                {criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`} - Feedback Library\r\n                                            </h4>\r\n                                            <p className=\"text-sm text-gray-600 mt-1\">\r\n                                                {criterion.feedbackLibrary.strengths.length +\r\n                                                    criterion.feedbackLibrary.improvements.length +\r\n                                                    criterion.feedbackLibrary.general.length} feedback items stored\r\n                                            </p>\r\n                                        </div>\r\n                                        {expandedFeedback[criterion.id] ? (\r\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\r\n                                        ) : (\r\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\r\n                                        )}\r\n                                    </button>\r\n\r\n                                    {expandedFeedback[criterion.id] && (\r\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\r\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n                                                {['strengths', 'improvements', 'general'].map((category) => (\r\n                                                    <div key={category} className=\"space-y-3\">\r\n                                                        <div className=\"flex justify-between items-center\">\r\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\r\n                                                                {category === 'strengths' ? '👍 Strengths' :\r\n                                                                    category === 'improvements' ? '🔧 Improvements' :\r\n                                                                        '💬 General'} Comments\r\n                                                            </label>\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    const newComment = prompt(`Add ${category} comment:`);\r\n                                                                    if (newComment && newComment.trim()) {\r\n                                                                        addFeedbackItem(criterion.id, category, newComment.trim());\r\n                                                                    }\r\n                                                                }}\r\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\"\r\n                                                            >\r\n                                                                + Add\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\r\n                                                                <div key={index} className=\"flex items-start gap-2 text-xs\">\r\n                                                                    <span\r\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\"\r\n                                                                        onClick={() => {\r\n                                                                            openInlineEditor(\r\n                                                                                item,\r\n                                                                                `${category} Comment`,\r\n                                                                                (newContent) => {\r\n                                                                                    const updatedFeedback = [...criterion.feedbackLibrary[category]];\r\n                                                                                    updatedFeedback[index] = newContent;\r\n                                                                                    setRubricData(prev => ({\r\n                                                                                        ...prev,\r\n                                                                                        criteria: prev.criteria.map(c =>\r\n                                                                                            c.id === criterion.id\r\n                                                                                                ? {\r\n                                                                                                    ...c,\r\n                                                                                                    feedbackLibrary: {\r\n                                                                                                        ...c.feedbackLibrary,\r\n                                                                                                        [category]: updatedFeedback\r\n                                                                                                    }\r\n                                                                                                }\r\n                                                                                                : c\r\n                                                                                        )\r\n                                                                                    }));\r\n                                                                                },\r\n                                                                                criterion.id,\r\n                                                                                null,\r\n                                                                                'feedback'\r\n                                                                            );\r\n                                                                        }}\r\n                                                                        title=\"Click to edit with rich text editor\"\r\n                                                                        style={{\r\n                                                                            wordWrap: 'break-word',\r\n                                                                            overflowWrap: 'break-word',\r\n                                                                            whiteSpace: 'pre-wrap'\r\n                                                                        }}\r\n                                                                    >\r\n                                                                        {stripHtml(item)}\r\n                                                                    </span>\r\n                                                                    <button\r\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\r\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\"\r\n                                                                        title=\"Remove this comment\"\r\n                                                                    >\r\n                                                                        <X size={12} />\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            ))}\r\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\r\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\">\r\n                                                                    No {category} comments yet - click \"Add\" to create some\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Overall Score Preview */}\r\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">📊 Achievement Level Preview</h3>\r\n                        <p className=\"text-gray-600 mb-4\">\r\n                            Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\r\n                        </p>\r\n\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\">\r\n                            {getDisplayLevels().map((level) => {\r\n                                const totalPoints = calculateTotalPoints();\r\n                                const pointsForLevel = Math.round(totalPoints * level.multiplier);\r\n                                return (\r\n                                    <div\r\n                                        key={level.level}\r\n                                        className=\"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\"\r\n                                        style={{\r\n                                            borderColor: level.color,\r\n                                            backgroundColor: level.color + '15'\r\n                                        }}\r\n                                    >\r\n                                        <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\r\n                                            {level.name}\r\n                                        </div>\r\n                                        <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\r\n                                            {pointsForLevel}+\r\n                                        </div>\r\n                                        <div className=\"text-xs text-gray-600\">\r\n                                            {totalPoints > 0 ? `${Math.round((pointsForLevel / totalPoints) * 100)}%+` : '-%'}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n\r\n                        {calculateTotalPoints() === 0 && (\r\n                            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\">\r\n                                <p className=\"text-yellow-800 text-sm\">\r\n                                    Add criteria with point values to see the achievement level breakdown\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Hidden file inputs */}\r\n                <input\r\n                    ref={importInputRef}\r\n                    type=\"file\"\r\n                    accept=\".json\"\r\n                    onChange={importRubric}\r\n                    className=\"hidden\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RubricCreator;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,IAAI,EAAEC,CAAC,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,SAAS,EAAEC,SAAS,EAAEC,UAAU,EAAEC,SAAS,EAAEC,KAAK,QAAQ,cAAc;AACpJ,SAASC,aAAa,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB;EACA,MAAM;IACFC,YAAY;IACZC,eAAe;IACfC,kCAAkC;IAClCC;EACJ,CAAC,GAAGR,aAAa,CAAC,CAAC;;EAEnB;EACA,MAAMS,aAAa,GAAG,CAClB;IAAEC,KAAK,EAAE,YAAY;IAAEC,IAAI,EAAE,YAAY;IAAEC,WAAW,EAAE,2BAA2B;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAE,CAAC,EACtH;IAAEJ,KAAK,EAAE,cAAc;IAAEC,IAAI,EAAE,cAAc;IAAEC,WAAW,EAAE,yBAAyB;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAI,CAAC,EAC1H;IAAEJ,KAAK,EAAE,YAAY;IAAEC,IAAI,EAAE,YAAY;IAAEC,WAAW,EAAE,uBAAuB;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAK,CAAC,EACrH;IAAEJ,KAAK,EAAE,YAAY;IAAEC,IAAI,EAAE,mBAAmB;IAAEC,WAAW,EAAE,yBAAyB;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAI,CAAC,EAC7H;IAAEJ,KAAK,EAAE,UAAU;IAAEC,IAAI,EAAE,UAAU;IAAEC,WAAW,EAAE,6BAA6B;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAK,CAAC,EACvH;IAAEJ,KAAK,EAAE,cAAc;IAAEC,IAAI,EAAE,cAAc;IAAEC,WAAW,EAAE,6BAA6B;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAK,CAAC,EAC/H;IAAEJ,KAAK,EAAE,aAAa;IAAEC,IAAI,EAAE,aAAa;IAAEC,WAAW,EAAE,kCAAkC;IAAEC,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE;EAAI,CAAC,CACpI;;EAED;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGhC,QAAQ,CAAC,MAAM;IAC/C,IAAIqB,YAAY,EAAE;MACd,OAAOA,YAAY;IACvB;IACA,OAAO;MACHY,cAAc,EAAE;QACZC,KAAK,EAAE,EAAE;QACTN,WAAW,EAAE,EAAE;QACfO,MAAM,EAAE,EAAE;QACVC,gBAAgB,EAAE,EAAE;QACpBC,WAAW,EAAE;MACjB,CAAC;MACDC,YAAY,EAAE,CAAC,GAAGb,aAAa,CAAC;MAChCc,QAAQ,EAAE,CACN;QACIC,EAAE,EAAE,aAAa;QACjBb,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfa,SAAS,EAAE,EAAE;QACbN,MAAM,EAAE,EAAE;QACVO,MAAM,EAAE,CAAC,CAAC;QACVC,eAAe,EAAE;UACbC,SAAS,EAAE,EAAE;UACbC,YAAY,EAAE,EAAE;UAChBC,OAAO,EAAE;QACb;MACJ,CAAC;IAET,CAAC;EACL,CAAC,CAAC;EAEF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGhD,QAAQ,CAAC,YAAY,CAAC;EAClE,MAAM,CAACiD,aAAa,EAAEC,gBAAgB,CAAC,GAAGlD,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACmD,SAAS,EAAEC,YAAY,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGtD,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5D,MAAM,CAACuD,YAAY,EAAEC,eAAe,CAAC,GAAGxD,QAAQ,CAAC;IAC7CyD,IAAI,EAAE,KAAK;IACXC,OAAO,EAAE,EAAE;IACXC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE,IAAI;IACZC,WAAW,EAAE,IAAI;IACjBnC,KAAK,EAAE,IAAI;IACXoC,IAAI,EAAE,IAAI,CAAC;EACf,CAAC,CAAC;EACF,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGhE,QAAQ,CAAC,IAAI,CAAC;;EAE5D;EACA,MAAMiE,kBAAkB,GAAGhE,MAAM,CAAC,EAAE,CAAC;EACrC,MAAMiE,SAAS,GAAGjE,MAAM,CAAC,IAAI,CAAC;;EAE9B;EACA,MAAMkE,cAAc,GAAGlE,MAAM,CAAC,IAAI,CAAC;;EAEnC;EACA,MAAMmE,YAAY,GAAIV,OAAO,IAAK;IAC9B,OAAOA,OAAO,IAAI,SAAS,CAACW,IAAI,CAACX,OAAO,CAAC;EAC7C,CAAC;EAED,MAAMY,SAAS,GAAIC,IAAI,IAAK;IACxB,MAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAGJ,IAAI;IACxB,OAAOC,OAAO,CAACI,WAAW,IAAIJ,OAAO,CAACK,SAAS,IAAI,EAAE;EACzD,CAAC;EAED,MAAMC,YAAY,GAAIP,IAAI,IAAK;IAC3B;IACA,MAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAGJ,IAAI;IACxB,OAAOC,OAAO,CAACG,SAAS;EAC5B,CAAC;;EAED;EACA;EACA,MAAMI,kBAAkB,GAAIC,OAAO,IAAK;IACpC,IAAI,CAACA,OAAO,EAAE,OAAO,EAAE;;IAEvB;IACA,MAAMR,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAGK,OAAO;;IAE3B;IACA;IACA;IACAR,OAAO,CAACS,gBAAgB,CAAC,QAAQ,CAAC,CAACC,OAAO,CAACC,CAAC,IAAI;MAC5C,MAAMC,QAAQ,GAAGD,CAAC,CAACE,UAAU;MAC7B;MACA,OAAOF,CAAC,CAACG,UAAU,EAAEF,QAAQ,CAACG,YAAY,CAACJ,CAAC,CAACG,UAAU,EAAEH,CAAC,CAAC;MAC3DC,QAAQ,CAACI,WAAW,CAACL,CAAC,CAAC,CAAC,CAAU;IACtC,CAAC,CAAC;;IAEF;IACA;IACA;IACA,MAAMM,OAAO,GAAG,CACZ,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EACxC,IAAI,EAAE,IAAI,EAAE,IAAI,EAChB,YAAY,EAAE,KAAK,EAAE,MAAM,EAC3B,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CACtC;IAED,MAAMC,IAAI,GAAGC,IAAI,IAAI;MACjB;MACA,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE,OAAOH,IAAI,CAACI,SAAS,CAAC,CAAC;;MAE7D;MACA,IAAIJ,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACG,YAAY,EAAE;QACrC,MAAMC,GAAG,GAAGN,IAAI,CAACO,OAAO,CAACC,WAAW,CAAC,CAAC;;QAEtC;QACA,IAAI,CAACV,OAAO,CAACW,QAAQ,CAACH,GAAG,CAAC,EAAE;UACxB,MAAMI,IAAI,GAAG5B,QAAQ,CAAC6B,sBAAsB,CAAC,CAAC;UAC9CX,IAAI,CAACY,UAAU,CAACrB,OAAO,CAACsB,KAAK,IAAI;YAC7B,MAAMC,OAAO,GAAGf,IAAI,CAACc,KAAK,CAAC;YAC3B,IAAIC,OAAO,EAAEJ,IAAI,CAACK,WAAW,CAACD,OAAO,CAAC;UAC1C,CAAC,CAAC;UACF,OAAOJ,IAAI;QACf;;QAEA;QACA,MAAMM,EAAE,GAAGlC,QAAQ,CAACC,aAAa,CAACuB,GAAG,CAAC;;QAEtC;QACA,IAAIA,GAAG,KAAK,GAAG,IAAIN,IAAI,CAACiB,YAAY,CAAC,MAAM,CAAC,EAAE;UAC1CD,EAAE,CAACE,YAAY,CAAC,MAAM,EAAElB,IAAI,CAACmB,YAAY,CAAC,MAAM,CAAC,CAAC;QACtD;QAEAnB,IAAI,CAACY,UAAU,CAACrB,OAAO,CAACsB,KAAK,IAAI;UAC7B,MAAMC,OAAO,GAAGf,IAAI,CAACc,KAAK,CAAC;UAC3B,IAAIC,OAAO,EAAEE,EAAE,CAACD,WAAW,CAACD,OAAO,CAAC;QACxC,CAAC,CAAC;QACF,OAAOE,EAAE;MACb;MACA,OAAO,IAAI,CAAC,CAAsB;IACtC,CAAC;IAED,MAAMI,SAAS,GAAGrB,IAAI,CAAClB,OAAO,CAAC;;IAE/B;IACA;IACA;IACA;IACA,MAAMwC,OAAO,GAAGvC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CsC,OAAO,CAACN,WAAW,CAACK,SAAS,CAAC,CAAC,CAAU;;IAEzC,IAAIxC,IAAI,GAAGyC,OAAO,CAACrC,SAAS,CACvBsC,OAAO,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAe;IAAA,CAC/CA,OAAO,CAAC,uBAAuB,EAAE,cAAc,CAAC,CAAC;IAAA,CACjDA,OAAO,CAAC,wBAAwB,EAAE,EAAE,CAAC,CAAW;IAAA,CAChDA,OAAO,CAAC,wBAAwB,EAAE,EAAE,CAAC,CAAW;IAAA,CAChDC,IAAI,CAAC,CAAC;IAEX,OAAO3C,IAAI;EACf,CAAC;;EAID;EACA,MAAM4C,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,MAAM,GAAGlD,SAAS,CAACmD,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE,OAAO,IAAI;IAExB,MAAME,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;IACvC,IAAIF,SAAS,CAACG,UAAU,KAAK,CAAC,EAAE,OAAO,IAAI;IAE3C,MAAMC,KAAK,GAAGJ,SAAS,CAACK,UAAU,CAAC,CAAC,CAAC;IACrC,OAAO;MACHC,cAAc,EAAEF,KAAK,CAACE,cAAc;MACpCC,WAAW,EAAEH,KAAK,CAACG,WAAW;MAC9BC,YAAY,EAAEJ,KAAK,CAACI,YAAY;MAChCC,SAAS,EAAEL,KAAK,CAACK;IACrB,CAAC;EACL,CAAC;EAED,MAAMC,qBAAqB,GAAIC,aAAa,IAAK;IAC7C,IAAI,CAACA,aAAa,IAAI,CAAC/D,SAAS,CAACmD,OAAO,EAAE;IAE1C,IAAI;MACA,MAAMC,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;MACvC,MAAME,KAAK,GAAGjD,QAAQ,CAACyD,WAAW,CAAC,CAAC;MAEpCR,KAAK,CAACS,QAAQ,CAACF,aAAa,CAACL,cAAc,EAAEK,aAAa,CAACJ,WAAW,CAAC;MACvEH,KAAK,CAACU,MAAM,CAACH,aAAa,CAACH,YAAY,EAAEG,aAAa,CAACF,SAAS,CAAC;MAEjET,SAAS,CAACe,eAAe,CAAC,CAAC;MAC3Bf,SAAS,CAACgB,QAAQ,CAACZ,KAAK,CAAC;IAC7B,CAAC,CAAC,OAAOa,KAAK,EAAE;MACZ;MACA,MAAMnB,MAAM,GAAGlD,SAAS,CAACmD,OAAO;MAChC,MAAMK,KAAK,GAAGjD,QAAQ,CAACyD,WAAW,CAAC,CAAC;MACpC,MAAMZ,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;MAEvCE,KAAK,CAACc,kBAAkB,CAACpB,MAAM,CAAC;MAChCM,KAAK,CAACe,QAAQ,CAAC,KAAK,CAAC;MACrBnB,SAAS,CAACe,eAAe,CAAC,CAAC;MAC3Bf,SAAS,CAACgB,QAAQ,CAACZ,KAAK,CAAC;IAC7B;EACJ,CAAC;;EAED;EACAxH,SAAS,CAAC,MAAM;IACZ,IAAI6D,eAAe,EAAE;MACjB2E,YAAY,CAAC3E,eAAe,CAAC;IACjC;IAEA,MAAM4E,SAAS,GAAGC,UAAU,CAAC,MAAM;MAC/BtH,eAAe,CAACS,UAAU,CAAC;IAC/B,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;;IAEViC,kBAAkB,CAAC2E,SAAS,CAAC;IAE7B,OAAO,MAAM;MACT,IAAIA,SAAS,EAAE;QACXD,YAAY,CAACC,SAAS,CAAC;MAC3B;IACJ,CAAC;EACL,CAAC,EAAE,CAAC5G,UAAU,EAAET,eAAe,CAAC,CAAC;;EAEjC;EACApB,SAAS,CAAC,MAAM;IACZ,IAAImB,YAAY,IAAIG,SAAS,KAAK,gBAAgB,EAAE;MAChDQ,aAAa,CAACX,YAAY,CAAC;IAC/B;EACJ,CAAC,EAAE,CAACA,YAAY,EAAEG,SAAS,CAAC,CAAC;;EAE7B;EACA,MAAMqH,uBAAuB,GAAIhF,WAAW,IAAK;IAC7CP,mBAAmB,CAACwF,IAAI,KAAK;MACzB,GAAGA,IAAI;MACP,CAACjF,WAAW,GAAG,CAACiF,IAAI,CAACjF,WAAW;IACpC,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMkF,gBAAgB,GAAGA,CAACrF,OAAO,EAAEC,KAAK,EAAEC,MAAM,EAAEC,WAAW,GAAG,IAAI,EAAEnC,KAAK,GAAG,IAAI,EAAEoC,IAAI,GAAG,YAAY,KAAK;IACxG;IACAG,kBAAkB,CAACoD,OAAO,GAAG3D,OAAO,IAAI,EAAE;IAE1CF,eAAe,CAAC;MACZC,IAAI,EAAE,IAAI;MACVC,OAAO,EAAEA,OAAO,IAAI,EAAE;MACtBC,KAAK;MACLC,MAAM;MACNC,WAAW;MACXnC,KAAK;MACLoC;IACJ,CAAC,CAAC;;IAEF;IACA8E,UAAU,CAAC,MAAM;MACb,MAAMxB,MAAM,GAAGlD,SAAS,CAACmD,OAAO;MAChC,IAAID,MAAM,EAAE;QACR;QACAA,MAAM,CAACzC,SAAS,GAAGjB,OAAO,IAAI,EAAE;QAChC0D,MAAM,CAAC4B,KAAK,CAAC,CAAC;QACd;QACA,MAAMtB,KAAK,GAAGjD,QAAQ,CAACyD,WAAW,CAAC,CAAC;QACpC,MAAMZ,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;QACvCE,KAAK,CAACc,kBAAkB,CAACpB,MAAM,CAAC;QAChCM,KAAK,CAACe,QAAQ,CAAC,KAAK,CAAC;QACrBnB,SAAS,CAACe,eAAe,CAAC,CAAC;QAC3Bf,SAAS,CAACgB,QAAQ,CAACZ,KAAK,CAAC;MAC7B;IACJ,CAAC,EAAE,GAAG,CAAC;EACX,CAAC;;EAED;EACA,MAAMuB,qBAAqB,GAAGA,CAACC,OAAO,EAAEC,KAAK,GAAG,IAAI,KAAK;IACrD,MAAM/B,MAAM,GAAGlD,SAAS,CAACmD,OAAO;IAChC,IAAID,MAAM,EAAE;MACRA,MAAM,CAAC4B,KAAK,CAAC,CAAC;;MAEd;MACA,MAAMI,SAAS,GAAGjC,kBAAkB,CAAC,CAAC;MAEtC1C,QAAQ,CAAC4E,WAAW,CAACH,OAAO,EAAE,KAAK,EAAEC,KAAK,CAAC;;MAE3C;MACA,MAAMG,cAAc,GAAGlC,MAAM,CAACzC,SAAS;MACvC;MACA,MAAM4E,YAAY,GAAGD,cAAc,CAC9BrC,OAAO,CAAC,uBAAuB,EAAE,cAAc,CAAC,CAAC;MAAA,CACjDA,OAAO,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC,CAAC;;MAE9C,IAAIsC,YAAY,KAAKD,cAAc,EAAE;QACjClC,MAAM,CAACzC,SAAS,GAAG4E,YAAY;MACnC;MAEAtF,kBAAkB,CAACoD,OAAO,GAAGD,MAAM,CAACzC,SAAS;;MAE7C;MACAiE,UAAU,CAAC,MAAM;QACb,IAAIQ,SAAS,IAAIhC,MAAM,CAACoC,QAAQ,CAACJ,SAAS,CAACxB,cAAc,CAAC,EAAE;UACxDI,qBAAqB,CAACoB,SAAS,CAAC;QACpC;MACJ,CAAC,EAAE,CAAC,CAAC;IACT;EACJ,CAAC;;EAED;EACA,MAAMK,oBAAoB,GAAIC,CAAC,IAAK;IAChC,MAAMtC,MAAM,GAAGlD,SAAS,CAACmD,OAAO;IAChC,IAAID,MAAM,EAAE;MACR;MACAnD,kBAAkB,CAACoD,OAAO,GAAGD,MAAM,CAACzC,SAAS;IACjD;EACJ,CAAC;;EAED;EACA,MAAMgF,WAAW,GAAID,CAAC,IAAK;IACvBA,CAAC,CAACE,cAAc,CAAC,CAAC;IAClB,MAAMxC,MAAM,GAAGlD,SAAS,CAACmD,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAMyC,aAAa,GAAGH,CAAC,CAACG,aAAa,IAAItC,MAAM,CAACsC,aAAa;;IAE7D;IACA,IAAIC,UAAU,GAAGD,aAAa,CAACE,OAAO,CAAC,WAAW,CAAC;IAEnD,IAAI,CAACD,UAAU,EAAE;MACb;MACAA,UAAU,GAAGD,aAAa,CAACE,OAAO,CAAC,YAAY,CAAC;MAChD,IAAID,UAAU,EAAE;QACZ;QACAA,UAAU,GAAGA,UAAU;MAC3B;IACJ;IAEA,IAAIA,UAAU,EAAE;MACZ;MACA,MAAME,cAAc,GAAGjF,kBAAkB,CAAC+E,UAAU,CAAC;;MAErD;MACA,IAAIE,cAAc,EAAE;QAChBvF,QAAQ,CAAC4E,WAAW,CAAC,YAAY,EAAE,KAAK,EAAEW,cAAc,CAAC;;QAEzD;QACApB,UAAU,CAAC,MAAM;UACb,IAAIxB,MAAM,EAAE;YACRnD,kBAAkB,CAACoD,OAAO,GAAGD,MAAM,CAACzC,SAAS;UACjD;QACJ,CAAC,EAAE,CAAC,CAAC;MACT;IACJ;EACJ,CAAC;;EAED;EACA,MAAMsF,aAAa,GAAIP,CAAC,IAAK;IACzB,MAAMtC,MAAM,GAAGlD,SAAS,CAACmD,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,IAAIsC,CAAC,CAACQ,GAAG,KAAK,OAAO,IAAI,CAACR,CAAC,CAACS,QAAQ,EAAE;MAClC;MACA;MACAvB,UAAU,CAAC,MAAM;QACb,MAAMU,cAAc,GAAGlC,MAAM,CAACzC,SAAS;QACvC;QACA,MAAM8B,OAAO,GAAG6C,cAAc,CAACrC,OAAO,CAAC,uBAAuB,EAAE,cAAc,CAAC;QAC/E,IAAIR,OAAO,KAAK6C,cAAc,EAAE;UAC5BlC,MAAM,CAACzC,SAAS,GAAG8B,OAAO;QAC9B;QACAxC,kBAAkB,CAACoD,OAAO,GAAGD,MAAM,CAACzC,SAAS;MACjD,CAAC,EAAE,CAAC,CAAC;IACT,CAAC,MAAM,IAAI+E,CAAC,CAACQ,GAAG,KAAK,KAAK,EAAE;MACxBR,CAAC,CAACE,cAAc,CAAC,CAAC;MAClBnF,QAAQ,CAAC4E,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,0BAA0B,CAAC;MACrEpF,kBAAkB,CAACoD,OAAO,GAAGD,MAAM,CAACzC,SAAS;IACjD;;IAEA;IACA,IAAI+E,CAAC,CAACU,OAAO,IAAIV,CAAC,CAACW,OAAO,EAAE;MACxB,QAAQX,CAAC,CAACQ,GAAG;QACT,KAAK,GAAG;UACJR,CAAC,CAACE,cAAc,CAAC,CAAC;UAClBX,qBAAqB,CAAC,MAAM,CAAC;UAC7B;QACJ,KAAK,GAAG;UACJS,CAAC,CAACE,cAAc,CAAC,CAAC;UAClBX,qBAAqB,CAAC,QAAQ,CAAC;UAC/B;QACJ,KAAK,GAAG;UACJS,CAAC,CAACE,cAAc,CAAC,CAAC;UAClBX,qBAAqB,CAAC,WAAW,CAAC;UAClC;MACR;IACJ;EACJ,CAAC;;EAED;EACA,MAAMqB,iBAAiB,GAAGA,CAACC,IAAI,GAAG,KAAK,KAAK;IACxC,IAAIA,IAAI,IAAIhH,YAAY,CAACK,MAAM,EAAE;MAC7B;MACA,MAAM4G,YAAY,GAAGvG,kBAAkB,CAACoD,OAAO;MAC/C;MACA,MAAMoD,aAAa,GAAG3F,YAAY,CAAC0F,YAAY,CAAC;MAChDjH,YAAY,CAACK,MAAM,CAAC6G,aAAa,CAAC;IACtC;IAEAjH,eAAe,CAAC;MACZC,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE,IAAI;MACjBnC,KAAK,EAAE,IAAI;MACXoC,IAAI,EAAE;IACV,CAAC,CAAC;IACFG,kBAAkB,CAACoD,OAAO,GAAG,EAAE;EACnC,CAAC;;EAED;EACA,MAAMqD,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,SAAS,GAAGlG,QAAQ,CAACQ,gBAAgB,CAAC,UAAU,CAAC;IACvD0F,SAAS,CAACzF,OAAO,CAAC0F,QAAQ,IAAI;MAC1B;MACA,IAAIA,QAAQ,CAACC,OAAO,CAAC,kBAAkB,CAAC,EAAE;QACtCD,QAAQ,CAACE,KAAK,CAACC,MAAM,GAAG,MAAM;QAC9BH,QAAQ,CAACE,KAAK,CAACE,SAAS,GAAG,OAAO;MACtC,CAAC,MAAM,IAAIJ,QAAQ,CAACC,OAAO,CAAC,IAAI,CAAC,EAAE;QAC/B;QACA,IAAID,QAAQ,CAACK,IAAI,IAAI,CAAC,EAAE;UACpBL,QAAQ,CAACE,KAAK,CAACC,MAAM,GAAG,MAAM;UAC9BH,QAAQ,CAACE,KAAK,CAACE,SAAS,GAAG,OAAO;QACtC,CAAC,MAAM;UACHJ,QAAQ,CAACE,KAAK,CAACC,MAAM,GAAG,MAAM;UAC9BH,QAAQ,CAACE,KAAK,CAACE,SAAS,GAAG,OAAO;QACtC;MACJ;MACAJ,QAAQ,CAACE,KAAK,CAACI,KAAK,GAAG,MAAM;IACjC,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,OAAOpJ,UAAU,CAACQ,QAAQ,CAAC6I,MAAM,CAAC,CAACC,KAAK,EAAEC,SAAS,KAAKD,KAAK,GAAGC,SAAS,CAAC7I,SAAS,EAAE,CAAC,CAAC;EAC3F,CAAC;;EAED;EACA,MAAM8I,oBAAoB,GAAGA,CAAC5H,KAAK,EAAEwF,KAAK,KAAK;IAC3CnH,aAAa,CAAC8G,IAAI,IAAI;MAClB,MAAM0C,OAAO,GAAG;QACZ,GAAG1C,IAAI;QACP7G,cAAc,EAAE;UAAE,GAAG6G,IAAI,CAAC7G,cAAc;UAAE,CAAC0B,KAAK,GAAGwF;QAAM;MAC7D,CAAC;;MAED;MACA,IAAIxF,KAAK,KAAK,aAAa,EAAE;QACzB6H,OAAO,CAACvJ,cAAc,CAACI,WAAW,GAAG8I,oBAAoB,CAAC,CAAC;MAC/D;MAEA,OAAOK,OAAO;IAClB,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACvB,MAAMC,YAAY,GAAG;MACjBlJ,EAAE,EAAE,aAAamJ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC7BjK,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfa,SAAS,EAAE,EAAE;MACbN,MAAM,EAAE,EAAE;MACVO,MAAM,EAAE,CAAC,CAAC;MACVC,eAAe,EAAE;QACbC,SAAS,EAAE,EAAE;QACbC,YAAY,EAAE,EAAE;QAChBC,OAAO,EAAE;MACb;IACJ,CAAC;IAEDd,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAE,CAAC,GAAGuG,IAAI,CAACvG,QAAQ,EAAEmJ,YAAY;IAC7C,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMG,eAAe,GAAIhI,WAAW,IAAK;IACrC7B,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAACuJ,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACvJ,EAAE,KAAKqB,WAAW;IAC5D,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMmI,eAAe,GAAGA,CAACnI,WAAW,EAAEF,KAAK,EAAEwF,KAAK,KAAK;IACnDnH,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAAC0J,GAAG,CAACX,SAAS,IACjCA,SAAS,CAAC9I,EAAE,KAAKqB,WAAW,GACtB;QAAE,GAAGyH,SAAS;QAAE,CAAC3H,KAAK,GAAGwF;MAAM,CAAC,GAChCmC,SACV;IACJ,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMY,oBAAoB,GAAGA,CAACrI,WAAW,EAAEnC,KAAK,EAAEiC,KAAK,EAAEwF,KAAK,KAAK;IAC/DnH,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAAC0J,GAAG,CAACX,SAAS,IACjCA,SAAS,CAAC9I,EAAE,KAAKqB,WAAW,GACtB;QACE,GAAGyH,SAAS;QACZ5I,MAAM,EAAE;UACJ,GAAG4I,SAAS,CAAC5I,MAAM;UACnB,CAAChB,KAAK,GAAG;YACL,GAAG4J,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAAC;YAC1B,CAACiC,KAAK,GAAGwF;UACb;QACJ;MACJ,CAAC,GACCmC,SACV;IACJ,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMa,eAAe,GAAGA,CAACtI,WAAW,EAAEuI,QAAQ,EAAEC,IAAI,KAAK;IACrD,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACnF,IAAI,CAAC,CAAC,EAAE;IAE3BlF,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAAC0J,GAAG,CAACX,SAAS,IACjCA,SAAS,CAAC9I,EAAE,KAAKqB,WAAW,GACtB;QACE,GAAGyH,SAAS;QACZ3I,eAAe,EAAE;UACb,GAAG2I,SAAS,CAAC3I,eAAe;UAC5B,CAACyJ,QAAQ,GAAG,CAAC,GAAGd,SAAS,CAAC3I,eAAe,CAACyJ,QAAQ,CAAC,EAAEC,IAAI,CAACnF,IAAI,CAAC,CAAC;QACpE;MACJ,CAAC,GACCoE,SACV;IACJ,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMgB,kBAAkB,GAAGA,CAACzI,WAAW,EAAEuI,QAAQ,EAAEG,KAAK,KAAK;IACzDvK,aAAa,CAAC8G,IAAI,KAAK;MACnB,GAAGA,IAAI;MACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAAC0J,GAAG,CAACX,SAAS,IACjCA,SAAS,CAAC9I,EAAE,KAAKqB,WAAW,GACtB;QACE,GAAGyH,SAAS;QACZ3I,eAAe,EAAE;UACb,GAAG2I,SAAS,CAAC3I,eAAe;UAC5B,CAACyJ,QAAQ,GAAGd,SAAS,CAAC3I,eAAe,CAACyJ,QAAQ,CAAC,CAACN,MAAM,CAAC,CAACU,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKF,KAAK;QAChF;MACJ,CAAC,GACCjB,SACV;IACJ,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMoB,mBAAmB,GAAGA,CAACpB,SAAS,EAAE5J,KAAK,KAAK;IAC9C,MAAMiL,WAAW,GAAG5K,UAAU,CAACO,YAAY,CAACsK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACnL,KAAK,KAAKA,KAAK,CAAC;IACxE,IAAI,CAACiL,WAAW,EAAE,OAAO,GAAG;IAE5B,IAAI5J,cAAc,KAAK,YAAY,EAAE;MACjC,MAAM+J,MAAM,GAAGC,IAAI,CAACC,KAAK,CAAC1B,SAAS,CAAC7I,SAAS,GAAGkK,WAAW,CAAC7K,UAAU,CAAC;MACvE,OAAOJ,KAAK,KAAK,YAAY,GAAG,GAAG,GAAGoL,MAAM,CAACG,QAAQ,CAAC,CAAC;IAC3D,CAAC,MAAM;MAAA,IAAAC,qBAAA;MACH;MACA,OAAO,EAAAA,qBAAA,GAAA5B,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAAC,cAAAwL,qBAAA,uBAAvBA,qBAAA,CAAyBC,UAAU,KAAI,GAAG;IACrD;EACJ,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC3B,OAAOnK,aAAa,GAAG,CAAC,GAAGlB,UAAU,CAACO,YAAY,CAAC,CAAC+K,OAAO,CAAC,CAAC,GAAGtL,UAAU,CAACO,YAAY;EAC3F,CAAC;;EAED;EACA,MAAMgL,UAAU,GAAGA,CAAA,KAAM;IACrB,MAAMC,OAAO,GAAGC,IAAI,CAACC,SAAS,CAAC1L,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IACnD,MAAM2L,QAAQ,GAAG,IAAIC,IAAI,CAAC,CAACJ,OAAO,CAAC,EAAE;MAAEzJ,IAAI,EAAE;IAAmB,CAAC,CAAC;IAClE,MAAM8J,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,QAAQ,CAAC;IACzC,MAAMK,IAAI,GAAGtJ,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCqJ,IAAI,CAACC,IAAI,GAAGJ,GAAG;IACfG,IAAI,CAACE,QAAQ,GAAG,UAAUlM,UAAU,CAACE,cAAc,CAACC,KAAK,CAAC+E,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,OAAO,IAAI,IAAI0E,IAAI,CAAC,CAAC,CAACuC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO;IAC1IJ,IAAI,CAACK,KAAK,CAAC,CAAC;IACZP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMU,gBAAgB,GAAGA,CAAA,KAAM;IAC3B,MAAMC,UAAU,GAAGC,sBAAsB,CAAC,CAAC;;IAE3C;IACAlN,eAAe,CAACiN,UAAU,CAAC;;IAE3B;IACA,MAAMhB,OAAO,GAAGC,IAAI,CAACC,SAAS,CAACc,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IACnD,MAAMb,QAAQ,GAAG,IAAIC,IAAI,CAAC,CAACJ,OAAO,CAAC,EAAE;MAAEzJ,IAAI,EAAE;IAAmB,CAAC,CAAC;IAClE,MAAM8J,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,QAAQ,CAAC;IACzC,MAAMK,IAAI,GAAGtJ,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCqJ,IAAI,CAACC,IAAI,GAAGJ,GAAG;IACfG,IAAI,CAACE,QAAQ,GAAG,UAAUlM,UAAU,CAACE,cAAc,CAACC,KAAK,CAAC+E,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,QAAQ,aAAa;IACvG8G,IAAI,CAACK,KAAK,CAAC,CAAC;IACZP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMY,sBAAsB,GAAGA,CAAA,KAAM;IACjC,MAAMD,UAAU,GAAG;MAAE,GAAGxM;IAAW,CAAC;;IAEpC;IACAwM,UAAU,CAAChM,QAAQ,GAAGgM,UAAU,CAAChM,QAAQ,CAAC0J,GAAG,CAACX,SAAS,KAAK;MACxD,GAAGA,SAAS;MACZ5I,MAAM,EAAE+L,MAAM,CAACC,WAAW,CACtB3M,UAAU,CAACO,YAAY,CAAC2J,GAAG,CAACvK,KAAK;QAAA,IAAAiN,sBAAA;QAAA,OAAI,CACjCjN,KAAK,CAACA,KAAK,EACX;UACIyL,UAAU,EAAET,mBAAmB,CAACpB,SAAS,EAAE5J,KAAK,CAACA,KAAK,CAAC;UACvDE,WAAW,EAAE,EAAA+M,sBAAA,GAAArD,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAACA,KAAK,CAAC,cAAAiN,sBAAA,uBAA7BA,sBAAA,CAA+B/M,WAAW,KAAI;QAC/D,CAAC,CACJ;MAAA,EACL;IACJ,CAAC,CAAC,CAAC;;IAEH;IACA2M,UAAU,CAACtM,cAAc,CAACI,WAAW,GAAG8I,oBAAoB,CAAC,CAAC;IAE9D,OAAOoD,UAAU;EACrB,CAAC;;EAED;EACA,MAAMK,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,MAAML,UAAU,GAAGC,sBAAsB,CAAC,CAAC;IAC3CjN,kCAAkC,CAACgN,UAAU,CAAC;EAClD,CAAC;;EAED;EACA,MAAMM,YAAY,GAAIC,KAAK,IAAK;IAC5B,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIF,IAAI,EAAE;MACN,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAI1F,CAAC,IAAK;QACnB,IAAI;UACA,MAAM2F,YAAY,GAAG7B,IAAI,CAAC8B,KAAK,CAAC5F,CAAC,CAACsF,MAAM,CAACO,MAAM,CAAC;;UAEhD;UACA,IAAIF,YAAY,CAACpN,cAAc,IAAIoN,YAAY,CAAC9M,QAAQ,IAAI8M,YAAY,CAAC/M,YAAY,EAAE;YACnFN,aAAa,CAACqN,YAAY,CAAC;UAC/B,CAAC,MAAM;YACHG,KAAK,CAAC,yDAAyD,CAAC;UACpE;QACJ,CAAC,CAAC,OAAOjH,KAAK,EAAE;UACZiH,KAAK,CAAC,qDAAqD,CAAC;UAC5DC,OAAO,CAAClH,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACzC;MACJ,CAAC;MACD2G,MAAM,CAACQ,UAAU,CAACX,IAAI,CAAC;IAC3B;IACA;IACAD,KAAK,CAACE,MAAM,CAAC7F,KAAK,GAAG,EAAE;EAC3B,CAAC;;EAED;EACA,MAAMwG,WAAW,GAAGA,CAAA,KAAM;IACtB,IAAIpI,MAAM,CAACqI,OAAO,CAAC,oFAAoF,CAAC,EAAE;MACtG,MAAMC,aAAa,GAAG;QAClB5N,cAAc,EAAE;UACZC,KAAK,EAAE,EAAE;UACTN,WAAW,EAAE,EAAE;UACfO,MAAM,EAAE,EAAE;UACVC,gBAAgB,EAAE,EAAE;UACpBC,WAAW,EAAE;QACjB,CAAC;QACDC,YAAY,EAAE,CAAC,GAAGb,aAAa,CAAC;QAChCc,QAAQ,EAAE,CACN;UACIC,EAAE,EAAE,aAAa;UACjBb,IAAI,EAAE,EAAE;UACRC,WAAW,EAAE,EAAE;UACfa,SAAS,EAAE,EAAE;UACbN,MAAM,EAAE,EAAE;UACVO,MAAM,EAAE,CAAC,CAAC;UACVC,eAAe,EAAE;YACbC,SAAS,EAAE,EAAE;YACbC,YAAY,EAAE,EAAE;YAChBC,OAAO,EAAE;UACb;QACJ,CAAC;MAET,CAAC;MACDd,aAAa,CAAC6N,aAAa,CAAC;IAChC;EACJ,CAAC;;EAED;EACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACvB,MAAMC,aAAa,GAAG3C,gBAAgB,CAAC,CAAC;IACxC,MAAM/K,WAAW,GAAG8I,oBAAoB,CAAC,CAAC;IAE1C,MAAM6E,WAAW,GAAG;AAC5B;AACA;AACA;AACA;AACA,aAAajO,UAAU,CAACE,cAAc,CAACC,KAAK,IAAI,mBAAmB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAcH,UAAU,CAACE,cAAc,CAACC,KAAK,IAAI,mBAAmB;AACpE,uDAAuDoC,SAAS,CAACvC,UAAU,CAACE,cAAc,CAACL,WAAW,CAAC,IAAI,yBAAyB;AACpI;AACA;AACA;AACA;AACA,qDAAqDG,UAAU,CAACE,cAAc,CAACE,MAAM;AACrF,qDAAqDJ,UAAU,CAACE,cAAc,CAACG,gBAAgB;AAC/F,gDAAgDC,WAAW;AAC3D,sDAAsDN,UAAU,CAACQ,QAAQ,CAAC0N,MAAM;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBF,aAAa,CAAC9D,GAAG,CAACvK,KAAK,IAAI,qBAAqB,EAAE,GAAGqO,aAAa,CAACE,MAAM,wBAAwBvO,KAAK,CAACG,KAAK,MAAMH,KAAK,CAACC,IAAI,OAAO,CAAC,CAACuO,IAAI,CAAC,EAAE,CAAC;AAC/J;AACA;AACA;AACA,cAAcnO,UAAU,CAACQ,QAAQ,CAAC0J,GAAG,CAACX,SAAS,IAAI;AACnD;AACA;AACA,4EAA4EA,SAAS,CAAC3J,IAAI,IAAI,mBAAmB;AACjH;AACA,8BAA8B2C,SAAS,CAACgH,SAAS,CAAC1J,WAAW,CAAC,IAAI,yBAAyB;AAC3F;AACA;AACA,8BAA8B0J,SAAS,CAAC7I,SAAS;AACjD;AACA;AACA,sBAAsBsN,aAAa,CAAC9D,GAAG,CAACvK,KAAK;MAAA,IAAAyO,sBAAA;MAAA,OAAI;AACjD,uDAAuDzO,KAAK,CAACG,KAAK;AAClE,qEAAqEH,KAAK,CAACG,KAAK;AAChF,kCAAkC6K,mBAAmB,CAACpB,SAAS,EAAE5J,KAAK,CAACA,KAAK,CAAC;AAC7E;AACA;AACA,kCAAkC4C,SAAS,EAAA6L,sBAAA,GAAC7E,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAACA,KAAK,CAAC,cAAAyO,sBAAA,uBAA7BA,sBAAA,CAA+BvO,WAAW,CAAC,IAAI,sBAAsB;AACjH;AACA;AACA,qBAAqB;IAAA,EAAC,CAACsO,IAAI,CAAC,EAAE,CAAC;AAC/B;AACA,aAAa,CAAC,CAACA,IAAI,CAAC,EAAE,CAAC;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAcH,aAAa,CAAC9D,GAAG,CAACvK,KAAK,IAAI;AACzC,+DAA+DA,KAAK,CAACG,KAAK,uBAAuBH,KAAK,CAACG,KAAK;AAC5G,4DAA4DH,KAAK,CAACG,KAAK,0BAA0BH,KAAK,CAACC,IAAI;AAC3G,6FAA6FD,KAAK,CAACG,KAAK;AACxG,0BAA0BkL,IAAI,CAACC,KAAK,CAAC3K,WAAW,GAAGX,KAAK,CAACI,UAAU,CAAC;AACpE;AACA,qEAAqE,CAACJ,KAAK,CAACI,UAAU,GAAG,GAAG,EAAEsO,OAAO,CAAC,CAAC,CAAC;AACxG;AACA,aAAa,CAAC,CAACF,IAAI,CAAC,EAAE,CAAC;AACvB;AACA;AACA;AACA;AACA,gDAAgD,IAAIvE,IAAI,CAAC,CAAC,CAAC0E,kBAAkB,CAAC,OAAO,EAAE;MAC3EC,OAAO,EAAE,MAAM;MACfC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,GAAG,EAAE,SAAS;MACdC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE;IACZ,CAAC,CAAC;AACV,4CAA4CtO,WAAW,iCAAiCN,UAAU,CAACQ,QAAQ,CAAC0N,MAAM,+BAA+BlO,UAAU,CAACO,YAAY,CAAC2N,MAAM;AAC/K;AACA;AACA,QAAQ;IAEA,MAAMW,QAAQ,GAAG,IAAIjD,IAAI,CAAC,CAACqC,WAAW,CAAC,EAAE;MAAElM,IAAI,EAAE;IAAY,CAAC,CAAC;IAC/D,MAAM8J,GAAG,GAAGC,GAAG,CAACC,eAAe,CAAC8C,QAAQ,CAAC;IACzC,MAAM7C,IAAI,GAAGtJ,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCqJ,IAAI,CAACC,IAAI,GAAGJ,GAAG;IACfG,IAAI,CAACE,QAAQ,GAAG,UAAUlM,UAAU,CAACE,cAAc,CAACC,KAAK,CAAC+E,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,SAAS,IAAI,IAAI0E,IAAI,CAAC,CAAC,CAACuC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO;IAC5IJ,IAAI,CAACK,KAAK,CAAC,CAAC;IACZP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMiD,cAAc,GAAGA,CAAC;IAAEnN,OAAO;IAAEoN,MAAM;IAAEC,WAAW;IAAEC,UAAU,GAAG,KAAK;IAAEC,SAAS,GAAG;EAAG,CAAC,KAAK;IAC7F,MAAMC,OAAO,GAAG9M,YAAY,CAACV,OAAO,CAAC;IAErC,IAAIwN,OAAO,IAAI,CAACF,UAAU,EAAE;MACxB,oBACI9P,OAAA;QAAK+P,SAAS,EAAE,kBAAkBA,SAAS,EAAG;QAAAE,QAAA,gBAC1CjQ,OAAA;UACI+P,SAAS,EAAC,gFAAgF;UAC1FnG,KAAK,EAAE;YACHsG,QAAQ,EAAE,YAAY;YACtBC,YAAY,EAAE,YAAY;YAC1BC,UAAU,EAAE,UAAU;YACtBC,QAAQ,EAAE;UACd,CAAE;UACFC,uBAAuB,EAAE;YAAEC,MAAM,EAAE/N;UAAQ;QAAE;UAAAgO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC,eACF3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEhB,MAAO;UAChBG,SAAS,EAAC,kJAAkJ;UAC5J/O,KAAK,EAAC,uBAAuB;UAAAiP,QAAA,eAE7BjQ,OAAA,CAACH,KAAK;YAACgR,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAEd;IAEA,IAAIb,UAAU,EAAE;MACZ,oBACI9P,OAAA;QAAK+P,SAAS,EAAC,UAAU;QAAAE,QAAA,gBACrBjQ,OAAA;UACIiI,KAAK,EAAEzF,OAAQ;UACfsO,QAAQ,EAAGtI,CAAC,IAAKoH,MAAM,CAACpH,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;UACxC8H,SAAS,EAAE,oGAAoGA,SAAS,EAAG;UAC3HhG,IAAI,EAAC,GAAG;UACR8F,WAAW,EAAEA,WAAY;UACzB7O,KAAK,EAAC,8EAA8E;UACpF4I,KAAK,EAAE;YACHmH,SAAS,EAAE,MAAM;YACjBjH,SAAS,EAAE,OAAO;YAClBkH,MAAM,EAAE,MAAM;YACdd,QAAQ,EAAE,YAAY;YACtBC,YAAY,EAAE;UAClB;QAAE;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eACF3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAMhB,MAAM,CAAC,IAAI,EAAE,IAAI,CAAE,CAAC;UAAA;UACnCG,SAAS,EAAC,iJAAiJ;UAC3J/O,KAAK,EAAC,uBAAuB;UAAAiP,QAAA,eAE7BjQ,OAAA,CAACN,SAAS;YAACmR,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAEd;IAEA,oBACI3Q,OAAA;MAAK+P,SAAS,EAAC,UAAU;MAAAE,QAAA,gBACrBjQ,OAAA;QACIiI,KAAK,EAAEzF,OAAQ;QACfsO,QAAQ,EAAGtI,CAAC,IAAKoH,MAAM,CAACpH,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;QACxC8H,SAAS,EAAE,wGAAwGA,SAAS,EAAG;QAC/HhG,IAAI,EAAC,GAAG;QACR8F,WAAW,EAAEA,WAAY;QACzB7O,KAAK,EAAC,8EAA8E;QACpF4I,KAAK,EAAE;UACHmH,SAAS,EAAE,MAAM;UACjBjH,SAAS,EAAE,OAAO;UAClBkH,MAAM,EAAE,MAAM;UACdd,QAAQ,EAAE,YAAY;UACtBC,YAAY,EAAE;QAClB;MAAE;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eACF3Q,OAAA;QACI4C,IAAI,EAAC,QAAQ;QACbgO,OAAO,EAAEA,CAAA,KAAMhB,MAAM,CAAC,IAAI,EAAE,IAAI,CAAE,CAAC;QAAA;QACnCG,SAAS,EAAC,iJAAiJ;QAC3J/O,KAAK,EAAC,uBAAuB;QAAAiP,QAAA,eAE7BjQ,OAAA,CAACN,SAAS;UAACmR,IAAI,EAAE;QAAG;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAEd,CAAC;;EAED;EACA,MAAMM,eAAe,GAAGA,CAAA,kBACpBjR,OAAA;IAAK+P,SAAS,EAAC,yBAAyB;IAAAE,QAAA,gBAEpCjQ,OAAA;MAAK+P,SAAS,EAAC,2BAA2B;MAAAE,QAAA,gBAEtCjQ,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,eACpDjQ,OAAA;UACI8Q,QAAQ,EAAGtI,CAAC,IAAK;YACb,IAAIA,CAAC,CAACsF,MAAM,CAAC7F,KAAK,EAAE;cAChBF,qBAAqB,CAAC,aAAa,EAAES,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAC;cACpDO,CAAC,CAACsF,MAAM,CAAC7F,KAAK,GAAG,EAAE;YACvB;UACJ,CAAE;UACF8H,SAAS,EAAC,4BAA4B;UACtC/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,gBAEnBjQ,OAAA;YAAQiI,KAAK,EAAC,EAAE;YAAAgI,QAAA,EAAC;UAAM;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAChC3Q,OAAA;YAAQiI,KAAK,EAAC,IAAI;YAAAgI,QAAA,EAAC;UAAS;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACrC3Q,OAAA;YAAQiI,KAAK,EAAC,IAAI;YAAAgI,QAAA,EAAC;UAAS;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACrC3Q,OAAA;YAAQiI,KAAK,EAAC,IAAI;YAAAgI,QAAA,EAAC;UAAS;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACrC3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAS;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACpC3Q,OAAA;YAAQiI,KAAK,EAAC,YAAY;YAAAgI,QAAA,EAAC;UAAK;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACzC3Q,OAAA;YAAQiI,KAAK,EAAC,KAAK;YAAAgI,QAAA,EAAC;UAAU;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,eACpDjQ,OAAA;UACI8Q,QAAQ,EAAGtI,CAAC,IAAK;YACb,IAAIA,CAAC,CAACsF,MAAM,CAAC7F,KAAK,EAAE;cAChBF,qBAAqB,CAAC,UAAU,EAAES,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAC;cACjDO,CAAC,CAACsF,MAAM,CAAC7F,KAAK,GAAG,EAAE;YACvB;UACJ,CAAE;UACF8H,SAAS,EAAC,4BAA4B;UACtC/O,KAAK,EAAC,WAAW;UAAAiP,QAAA,gBAEjBjQ,OAAA;YAAQiI,KAAK,EAAC,EAAE;YAAAgI,QAAA,EAAC;UAAI;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC9B3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAK;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAChC3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAM;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACjC3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAM;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACjC3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAK;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAChC3Q,OAAA;YAAQiI,KAAK,EAAC,GAAG;YAAAgI,QAAA,EAAC;UAAO;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9B;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,gBACpDjQ,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,MAAM,CAAE;UAC7CgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,eAAe;UAAAiP,QAAA,eAErBjQ,OAAA;YAAM+P,SAAS,EAAC,WAAW;YAAAE,QAAA,EAAC;UAAC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,QAAQ,CAAE;UAC/CgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,iBAAiB;UAAAiP,QAAA,eAEvBjQ,OAAA;YAAM+P,SAAS,EAAC,QAAQ;YAAAE,QAAA,EAAC;UAAC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,WAAW,CAAE;UAClDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,oBAAoB;UAAAiP,QAAA,eAE1BjQ,OAAA;YAAM+P,SAAS,EAAC,WAAW;YAAAE,QAAA,EAAC;UAAC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,eAAe,CAAE;UACtDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,eAAe;UAAAiP,QAAA,eAErBjQ,OAAA;YAAM+P,SAAS,EAAC,cAAc;YAAAE,QAAA,EAAC;UAAC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,gBACpDjQ,OAAA;UACI4C,IAAI,EAAC,OAAO;UACZkO,QAAQ,EAAGtI,CAAC,IAAKT,qBAAqB,CAAC,WAAW,EAAES,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;UACpE8H,SAAS,EAAC,uCAAuC;UACjD/O,KAAK,EAAC;QAAY;UAAAwP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CAAC,eACF3Q,OAAA;UACI4C,IAAI,EAAC,OAAO;UACZkO,QAAQ,EAAGtI,CAAC,IAAKT,qBAAqB,CAAC,aAAa,EAAES,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;UACtE8H,SAAS,EAAC,4CAA4C;UACtD/O,KAAK,EAAC;QAAiB;UAAAwP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,gBACpDjQ,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,qBAAqB,CAAE;UAC5DgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,EACtB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,mBAAmB,CAAE;UAC1DgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,eAAe;UAAAiP,QAAA,EACxB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,SAAS,CAAE;UAChDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,iBAAiB;UAAAiP,QAAA,EAC1B;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,QAAQ,CAAE;UAC/CgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,iBAAiB;UAAAiP,QAAA,EAC1B;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,gBACpDjQ,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,aAAa,CAAE;UACpDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,YAAY;UAAAiP,QAAA,EACrB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,eAAe,CAAE;UACtDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,cAAc;UAAAiP,QAAA,EACvB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,cAAc,CAAE;UACrDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,EACtB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,aAAa,CAAE;UACpDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,SAAS;UAAAiP,QAAA,EAClB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,gBACpDjQ,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM;YACX,MAAMlE,GAAG,GAAGwE,MAAM,CAAC,YAAY,CAAC;YAChC,IAAIxE,GAAG,EAAE3E,qBAAqB,CAAC,YAAY,EAAE2E,GAAG,CAAC;UACrD,CAAE;UACFqD,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,EACtB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,sBAAsB,CAAE;UAC7DgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,EACtB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,aAAa,CAAE;UACpDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,aAAa;UAAAiP,QAAA,EACtB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,WAAW,CAAE;UAClDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,WAAW;UAAAiP,QAAA,EACpB;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGN3Q,OAAA;QAAK+P,SAAS,EAAC,MAAM;QAAAE,QAAA,gBACjBjQ,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,MAAM,CAAE;UAC7CgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,MAAM;UAAAiP,QAAA,EACf;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,MAAM,CAAE;UAC7CgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,MAAM;UAAAiP,QAAA,EACf;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,cAAc,CAAE;UACrDgI,SAAS,EAAC,iDAAiD;UAC3D/O,KAAK,EAAC,kBAAkB;UAAAiP,QAAA,EAC3B;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAGN3Q,OAAA;MAAK+P,SAAS,EAAC,+BAA+B;MAAAE,QAAA,eAC1CjQ,OAAA;QAAK+P,SAAS,EAAC,8BAA8B;QAAAE,QAAA,gBACzCjQ,OAAA;UAAM+P,SAAS,EAAC,oBAAoB;UAAAE,QAAA,EAAC;QAAa;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACzD3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,YAAY,EAAE,4BAA4B,CAAE;UACjFgI,SAAS,EAAC,mEAAmE;UAAAE,QAAA,EAChF;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,YAAY,EAAE,iBAAiB,CAAE;UACtEgI,SAAS,EAAC,qEAAqE;UAAAE,QAAA,EAClF;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,YAAY,EAAE,oEAAoE,CAAE;UACzHgI,SAAS,EAAC,uEAAuE;UAAAE,QAAA,EACpF;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM7I,qBAAqB,CAAC,YAAY,EAAE,6LAA6L,CAAE;UAClPgI,SAAS,EAAC,uEAAuE;UAAAE,QAAA,EACpF;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT3Q,OAAA;UACI4C,IAAI,EAAC,QAAQ;UACbgO,OAAO,EAAEA,CAAA,KAAM;YACX,MAAM1K,MAAM,GAAGlD,SAAS,CAACmD,OAAO;YAChC,IAAID,MAAM,EAAE;cACRA,MAAM,CAACzC,SAAS,GAAG,EAAE;cACrBV,kBAAkB,CAACoD,OAAO,GAAG,EAAE;YACnC;UACJ,CAAE;UACF4J,SAAS,EAAC,iEAAiE;UAAAE,QAAA,EAC9E;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CACR;EAED,oBACI3Q,OAAA;IAAK+P,SAAS,EAAC,6BAA6B;IAAAE,QAAA,gBAExCjQ,OAAA;MAAAiQ,QAAA,EAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAa;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAEV3Q,OAAA;MAAK+P,SAAS,EAAC,iDAAiD;MAAAE,QAAA,gBAE5DjQ,OAAA;QAAK+P,SAAS,EAAC,yCAAyC;QAAAE,QAAA,eACpDjQ,OAAA;UAAK+P,SAAS,EAAC,mCAAmC;UAAAE,QAAA,gBAC9CjQ,OAAA;YAAAiQ,QAAA,gBACIjQ,OAAA;cAAI+P,SAAS,EAAC,oBAAoB;cAAAE,QAAA,EAAC;YAA2B;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnE3Q,OAAA;cAAG+P,SAAS,EAAC,eAAe;cAAAE,QAAA,EAAC;YAA2E;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3G,CAAC,eACN3Q,OAAA;YAAK+P,SAAS,EAAC,sBAAsB;YAAAE,QAAA,gBACjCjQ,OAAA;cACI4Q,OAAO,EAAEnC,WAAY;cACrBsB,SAAS,EAAC,iFAAiF;cAC3F/O,KAAK,EAAC,uBAAuB;cAAAiP,QAAA,gBAE7BjQ,OAAA,CAACT,SAAS;gBAACsR,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,SAE3B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT3Q,OAAA;cACI4Q,OAAO,EAAEA,CAAA;gBAAA,IAAAO,qBAAA;gBAAA,QAAAA,qBAAA,GAAMlO,cAAc,CAACkD,OAAO,cAAAgL,qBAAA,uBAAtBA,qBAAA,CAAwBjE,KAAK,CAAC,CAAC;cAAA,CAAC;cAC/C6C,SAAS,EAAC,qFAAqF;cAC/F/O,KAAK,EAAC,kCAAkC;cAAAiP,QAAA,gBAExCjQ,OAAA,CAACb,MAAM;gBAAC0R,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,UAExB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT3Q,OAAA;cACI4Q,OAAO,EAAElD,iBAAkB;cAC3BqC,SAAS,EAAC,iFAAiF;cAC3F/O,KAAK,EAAC,0CAA0C;cAAAiP,QAAA,gBAEhDjQ,OAAA,CAACL,UAAU;gBAACkR,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,mBAE5B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT3Q,OAAA;cACI4Q,OAAO,EAAExE,UAAW;cACpB2D,SAAS,EAAC,iFAAiF;cAC3F/O,KAAK,EAAC,oCAAoC;cAAAiP,QAAA,gBAE1CjQ,OAAA,CAACX,IAAI;gBAACwR,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,cAEtB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT3Q,OAAA;cACI4Q,OAAO,EAAExD,gBAAiB;cAC1B2C,SAAS,EAAC,mFAAmF;cAC7F/O,KAAK,EAAC,0CAA0C;cAAAiP,QAAA,gBAEhDjQ,OAAA,CAACZ,QAAQ;gBAACyR,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAE1B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT3Q,OAAA;cACI4Q,OAAO,EAAEhC,YAAa;cACtBmB,SAAS,EAAC,qFAAqF;cAC/F/O,KAAK,EAAC,sCAAsC;cAAAiP,QAAA,gBAE5CjQ,OAAA,CAACV,QAAQ;gBAACuR,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAE1B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEN3Q,OAAA;QAAK+P,SAAS,EAAC,KAAK;QAAAE,QAAA,GAEf9P,YAAY,iBACTH,OAAA;UAAK+P,SAAS,EAAC,yDAAyD;UAAAE,QAAA,eACpEjQ,OAAA;YAAK+P,SAAS,EAAC,wCAAwC;YAAAE,QAAA,gBACnDjQ,OAAA;cAAK+P,SAAS,EAAC;YAAmC;cAAAS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACzD3Q,OAAA;cAAM+P,SAAS,EAAC,qBAAqB;cAAAE,QAAA,EAAC;YAAmC;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/E;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CACR,eAGD3Q,OAAA;UAAK+P,SAAS,EAAC,mDAAmD;UAAAE,QAAA,gBAC9DjQ,OAAA;YACI4Q,OAAO,EAAEA,CAAA,KAAM1O,YAAY,CAAC,CAACD,SAAS,CAAE;YACxC8N,SAAS,EAAC,oGAAoG;YAAAE,QAAA,GACjH,mDAEG,eAAAjQ,OAAA;cAAM+P,SAAS,EAAE,kCAAkC9N,SAAS,GAAG,YAAY,GAAG,EAAE,EAAG;cAAAgO,QAAA,EAAC;YAAC;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxF,CAAC,EACR1O,SAAS,iBACNjC,OAAA;YAAK+P,SAAS,EAAC,sCAAsC;YAAAE,QAAA,gBACjDjQ,OAAA;cAAK+P,SAAS,EAAC,uCAAuC;cAAAE,QAAA,gBAClDjQ,OAAA;gBAAAiQ,QAAA,gBACIjQ,OAAA;kBAAI+P,SAAS,EAAC,kCAAkC;kBAAAE,QAAA,EAAC;gBAAuB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC7E3Q,OAAA;kBAAI+P,SAAS,EAAC,yBAAyB;kBAAAE,QAAA,gBACnCjQ,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAM;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,mCAA+B;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC/D3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAY;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,2CAAuC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC7E3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAO;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,+CAA2C;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC5E3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAgB;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,kCAA8B;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACxE3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAW;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,qCAAiC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACtE3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAY;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,sCAAkC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACxE3Q,OAAA;oBAAAiQ,QAAA,gBAAIjQ,OAAA;sBAAAiQ,QAAA,EAAQ;oBAAY;sBAAAO,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,qCAAiC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACN3Q,OAAA;gBAAAiQ,QAAA,gBACIjQ,OAAA;kBAAI+P,SAAS,EAAC,kCAAkC;kBAAAE,QAAA,EAAC;gBAAuB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC7E3Q,OAAA;kBAAI+P,SAAS,EAAC,yBAAyB;kBAAAE,QAAA,gBACnCjQ,OAAA;oBAAAiQ,QAAA,EAAI;kBAA8C;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACvD3Q,OAAA;oBAAAiQ,QAAA,EAAI;kBAA4C;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACrD3Q,OAAA;oBAAAiQ,QAAA,EAAI;kBAA+C;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACxD3Q,OAAA;oBAAAiQ,QAAA,EAAI;kBAAwD;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACjE3Q,OAAA;oBAAAiQ,QAAA,EAAI;kBAAkD;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eAC3D3Q,OAAA;oBAAAiQ,QAAA,EAAI;kBAAuC;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eACN3Q,OAAA;cAAK+P,SAAS,EAAC,oDAAoD;cAAAE,QAAA,gBAC/DjQ,OAAA;gBAAG+P,SAAS,EAAC,uBAAuB;gBAAAE,QAAA,gBAChCjQ,OAAA;kBAAAiQ,QAAA,EAAQ;gBAAO;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,8FAC5B;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACJ3Q,OAAA;gBAAG+P,SAAS,EAAC,4BAA4B;gBAAAE,QAAA,gBACrCjQ,OAAA;kBAAAiQ,QAAA,EAAQ;gBAAqB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,2NAC1C;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACJ3Q,OAAA;gBAAG+P,SAAS,EAAC,4BAA4B;gBAAAE,QAAA,gBACrCjQ,OAAA;kBAAAiQ,QAAA,EAAQ;gBAAS;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,8FAC9B;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eAGN3Q,OAAA;UAAK+P,SAAS,EAAC,uEAAuE;UAAAE,QAAA,gBAClFjQ,OAAA;YAAI+P,SAAS,EAAC,0CAA0C;YAAAE,QAAA,EAAC;UAAsB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACpF3Q,OAAA;YAAK+P,SAAS,EAAC,uCAAuC;YAAAE,QAAA,gBAClDjQ,OAAA;cAAAiQ,QAAA,gBACIjQ,OAAA;gBAAO+P,SAAS,EAAC,8CAA8C;gBAAAE,QAAA,EAAC;cAAkB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC1F3Q,OAAA;gBACI4C,IAAI,EAAC,MAAM;gBACXqF,KAAK,EAAEpH,UAAU,CAACE,cAAc,CAACC,KAAM;gBACvC8P,QAAQ,EAAGtI,CAAC,IAAK6B,oBAAoB,CAAC,OAAO,EAAE7B,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;gBAC/D8H,SAAS,EAAC,8BAA8B;gBACxCF,WAAW,EAAC;cAAkD;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACN3Q,OAAA;cAAAiQ,QAAA,gBACIjQ,OAAA;gBAAO+P,SAAS,EAAC,8CAA8C;gBAAAE,QAAA,EAAC;cAAyB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACjG3Q,OAAA;gBACI4C,IAAI,EAAC,QAAQ;gBACbqF,KAAK,EAAEpH,UAAU,CAACE,cAAc,CAACE,MAAO;gBACxC6P,QAAQ,EAAGtI,CAAC,IAAK6B,oBAAoB,CAAC,QAAQ,EAAE+G,QAAQ,CAAC5I,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAC,IAAI,CAAC,CAAE;gBAC/E8H,SAAS,EAAC,8BAA8B;gBACxCsB,GAAG,EAAC,GAAG;gBACPC,GAAG,EAAC;cAAK;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACZ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACN3Q,OAAA;cAAK+P,SAAS,EAAC,eAAe;cAAAE,QAAA,gBAC1BjQ,OAAA;gBAAO+P,SAAS,EAAC,8CAA8C;gBAAAE,QAAA,EAAC;cAAW;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnF3Q,OAAA,CAAC2P,cAAc;gBACXnN,OAAO,EAAE3B,UAAU,CAACE,cAAc,CAACL,WAAY;gBAC/CkP,MAAM,EAAEA,CAAC3H,KAAK,EAAEsJ,cAAc,KAAK;kBAC/B,IAAIA,cAAc,EAAE;oBAChB1J,gBAAgB,CACZhH,UAAU,CAACE,cAAc,CAACL,WAAW,EACrC,wBAAwB,EACvB8Q,UAAU,IAAKnH,oBAAoB,CAAC,aAAa,EAAEmH,UAAU,CAAC,EAC/D,IAAI,EACJ,IAAI,EACJ,YACJ,CAAC;kBACL,CAAC,MAAM;oBACHnH,oBAAoB,CAAC,aAAa,EAAEpC,KAAK,CAAC;kBAC9C;gBACJ,CAAE;gBACF4H,WAAW,EAAC,qEAAqE;gBACjFC,UAAU,EAAE;cAAK;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACN3Q,OAAA;cAAAiQ,QAAA,gBACIjQ,OAAA;gBAAO+P,SAAS,EAAC,8CAA8C;gBAAAE,QAAA,EAAC;cAAqB;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC7F3Q,OAAA;gBACI4C,IAAI,EAAC,QAAQ;gBACbqF,KAAK,EAAEpH,UAAU,CAACE,cAAc,CAACG,gBAAiB;gBAClD4P,QAAQ,EAAGtI,CAAC,IAAK6B,oBAAoB,CAAC,kBAAkB,EAAE+G,QAAQ,CAAC5I,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAC,IAAI,CAAC,CAAE;gBACzF8H,SAAS,EAAC,8BAA8B;gBACxCsB,GAAG,EAAC,GAAG;gBACPC,GAAG,EAAC;cAAK;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACZ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eACN3Q,OAAA;cAAAiQ,QAAA,gBACIjQ,OAAA;gBAAO+P,SAAS,EAAC,8CAA8C;gBAAAE,QAAA,EAAC;cAA8B;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtG3Q,OAAA;gBACI4C,IAAI,EAAC,QAAQ;gBACbqF,KAAK,EAAEgC,oBAAoB,CAAC,CAAE;gBAC9BwH,QAAQ;gBACR1B,SAAS,EAAC;cAAwD;gBAAAS,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,EAGLtO,YAAY,CAACE,IAAI,IAAIF,YAAY,CAACO,IAAI,KAAK,YAAY,iBACpD5C,OAAA;YAAK+P,SAAS,EAAC,6DAA6D;YAAAE,QAAA,gBAExEjQ,OAAA;cAAK+P,SAAS,EAAC,2FAA2F;cAAAE,QAAA,gBACtGjQ,OAAA;gBAAI+P,SAAS,EAAC,6DAA6D;gBAAAE,QAAA,gBACvEjQ,OAAA,CAACN,SAAS;kBAACmR,IAAI,EAAE,EAAG;kBAACd,SAAS,EAAC;gBAAe;kBAAAS,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,sBAC/B,EAACtO,YAAY,CAACI,KAAK;cAAA;gBAAA+N,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrC,CAAC,eACL3Q,OAAA;gBAAK+P,SAAS,EAAC,YAAY;gBAAAE,QAAA,gBACvBjQ,OAAA;kBACI4Q,OAAO,EAAEA,CAAA,KAAMxH,iBAAiB,CAAC,IAAI,CAAE;kBACvC2G,SAAS,EAAC,sGAAsG;kBAAAE,QAAA,gBAEhHjQ,OAAA,CAACX,IAAI;oBAACwR,IAAI,EAAE;kBAAG;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,gBAEtB;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAET3Q,OAAA;kBACI4Q,OAAO,EAAEA,CAAA,KAAMxH,iBAAiB,CAAC,KAAK,CAAE;kBACxC2G,SAAS,EAAC,sGAAsG;kBAAAE,QAAA,gBAEhHjQ,OAAA,CAACd,CAAC;oBAAC2R,IAAI,EAAE;kBAAG;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,UAEnB;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACR,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAEN3Q,OAAA,CAACiR,eAAe;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAGnB3Q,OAAA;cAAK+P,SAAS,EAAC,KAAK;cAAAE,QAAA,gBAChBjQ,OAAA;gBAAAiQ,QAAA,EAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;cAAqC;gBAAAO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACV3Q,OAAA;gBACI0R,GAAG,EAAE1O,SAAU;gBACf2O,eAAe,EAAE,IAAK;gBACtBC,OAAO,EAAErJ,oBAAqB;gBAC9BsJ,SAAS,EAAE9I,aAAc;gBACzB+I,OAAO,EAAErJ,WAAY;gBACrBsH,SAAS,EAAC,qIAAqI;gBAC/InG,KAAK,EAAE;kBACHmH,SAAS,EAAE,OAAO;kBAClBgB,eAAe,EAAE,MAAM;kBACvBC,QAAQ,EAAE,MAAM;kBAChBC,UAAU,EAAE,KAAK;kBACjBC,UAAU,EAAE,SAAS;kBACrB9B,UAAU,EAAE,UAAU;kBACtB+B,SAAS,EAAE;gBACf,CAAE;gBACFC,8BAA8B,EAAE;cAAK;gBAAA5B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eAGN3Q,OAAA;cAAK+P,SAAS,EAAC,oEAAoE;cAAAE,QAAA,eAC/EjQ,OAAA;gBAAK+P,SAAS,EAAC,mCAAmC;gBAAAE,QAAA,gBAC9CjQ,OAAA;kBAAK+P,SAAS,EAAC,+CAA+C;kBAAAE,QAAA,gBAC1DjQ,OAAA;oBAAM+P,SAAS,EAAC,yBAAyB;oBAAAE,QAAA,gBACrCjQ,OAAA;sBAAK+P,SAAS,EAAC;oBAAmC;sBAAAS,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,2BAE7D;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACP3Q,OAAA;oBAAAiQ,QAAA,EAAM;kBAAmC;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/C,CAAC,eACN3Q,OAAA;kBAAK+P,SAAS,EAAC,uBAAuB;kBAAAE,QAAA,gBAClCjQ,OAAA;oBAAAiQ,QAAA,EAAQ;kBAAU;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,4FAAwF,eAAA3Q,OAAA;oBAAAwQ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACzH3Q,OAAA;oBAAAiQ,QAAA,EAAQ;kBAAc;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,wFACnC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eAGN3Q,OAAA;UAAK+P,SAAS,EAAC,2DAA2D;UAAAE,QAAA,gBACtEjQ,OAAA;YAAI+P,SAAS,EAAC,kCAAkC;YAAAE,QAAA,EAAC;UAAwB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC9E3Q,OAAA;YAAK+P,SAAS,EAAC,YAAY;YAAAE,QAAA,gBACvBjQ,OAAA;cAAO+P,SAAS,EAAC,mBAAmB;cAAAE,QAAA,gBAChCjQ,OAAA;gBACI4C,IAAI,EAAC,OAAO;gBACZnC,IAAI,EAAC,aAAa;gBAClBwH,KAAK,EAAC,YAAY;gBAClBoK,OAAO,EAAExQ,cAAc,KAAK,YAAa;gBACzCiP,QAAQ,EAAGtI,CAAC,IAAK1G,iBAAiB,CAAC0G,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;gBACnD8H,SAAS,EAAC;cAAM;gBAAAS,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB,CAAC,eACF3Q,OAAA;gBAAM+P,SAAS,EAAC,SAAS;gBAAAE,QAAA,gBACrBjQ,OAAA;kBAAAiQ,QAAA,EAAQ;gBAAwB;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,8CAC7C;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,eACR3Q,OAAA;cAAO+P,SAAS,EAAC,mBAAmB;cAAAE,QAAA,gBAChCjQ,OAAA;gBACI4C,IAAI,EAAC,OAAO;gBACZnC,IAAI,EAAC,aAAa;gBAClBwH,KAAK,EAAC,QAAQ;gBACdoK,OAAO,EAAExQ,cAAc,KAAK,QAAS;gBACrCiP,QAAQ,EAAGtI,CAAC,IAAK1G,iBAAiB,CAAC0G,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;gBACnD8H,SAAS,EAAC;cAAM;gBAAAS,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB,CAAC,eACF3Q,OAAA;gBAAM+P,SAAS,EAAC,SAAS;gBAAAE,QAAA,gBACrBjQ,OAAA;kBAAAiQ,QAAA,EAAQ;gBAAO;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,6CAC5B;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGN3Q,OAAA;UAAK+P,SAAS,EAAC,wEAAwE;UAAAE,QAAA,gBACnFjQ,OAAA;YAAK+P,SAAS,EAAC,2DAA2D;YAAAE,QAAA,gBACtEjQ,OAAA;cAAI+P,SAAS,EAAC,qCAAqC;cAAAE,QAAA,EAAC;YAA0B;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnF3Q,OAAA;cAAK+P,SAAS,EAAC,YAAY;cAAAE,QAAA,gBACvBjQ,OAAA;gBACI4Q,OAAO,EAAEA,CAAA,KAAM5O,gBAAgB,CAAC,CAACD,aAAa,CAAE;gBAChDgO,SAAS,EAAC,qFAAqF;gBAC/F/O,KAAK,EAAC,qDAAqD;gBAAAiP,QAAA,gBAE3DjQ,OAAA,CAACT,SAAS;kBAACsR,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EACtB5O,aAAa,GAAG,UAAU,GAAG,UAAU;cAAA;gBAAAyO,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpC,CAAC,eACT3Q,OAAA;gBACI4Q,OAAO,EAAEpH,kBAAmB;gBAC5BuG,SAAS,EAAC,iFAAiF;gBAC3F/O,KAAK,EAAC,iDAAiD;gBAAAiP,QAAA,gBAEvDjQ,OAAA,CAACJ,SAAS;kBAACiR,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAE3B;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT3Q,OAAA;gBACI4Q,OAAO,EAAErG,YAAa;gBACtBwF,SAAS,EAAC,oFAAoF;gBAAAE,QAAA,gBAE9FjQ,OAAA,CAACf,IAAI;kBAAC4R,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,iBAEtB;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAEN3Q,OAAA;YAAK+P,SAAS,EAAC,iBAAiB;YAAAE,QAAA,eAC5BjQ,OAAA;cAAO+P,SAAS,EAAC,wBAAwB;cAAAE,QAAA,gBACrCjQ,OAAA;gBAAAiQ,QAAA,eACIjQ,OAAA;kBAAI+P,SAAS,EAAC,aAAa;kBAAAE,QAAA,gBACvBjQ,OAAA;oBAAI+P,SAAS,EAAC,qDAAqD;oBAAAE,QAAA,GAAC,aACrD,EAACpP,UAAU,CAACQ,QAAQ,CAAC0N,MAAM,EAAC,GAC3C;kBAAA;oBAAAyB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,EACJzE,gBAAgB,CAAC,CAAC,CAACnB,GAAG,CAAEvK,KAAK,iBAC1BR,OAAA;oBAEI+P,SAAS,EAAC,mDAAmD;oBAC7DnG,KAAK,EAAE;sBACHmI,eAAe,EAAEvR,KAAK,CAACG,KAAK,GAAG,IAAI;sBACnCA,KAAK,EAAEH,KAAK,CAACG,KAAK;sBAClB2R,MAAM,EAAE,aAAa9R,KAAK,CAACG,KAAK;oBACpC,CAAE;oBAAAsP,QAAA,gBAEFjQ,OAAA;sBAAK+P,SAAS,EAAC,WAAW;sBAAAE,QAAA,EAAEzP,KAAK,CAACC;oBAAI;sBAAA+P,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eAC7C3Q,OAAA;sBAAK+P,SAAS,EAAC,qCAAqC;sBAAAE,QAAA,EAC/CzP,KAAK,CAACE;oBAAW;sBAAA8P,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACjB,CAAC;kBAAA,GAXDnQ,KAAK,CAACA,KAAK;oBAAAgQ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAYhB,CACP,CAAC,eACF3Q,OAAA;oBAAI+P,SAAS,EAAC,qDAAqD;oBAAAE,QAAA,EAAC;kBAEpE;oBAAAO,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC,eACR3Q,OAAA;gBAAAiQ,QAAA,EACKpP,UAAU,CAACQ,QAAQ,CAAC0J,GAAG,CAAC,CAACX,SAAS,EAAEiB,KAAK,kBACtCrL,OAAA,CAACnB,KAAK,CAAC0T,QAAQ;kBAAAtC,QAAA,gBACXjQ,OAAA;oBAAAiQ,QAAA,gBAEIjQ,OAAA;sBAAI+P,SAAS,EAAC,wCAAwC;sBAAAE,QAAA,eAClDjQ,OAAA;wBAAK+P,SAAS,EAAC,WAAW;wBAAAE,QAAA,gBACtBjQ,OAAA;0BACI4C,IAAI,EAAC,MAAM;0BACXqF,KAAK,EAAEmC,SAAS,CAAC3J,IAAK;0BACtBqQ,QAAQ,EAAGtI,CAAC,IAAKsC,eAAe,CAACV,SAAS,CAAC9I,EAAE,EAAE,MAAM,EAAEkH,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;0BACvE8H,SAAS,EAAC,+CAA+C;0BACzDF,WAAW,EAAE,aAAaxE,KAAK,GAAG,CAAC,OAAQ;0BAC3CzB,KAAK,EAAE;4BAAEsG,QAAQ,EAAE,YAAY;4BAAEC,YAAY,EAAE;0BAAa;wBAAE;0BAAAK,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACjE,CAAC,eACF3Q,OAAA,CAAC2P,cAAc;0BACXnN,OAAO,EAAE4H,SAAS,CAAC1J,WAAY;0BAC/BkP,MAAM,EAAEA,CAAC3H,KAAK,EAAEsJ,cAAc,KAAK;4BAC/B,IAAIA,cAAc,EAAE;8BAChB1J,gBAAgB,CACZuC,SAAS,CAAC1J,WAAW,EACrB,2BAA2B0J,SAAS,CAAC3J,IAAI,IAAI,WAAW,EAAE,EACzD+Q,UAAU,IAAK1G,eAAe,CAACV,SAAS,CAAC9I,EAAE,EAAE,aAAa,EAAEkQ,UAAU,CAAC,EACxEpH,SAAS,CAAC9I,EAAE,EACZ,IAAI,EACJ,WACJ,CAAC;4BACL,CAAC,MAAM;8BACHwJ,eAAe,CAACV,SAAS,CAAC9I,EAAE,EAAE,aAAa,EAAE2G,KAAK,CAAC;4BACvD;0BACJ,CAAE;0BACF4H,WAAW,EAAC;wBAAmD;0BAAAW,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAClE,CAAC,eACF3Q,OAAA;0BAAK+P,SAAS,EAAC,YAAY;0BAAAE,QAAA,eACvBjQ,OAAA;4BAAK+P,SAAS,EAAC,QAAQ;4BAAAE,QAAA,gBACnBjQ,OAAA;8BAAO+P,SAAS,EAAC,uBAAuB;8BAAAE,QAAA,EAAC;4BAAU;8BAAAO,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAO,CAAC,eAC3D3Q,OAAA;8BACI4C,IAAI,EAAC,QAAQ;8BACbqF,KAAK,EAAEmC,SAAS,CAAC7I,SAAU;8BAC3BuP,QAAQ,EAAGtI,CAAC,IAAKsC,eAAe,CAACV,SAAS,CAAC9I,EAAE,EAAE,WAAW,EAAE8P,QAAQ,CAAC5I,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAC,IAAI,CAAC,CAAE;8BAC3F8H,SAAS,EAAC,mCAAmC;8BAC7CsB,GAAG,EAAC;4BAAG;8BAAAb,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACV,CAAC;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACD;wBAAC;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACL;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACN,CAAC,EAGJzE,gBAAgB,CAAC,CAAC,CAACnB,GAAG,CAAEvK,KAAK;sBAAA,IAAAgS,sBAAA,EAAAC,sBAAA;sBAAA,oBAC1BzS,OAAA;wBAAsB+P,SAAS,EAAC,mCAAmC;wBAAAE,QAAA,eAC/DjQ,OAAA;0BAAK+P,SAAS,EAAC,WAAW;0BAAAE,QAAA,gBACtBjQ,OAAA;4BAAK+P,SAAS,EAAC,aAAa;4BAAAE,QAAA,eACxBjQ,OAAA;8BACI+P,SAAS,EAAC,qCAAqC;8BAC/CnG,KAAK,EAAE;gCACHjJ,KAAK,EAAEH,KAAK,CAACG,KAAK;gCAClBoR,eAAe,EAAEvR,KAAK,CAACG,KAAK,GAAG;8BACnC,CAAE;8BAAAsP,QAAA,GAEDzE,mBAAmB,CAACpB,SAAS,EAAE5J,KAAK,CAACA,KAAK,CAAC,EAAC,MACjD;4BAAA;8BAAAgQ,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAK;0BAAC;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACL,CAAC,eACN3Q,OAAA,CAAC2P,cAAc;4BACXnN,OAAO,EAAE,EAAAgQ,sBAAA,GAAApI,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAACA,KAAK,CAAC,cAAAgS,sBAAA,uBAA7BA,sBAAA,CAA+B9R,WAAW,KAAI,EAAG;4BAC1DkP,MAAM,EAAEA,CAAC3H,KAAK,EAAEsJ,cAAc,KAAK;8BAC/B,IAAIA,cAAc,EAAE;gCAAA,IAAAmB,sBAAA;gCAChB7K,gBAAgB,CACZ,EAAA6K,sBAAA,GAAAtI,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAACA,KAAK,CAAC,cAAAkS,sBAAA,uBAA7BA,sBAAA,CAA+BhS,WAAW,KAAI,EAAE,EAChD,GAAGF,KAAK,CAACC,IAAI,YAAY2J,SAAS,CAAC3J,IAAI,IAAI,WAAW,EAAE,EACvD+Q,UAAU,IAAKxG,oBAAoB,CAACZ,SAAS,CAAC9I,EAAE,EAAEd,KAAK,CAACA,KAAK,EAAE,aAAa,EAAEgR,UAAU,CAAC,EAC1FpH,SAAS,CAAC9I,EAAE,EACZd,KAAK,CAACA,KAAK,EACX,OACJ,CAAC;8BACL,CAAC,MAAM;gCACHwK,oBAAoB,CAACZ,SAAS,CAAC9I,EAAE,EAAEd,KAAK,CAACA,KAAK,EAAE,aAAa,EAAEyH,KAAK,CAAC;8BACzE;4BACJ,CAAE;4BACF4H,WAAW,EAAE,YAAYrP,KAAK,CAACC,IAAI,CAACwE,WAAW,CAAC,CAAC;0BAAkB;4BAAAuL,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACtE,CAAC,EACD9O,cAAc,KAAK,QAAQ,iBACxB7B,OAAA;4BACI4C,IAAI,EAAC,MAAM;4BACXqF,KAAK,EAAE,EAAAwK,sBAAA,GAAArI,SAAS,CAAC5I,MAAM,CAAChB,KAAK,CAACA,KAAK,CAAC,cAAAiS,sBAAA,uBAA7BA,sBAAA,CAA+BxG,UAAU,KAAI,EAAG;4BACvD6E,QAAQ,EAAGtI,CAAC,IAAKwC,oBAAoB,CAACZ,SAAS,CAAC9I,EAAE,EAAEd,KAAK,CAACA,KAAK,EAAE,YAAY,EAAEgI,CAAC,CAACsF,MAAM,CAAC7F,KAAK,CAAE;4BAC/F8H,SAAS,EAAC,+CAA+C;4BACzDF,WAAW,EAAC,aAAa;4BACzBjG,KAAK,EAAE;8BAAEsG,QAAQ,EAAE,YAAY;8BAAEC,YAAY,EAAE;4BAAa;0BAAE;4BAAAK,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACjE,CACJ;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACA;sBAAC,GAzCDnQ,KAAK,CAACA,KAAK;wBAAAgQ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OA0ChB,CAAC;oBAAA,CACR,CAAC,eAGF3Q,OAAA;sBAAI+P,SAAS,EAAC,uCAAuC;sBAAAE,QAAA,eACjDjQ,OAAA;wBACI4Q,OAAO,EAAEA,CAAA,KAAMjG,eAAe,CAACP,SAAS,CAAC9I,EAAE,CAAE;wBAC7CyO,SAAS,EAAC,6DAA6D;wBACvE0B,QAAQ,EAAE5Q,UAAU,CAACQ,QAAQ,CAAC0N,MAAM,KAAK,CAAE;wBAC3C/N,KAAK,EAAEH,UAAU,CAACQ,QAAQ,CAAC0N,MAAM,KAAK,CAAC,GAAG,kCAAkC,GAAG,uBAAwB;wBAAAkB,QAAA,eAEvGjQ,OAAA,CAACd,CAAC;0BAAC2R,IAAI,EAAE;wBAAG;0BAAAL,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACX;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACT,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,EAGJtO,YAAY,CAACE,IAAI,IACdF,YAAY,CAACM,WAAW,KAAKyH,SAAS,CAAC9I,EAAE,KACxCe,YAAY,CAACO,IAAI,KAAK,WAAW,IAAIP,YAAY,CAACO,IAAI,KAAK,OAAO,CAAC,iBAChE5C,OAAA;oBAAAiQ,QAAA,eACIjQ,OAAA;sBAAI2S,OAAO,EAAEzG,gBAAgB,CAAC,CAAC,CAAC6C,MAAM,GAAG,CAAE;sBAACgB,SAAS,EAAC,cAAc;sBAAAE,QAAA,eAChEjQ,OAAA;wBAAK+P,SAAS,EAAC,4DAA4D;wBAAAE,QAAA,gBAEvEjQ,OAAA;0BAAK+P,SAAS,EAAC,2FAA2F;0BAAAE,QAAA,gBACtGjQ,OAAA;4BAAI+P,SAAS,EAAC,6DAA6D;4BAAAE,QAAA,gBACvEjQ,OAAA,CAACN,SAAS;8BAACmR,IAAI,EAAE,EAAG;8BAACd,SAAS,EAAC;4BAAe;8BAAAS,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAE,CAAC,sBAC/B,EAACtO,YAAY,CAACI,KAAK;0BAAA;4BAAA+N,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACrC,CAAC,eACL3Q,OAAA;4BAAK+P,SAAS,EAAC,YAAY;4BAAAE,QAAA,gBACvBjQ,OAAA;8BACI4Q,OAAO,EAAEA,CAAA,KAAMxH,iBAAiB,CAAC,IAAI,CAAE;8BACvC2G,SAAS,EAAC,sGAAsG;8BAAAE,QAAA,gBAEhHjQ,OAAA,CAACX,IAAI;gCAACwR,IAAI,EAAE;8BAAG;gCAAAL,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAE,CAAC,gBAEtB;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAQ,CAAC,eAET3Q,OAAA;8BACI4Q,OAAO,EAAEA,CAAA,KAAMxH,iBAAiB,CAAC,KAAK,CAAE;8BACxC2G,SAAS,EAAC,sGAAsG;8BAAAE,QAAA,gBAEhHjQ,OAAA,CAACd,CAAC;gCAAC2R,IAAI,EAAE;8BAAG;gCAAAL,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAE,CAAC,UAEnB;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAQ,CAAC;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACR,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC,eAEN3Q,OAAA,CAACiR,eAAe;0BAAAT,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,eAGnB3Q,OAAA;0BAAK+P,SAAS,EAAC,KAAK;0BAAAE,QAAA,gBAChBjQ,OAAA;4BAAAiQ,QAAA,EAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;0BAAiE;4BAAAO,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAQ,CAAC,eACN3Q,OAAA;4BACI0R,GAAG,EAAE1O,SAAU;4BACf2O,eAAe,EAAE,IAAK;4BACtBC,OAAO,EAAErJ,oBAAqB;4BAC9BsJ,SAAS,EAAE9I,aAAc;4BACzB+I,OAAO,EAAErJ,WAAY;4BACrBsH,SAAS,EAAC,qIAAqI;4BAC/InG,KAAK,EAAE;8BACHmH,SAAS,EAAE,OAAO;8BAClBgB,eAAe,EAAE,MAAM;8BACvBC,QAAQ,EAAE,MAAM;8BAChBC,UAAU,EAAE,KAAK;8BACjBC,UAAU,EAAE,SAAS;8BACrB9B,UAAU,EAAE,UAAU;8BACtB+B,SAAS,EAAE;4BACf,CAAE;4BACFC,8BAA8B,EAAE;0BAAK;4BAAA5B,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACxC,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACD,CAAC,eAGN3Q,OAAA;0BAAK+P,SAAS,EAAC,oEAAoE;0BAAAE,QAAA,eAC/EjQ,OAAA;4BAAK+P,SAAS,EAAC,mCAAmC;4BAAAE,QAAA,gBAC9CjQ,OAAA;8BAAK+P,SAAS,EAAC,+CAA+C;8BAAAE,QAAA,gBAC1DjQ,OAAA;gCAAM+P,SAAS,EAAC,yBAAyB;gCAAAE,QAAA,gBACrCjQ,OAAA;kCAAK+P,SAAS,EAAC;gCAAmC;kCAAAS,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAM,CAAC,2BAE7D;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAM,CAAC,eACP3Q,OAAA;gCAAAiQ,QAAA,EAAM;8BAA0B;gCAAAO,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAM,CAAC;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACtC,CAAC,eACN3Q,OAAA;8BAAK+P,SAAS,EAAC,uBAAuB;8BAAAE,QAAA,gBAClCjQ,OAAA;gCAAAiQ,QAAA,EAAQ;8BAAU;gCAAAO,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAQ,CAAC,4FAAwF,eAAA3Q,OAAA;gCAAAwQ,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAK,CAAC,eACzH3Q,OAAA;gCAAAiQ,QAAA,EAAQ;8BAAc;gCAAAO,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAQ,CAAC,wFACnC;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAK,CAAC;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACL;wBAAC;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACL;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACN;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CACP;gBAAA,GA5NYvG,SAAS,CAAC9I,EAAE;kBAAAkP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OA6NjB,CACnB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGN3Q,OAAA;UAAK+P,SAAS,EAAC,MAAM;UAAAE,QAAA,gBACjBjQ,OAAA;YAAI+P,SAAS,EAAC,0CAA0C;YAAAE,QAAA,EAAC;UAAqB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnF3Q,OAAA;YAAG+P,SAAS,EAAC,4BAA4B;YAAAE,QAAA,EAAC;UAA2G;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEzJ3Q,OAAA;YAAK+P,SAAS,EAAC,WAAW;YAAAE,QAAA,EACrBpP,UAAU,CAACQ,QAAQ,CAAC0J,GAAG,CAAEX,SAAS,iBAC/BpK,OAAA;cAAwB+P,SAAS,EAAC,8BAA8B;cAAAE,QAAA,gBAC5DjQ,OAAA;gBACI4Q,OAAO,EAAEA,CAAA,KAAMjJ,uBAAuB,CAACyC,SAAS,CAAC9I,EAAE,CAAE;gBACrDyO,SAAS,EAAC,uGAAuG;gBAAAE,QAAA,gBAEjHjQ,OAAA;kBAAAiQ,QAAA,gBACIjQ,OAAA;oBAAI+P,SAAS,EAAC,6BAA6B;oBAAAE,QAAA,GACtC7F,SAAS,CAAC3J,IAAI,IAAI,aAAaI,UAAU,CAACQ,QAAQ,CAACuR,OAAO,CAACxI,SAAS,CAAC,GAAG,CAAC,EAAE,EAAC,qBACjF;kBAAA;oBAAAoG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACL3Q,OAAA;oBAAG+P,SAAS,EAAC,4BAA4B;oBAAAE,QAAA,GACpC7F,SAAS,CAAC3I,eAAe,CAACC,SAAS,CAACqN,MAAM,GACvC3E,SAAS,CAAC3I,eAAe,CAACE,YAAY,CAACoN,MAAM,GAC7C3E,SAAS,CAAC3I,eAAe,CAACG,OAAO,CAACmN,MAAM,EAAC,wBACjD;kBAAA;oBAAAyB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,EACLxO,gBAAgB,CAACiI,SAAS,CAAC9I,EAAE,CAAC,gBAC3BtB,OAAA,CAACP,SAAS;kBAACoR,IAAI,EAAE,EAAG;kBAACd,SAAS,EAAC;gBAAe;kBAAAS,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAEjD3Q,OAAA,CAACR,WAAW;kBAACqR,IAAI,EAAE,EAAG;kBAACd,SAAS,EAAC;gBAAe;kBAAAS,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CACrD;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG,CAAC,EAERxO,gBAAgB,CAACiI,SAAS,CAAC9I,EAAE,CAAC,iBAC3BtB,OAAA;gBAAK+P,SAAS,EAAC,uCAAuC;gBAAAE,QAAA,eAClDjQ,OAAA;kBAAK+P,SAAS,EAAC,uCAAuC;kBAAAE,QAAA,EACjD,CAAC,WAAW,EAAE,cAAc,EAAE,SAAS,CAAC,CAAClF,GAAG,CAAEG,QAAQ,iBACnDlL,OAAA;oBAAoB+P,SAAS,EAAC,WAAW;oBAAAE,QAAA,gBACrCjQ,OAAA;sBAAK+P,SAAS,EAAC,mCAAmC;sBAAAE,QAAA,gBAC9CjQ,OAAA;wBAAO+P,SAAS,EAAC,8CAA8C;wBAAAE,QAAA,GAC1D/E,QAAQ,KAAK,WAAW,GAAG,cAAc,GACtCA,QAAQ,KAAK,cAAc,GAAG,iBAAiB,GAC3C,YAAY,EAAC,WACzB;sBAAA;wBAAAsF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,eACR3Q,OAAA;wBACI4Q,OAAO,EAAEA,CAAA,KAAM;0BACX,MAAMiC,UAAU,GAAG3B,MAAM,CAAC,OAAOhG,QAAQ,WAAW,CAAC;0BACrD,IAAI2H,UAAU,IAAIA,UAAU,CAAC7M,IAAI,CAAC,CAAC,EAAE;4BACjCiF,eAAe,CAACb,SAAS,CAAC9I,EAAE,EAAE4J,QAAQ,EAAE2H,UAAU,CAAC7M,IAAI,CAAC,CAAC,CAAC;0BAC9D;wBACJ,CAAE;wBACF+J,SAAS,EAAC,oFAAoF;wBAAAE,QAAA,EACjG;sBAED;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACR,CAAC,eACN3Q,OAAA;sBAAK+P,SAAS,EAAC,oCAAoC;sBAAAE,QAAA,GAC9C7F,SAAS,CAAC3I,eAAe,CAACyJ,QAAQ,CAAC,CAACH,GAAG,CAAC,CAACI,IAAI,EAAEE,KAAK,kBACjDrL,OAAA;wBAAiB+P,SAAS,EAAC,gCAAgC;wBAAAE,QAAA,gBACvDjQ,OAAA;0BACI+P,SAAS,EAAC,yFAAyF;0BACnGa,OAAO,EAAEA,CAAA,KAAM;4BACX/I,gBAAgB,CACZsD,IAAI,EACJ,GAAGD,QAAQ,UAAU,EACpBsG,UAAU,IAAK;8BACZ,MAAMsB,eAAe,GAAG,CAAC,GAAG1I,SAAS,CAAC3I,eAAe,CAACyJ,QAAQ,CAAC,CAAC;8BAChE4H,eAAe,CAACzH,KAAK,CAAC,GAAGmG,UAAU;8BACnC1Q,aAAa,CAAC8G,IAAI,KAAK;gCACnB,GAAGA,IAAI;gCACPvG,QAAQ,EAAEuG,IAAI,CAACvG,QAAQ,CAAC0J,GAAG,CAACF,CAAC,IACzBA,CAAC,CAACvJ,EAAE,KAAK8I,SAAS,CAAC9I,EAAE,GACf;kCACE,GAAGuJ,CAAC;kCACJpJ,eAAe,EAAE;oCACb,GAAGoJ,CAAC,CAACpJ,eAAe;oCACpB,CAACyJ,QAAQ,GAAG4H;kCAChB;gCACJ,CAAC,GACCjI,CACV;8BACJ,CAAC,CAAC,CAAC;4BACP,CAAC,EACDT,SAAS,CAAC9I,EAAE,EACZ,IAAI,EACJ,UACJ,CAAC;0BACL,CAAE;0BACFN,KAAK,EAAC,qCAAqC;0BAC3C4I,KAAK,EAAE;4BACHsG,QAAQ,EAAE,YAAY;4BACtBC,YAAY,EAAE,YAAY;4BAC1BC,UAAU,EAAE;0BAChB,CAAE;0BAAAH,QAAA,EAED7M,SAAS,CAAC+H,IAAI;wBAAC;0BAAAqF,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACd,CAAC,eACP3Q,OAAA;0BACI4Q,OAAO,EAAEA,CAAA,KAAMxF,kBAAkB,CAAChB,SAAS,CAAC9I,EAAE,EAAE4J,QAAQ,EAAEG,KAAK,CAAE;0BACjE0E,SAAS,EAAC,kEAAkE;0BAC5E/O,KAAK,EAAC,qBAAqB;0BAAAiP,QAAA,eAE3BjQ,OAAA,CAACd,CAAC;4BAAC2R,IAAI,EAAE;0BAAG;4BAAAL,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAE;wBAAC;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACX,CAAC;sBAAA,GA7CHtF,KAAK;wBAAAmF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OA8CV,CACR,CAAC,EACDvG,SAAS,CAAC3I,eAAe,CAACyJ,QAAQ,CAAC,CAAC6D,MAAM,KAAK,CAAC,iBAC7C/O,OAAA;wBAAK+P,SAAS,EAAC,4FAA4F;wBAAAE,QAAA,GAAC,KACrG,EAAC/E,QAAQ,EAAC,8CACjB;sBAAA;wBAAAsF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CACR;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACA,CAAC;kBAAA,GA1EAzF,QAAQ;oBAAAsF,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OA2Eb,CACR;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACD;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CACR;YAAA,GAzGKvG,SAAS,CAAC9I,EAAE;cAAAkP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA0GjB,CACR;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGN3Q,OAAA;UAAK+P,SAAS,EAAC,kFAAkF;UAAAE,QAAA,gBAC7FjQ,OAAA;YAAI+P,SAAS,EAAC,0CAA0C;YAAAE,QAAA,EAAC;UAA4B;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC1F3Q,OAAA;YAAG+P,SAAS,EAAC,oBAAoB;YAAAE,QAAA,EAAC;UAElC;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEJ3Q,OAAA;YAAK+P,SAAS,EAAC,sDAAsD;YAAAE,QAAA,EAChE/D,gBAAgB,CAAC,CAAC,CAACnB,GAAG,CAAEvK,KAAK,IAAK;cAC/B,MAAMW,WAAW,GAAG8I,oBAAoB,CAAC,CAAC;cAC1C,MAAM8I,cAAc,GAAGlH,IAAI,CAACC,KAAK,CAAC3K,WAAW,GAAGX,KAAK,CAACI,UAAU,CAAC;cACjE,oBACIZ,OAAA;gBAEI+P,SAAS,EAAC,oFAAoF;gBAC9FnG,KAAK,EAAE;kBACHoJ,WAAW,EAAExS,KAAK,CAACG,KAAK;kBACxBoR,eAAe,EAAEvR,KAAK,CAACG,KAAK,GAAG;gBACnC,CAAE;gBAAAsP,QAAA,gBAEFjQ,OAAA;kBAAK+P,SAAS,EAAC,uBAAuB;kBAACnG,KAAK,EAAE;oBAAEjJ,KAAK,EAAEH,KAAK,CAACG;kBAAM,CAAE;kBAAAsP,QAAA,EAChEzP,KAAK,CAACC;gBAAI;kBAAA+P,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACV,CAAC,eACN3Q,OAAA;kBAAK+P,SAAS,EAAC,wBAAwB;kBAACnG,KAAK,EAAE;oBAAEjJ,KAAK,EAAEH,KAAK,CAACG;kBAAM,CAAE;kBAAAsP,QAAA,GACjE8C,cAAc,EAAC,GACpB;gBAAA;kBAAAvC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACN3Q,OAAA;kBAAK+P,SAAS,EAAC,uBAAuB;kBAAAE,QAAA,EACjC9O,WAAW,GAAG,CAAC,GAAG,GAAG0K,IAAI,CAACC,KAAK,CAAEiH,cAAc,GAAG5R,WAAW,GAAI,GAAG,CAAC,IAAI,GAAG;gBAAI;kBAAAqP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChF,CAAC;cAAA,GAfDnQ,KAAK,CAACA,KAAK;gBAAAgQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAgBf,CAAC;YAEd,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,EAEL1G,oBAAoB,CAAC,CAAC,KAAK,CAAC,iBACzBjK,OAAA;YAAK+P,SAAS,EAAC,oEAAoE;YAAAE,QAAA,eAC/EjQ,OAAA;cAAG+P,SAAS,EAAC,yBAAyB;cAAAE,QAAA,EAAC;YAEvC;cAAAO,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGN3Q,OAAA;QACI0R,GAAG,EAAEzO,cAAe;QACpBL,IAAI,EAAC,MAAM;QACXqQ,MAAM,EAAC,OAAO;QACdnC,QAAQ,EAAEnD,YAAa;QACvBoC,SAAS,EAAC;MAAQ;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACzQ,EAAA,CA/+DID,aAAa;EAAA,QAOXH,aAAa;AAAA;AAAAoT,EAAA,GAPfjT,aAAa;AAi/DnB,eAAeA,aAAa;AAAC,IAAAiT,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}