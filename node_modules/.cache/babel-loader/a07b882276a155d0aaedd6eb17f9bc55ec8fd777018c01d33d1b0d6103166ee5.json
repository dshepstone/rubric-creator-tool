{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\MarkupEditor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ALLOWED_TAGS = ['b', 'strong', 'i', 'em', 'u', 'p', 'br', 'ul', 'ol', 'li', 'a', 'span', 'div', 'h1', 'h2', 'h3', 'code', 'pre', 'strike'];\nfunction sanitizeHtml(html) {\n  const doc = new DOMParser().parseFromString(html, 'text/html');\n  const fragment = document.createDocumentFragment();\n  function clean(node) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      return document.createTextNode(node.textContent);\n    }\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const tag = node.tagName.toLowerCase();\n      if (ALLOWED_TAGS.includes(tag)) {\n        const el = document.createElement(tag);\n        if (node.hasAttribute('href')) el.setAttribute('href', node.getAttribute('href'));\n        if (node.hasAttribute('style')) {\n          const style = node.getAttribute('style').replace(/mso-[^:]+:[^;]+;?/gi, '').replace(/\\sclass=(\"|')?Mso.*?(\"|')/gi, '');\n          if (style.trim()) el.setAttribute('style', style);\n        }\n        node.childNodes.forEach(child => {\n          const cleaned = clean(child);\n          if (cleaned) el.appendChild(cleaned);\n        });\n        return el;\n      } else {\n        const frag = document.createDocumentFragment();\n        node.childNodes.forEach(child => {\n          const cleaned = clean(child);\n          if (cleaned) frag.appendChild(cleaned);\n        });\n        return frag;\n      }\n    }\n    return null;\n  }\n  doc.body.childNodes.forEach(n => {\n    const cleaned = clean(n);\n    if (cleaned) fragment.appendChild(cleaned);\n  });\n  const wrapper = document.createElement('div');\n  wrapper.appendChild(fragment);\n  return wrapper.innerHTML;\n}\nconst MarkupEditor = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  value,\n  onChange\n}, ref) => {\n  _s();\n  const localRef = useRef(null);\n  const editorRef = ref || localRef;\n  useEffect(() => {\n    if (editorRef.current && value !== undefined) {\n      editorRef.current.innerHTML = value;\n    }\n  }, [value, editorRef]);\n  useEffect(() => {\n    if (editorRef.current) {\n      editorRef.current.focus();\n      const range = document.createRange();\n      range.selectNodeContents(editorRef.current);\n      range.collapse(false);\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }, [editorRef]);\n  const emitChange = () => {\n    if (onChange && editorRef.current) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n  const handlePaste = e => {\n    e.preventDefault();\n    const clipboard = e.clipboardData || window.clipboardData;\n    const htmlData = clipboard.getData('text/html');\n    const textData = clipboard.getData('text/plain');\n    let clean = '';\n    if (htmlData) {\n      clean = sanitizeHtml(htmlData);\n    } else {\n      clean = textData.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r\\n|\\r|\\n/g, '<br>');\n    }\n    document.execCommand('insertHTML', false, clean);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: editorRef,\n    contentEditable: true,\n    onInput: emitChange,\n    onPaste: handlePaste,\n    className: \"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n    style: {\n      minHeight: '200px',\n      backgroundColor: '#fff',\n      fontSize: '14px',\n      lineHeight: '1.6',\n      whiteSpace: 'pre-wrap',\n      wordBreak: 'break-word'\n    },\n    suppressContentEditableWarning: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n}, \"jSzC4u/3lJrm7kgLl/+ULQD0/mo=\")), \"jSzC4u/3lJrm7kgLl/+ULQD0/mo=\");\n_c2 = MarkupEditor;\nexport default MarkupEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"MarkupEditor$React.forwardRef\");\n$RefreshReg$(_c2, \"MarkupEditor\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","ALLOWED_TAGS","sanitizeHtml","html","doc","DOMParser","parseFromString","fragment","document","createDocumentFragment","clean","node","nodeType","Node","TEXT_NODE","createTextNode","textContent","ELEMENT_NODE","tag","tagName","toLowerCase","includes","el","createElement","hasAttribute","setAttribute","getAttribute","style","replace","trim","childNodes","forEach","child","cleaned","appendChild","frag","body","n","wrapper","innerHTML","MarkupEditor","_s","forwardRef","_c","value","onChange","ref","localRef","editorRef","current","undefined","focus","range","createRange","selectNodeContents","collapse","sel","window","getSelection","removeAllRanges","addRange","emitChange","handlePaste","e","preventDefault","clipboard","clipboardData","htmlData","getData","textData","execCommand","contentEditable","onInput","onPaste","className","minHeight","backgroundColor","fontSize","lineHeight","whiteSpace","wordBreak","suppressContentEditableWarning","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/MarkupEditor.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\n\nconst ALLOWED_TAGS = ['b','strong','i','em','u','p','br','ul','ol','li','a','span','div','h1','h2','h3','code','pre','strike'];\n\nfunction sanitizeHtml(html) {\n  const doc = new DOMParser().parseFromString(html, 'text/html');\n  const fragment = document.createDocumentFragment();\n\n  function clean(node) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      return document.createTextNode(node.textContent);\n    }\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const tag = node.tagName.toLowerCase();\n      if (ALLOWED_TAGS.includes(tag)) {\n        const el = document.createElement(tag);\n        if (node.hasAttribute('href')) el.setAttribute('href', node.getAttribute('href'));\n        if (node.hasAttribute('style')) {\n          const style = node\n            .getAttribute('style')\n            .replace(/mso-[^:]+:[^;]+;?/gi, '')\n            .replace(/\\sclass=(\"|')?Mso.*?(\"|')/gi, '');\n          if (style.trim()) el.setAttribute('style', style);\n        }\n        node.childNodes.forEach(child => {\n          const cleaned = clean(child);\n          if (cleaned) el.appendChild(cleaned);\n        });\n        return el;\n      } else {\n        const frag = document.createDocumentFragment();\n        node.childNodes.forEach(child => {\n          const cleaned = clean(child);\n          if (cleaned) frag.appendChild(cleaned);\n        });\n        return frag;\n      }\n    }\n    return null;\n  }\n\n  doc.body.childNodes.forEach(n => {\n    const cleaned = clean(n);\n    if (cleaned) fragment.appendChild(cleaned);\n  });\n\n  const wrapper = document.createElement('div');\n  wrapper.appendChild(fragment);\n  return wrapper.innerHTML;\n}\n\nconst MarkupEditor = React.forwardRef(({ value, onChange }, ref) => {\n  const localRef = useRef(null);\n  const editorRef = ref || localRef;\n\n  useEffect(() => {\n    if (editorRef.current && value !== undefined) {\n      editorRef.current.innerHTML = value;\n    }\n  }, [value, editorRef]);\n\n  useEffect(() => {\n    if (editorRef.current) {\n      editorRef.current.focus();\n      const range = document.createRange();\n      range.selectNodeContents(editorRef.current);\n      range.collapse(false);\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }, [editorRef]);\n\n  const emitChange = () => {\n    if (onChange && editorRef.current) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n\n  const handlePaste = (e) => {\n    e.preventDefault();\n    const clipboard = e.clipboardData || window.clipboardData;\n    const htmlData = clipboard.getData('text/html');\n    const textData = clipboard.getData('text/plain');\n    let clean = '';\n    if (htmlData) {\n      clean = sanitizeHtml(htmlData);\n    } else {\n      clean = textData\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\\r\\n|\\r|\\n/g, '<br>');\n    }\n    document.execCommand('insertHTML', false, clean);\n  };\n\n  return (\n    <div\n      ref={editorRef}\n      contentEditable\n      onInput={emitChange}\n      onPaste={handlePaste}\n      className=\"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n      style={{ minHeight: '200px', backgroundColor: '#fff', fontSize: '14px', lineHeight: '1.6', whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}\n      suppressContentEditableWarning\n    />\n  );\n});\n\nexport default MarkupEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}