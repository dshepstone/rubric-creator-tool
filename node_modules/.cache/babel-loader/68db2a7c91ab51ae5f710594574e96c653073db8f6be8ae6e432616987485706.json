{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\ClassListManager.js\",\n  _s = $RefreshSig$();\n// ClassListManager.js - Privacy-Focused Class List Management with Logo Upload\n// REFACTORED: UI updated to match screenshot and improve contrast, preserving all functionality.\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { Upload, Users, Download, Trash2, FileText, AlertCircle, CheckCircle, Clock, GraduationCap, Settings, Sparkles, FileDown, BarChart3, Award, Target, TrendingUp, Lock, RefreshCw, Save, Plus, Eye, Unlock, ExternalLink, Grid3X3, Filter, Search, SortAsc, SortDesc, FileSpreadsheet, CheckCircle2, Shield, Timer, Image, X } from 'lucide-react';\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\nimport * as XLSX from 'xlsx';\n\n/**\r\n * Letter grade calculation function with multiple grading scales\r\n * Uses original hardcoded scales for reliability\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getLetterGrade = (percentage, programType = 'degree') => {\n  // Original hardcoded scales (preserved exactly)\n  const scales = {\n    degree: [{\n      min: 90,\n      grade: 'A+'\n    }, {\n      min: 80,\n      grade: 'A'\n    }, {\n      min: 75,\n      grade: 'B+'\n    }, {\n      min: 70,\n      grade: 'B'\n    }, {\n      min: 65,\n      grade: 'C+'\n    }, {\n      min: 60,\n      grade: 'C'\n    }, {\n      min: 0,\n      grade: 'F'\n    }],\n    diploma: [{\n      min: 90,\n      grade: 'A+'\n    }, {\n      min: 80,\n      grade: 'A'\n    }, {\n      min: 75,\n      grade: 'B+'\n    }, {\n      min: 70,\n      grade: 'B'\n    }, {\n      min: 65,\n      grade: 'C+'\n    }, {\n      min: 60,\n      grade: 'C'\n    }, {\n      min: 50,\n      grade: 'P'\n    }, {\n      min: 0,\n      grade: 'F'\n    }],\n    certificate: [{\n      min: 80,\n      grade: 'P'\n    }, {\n      min: 0,\n      grade: 'F'\n    }]\n  };\n  const scale = scales[programType] || scales.degree;\n  for (const threshold of scale) {\n    if (percentage >= threshold.min) {\n      return threshold.grade;\n    }\n  }\n  return 'F';\n};\nconst ClassListManager = () => {\n  _s();\n  var _classList$students2;\n  const {\n    classList,\n    setClassList,\n    setActiveTab,\n    sharedRubric,\n    currentStudent,\n    setCurrentStudent,\n    drafts,\n    finalGrades,\n    getGradeStatus,\n    loadDraft,\n    loadFinalGrade,\n    saveFinalGrade,\n    saveDraft,\n    unlockGrade: contextUnlockGrade,\n    finalizeGrade: contextFinalizeGrade,\n    sessionActive,\n    currentLatePolicy\n  } = useAssessment();\n\n  // Local state\n  const [importStatus, setImportStatus] = useState('idle');\n  const [previewData, setPreviewData] = useState(null);\n  const [validationErrors, setValidationErrors] = useState([]);\n  const [showDetails, setShowDetails] = useState(false);\n  const [selectedStudents, setSelectedStudents] = useState(new Set());\n  const [currentPage, setCurrentPage] = useState(1);\n  const [studentsPerPage] = useState(20);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortBy, setSortBy] = useState('name');\n  const [sortOrder, setSortOrder] = useState('asc');\n  const [viewMode, setViewMode] = useState('table');\n\n  // NEW: Logo upload state\n  const [sessionLogo, setSessionLogo] = useState(null);\n  const [showLogoUpload, setShowLogoUpload] = useState(false);\n  const [logoPreview, setLogoPreview] = useState(null);\n\n  // File input refs\n  const fileInputRef = useRef(null);\n  const logoInputRef = useRef(null);\n\n  // PRESERVED: Excel file parser\n  const parseExcelFile = async file => {\n    return new Promise(resolve => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const data = new Uint8Array(e.target.result);\n          const workbook = XLSX.read(data, {\n            type: 'array'\n          });\n          const sheetName = workbook.SheetNames[0];\n          const worksheet = workbook.Sheets[sheetName];\n          const jsonData = XLSX.utils.sheet_to_json(worksheet, {\n            header: 1\n          });\n          if (jsonData.length < 2) {\n            resolve({\n              success: false,\n              error: 'File must contain at least a header row and one data row'\n            });\n            return;\n          }\n          const headers = jsonData[0].map(h => h ? h.toString().trim().toLowerCase() : '');\n          const dataRows = jsonData.slice(1).filter(row => row.some(cell => cell !== null && cell !== ''));\n          const students = [];\n          let courseMetadata = {};\n\n          // Extract course metadata from first few rows\n          for (let i = 0; i < Math.min(10, dataRows.length); i++) {\n            const row = dataRows[i];\n            if (row.length > 1) {\n              const firstCell = row[0] ? row[0].toString().toLowerCase() : '';\n              const secondCell = row[1] ? row[1].toString() : '';\n              if (firstCell.includes('course') && secondCell) {\n                courseMetadata.courseCode = secondCell;\n              } else if (firstCell.includes('instructor') || firstCell.includes('professor')) {\n                courseMetadata.instructor = secondCell;\n              } else if (firstCell.includes('section')) {\n                courseMetadata.section = secondCell;\n              } else if (firstCell.includes('term') || firstCell.includes('semester')) {\n                courseMetadata.term = secondCell;\n              } else if (firstCell.includes('program')) {\n                courseMetadata.program = secondCell;\n              }\n            }\n          }\n\n          // Find required column indices\n          const firstNameCol = headers.findIndex(h => h.includes('first') && h.includes('name'));\n          const lastNameCol = headers.findIndex(h => h.includes('last') && h.includes('name'));\n          const nameCol = headers.findIndex(h => h === 'name' || h === 'student name');\n          const idCol = headers.findIndex(h => h.includes('id') || h.includes('number'));\n          const emailCol = headers.findIndex(h => h.includes('email') || h.includes('mail'));\n          const programCol = headers.findIndex(h => h.includes('program'));\n          if ((firstNameCol === -1 || lastNameCol === -1) && nameCol === -1) {\n            resolve({\n              success: false,\n              error: 'Must have either \"First Name\" and \"Last Name\" columns or a \"Name\" column'\n            });\n            return;\n          }\n          if (idCol === -1) {\n            resolve({\n              success: false,\n              error: 'Must have a column containing \"ID\" or \"Number\"'\n            });\n            return;\n          }\n\n          // Process student data\n          dataRows.forEach((row, index) => {\n            let name = '';\n            if (nameCol !== -1 && row[nameCol]) {\n              name = row[nameCol].toString().trim();\n            } else if (firstNameCol !== -1 && lastNameCol !== -1) {\n              const firstName = row[firstNameCol] ? row[firstNameCol].toString().trim() : '';\n              const lastName = row[lastNameCol] ? row[lastNameCol].toString().trim() : '';\n              name = `${firstName} ${lastName}`.trim();\n            }\n            const studentId = row[idCol] ? row[idCol].toString().trim() : '';\n            const email = emailCol !== -1 && row[emailCol] ? row[emailCol].toString().trim() : '';\n            const program = programCol !== -1 && row[programCol] ? row[programCol].toString().trim() : '';\n            if (name && studentId) {\n              students.push({\n                id: studentId,\n                name: name,\n                email: email || '',\n                program: program || '',\n                rowNumber: index + 2\n              });\n            }\n          });\n          resolve({\n            success: true,\n            students: students,\n            courseMetadata: courseMetadata,\n            totalRows: dataRows.length,\n            headers: headers\n          });\n        } catch (error) {\n          resolve({\n            success: false,\n            error: `Error parsing Excel file: ${error.message}`\n          });\n        }\n      };\n      reader.onerror = () => {\n        resolve({\n          success: false,\n          error: 'Error reading file'\n        });\n      };\n      reader.readAsArrayBuffer(file);\n    });\n  };\n\n  // PRESERVED: Validate student data\n  const validateStudentData = students => {\n    const errors = [];\n    const duplicateIds = [];\n    const duplicateNames = [];\n    const seenIds = new Set();\n    const seenNames = new Set();\n    students.forEach((student, index) => {\n      if (!student.name || student.name.trim() === '') {\n        errors.push(`Row ${index + 1}: Missing student name`);\n      }\n      if (!student.id || student.id.trim() === '') {\n        errors.push(`Row ${index + 1}: Missing student ID`);\n      }\n      if (seenIds.has(student.id)) {\n        duplicateIds.push(student.id);\n      } else {\n        seenIds.add(student.id);\n      }\n      if (seenNames.has(student.name.toLowerCase())) {\n        duplicateNames.push(student.name);\n      } else {\n        seenNames.add(student.name.toLowerCase());\n      }\n    });\n    if (duplicateIds.length > 0) {\n      errors.push(`Duplicate student IDs found: ${duplicateIds.join(', ')}`);\n    }\n    if (duplicateNames.length > 0) {\n      errors.push(`Duplicate student names found: ${duplicateNames.join(', ')}`);\n    }\n    return {\n      valid: errors.length === 0,\n      errors: errors,\n      duplicateIds: duplicateIds,\n      duplicateNames: duplicateNames\n    };\n  };\n\n  // NEW: Logo upload functions\n  const handleLogoUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const validTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/svg+xml'];\n    if (!validTypes.includes(file.type)) {\n      alert('Please upload a valid image file (PNG, JPG, or SVG)');\n      return;\n    }\n\n    // Validate file size (limit to 2MB)\n    const maxSize = 2 * 1024 * 1024; // 2MB\n    if (file.size > maxSize) {\n      alert('Logo file must be smaller than 2MB');\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = e => {\n      const logoData = e.target.result;\n      setSessionLogo(logoData);\n      setLogoPreview(logoData);\n      setShowLogoUpload(false);\n      console.log('‚úÖ Logo uploaded and stored in session');\n    };\n    reader.readAsDataURL(file);\n  };\n  const removeLogo = () => {\n    setSessionLogo(null);\n    setLogoPreview(null);\n    if (logoInputRef.current) {\n      logoInputRef.current.value = '';\n    }\n    console.log('üóëÔ∏è Logo removed from session');\n  };\n\n  // PRESERVED: Enhanced calculateStudentGrade with policy support\n  const calculateStudentGrade = studentId => {\n    var _gradeData$studentInf, _gradeData$studentInf2, _classList$students, _student$program;\n    const gradeStatus = getGradeStatus(studentId);\n    let gradeData = null;\n    if (gradeStatus === 'final') {\n      gradeData = loadFinalGrade(studentId);\n    } else if (gradeStatus === 'draft') {\n      gradeData = loadDraft(studentId);\n    }\n    if (!gradeData || !sharedRubric) {\n      return {\n        score: 'N/A',\n        letter: 'N/A',\n        percentage: 'N/A',\n        status: gradeStatus || 'pending',\n        lastModified: null\n      };\n    }\n\n    // Calculate raw score\n    let totalScore = 0;\n    let totalPossible = 0;\n    if (gradeData.rubricGrading && sharedRubric.criteria) {\n      sharedRubric.criteria.forEach(criterion => {\n        var _sharedRubric$levels;\n        const grading = gradeData.rubricGrading[criterion.id];\n        if (grading && grading.selectedLevel !== undefined) {\n          var _sharedRubric$levels$;\n          const levelIndex = grading.selectedLevel;\n          const points = ((_sharedRubric$levels$ = sharedRubric.levels[levelIndex]) === null || _sharedRubric$levels$ === void 0 ? void 0 : _sharedRubric$levels$.points) || 0;\n          totalScore += points * criterion.multiplier;\n        }\n        totalPossible += (((_sharedRubric$levels = sharedRubric.levels[sharedRubric.levels.length - 1]) === null || _sharedRubric$levels === void 0 ? void 0 : _sharedRubric$levels.points) || 0) * criterion.multiplier;\n      });\n    }\n\n    // Apply late policy\n    let finalScore = totalScore;\n    const activeLevels = (currentLatePolicy === null || currentLatePolicy === void 0 ? void 0 : currentLatePolicy.levels) || DEFAULT_LATE_POLICY.levels;\n    if ((_gradeData$studentInf = gradeData.studentInfo) !== null && _gradeData$studentInf !== void 0 && _gradeData$studentInf.lateSubmission && (_gradeData$studentInf2 = gradeData.studentInfo) !== null && _gradeData$studentInf2 !== void 0 && _gradeData$studentInf2.lateSubmissionLevel) {\n      const lateLevel = activeLevels[gradeData.studentInfo.lateSubmissionLevel];\n      if (lateLevel && lateLevel.action === 'percentage') {\n        finalScore = totalScore * (lateLevel.value / 100);\n      } else if (lateLevel && lateLevel.action === 'deduction') {\n        finalScore = Math.max(0, totalScore - lateLevel.value);\n      }\n    }\n    const percentage = totalPossible > 0 ? finalScore / totalPossible * 100 : 0;\n\n    // Get student program for grading policy\n    const student = classList === null || classList === void 0 ? void 0 : (_classList$students = classList.students) === null || _classList$students === void 0 ? void 0 : _classList$students.find(s => s.id === studentId);\n    const programType = (student === null || student === void 0 ? void 0 : (_student$program = student.program) === null || _student$program === void 0 ? void 0 : _student$program.toLowerCase()) || 'degree';\n    try {\n      const letterGrade = getLetterGrade(percentage, programType);\n      return {\n        score: finalScore.toFixed(1),\n        letter: letterGrade,\n        percentage: percentage.toFixed(1),\n        status: gradeStatus,\n        lastModified: gradeData.lastModified || null,\n        rawScore: totalScore.toFixed(1),\n        penaltyApplied: finalScore !== totalScore\n      };\n    } catch (error) {\n      console.error('Error calculating grade:', error);\n      return {\n        score: finalScore.toFixed(1),\n        letter: 'Error',\n        percentage: percentage.toFixed(1),\n        status: gradeStatus,\n        lastModified: gradeData.lastModified || null,\n        rawScore: totalScore.toFixed(1),\n        penaltyApplied: finalScore !== totalScore\n      };\n    }\n  };\n\n  // MODIFIED: Enhanced getClassGradesHTML with logo support\n  const getClassGradesHTML = () => {\n    var _classList$courseMeta, _classList$courseMeta2, _classList$courseMeta3, _classList$courseMeta4, _sharedRubric$assignm;\n    const now = new Date();\n    const currentDate = now.toLocaleDateString('en-CA');\n    const currentTime = now.toLocaleTimeString('en-CA');\n\n    // Calculate grades for all students\n    const studentGrades = classList.students.map((student, index) => {\n      var _classList$gradingPro;\n      const gradeInfo = calculateStudentGrade(student.id);\n      const gradingProgress = ((_classList$gradingPro = classList.gradingProgress) === null || _classList$gradingPro === void 0 ? void 0 : _classList$gradingPro[index]) || {};\n      return {\n        student,\n        gradeInfo,\n        gradingProgress,\n        index: index + 1\n      };\n    });\n    const rowsHtml = studentGrades.map(({\n      student,\n      gradeInfo,\n      gradingProgress,\n      index\n    }) => {\n      const lastModified = gradeInfo.lastModified ? new Date(gradeInfo.lastModified).toLocaleDateString('en-CA') : 'Never';\n      return `\n                <tr style=\"border-bottom: 1px solid #e5e7eb;\">\n                    <td style=\"padding: 8px; text-align: center; font-weight: 500;\">${index}</td>\n                    <td style=\"padding: 8px;\">${student.id}</td>\n                    <td style=\"padding: 8px; font-weight: 500;\">${student.name}</td>\n                    <td style=\"padding: 8px; color: #6b7280;\">${student.email || ''}</td>\n                    <td style=\"padding: 8px; color: #6b7280;\">${student.program || ''}</td>\n                    <td style=\"padding: 8px;\">\n                        <span style=\"display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500; \n                            ${gradeInfo.status === 'final' ? 'background: #dcfce7; color: #166534;' : gradeInfo.status === 'draft' ? 'background: #fef3c7; color: #92400e;' : 'background: #f3f4f6; color: #6b7280;'}\">\n                            ${gradeInfo.status === 'final' ? 'Final' : gradeInfo.status === 'draft' ? 'Draft' : 'Pending'}\n                        </span>\n                    </td>\n                    <td style=\"padding: 8px;\">${gradingProgress.gradeType || 'N/A'}</td>\n                    <td style=\"padding: 8px; font-weight: 600; font-size: 16px;\">${gradeInfo.score}</td>\n                    <td style=\"padding: 8px; font-weight: 600; color: #1f2937;\">${gradeInfo.letter}</td>\n                    <td style=\"padding: 8px;\">${gradeInfo.percentage}%</td>\n                    <td style=\"padding: 8px; color: #6b7280; font-size: 12px;\">${lastModified}</td>\n                </tr>\n            `;\n    }).join('');\n\n    // NEW: Logo section for exports\n    const logoSection = sessionLogo ? `<div style=\"text-align: center; margin-bottom: 20px;\">\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 80px; max-width: 300px; object-fit: contain;\" />\n            </div>` : '';\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Class Grade Report - ${((_classList$courseMeta = classList.courseMetadata) === null || _classList$courseMeta === void 0 ? void 0 : _classList$courseMeta.courseCode) || 'Course'}</title>\n    <style>\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; background: white; color: #1f2937; line-height: 1.5; }\n        .header { text-align: center; margin-bottom: 30px; padding: 20px; background: #f9fafb; border-radius: 8px; }\n        .header h1 { margin: 0 0 10px 0; color: #1f2937; font-size: 28px; font-weight: 700; }\n        .meta { color: #6b7280; font-size: 14px; line-height: 1.6; }\n        .table-container { overflow-x: auto; margin: 20px 0; }\n        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\n        th { background: #f3f4f6; padding: 12px 8px; text-align: left; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 2px solid #e5e7eb; }\n        td { padding: 8px; border-bottom: 1px solid #f3f4f6; }\n        tr:hover { background: #f9fafb; }\n        .footer { text-align: center; color: #6b7280; margin-top: 20px; font-size: 12px; }\n        @media print { \n            body { background: white; } \n            .table-container { overflow-x: visible; } \n            @page { margin: 0.5in; }\n        }\n    </style>\n</head>\n<body>\n    ${logoSection}\n    <div class=\"header\">\n        <h1>üìä Class Grade Report</h1>\n        <div class=\"meta\">\n            ${((_classList$courseMeta2 = classList.courseMetadata) === null || _classList$courseMeta2 === void 0 ? void 0 : _classList$courseMeta2.courseCode) || ''} ‚Äì ${((_classList$courseMeta3 = classList.courseMetadata) === null || _classList$courseMeta3 === void 0 ? void 0 : _classList$courseMeta3.courseName) || ''} |\n            Section: ${((_classList$courseMeta4 = classList.courseMetadata) === null || _classList$courseMeta4 === void 0 ? void 0 : _classList$courseMeta4.section) || ''}<br>\n            Rubric: ${(sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.title) || 'Unnamed Rubric'}<br>\n            Generated: ${currentDate} | ${currentTime}\n        </div>\n    </div>\n\n    <div class=\"table-container\">\n        <table>\n            <thead>\n                <tr>\n                    <th>#</th><th>Student ID</th><th>Name</th><th>Email</th>\n                    <th>Program</th><th>Status</th><th>Grade Type</th>\n                    <th>Final Grade</th><th>Letter Grade</th><th>Percentage</th><th>Last Modified</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${rowsHtml}\n            </tbody>\n        </table>\n    </div>\n\n    <div class=\"footer\">\n        Imported from: ${classList.fileName}\n    </div>\n</body>\n</html>`;\n  };\n\n  // PRESERVED: Export class grades as HTML\n  const exportClassGradesHTML = () => {\n    var _classList$courseMeta5;\n    if (!classList) return;\n    console.log('üîÑ Exporting HTML with grade calculations...');\n    const htmlContent = getClassGradesHTML();\n    const blob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${((_classList$courseMeta5 = classList.courseMetadata) === null || _classList$courseMeta5 === void 0 ? void 0 : _classList$courseMeta5.courseCode) || 'Class'}_grades.html`;\n    link.style.display = 'none';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n    console.log('‚úÖ HTML export completed with letter grades');\n  };\n\n  // MODIFIED: Portrait PDF report with logo support\n  const getPortraitClassReportHTML = () => {\n    var _sharedRubric$assignm2, _classList$courseMeta6, _classList$courseMeta7, _classList$courseMeta8, _classList$courseMeta9, _classList$courseMeta0, _classList$courseMeta1, _classList$courseMeta10;\n    const now = new Date();\n    const currentDate = now.toLocaleDateString('en-CA');\n    const currentTime = now.toLocaleTimeString('en-CA');\n    const rubricName = (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm2 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm2 === void 0 ? void 0 : _sharedRubric$assignm2.title) || 'Unnamed Rubric';\n    console.log('üîÑ Generating portrait report with grade calculations...');\n\n    // Calculate grades for all students\n    const studentRows = classList.students.map((student, idx) => {\n      const info = calculateStudentGrade(student.id);\n      const num = info.score !== 'N/A' ? parseFloat(info.score) : 0;\n      return `\n                <tr>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center;\">${idx + 1}</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd;\">${student.id}</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; font-weight: 500;\">${student.name}</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: 600; font-size: 14px;\">${info.score}</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: 600;\">${info.letter}</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center;\">${info.percentage}%</td>\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 11px; color: #666;\">\n                        ${info.status === 'final' ? '‚úÖ Final' : info.status === 'draft' ? 'üìù Draft' : '‚è≥ Pending'}\n                    </td>\n                </tr>\n            `;\n    }).join('');\n\n    // NEW: Logo section for PDF\n    const logoSection = sessionLogo ? `<div style=\"text-align: center; margin-bottom: 25px;\">\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 60px; max-width: 250px; object-fit: contain;\" />\n            </div>` : '';\n    return `<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Class Report - ${((_classList$courseMeta6 = classList.courseMetadata) === null || _classList$courseMeta6 === void 0 ? void 0 : _classList$courseMeta6.courseCode) || 'Course'}</title>\n    <style>\n        @page { size: A4 portrait; margin: 0.75in; }\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; font-size: 12px; color: #333; }\n        .header { text-align: center; margin-bottom: 25px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; }\n        .header h1 { margin: 0 0 8px 0; font-size: 22px; font-weight: 700; }\n        .header .subtitle { font-size: 14px; opacity: 0.9; }\n        .metadata { background: #f8f9fa; padding: 12px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid #667eea; }\n        .metadata div { margin: 3px 0; }\n        .metadata strong { color: #495057; }\n        table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 11px; }\n        th { background: #495057; color: white; padding: 8px 6px; text-align: center; font-weight: 600; font-size: 10px; text-transform: uppercase; }\n        td { padding: 6px; border: 1px solid #ddd; }\n        tr:nth-child(even) { background: #f8f9fa; }\n        .footer { text-align: center; margin-top: 20px; font-size: 10px; color: #6c757d; border-top: 1px solid #dee2e6; padding-top: 10px; }\n        @media print { \n            body { print-color-adjust: exact; -webkit-print-color-adjust: exact; } \n            .header { break-inside: avoid; }\n            table { break-inside: auto; }\n            tr { break-inside: avoid; break-after: auto; }\n        }\n    </style>\n</head>\n<body>\n    ${logoSection}\n    <div class=\"header\">\n        <h1>üìä ${rubricName} - Class Results</h1>\n        <div class=\"subtitle\">${((_classList$courseMeta7 = classList.courseMetadata) === null || _classList$courseMeta7 === void 0 ? void 0 : _classList$courseMeta7.courseCode) || ''} ${((_classList$courseMeta8 = classList.courseMetadata) === null || _classList$courseMeta8 === void 0 ? void 0 : _classList$courseMeta8.courseName) || ''}</div>\n    </div>\n\n    <div class=\"metadata\">\n        <div><strong>Course:</strong> ${((_classList$courseMeta9 = classList.courseMetadata) === null || _classList$courseMeta9 === void 0 ? void 0 : _classList$courseMeta9.courseCode) || 'N/A'} - ${((_classList$courseMeta0 = classList.courseMetadata) === null || _classList$courseMeta0 === void 0 ? void 0 : _classList$courseMeta0.courseName) || 'N/A'}</div>\n        <div><strong>Section:</strong> ${((_classList$courseMeta1 = classList.courseMetadata) === null || _classList$courseMeta1 === void 0 ? void 0 : _classList$courseMeta1.section) || 'N/A'}</div>\n        <div><strong>Instructor:</strong> ${((_classList$courseMeta10 = classList.courseMetadata) === null || _classList$courseMeta10 === void 0 ? void 0 : _classList$courseMeta10.instructor) || 'N/A'}</div>\n        <div><strong>Assessment:</strong> ${rubricName}</div>\n        <div><strong>Generated:</strong> ${currentDate} at ${currentTime}</div>\n        <div><strong>Total Students:</strong> ${classList.students.length}</div>\n    </div>\n\n    <table>\n        <thead>\n            <tr>\n                <th style=\"width: 8%;\">#</th>\n                <th style=\"width: 15%;\">Student ID</th>\n                <th style=\"width: 25%;\">Name</th>\n                <th style=\"width: 12%;\">Score</th>\n                <th style=\"width: 10%;\">Grade</th>\n                <th style=\"width: 12%;\">Percentage</th>\n                <th style=\"width: 18%;\">Status</th>\n            </tr>\n        </thead>\n        <tbody>\n            ${studentRows}\n        </tbody>\n    </table>\n\n    <div class=\"footer\">\n        <div>Generated by GradingPilot ‚Ä¢ ${new Date().toLocaleDateString()} ‚Ä¢ Session-Only Data</div>\n        <div style=\"margin-top: 5px;\">Imported from: ${classList.fileName}</div>\n    </div>\n</body>\n</html>`;\n  };\n\n  // PRESERVED: Export portrait PDF\n  const exportClassGradesPortraitPDF = () => {\n    if (!classList) return;\n    console.log('üîÑ Generating PDF with grade calculations...');\n    const htmlContent = getPortraitClassReportHTML();\n    const printWin = window.open('', '_blank', 'width=800,height=600');\n    printWin.document.write(htmlContent);\n    printWin.document.close();\n    printWin.focus();\n    printWin.onload = () => {\n      printWin.print();\n    };\n    console.log('‚úÖ PDF generation completed with letter grades');\n  };\n\n  // PRESERVED: Complete exportStudentGrade function (preserved exactly from original)\n  const exportStudentGrade = studentId => {\n    var _gradeData$studentInf3, _gradeData$studentInf4, _gradeData$attachment, _gradeData$videoLinks;\n    // 1. Make sure we have a classList and sharedRubric\n    if (!classList || !sharedRubric) {\n      alert('No class list or rubric available. Please ensure both are loaded.');\n      return;\n    }\n\n    // 2. Find the student in the class list\n    const student = classList.students.find(s => s.id === studentId);\n    if (!student) {\n      alert('Student not found in class list.');\n      return;\n    }\n\n    // 3. Load the student's grade data\n    const gradeStatus = getGradeStatus(studentId);\n    let gradeData = null;\n    if (gradeStatus === 'final') {\n      gradeData = loadFinalGrade(studentId);\n    } else if (gradeStatus === 'draft') {\n      gradeData = loadDraft(studentId);\n    } else {\n      alert('No grade data found for this student. Please grade the student first.');\n      return;\n    }\n    if (!gradeData) {\n      alert('Unable to load grade data for this student.');\n      return;\n    }\n\n    // 4. Access active late policy levels\n    const activeLevels = (currentLatePolicy === null || currentLatePolicy === void 0 ? void 0 : currentLatePolicy.levels) || DEFAULT_LATE_POLICY.levels;\n    const getSafeLatePolicy = level => {\n      if (!level || typeof level !== \"string\" || !activeLevels[level]) {\n        return activeLevels.none;\n      }\n      return activeLevels[level];\n    };\n\n    // 5. Calculate score using the same logic as calculateTotalScore from GradingTemplate\n    let totalRawScore = 0;\n    let totalMaxScore = 0;\n    let totalFinalScore = 0;\n    if (gradeData.rubricGrading && sharedRubric.criteria) {\n      sharedRubric.criteria.forEach(criterion => {\n        var _sharedRubric$levels2;\n        const grading = gradeData.rubricGrading[criterion.id];\n        if (grading && grading.selectedLevel !== undefined) {\n          var _sharedRubric$levels$2;\n          const levelIndex = grading.selectedLevel;\n          const points = ((_sharedRubric$levels$2 = sharedRubric.levels[levelIndex]) === null || _sharedRubric$levels$2 === void 0 ? void 0 : _sharedRubric$levels$2.points) || 0;\n          const criterionScore = points * criterion.multiplier;\n          totalRawScore += criterionScore;\n        }\n        const maxPoints = ((_sharedRubric$levels2 = sharedRubric.levels[sharedRubric.levels.length - 1]) === null || _sharedRubric$levels2 === void 0 ? void 0 : _sharedRubric$levels2.points) || 0;\n        totalMaxScore += maxPoints * criterion.multiplier;\n      });\n    }\n\n    // Apply late policy if applicable\n    totalFinalScore = totalRawScore;\n    let penaltyApplied = false;\n    if ((_gradeData$studentInf3 = gradeData.studentInfo) !== null && _gradeData$studentInf3 !== void 0 && _gradeData$studentInf3.lateSubmission && (_gradeData$studentInf4 = gradeData.studentInfo) !== null && _gradeData$studentInf4 !== void 0 && _gradeData$studentInf4.lateSubmissionLevel) {\n      const latePolicy = getSafeLatePolicy(gradeData.studentInfo.lateSubmissionLevel);\n      if (latePolicy.action === 'percentage') {\n        totalFinalScore = totalRawScore * (latePolicy.value / 100);\n        penaltyApplied = true;\n      } else if (latePolicy.action === 'deduction') {\n        totalFinalScore = Math.max(0, totalRawScore - latePolicy.value);\n        penaltyApplied = true;\n      }\n    }\n    const percentage = totalMaxScore > 0 ? totalFinalScore / totalMaxScore * 100 : 0;\n\n    // Generate attachments HTML\n    const attachmentsHTML = ((_gradeData$attachment = gradeData.attachments) === null || _gradeData$attachment === void 0 ? void 0 : _gradeData$attachment.map((att, index) => {\n      if (att.base64Data) {\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\n      } else {\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">üìÑ</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\n      }\n    }).join('')) || '';\n\n    // Generate video links HTML\n    const videoLinksHTML = ((_gradeData$videoLinks = gradeData.videoLinks) === null || _gradeData$videoLinks === void 0 ? void 0 : _gradeData$videoLinks.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">üé•</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('')) || '';\n\n    // Generate rubric table HTML\n    const rubricTableHTML = sharedRubric ? `\n            <table style=\"width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.875rem;\">\n                <thead>\n                    <tr style=\"background: #f8f9fa;\">\n                        <th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: left; font-weight: 600;\">Criterion</th>\n                        ${sharedRubric.levels.map(level => `<th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">${level.name}<br><span style=\"font-size: 0.75rem; font-weight: normal;\">(${level.points} pts)</span></th>`).join('')}\n                        <th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">Score</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${sharedRubric.criteria.map(criterion => {\n      var _gradeData$rubricGrad, _sharedRubric$levels$3;\n      const grading = (_gradeData$rubricGrad = gradeData.rubricGrading) === null || _gradeData$rubricGrad === void 0 ? void 0 : _gradeData$rubricGrad[criterion.id];\n      const selectedLevel = grading === null || grading === void 0 ? void 0 : grading.selectedLevel;\n      const score = selectedLevel !== undefined ? (((_sharedRubric$levels$3 = sharedRubric.levels[selectedLevel]) === null || _sharedRubric$levels$3 === void 0 ? void 0 : _sharedRubric$levels$3.points) || 0) * criterion.multiplier : 0;\n      return `\n                            <tr>\n                                <td style=\"border: 1px solid #dee2e6; padding: 0.75rem; font-weight: 500; vertical-align: top;\">\n                                    ${criterion.name}\n                                    <br><span style=\"font-size: 0.75rem; color: #6c757d;\">Weight: ${criterion.multiplier}x</span>\n                                </td>\n                                ${sharedRubric.levels.map((level, levelIndex) => `<td style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; vertical-align: top; ${selectedLevel === levelIndex ? 'background: #e7f3ff; font-weight: 600;' : ''}\">\n                                        ${selectedLevel === levelIndex ? '‚úì' : ''}\n                                    </td>`).join('')}\n                                <td style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">\n                                    ${score.toFixed(1)}\n                                </td>\n                            </tr>\n                        `;\n    }).join('')}\n                </tbody>\n            </table>\n        ` : '';\n\n    // NEW: Include logo in individual reports\n    const logoSection = sessionLogo ? `<div style=\"text-align: center; margin-bottom: 20px;\">\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 60px; max-width: 250px; object-fit: contain;\" />\n            </div>` : '';\n\n    // Generate HTML report (based on GradingTemplate.js generateStudentReportHTML)\n    const generateStudentReportHTML = () => {\n      var _sharedRubric$assignm3, _gradeData$course, _gradeData$course2, _sharedRubric$assignm4, _student$program2, _gradeData$feedback, _gradeData$feedback2, _gradeData$feedback3;\n      return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Grade Report - ${student.name}</title>\n    <style>\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #f8f9fa; color: #333; line-height: 1.6; }\n        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; text-align: center; }\n        .header h1 { margin: 0 0 0.5rem 0; font-size: 2rem; font-weight: 700; }\n        .header .subtitle { opacity: 0.9; font-size: 1.1rem; }\n        .content { padding: 2rem; }\n        .score-section { background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; text-align: center; }\n        .score-big { font-size: 3rem; font-weight: 700; color: #0066cc; margin: 0; }\n        .score-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }\n        .score-item { background: white; padding: 1rem; border-radius: 6px; text-align: center; }\n        .score-item .label { font-size: 0.875rem; color: #666; margin-bottom: 0.25rem; }\n        .score-item .value { font-size: 1.25rem; font-weight: 600; color: #333; }\n        .section { margin: 2rem 0; }\n        .section h2 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: #333; border-bottom: 2px solid #eee; padding-bottom: 0.5rem; }\n        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }\n        .info-item { background: #f8f9fa; padding: 1rem; border-radius: 6px; }\n        .info-item .label { font-size: 0.875rem; color: #666; margin-bottom: 0.25rem; }\n        .info-item .value { font-weight: 500; }\n        .feedback-section { background: #f8f9fa; border-radius: 8px; padding: 1.5rem; margin: 1rem 0; }\n        .feedback-section h3 { margin: 0 0 1rem 0; color: #495057; }\n        .feedback-content { background: white; padding: 1rem; border-radius: 4px; border-left: 4px solid #007bff; }\n        .attachments-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }\n        .attachment-item { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; text-align: center; }\n        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }\n        th, td { border: 1px solid #dee2e6; padding: 0.75rem; text-align: left; }\n        th { background: #f8f9fa; font-weight: 600; }\n        .footer { text-align: center; padding: 1rem; border-top: 1px solid #eee; color: #666; font-size: 0.875rem; }\n        @media print { \n            body { background: white; } \n            .container { box-shadow: none; } \n            @page { margin: 0.5in; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        ${logoSection}\n        <div class=\"header\">\n            <h1>üìä Grade Report</h1>\n            <div class=\"subtitle\">${((_sharedRubric$assignm3 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm3 === void 0 ? void 0 : _sharedRubric$assignm3.title) || 'Assessment'}</div>\n        </div>\n\n        <div class=\"content\">\n            <div class=\"section\">\n                <div class=\"info-grid\">\n                    <div class=\"info-item\">\n                        <div class=\"label\">Student Name</div>\n                        <div class=\"value\">${student.name}</div>\n                    </div>\n                    <div class=\"info-item\">\n                        <div class=\"label\">Student ID</div>\n                        <div class=\"value\">${student.id}</div>\n                    </div>\n                    <div class=\"info-item\">\n                        <div class=\"label\">Course</div>\n                        <div class=\"value\">${((_gradeData$course = gradeData.course) === null || _gradeData$course === void 0 ? void 0 : _gradeData$course.code) || 'N/A'} - ${((_gradeData$course2 = gradeData.course) === null || _gradeData$course2 === void 0 ? void 0 : _gradeData$course2.name) || 'N/A'}</div>\n                    </div>\n                    <div class=\"info-item\">\n                        <div class=\"label\">Assignment</div>\n                        <div class=\"value\">${((_sharedRubric$assignm4 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm4 === void 0 ? void 0 : _sharedRubric$assignm4.title) || 'N/A'}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"score-section\">\n                <div class=\"score-big\">${totalFinalScore.toFixed(1)}/${totalMaxScore}</div>\n                <div class=\"score-details\">\n                    <div class=\"score-item\">\n                        <div class=\"label\">Raw Score</div>\n                        <div class=\"value\">${totalRawScore.toFixed(1)}</div>\n                    </div>\n                    <div class=\"score-item\">\n                        <div class=\"label\">Final Score</div>\n                        <div class=\"value\">${totalFinalScore.toFixed(1)}</div>\n                    </div>\n                    <div class=\"score-item\">\n                        <div class=\"label\">Percentage</div>\n                        <div class=\"value\">${percentage.toFixed(1)}%</div>\n                    </div>\n                    <div class=\"score-item\">\n                        <div class=\"label\">Letter Grade</div>\n                        <div class=\"value\">${getLetterGrade(percentage, ((_student$program2 = student.program) === null || _student$program2 === void 0 ? void 0 : _student$program2.toLowerCase()) || 'degree')}</div>\n                    </div>\n                </div>\n                ${penaltyApplied ? '<div style=\"margin-top: 1rem; color: #dc3545; font-weight: 500;\">‚ö†Ô∏è Late penalty applied</div>' : ''}\n            </div>\n\n            ${rubricTableHTML ? `\n                <div class=\"section\">\n                    <h2>üìã Detailed Rubric Assessment</h2>\n                    ${rubricTableHTML}\n                </div>\n            ` : ''}\n\n            ${(_gradeData$feedback = gradeData.feedback) !== null && _gradeData$feedback !== void 0 && _gradeData$feedback.general ? `\n                <div class=\"section\">\n                    <h2>üí¨ General Feedback</h2>\n                    <div class=\"feedback-section\">\n                        <div class=\"feedback-content\">${gradeData.feedback.general}</div>\n                    </div>\n                </div>\n            ` : ''}\n\n            ${(_gradeData$feedback2 = gradeData.feedback) !== null && _gradeData$feedback2 !== void 0 && _gradeData$feedback2.strengths ? `\n                <div class=\"section\">\n                    <h2>‚úÖ Strengths</h2>\n                    <div class=\"feedback-section\">\n                        <div class=\"feedback-content\">${gradeData.feedback.strengths}</div>\n                    </div>\n                </div>\n            ` : ''}\n\n            ${(_gradeData$feedback3 = gradeData.feedback) !== null && _gradeData$feedback3 !== void 0 && _gradeData$feedback3.improvements ? `\n                <div class=\"section\">\n                    <h2>üéØ Areas for Improvement</h2>\n                    <div class=\"feedback-section\">\n                        <div class=\"feedback-content\">${gradeData.feedback.improvements}</div>\n                    </div>\n                </div>\n            ` : ''}\n\n            ${attachmentsHTML ? `\n                <div class=\"section\">\n                    <h2>üìé Attachments</h2>\n                    <div class=\"attachments-grid\">\n                        ${attachmentsHTML}\n                    </div>\n                </div>\n            ` : ''}\n\n            ${videoLinksHTML ? `\n                <div class=\"section\">\n                    <h2>üé• Video Links</h2>\n                    ${videoLinksHTML}\n                </div>\n            ` : ''}\n        </div>\n\n        <div class=\"footer\">\n            Generated on ${new Date().toLocaleDateString()} ‚Ä¢ GradingPilot Session Report\n        </div>\n    </div>\n</body>\n</html>`;\n    };\n\n    // Generate and export the HTML file\n    try {\n      var _sharedRubric$assignm5, _sharedRubric$assignm6;\n      const htmlContent = generateStudentReportHTML();\n      const htmlBlob = new Blob([htmlContent], {\n        type: 'text/html'\n      });\n      const url = URL.createObjectURL(htmlBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `grade_report_${student.name.replace(/[^a-zA-Z0-9]/g, '_')}_${((_sharedRubric$assignm5 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm5 === void 0 ? void 0 : (_sharedRubric$assignm6 = _sharedRubric$assignm5.title) === null || _sharedRubric$assignm6 === void 0 ? void 0 : _sharedRubric$assignm6.replace(/[^a-zA-Z0-9]/g, '_')) || 'assignment'}.html`;\n      link.click();\n      URL.revokeObjectURL(url);\n      console.log(`‚úÖ Individual grade report exported for student: ${student.name}`);\n    } catch (error) {\n      console.error('Error generating individual grade report:', error);\n      alert('Error generating grade report. Please check the console for details.');\n    }\n  };\n\n  // PRIVACY: Modified file upload handling - NO AUTO-PERSISTENCE\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // PRIVACY: Check session status\n    if (!sessionActive) {\n      alert('Session has expired. Please refresh the page to start a new session.');\n      return;\n    }\n    setImportStatus('processing');\n    try {\n      var _result$courseMetadat, _result$courseMetadat2, _result$courseMetadat3, _result$courseMetadat4, _result$courseMetadat5, _result$courseMetadat6;\n      // Use Excel parser instead of manual CSV parsing\n      const result = await parseExcelFile(file);\n      if (!result.success) {\n        throw new Error(result.error || 'Failed to parse Excel file');\n      }\n\n      // Validate the parsed student data\n      const validation = validateStudentData(result.students);\n      if (result.students.length === 0) {\n        throw new Error('No valid student records found in Excel file');\n      }\n\n      // Create grading progress tracking for each student\n      const gradingProgress = result.students.map(() => ({\n        status: 'pending',\n        lastModified: null,\n        gradeType: null\n      }));\n\n      // PRIVACY: Create the class list data structure with session-only storage\n      const classListData = {\n        students: result.students,\n        gradingProgress,\n        fileName: file.name,\n        fileSize: file.size,\n        importTime: new Date().toISOString(),\n        courseMetadata: {\n          courseCode: ((_result$courseMetadat = result.courseMetadata) === null || _result$courseMetadat === void 0 ? void 0 : _result$courseMetadat.courseCode) || 'IMPORTED',\n          courseName: ((_result$courseMetadat2 = result.courseMetadata) === null || _result$courseMetadat2 === void 0 ? void 0 : _result$courseMetadat2.courseName) || 'Excel Import',\n          section: ((_result$courseMetadat3 = result.courseMetadata) === null || _result$courseMetadat3 === void 0 ? void 0 : _result$courseMetadat3.section) || '',\n          instructor: ((_result$courseMetadat4 = result.courseMetadata) === null || _result$courseMetadat4 === void 0 ? void 0 : _result$courseMetadat4.instructor) || '',\n          term: ((_result$courseMetadat5 = result.courseMetadata) === null || _result$courseMetadat5 === void 0 ? void 0 : _result$courseMetadat5.term) || '',\n          program: ((_result$courseMetadat6 = result.courseMetadata) === null || _result$courseMetadat6 === void 0 ? void 0 : _result$courseMetadat6.program) || ''\n        }\n      };\n\n      // PRIVACY: Set class list in session-only context\n      setClassList(classListData);\n      setValidationErrors(validation.errors);\n      setImportStatus('success');\n      console.log(`‚úÖ Imported ${result.students.length} students from ${file.name}`);\n      console.log('üìä Class list stored in session-only memory (auto-clears in 1 hour)');\n    } catch (error) {\n      console.error('Import error:', error);\n      setImportStatus('error');\n      setValidationErrors([error.message]);\n    }\n  };\n\n  // PRESERVED: Calculate grading progress\n  const getGradingProgress = () => {\n    if (!classList) return {\n      completed: 0,\n      total: 0,\n      percentage: 0,\n      final: 0,\n      draft: 0\n    };\n    const final = classList.students.filter(student => getGradeStatus(student.id) === 'final').length;\n    const draft = classList.students.filter(student => getGradeStatus(student.id) === 'draft').length;\n    const completed = final + draft;\n    const total = classList.students.length;\n    const percentage = total > 0 ? Math.round(completed / total * 100) : 0;\n    return {\n      completed,\n      total,\n      percentage,\n      final,\n      draft\n    };\n  };\n\n  // PRESERVED: Export functions\n  const exportClassList = () => {\n    var _classList$courseMeta11;\n    if (!classList || !classList.students) {\n      alert('No class list to export');\n      return;\n    }\n    const exportData = {\n      ...classList,\n      exportedAt: new Date().toISOString(),\n      version: '1.0',\n      sessionExport: true,\n      sessionLogo: sessionLogo // Include logo in JSON export\n    };\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `class_list_${((_classList$courseMeta11 = classList.courseMetadata) === null || _classList$courseMeta11 === void 0 ? void 0 : _classList$courseMeta11.courseCode) || 'course'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportToExcel = () => {\n    var _classList$courseMeta12;\n    if (!classList || !classList.students) {\n      alert('No class list to export');\n      return;\n    }\n    const worksheetData = [];\n\n    // Header row\n    worksheetData.push(['Student ID', 'Student Name', 'Email', 'Program', 'Grading Status']);\n\n    // Student rows\n    classList.students.forEach((student, index) => {\n      const progress = classList.gradingProgress[index] || {};\n      const gradeStatus = getGradeStatus(student.id);\n      worksheetData.push([student.id, student.name, student.email || '', student.program || '', gradeStatus === 'final' ? 'Final' : gradeStatus === 'draft' ? 'Draft' : 'Pending']);\n    });\n    const wb = XLSX.utils.book_new();\n    const ws = XLSX.utils.aoa_to_sheet(worksheetData);\n    XLSX.utils.book_append_sheet(wb, ws, 'Class List');\n    XLSX.writeFile(wb, `class_list_${((_classList$courseMeta12 = classList.courseMetadata) === null || _classList$courseMeta12 === void 0 ? void 0 : _classList$courseMeta12.courseCode) || 'course'}_${new Date().toISOString().split('T')[0]}.xlsx`);\n  };\n\n  // PRESERVED: Clear class list\n  const clearClassList = () => {\n    if (window.confirm('Are you sure you want to clear the current class list? This action cannot be undone.')) {\n      setClassList(null);\n      setValidationErrors([]);\n      setImportStatus('idle');\n      setCurrentStudent(null);\n      console.log('üóëÔ∏è Class list cleared from session');\n    }\n  };\n\n  // PRESERVED: Load student for grading\n  const loadStudentForGrading = studentId => {\n    const student = classList.students.find(s => s.id === studentId);\n    if (student && sharedRubric) {\n      setCurrentStudent(student);\n      setActiveTab('grading');\n      console.log(`üë§ Loading student for grading: ${student.name}`);\n    } else if (!sharedRubric) {\n      alert('Please create or load a rubric before grading students.');\n    }\n  };\n\n  // PRESERVED: Grade status helpers\n  const getGradeStatusDisplay = studentId => {\n    const status = getGradeStatus(studentId);\n    if (status === 'final') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-3 h-3 bg-green-500 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium\",\n          children: \"Final\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1118,\n        columnNumber: 17\n      }, this);\n    } else if (status === 'draft') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-3 h-3 bg-yellow-500 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium\",\n          children: \"Draft\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1129,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-3 h-3 bg-gray-300 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\",\n          children: \"Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1136,\n        columnNumber: 17\n      }, this);\n    }\n  };\n  const finalizeGrade = studentId => {\n    contextFinalizeGrade(studentId);\n  };\n  const unlockGrade = studentId => {\n    contextUnlockGrade(studentId);\n  };\n\n  // PRESERVED: Filtering and pagination\n  const filteredStudents = (classList === null || classList === void 0 ? void 0 : (_classList$students2 = classList.students) === null || _classList$students2 === void 0 ? void 0 : _classList$students2.filter(student => {\n    const searchLower = searchTerm.toLowerCase();\n    return student.name.toLowerCase().includes(searchLower) || student.id.toLowerCase().includes(searchLower) || student.email && student.email.toLowerCase().includes(searchLower);\n  })) || [];\n  const sortedStudents = [...filteredStudents].sort((a, b) => {\n    let aValue, bValue;\n    switch (sortBy) {\n      case 'name':\n        aValue = a.name.toLowerCase();\n        bValue = b.name.toLowerCase();\n        break;\n      case 'id':\n        aValue = a.id.toLowerCase();\n        bValue = b.id.toLowerCase();\n        break;\n      case 'email':\n        aValue = (a.email || '').toLowerCase();\n        bValue = (b.email || '').toLowerCase();\n        break;\n      case 'status':\n        aValue = getGradeStatus(a.id);\n        bValue = getGradeStatus(b.id);\n        break;\n      default:\n        return 0;\n    }\n    if (aValue < bValue) return sortOrder === 'asc' ? -1 : 1;\n    if (aValue > bValue) return sortOrder === 'asc' ? 1 : -1;\n    return 0;\n  });\n  const totalPages = Math.ceil(sortedStudents.length / studentsPerPage);\n  const startIndex = (currentPage - 1) * studentsPerPage;\n  const paginatedStudents = sortedStudents.slice(startIndex, startIndex + studentsPerPage);\n\n  // REFACTORED: This is the view shown before a class list is uploaded.\n  // It's been updated to match the provided screenshot, with improved layout and contrast.\n  if (!classList) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 sm:p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-100 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-md mb-6 flex items-start gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold\",\n            children: \"Privacy Notice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1206,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: \"All imported data is stored in a temporary session and will be automatically cleared after 1 hour of inactivity or when you close this tab.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1207,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm border border-gray-200 h-full flex flex-col items-center justify-center p-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-2 border-dashed border-gray-300 rounded-xl w-full h-full flex flex-col items-center justify-center p-8 text-center bg-gray-50/50 hover:bg-gray-50 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: /*#__PURE__*/_jsxDEV(Upload, {\n                  size: 48,\n                  className: \"text-blue-500 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1221,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1220,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-semibold text-gray-800 mb-2\",\n                children: \"Upload Your Excel Class List\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1223,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 mb-6\",\n                children: \"Drag and drop your .xlsx or .xls file here, or click to browse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1224,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                accept: \".xlsx,.xls\",\n                onChange: handleFileUpload,\n                className: \"hidden\",\n                disabled: importStatus === 'processing'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                disabled: importStatus === 'processing',\n                className: \"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2\",\n                children: importStatus === 'processing' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n                    size: 18,\n                    className: \"animate-spin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1240,\n                    columnNumber: 45\n                  }, this), \"Processing...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                    size: 18\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1245,\n                    columnNumber: 45\n                  }, this), \"Choose Excel File\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1233,\n                columnNumber: 33\n              }, this), importStatus === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-left w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2 text-red-700\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    size: 18\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1253,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-medium\",\n                    children: \"Import Failed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1254,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1252,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 text-sm text-red-600\",\n                  children: validationErrors.map((error, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: error\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1258,\n                    columnNumber: 49\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1256,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1251,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1219,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1218,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1217,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle2, {\n                size: 20,\n                className: \"text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 33\n              }, this), \"Required Format\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1271,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2 text-sm text-gray-600 list-disc list-inside\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Headers required: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Student ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1276,\n                  columnNumber: 55\n                }, this), \", \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"First Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1276,\n                  columnNumber: 84\n                }, this), \", \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Last Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1276,\n                  columnNumber: 113\n                }, this), \" (or a single \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1276,\n                  columnNumber: 153\n                }, this), \" column).\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1276,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Optional columns: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1277,\n                  columnNumber: 55\n                }, this), \", \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Program\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1277,\n                  columnNumber: 79\n                }, this), \".\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1277,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Course metadata (e.g., \\\"Course Code\\\", \\\"Instructor\\\") can be added in the first few rows.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1278,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1275,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1270,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                size: 20,\n                className: \"text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1285,\n                columnNumber: 33\n              }, this), \"Privacy Protection\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1284,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(Timer, {\n                  size: 16,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1289,\n                  columnNumber: 73\n                }, this), \"Data stored in session only (1 hour max)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(Lock, {\n                  size: 16,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1290,\n                  columnNumber: 73\n                }, this), \"No persistent browser storage\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1290,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-center gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n                  size: 16,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1291,\n                  columnNumber: 73\n                }, this), \"Automatic data clearing on restart\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1291,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1288,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(GraduationCap, {\n                size: 20,\n                className: \"text-indigo-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1298,\n                columnNumber: 33\n              }, this), \"Quick Start\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1297,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              className: \"space-y-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\",\n                  children: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1303,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Upload your Excel class list.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1304,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1302,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\",\n                  children: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1307,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Create or import a rubric in the next tabs.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1308,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1306,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\",\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1311,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Begin grading students from the list.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1312,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1310,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\",\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1315,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Export class or individual reports.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1316,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1314,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1301,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1296,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1268,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1214,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1201,\n      columnNumber: 13\n    }, this);\n  }\n\n  // Main interface with class list loaded (preserved from original)\n  const progress = getGradingProgress();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0\",\n          children: /*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-5 w-5 text-amber-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1335,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1334,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-3\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-amber-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Privacy Notice:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1339,\n              columnNumber: 29\n            }, this), \" All imported data is stored in session only and will be automatically cleared after 1 hour or when the application restarts.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1338,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1337,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1333,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1332,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-xl border border-gray-100 mb-8 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-700 to-indigo-700 px-8 py-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col lg:flex-row lg:items-center lg:justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white/30 rounded-lg p-3 backdrop-blur-sm\",\n                children: /*#__PURE__*/_jsxDEV(Users, {\n                  size: 32,\n                  className: \"text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1354,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1353,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-3xl font-bold text-white drop-shadow-lg\",\n                  children: \"Class Manager\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1357,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-blue-100 font-medium text-lg drop-shadow-md\",\n                  children: [classList.students.length, \" students imported\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1358,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1356,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1352,\n              columnNumber: 29\n            }, this), sessionLogo && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 lg:mt-0 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: sessionLogo,\n                alt: \"School Logo\",\n                className: \"max-h-12 max-w-32 mx-auto object-contain bg-white/20 rounded-lg p-2 backdrop-blur-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1367,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1366,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1351,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1350,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-8 py-6 bg-gray-50 border-b border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap items-center justify-between gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportClassList,\n                className: \"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1385,\n                  columnNumber: 37\n                }, this), \"Export JSON\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1381,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: exportToExcel,\n                className: \"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1392,\n                  columnNumber: 37\n                }, this), \"Export Excel\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1388,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: clearClassList,\n                className: \"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1399,\n                  columnNumber: 37\n                }, this), \"Clear List\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1395,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1380,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3\",\n              children: [!sessionLogo && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _logoInputRef$current;\n                  return (_logoInputRef$current = logoInputRef.current) === null || _logoInputRef$current === void 0 ? void 0 : _logoInputRef$current.click();\n                },\n                className: \"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(Image, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1410,\n                  columnNumber: 41\n                }, this), \"Add Logo\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1406,\n                columnNumber: 37\n              }, this), sessionLogo && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: removeLogo,\n                className: \"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1419,\n                  columnNumber: 41\n                }, this), \"Remove Logo\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1415,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1404,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: logoInputRef,\n              accept: \"image/png,image/jpeg,image/jpg,image/svg+xml\",\n              onChange: handleLogoUpload,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1426,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1379,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 pt-6 border-t border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-4\",\n              children: \"Import Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1437,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"File:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1440,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: classList.fileName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1441,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1439,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Import Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1444,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: new Date(classList.importTime).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1445,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1443,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Storage:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1450,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium text-orange-600 flex items-center gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(Shield, {\n                    size: 12\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1452,\n                    columnNumber: 41\n                  }, this), \"Session Only\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1451,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1449,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Total Students:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1457,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: classList.students.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1458,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1456,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1438,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1436,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1378,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1348,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid lg:grid-cols-4 gap-6 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-3 bg-white rounded-xl shadow-lg border border-gray-100 p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1470,\n              columnNumber: 29\n            }, this), \"Grading Progress\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1469,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-bold text-gray-800\",\n                children: progress.total\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1476,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Total Students\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1477,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-bold text-green-600\",\n                children: progress.final\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1480,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Final Grades\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1481,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1479,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-bold text-yellow-600\",\n                children: progress.draft\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1484,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Draft Grades\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1485,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1483,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-bold text-blue-600\",\n                children: [progress.percentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1488,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Complete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1489,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1487,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1474,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500\",\n              style: {\n                width: `${progress.percentage}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1494,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1493,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1468,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-xl shadow-lg border border-gray-100 p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(FileDown, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1504,\n              columnNumber: 29\n            }, this), \"Export Reports\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1503,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportClassGradesHTML,\n              disabled: !sharedRubric,\n              className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1514,\n                columnNumber: 33\n              }, this), \"HTML Report\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1509,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportClassGradesPortraitPDF,\n              disabled: !sharedRubric,\n              className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1522,\n                columnNumber: 33\n              }, this), \"PDF Report\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1517,\n              columnNumber: 29\n            }, this), !sharedRubric && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 text-center\",\n              children: \"Load a rubric to enable exports\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1526,\n              columnNumber: 33\n            }, this), sessionLogo && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-green-600 text-center flex items-center justify-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 12\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1532,\n                columnNumber: 37\n              }, this), \"Logo will be included\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1531,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1508,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1502,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1466,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 relative\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              size: 20,\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1544,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search students by name, ID, or email...\",\n              value: searchTerm,\n              onChange: e => setSearchTerm(e.target.value),\n              className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1545,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1543,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: sortBy,\n              onChange: e => setSortBy(e.target.value),\n              className: \"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name\",\n                children: \"Sort by Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1560,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"id\",\n                children: \"Sort by ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1561,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"email\",\n                children: \"Sort by Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1562,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"status\",\n                children: \"Sort by Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1555,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc'),\n              className: \"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\",\n              children: sortOrder === 'asc' ? /*#__PURE__*/_jsxDEV(SortAsc, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1570,\n                columnNumber: 56\n              }, this) : /*#__PURE__*/_jsxDEV(SortDesc, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1570,\n                columnNumber: 80\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1566,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1554,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1542,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1541,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table-auto w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1582,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1585,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Student ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1588,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1591,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1594,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Program\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1597,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1600,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1581,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1580,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: paginatedStudents.map((student, index) => {\n                const actualIndex = startIndex + index + 1;\n                const gradeStatus = getGradeStatus(student.id);\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-50 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n                    children: actualIndex\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1612,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap\",\n                    children: getGradeStatusDisplay(student.id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1615,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n                    children: student.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1618,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n                    children: student.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1621,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                    children: student.email || '‚Äî'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1624,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                    children: student.program || '‚Äî'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1627,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 whitespace-nowrap text-sm font-medium\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => loadStudentForGrading(student.id),\n                        disabled: !sharedRubric,\n                        className: \"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded text-sm transition-colors\",\n                        children: [/*#__PURE__*/_jsxDEV(GraduationCap, {\n                          size: 14\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1637,\n                          columnNumber: 57\n                        }, this), \"Grade\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1632,\n                        columnNumber: 53\n                      }, this), gradeStatus === 'final' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => unlockGrade(student.id),\n                          className: \"flex items-center gap-1 px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm transition-colors\",\n                          children: [/*#__PURE__*/_jsxDEV(Unlock, {\n                            size: 14\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1647,\n                            columnNumber: 65\n                          }, this), \"Unlock\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1643,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => exportStudentGrade(student.id),\n                          className: \"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors\",\n                          children: [/*#__PURE__*/_jsxDEV(Download, {\n                            size: 14\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1654,\n                            columnNumber: 65\n                          }, this), \"Export\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1650,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true), gradeStatus === 'draft' && /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => finalizeGrade(student.id),\n                        className: \"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors\",\n                        children: [/*#__PURE__*/_jsxDEV(Lock, {\n                          size: 14\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1665,\n                          columnNumber: 61\n                        }, this), \"Finalize\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1661,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1631,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1630,\n                    columnNumber: 45\n                  }, this)]\n                }, student.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1611,\n                  columnNumber: 41\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1605,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1579,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1578,\n          columnNumber: 21\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-4 border-t border-gray-200 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-700\",\n            children: [\"Showing \", startIndex + 1, \" to \", Math.min(startIndex + studentsPerPage, sortedStudents.length), \" of \", sortedStudents.length, \" students\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1681,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentPage(currentPage - 1),\n              disabled: currentPage === 1,\n              className: \"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\",\n              children: \"Previous\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1685,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-3 py-1 text-sm\",\n              children: [\"Page \", currentPage, \" of \", totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1692,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentPage(currentPage + 1),\n              disabled: currentPage === totalPages,\n              className: \"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\",\n              children: \"Next\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1695,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1684,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1680,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1577,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1346,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1330,\n    columnNumber: 9\n  }, this);\n};\n_s(ClassListManager, \"FergkPwOv6a1R6hc7fVQGCsDKyk=\", false, function () {\n  return [useAssessment];\n});\n_c = ClassListManager;\nexport default ClassListManager;\nvar _c;\n$RefreshReg$(_c, \"ClassListManager\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","Upload","Users","Download","Trash2","FileText","AlertCircle","CheckCircle","Clock","GraduationCap","Settings","Sparkles","FileDown","BarChart3","Award","Target","TrendingUp","Lock","RefreshCw","Save","Plus","Eye","Unlock","ExternalLink","Grid3X3","Filter","Search","SortAsc","SortDesc","FileSpreadsheet","CheckCircle2","Shield","Timer","Image","X","useAssessment","DEFAULT_LATE_POLICY","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","getLetterGrade","percentage","programType","scales","degree","min","grade","diploma","certificate","scale","threshold","ClassListManager","_s","_classList$students2","classList","setClassList","setActiveTab","sharedRubric","currentStudent","setCurrentStudent","drafts","finalGrades","getGradeStatus","loadDraft","loadFinalGrade","saveFinalGrade","saveDraft","unlockGrade","contextUnlockGrade","finalizeGrade","contextFinalizeGrade","sessionActive","currentLatePolicy","importStatus","setImportStatus","previewData","setPreviewData","validationErrors","setValidationErrors","showDetails","setShowDetails","selectedStudents","setSelectedStudents","Set","currentPage","setCurrentPage","studentsPerPage","searchTerm","setSearchTerm","sortBy","setSortBy","sortOrder","setSortOrder","viewMode","setViewMode","sessionLogo","setSessionLogo","showLogoUpload","setShowLogoUpload","logoPreview","setLogoPreview","fileInputRef","logoInputRef","parseExcelFile","file","Promise","resolve","reader","FileReader","onload","e","data","Uint8Array","target","result","workbook","read","type","sheetName","SheetNames","worksheet","Sheets","jsonData","utils","sheet_to_json","header","length","success","error","headers","map","h","toString","trim","toLowerCase","dataRows","slice","filter","row","some","cell","students","courseMetadata","i","Math","firstCell","secondCell","includes","courseCode","instructor","section","term","program","firstNameCol","findIndex","lastNameCol","nameCol","idCol","emailCol","programCol","forEach","index","name","firstName","lastName","studentId","email","push","id","rowNumber","totalRows","message","onerror","readAsArrayBuffer","validateStudentData","errors","duplicateIds","duplicateNames","seenIds","seenNames","student","has","add","join","valid","handleLogoUpload","event","files","validTypes","alert","maxSize","size","logoData","console","log","readAsDataURL","removeLogo","current","value","calculateStudentGrade","_gradeData$studentInf","_gradeData$studentInf2","_classList$students","_student$program","gradeStatus","gradeData","score","letter","status","lastModified","totalScore","totalPossible","rubricGrading","criteria","criterion","_sharedRubric$levels","grading","selectedLevel","undefined","_sharedRubric$levels$","levelIndex","points","levels","multiplier","finalScore","activeLevels","studentInfo","lateSubmission","lateSubmissionLevel","lateLevel","action","max","find","s","letterGrade","toFixed","rawScore","penaltyApplied","getClassGradesHTML","_classList$courseMeta","_classList$courseMeta2","_classList$courseMeta3","_classList$courseMeta4","_sharedRubric$assignm","now","Date","currentDate","toLocaleDateString","currentTime","toLocaleTimeString","studentGrades","_classList$gradingPro","gradeInfo","gradingProgress","rowsHtml","gradeType","logoSection","courseName","assignmentInfo","title","fileName","exportClassGradesHTML","_classList$courseMeta5","htmlContent","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","getPortraitClassReportHTML","_sharedRubric$assignm2","_classList$courseMeta6","_classList$courseMeta7","_classList$courseMeta8","_classList$courseMeta9","_classList$courseMeta0","_classList$courseMeta1","_classList$courseMeta10","rubricName","studentRows","idx","info","num","parseFloat","exportClassGradesPortraitPDF","printWin","window","open","write","close","focus","print","exportStudentGrade","_gradeData$studentInf3","_gradeData$studentInf4","_gradeData$attachment","_gradeData$videoLinks","getSafeLatePolicy","level","none","totalRawScore","totalMaxScore","totalFinalScore","_sharedRubric$levels2","_sharedRubric$levels$2","criterionScore","maxPoints","latePolicy","attachmentsHTML","attachments","att","base64Data","videoLinksHTML","videoLinks","rubricTableHTML","_gradeData$rubricGrad","_sharedRubric$levels$3","generateStudentReportHTML","_sharedRubric$assignm3","_gradeData$course","_gradeData$course2","_sharedRubric$assignm4","_student$program2","_gradeData$feedback","_gradeData$feedback2","_gradeData$feedback3","course","code","feedback","general","strengths","improvements","_sharedRubric$assignm5","_sharedRubric$assignm6","htmlBlob","replace","handleFileUpload","_result$courseMetadat","_result$courseMetadat2","_result$courseMetadat3","_result$courseMetadat4","_result$courseMetadat5","_result$courseMetadat6","Error","validation","classListData","fileSize","importTime","toISOString","getGradingProgress","completed","total","final","draft","round","exportClassList","_classList$courseMeta11","exportData","exportedAt","version","sessionExport","JSON","stringify","split","exportToExcel","_classList$courseMeta12","worksheetData","progress","wb","book_new","ws","aoa_to_sheet","book_append_sheet","writeFile","clearClassList","confirm","loadStudentForGrading","getGradeStatusDisplay","className","children","_jsxFileName","lineNumber","columnNumber","filteredStudents","searchLower","sortedStudents","sort","a","b","aValue","bValue","totalPages","ceil","startIndex","paginatedStudents","ref","accept","onChange","disabled","onClick","_fileInputRef$current","src","alt","_logoInputRef$current","width","placeholder","actualIndex","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/ClassListManager.js"],"sourcesContent":["// ClassListManager.js - Privacy-Focused Class List Management with Logo Upload\r\n// REFACTORED: UI updated to match screenshot and improve contrast, preserving all functionality.\r\n\r\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport {\r\n    Upload, Users, Download, Trash2, FileText, AlertCircle,\r\n    CheckCircle, Clock, GraduationCap, Settings, Sparkles,\r\n    FileDown, BarChart3, Award, Target, TrendingUp, Lock,\r\n    RefreshCw, Save, Plus, Eye, Unlock, ExternalLink,\r\n    Grid3X3, Filter, Search, SortAsc, SortDesc, FileSpreadsheet,\r\n    CheckCircle2, Shield, Timer, Image, X\r\n} from 'lucide-react';\r\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\r\nimport * as XLSX from 'xlsx';\r\n\r\n/**\r\n * Letter grade calculation function with multiple grading scales\r\n * Uses original hardcoded scales for reliability\r\n */\r\nconst getLetterGrade = (percentage, programType = 'degree') => {\r\n    // Original hardcoded scales (preserved exactly)\r\n    const scales = {\r\n        degree: [\r\n            { min: 90, grade: 'A+' },\r\n            { min: 80, grade: 'A' },\r\n            { min: 75, grade: 'B+' },\r\n            { min: 70, grade: 'B' },\r\n            { min: 65, grade: 'C+' },\r\n            { min: 60, grade: 'C' },\r\n            { min: 0, grade: 'F' }\r\n        ],\r\n        diploma: [\r\n            { min: 90, grade: 'A+' },\r\n            { min: 80, grade: 'A' },\r\n            { min: 75, grade: 'B+' },\r\n            { min: 70, grade: 'B' },\r\n            { min: 65, grade: 'C+' },\r\n            { min: 60, grade: 'C' },\r\n            { min: 50, grade: 'P' },\r\n            { min: 0, grade: 'F' }\r\n        ],\r\n        certificate: [\r\n            { min: 80, grade: 'P' },\r\n            { min: 0, grade: 'F' }\r\n        ]\r\n    };\r\n\r\n    const scale = scales[programType] || scales.degree;\r\n\r\n    for (const threshold of scale) {\r\n        if (percentage >= threshold.min) {\r\n            return threshold.grade;\r\n        }\r\n    }\r\n\r\n    return 'F';\r\n};\r\n\r\nconst ClassListManager = () => {\r\n    const {\r\n        classList,\r\n        setClassList,\r\n        setActiveTab,\r\n        sharedRubric,\r\n        currentStudent,\r\n        setCurrentStudent,\r\n        drafts,\r\n        finalGrades,\r\n        getGradeStatus,\r\n        loadDraft,\r\n        loadFinalGrade,\r\n        saveFinalGrade,\r\n        saveDraft,\r\n        unlockGrade: contextUnlockGrade,\r\n        finalizeGrade: contextFinalizeGrade,\r\n        sessionActive,\r\n        currentLatePolicy\r\n    } = useAssessment();\r\n\r\n    // Local state\r\n    const [importStatus, setImportStatus] = useState('idle');\r\n    const [previewData, setPreviewData] = useState(null);\r\n    const [validationErrors, setValidationErrors] = useState([]);\r\n    const [showDetails, setShowDetails] = useState(false);\r\n    const [selectedStudents, setSelectedStudents] = useState(new Set());\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [studentsPerPage] = useState(20);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [sortBy, setSortBy] = useState('name');\r\n    const [sortOrder, setSortOrder] = useState('asc');\r\n    const [viewMode, setViewMode] = useState('table');\r\n\r\n    // NEW: Logo upload state\r\n    const [sessionLogo, setSessionLogo] = useState(null);\r\n    const [showLogoUpload, setShowLogoUpload] = useState(false);\r\n    const [logoPreview, setLogoPreview] = useState(null);\r\n\r\n    // File input refs\r\n    const fileInputRef = useRef(null);\r\n    const logoInputRef = useRef(null);\r\n\r\n    // PRESERVED: Excel file parser\r\n    const parseExcelFile = async (file) => {\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = (e) => {\r\n                try {\r\n                    const data = new Uint8Array(e.target.result);\r\n                    const workbook = XLSX.read(data, { type: 'array' });\r\n                    const sheetName = workbook.SheetNames[0];\r\n                    const worksheet = workbook.Sheets[sheetName];\r\n                    const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\r\n\r\n                    if (jsonData.length < 2) {\r\n                        resolve({ success: false, error: 'File must contain at least a header row and one data row' });\r\n                        return;\r\n                    }\r\n\r\n                    const headers = jsonData[0].map(h => h ? h.toString().trim().toLowerCase() : '');\r\n                    const dataRows = jsonData.slice(1).filter(row => row.some(cell => cell !== null && cell !== ''));\r\n\r\n                    const students = [];\r\n                    let courseMetadata = {};\r\n\r\n                    // Extract course metadata from first few rows\r\n                    for (let i = 0; i < Math.min(10, dataRows.length); i++) {\r\n                        const row = dataRows[i];\r\n                        if (row.length > 1) {\r\n                            const firstCell = row[0] ? row[0].toString().toLowerCase() : '';\r\n                            const secondCell = row[1] ? row[1].toString() : '';\r\n\r\n                            if (firstCell.includes('course') && secondCell) {\r\n                                courseMetadata.courseCode = secondCell;\r\n                            } else if (firstCell.includes('instructor') || firstCell.includes('professor')) {\r\n                                courseMetadata.instructor = secondCell;\r\n                            } else if (firstCell.includes('section')) {\r\n                                courseMetadata.section = secondCell;\r\n                            } else if (firstCell.includes('term') || firstCell.includes('semester')) {\r\n                                courseMetadata.term = secondCell;\r\n                            } else if (firstCell.includes('program')) {\r\n                                courseMetadata.program = secondCell;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Find required column indices\r\n                    const firstNameCol = headers.findIndex(h => h.includes('first') && h.includes('name'));\r\n                    const lastNameCol = headers.findIndex(h => h.includes('last') && h.includes('name'));\r\n                    const nameCol = headers.findIndex(h => h === 'name' || h === 'student name');\r\n                    const idCol = headers.findIndex(h => h.includes('id') || h.includes('number'));\r\n                    const emailCol = headers.findIndex(h => h.includes('email') || h.includes('mail'));\r\n                    const programCol = headers.findIndex(h => h.includes('program'));\r\n\r\n                    if ((firstNameCol === -1 || lastNameCol === -1) && nameCol === -1) {\r\n                        resolve({ success: false, error: 'Must have either \"First Name\" and \"Last Name\" columns or a \"Name\" column' });\r\n                        return;\r\n                    }\r\n\r\n                    if (idCol === -1) {\r\n                        resolve({ success: false, error: 'Must have a column containing \"ID\" or \"Number\"' });\r\n                        return;\r\n                    }\r\n\r\n                    // Process student data\r\n                    dataRows.forEach((row, index) => {\r\n                        let name = '';\r\n\r\n                        if (nameCol !== -1 && row[nameCol]) {\r\n                            name = row[nameCol].toString().trim();\r\n                        } else if (firstNameCol !== -1 && lastNameCol !== -1) {\r\n                            const firstName = row[firstNameCol] ? row[firstNameCol].toString().trim() : '';\r\n                            const lastName = row[lastNameCol] ? row[lastNameCol].toString().trim() : '';\r\n                            name = `${firstName} ${lastName}`.trim();\r\n                        }\r\n\r\n                        const studentId = row[idCol] ? row[idCol].toString().trim() : '';\r\n                        const email = emailCol !== -1 && row[emailCol] ? row[emailCol].toString().trim() : '';\r\n                        const program = programCol !== -1 && row[programCol] ? row[programCol].toString().trim() : '';\r\n\r\n                        if (name && studentId) {\r\n                            students.push({\r\n                                id: studentId,\r\n                                name: name,\r\n                                email: email || '',\r\n                                program: program || '',\r\n                                rowNumber: index + 2\r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    resolve({\r\n                        success: true,\r\n                        students: students,\r\n                        courseMetadata: courseMetadata,\r\n                        totalRows: dataRows.length,\r\n                        headers: headers\r\n                    });\r\n\r\n                } catch (error) {\r\n                    resolve({ success: false, error: `Error parsing Excel file: ${error.message}` });\r\n                }\r\n            };\r\n\r\n            reader.onerror = () => {\r\n                resolve({ success: false, error: 'Error reading file' });\r\n            };\r\n\r\n            reader.readAsArrayBuffer(file);\r\n        });\r\n    };\r\n\r\n    // PRESERVED: Validate student data\r\n    const validateStudentData = (students) => {\r\n        const errors = [];\r\n        const duplicateIds = [];\r\n        const duplicateNames = [];\r\n        const seenIds = new Set();\r\n        const seenNames = new Set();\r\n\r\n        students.forEach((student, index) => {\r\n            if (!student.name || student.name.trim() === '') {\r\n                errors.push(`Row ${index + 1}: Missing student name`);\r\n            }\r\n\r\n            if (!student.id || student.id.trim() === '') {\r\n                errors.push(`Row ${index + 1}: Missing student ID`);\r\n            }\r\n\r\n            if (seenIds.has(student.id)) {\r\n                duplicateIds.push(student.id);\r\n            } else {\r\n                seenIds.add(student.id);\r\n            }\r\n\r\n            if (seenNames.has(student.name.toLowerCase())) {\r\n                duplicateNames.push(student.name);\r\n            } else {\r\n                seenNames.add(student.name.toLowerCase());\r\n            }\r\n        });\r\n\r\n        if (duplicateIds.length > 0) {\r\n            errors.push(`Duplicate student IDs found: ${duplicateIds.join(', ')}`);\r\n        }\r\n\r\n        if (duplicateNames.length > 0) {\r\n            errors.push(`Duplicate student names found: ${duplicateNames.join(', ')}`);\r\n        }\r\n\r\n        return {\r\n            valid: errors.length === 0,\r\n            errors: errors,\r\n            duplicateIds: duplicateIds,\r\n            duplicateNames: duplicateNames\r\n        };\r\n    };\r\n\r\n    // NEW: Logo upload functions\r\n    const handleLogoUpload = (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        // Validate file type\r\n        const validTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/svg+xml'];\r\n        if (!validTypes.includes(file.type)) {\r\n            alert('Please upload a valid image file (PNG, JPG, or SVG)');\r\n            return;\r\n        }\r\n\r\n        // Validate file size (limit to 2MB)\r\n        const maxSize = 2 * 1024 * 1024; // 2MB\r\n        if (file.size > maxSize) {\r\n            alert('Logo file must be smaller than 2MB');\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const logoData = e.target.result;\r\n            setSessionLogo(logoData);\r\n            setLogoPreview(logoData);\r\n            setShowLogoUpload(false);\r\n            console.log('‚úÖ Logo uploaded and stored in session');\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    const removeLogo = () => {\r\n        setSessionLogo(null);\r\n        setLogoPreview(null);\r\n        if (logoInputRef.current) {\r\n            logoInputRef.current.value = '';\r\n        }\r\n        console.log('üóëÔ∏è Logo removed from session');\r\n    };\r\n\r\n    // PRESERVED: Enhanced calculateStudentGrade with policy support\r\n    const calculateStudentGrade = (studentId) => {\r\n        const gradeStatus = getGradeStatus(studentId);\r\n        let gradeData = null;\r\n\r\n        if (gradeStatus === 'final') {\r\n            gradeData = loadFinalGrade(studentId);\r\n        } else if (gradeStatus === 'draft') {\r\n            gradeData = loadDraft(studentId);\r\n        }\r\n\r\n        if (!gradeData || !sharedRubric) {\r\n            return {\r\n                score: 'N/A',\r\n                letter: 'N/A',\r\n                percentage: 'N/A',\r\n                status: gradeStatus || 'pending',\r\n                lastModified: null\r\n            };\r\n        }\r\n\r\n        // Calculate raw score\r\n        let totalScore = 0;\r\n        let totalPossible = 0;\r\n\r\n        if (gradeData.rubricGrading && sharedRubric.criteria) {\r\n            sharedRubric.criteria.forEach(criterion => {\r\n                const grading = gradeData.rubricGrading[criterion.id];\r\n                if (grading && grading.selectedLevel !== undefined) {\r\n                    const levelIndex = grading.selectedLevel;\r\n                    const points = sharedRubric.levels[levelIndex]?.points || 0;\r\n                    totalScore += points * criterion.multiplier;\r\n                }\r\n                totalPossible += (sharedRubric.levels[sharedRubric.levels.length - 1]?.points || 0) * criterion.multiplier;\r\n            });\r\n        }\r\n\r\n        // Apply late policy\r\n        let finalScore = totalScore;\r\n        const activeLevels = currentLatePolicy?.levels || DEFAULT_LATE_POLICY.levels;\r\n\r\n        if (gradeData.studentInfo?.lateSubmission && gradeData.studentInfo?.lateSubmissionLevel) {\r\n            const lateLevel = activeLevels[gradeData.studentInfo.lateSubmissionLevel];\r\n            if (lateLevel && lateLevel.action === 'percentage') {\r\n                finalScore = totalScore * (lateLevel.value / 100);\r\n            } else if (lateLevel && lateLevel.action === 'deduction') {\r\n                finalScore = Math.max(0, totalScore - lateLevel.value);\r\n            }\r\n        }\r\n\r\n        const percentage = totalPossible > 0 ? (finalScore / totalPossible) * 100 : 0;\r\n\r\n        // Get student program for grading policy\r\n        const student = classList?.students?.find(s => s.id === studentId);\r\n        const programType = student?.program?.toLowerCase() || 'degree';\r\n\r\n        try {\r\n            const letterGrade = getLetterGrade(percentage, programType);\r\n\r\n            return {\r\n                score: finalScore.toFixed(1),\r\n                letter: letterGrade,\r\n                percentage: percentage.toFixed(1),\r\n                status: gradeStatus,\r\n                lastModified: gradeData.lastModified || null,\r\n                rawScore: totalScore.toFixed(1),\r\n                penaltyApplied: finalScore !== totalScore\r\n            };\r\n        } catch (error) {\r\n            console.error('Error calculating grade:', error);\r\n            return {\r\n                score: finalScore.toFixed(1),\r\n                letter: 'Error',\r\n                percentage: percentage.toFixed(1),\r\n                status: gradeStatus,\r\n                lastModified: gradeData.lastModified || null,\r\n                rawScore: totalScore.toFixed(1),\r\n                penaltyApplied: finalScore !== totalScore\r\n            };\r\n        }\r\n    };\r\n\r\n    // MODIFIED: Enhanced getClassGradesHTML with logo support\r\n    const getClassGradesHTML = () => {\r\n        const now = new Date();\r\n        const currentDate = now.toLocaleDateString('en-CA');\r\n        const currentTime = now.toLocaleTimeString('en-CA');\r\n\r\n        // Calculate grades for all students\r\n        const studentGrades = classList.students.map((student, index) => {\r\n            const gradeInfo = calculateStudentGrade(student.id);\r\n            const gradingProgress = classList.gradingProgress?.[index] || {};\r\n\r\n            return {\r\n                student,\r\n                gradeInfo,\r\n                gradingProgress,\r\n                index: index + 1\r\n            };\r\n        });\r\n\r\n        const rowsHtml = studentGrades.map(({ student, gradeInfo, gradingProgress, index }) => {\r\n            const lastModified = gradeInfo.lastModified\r\n                ? new Date(gradeInfo.lastModified).toLocaleDateString('en-CA')\r\n                : 'Never';\r\n\r\n            return `\r\n                <tr style=\"border-bottom: 1px solid #e5e7eb;\">\r\n                    <td style=\"padding: 8px; text-align: center; font-weight: 500;\">${index}</td>\r\n                    <td style=\"padding: 8px;\">${student.id}</td>\r\n                    <td style=\"padding: 8px; font-weight: 500;\">${student.name}</td>\r\n                    <td style=\"padding: 8px; color: #6b7280;\">${student.email || ''}</td>\r\n                    <td style=\"padding: 8px; color: #6b7280;\">${student.program || ''}</td>\r\n                    <td style=\"padding: 8px;\">\r\n                        <span style=\"display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500; \r\n                            ${gradeInfo.status === 'final' ? 'background: #dcfce7; color: #166534;' :\r\n                    gradeInfo.status === 'draft' ? 'background: #fef3c7; color: #92400e;' :\r\n                        'background: #f3f4f6; color: #6b7280;'}\">\r\n                            ${gradeInfo.status === 'final' ? 'Final' : gradeInfo.status === 'draft' ? 'Draft' : 'Pending'}\r\n                        </span>\r\n                    </td>\r\n                    <td style=\"padding: 8px;\">${gradingProgress.gradeType || 'N/A'}</td>\r\n                    <td style=\"padding: 8px; font-weight: 600; font-size: 16px;\">${gradeInfo.score}</td>\r\n                    <td style=\"padding: 8px; font-weight: 600; color: #1f2937;\">${gradeInfo.letter}</td>\r\n                    <td style=\"padding: 8px;\">${gradeInfo.percentage}%</td>\r\n                    <td style=\"padding: 8px; color: #6b7280; font-size: 12px;\">${lastModified}</td>\r\n                </tr>\r\n            `;\r\n        }).join('');\r\n\r\n        // NEW: Logo section for exports\r\n        const logoSection = sessionLogo ?\r\n            `<div style=\"text-align: center; margin-bottom: 20px;\">\r\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 80px; max-width: 300px; object-fit: contain;\" />\r\n            </div>` : '';\r\n\r\n        return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Class Grade Report - ${classList.courseMetadata?.courseCode || 'Course'}</title>\r\n    <style>\r\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; background: white; color: #1f2937; line-height: 1.5; }\r\n        .header { text-align: center; margin-bottom: 30px; padding: 20px; background: #f9fafb; border-radius: 8px; }\r\n        .header h1 { margin: 0 0 10px 0; color: #1f2937; font-size: 28px; font-weight: 700; }\r\n        .meta { color: #6b7280; font-size: 14px; line-height: 1.6; }\r\n        .table-container { overflow-x: auto; margin: 20px 0; }\r\n        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }\r\n        th { background: #f3f4f6; padding: 12px 8px; text-align: left; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 2px solid #e5e7eb; }\r\n        td { padding: 8px; border-bottom: 1px solid #f3f4f6; }\r\n        tr:hover { background: #f9fafb; }\r\n        .footer { text-align: center; color: #6b7280; margin-top: 20px; font-size: 12px; }\r\n        @media print { \r\n            body { background: white; } \r\n            .table-container { overflow-x: visible; } \r\n            @page { margin: 0.5in; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    ${logoSection}\r\n    <div class=\"header\">\r\n        <h1>üìä Class Grade Report</h1>\r\n        <div class=\"meta\">\r\n            ${classList.courseMetadata?.courseCode || ''} ‚Äì ${classList.courseMetadata?.courseName || ''} |\r\n            Section: ${classList.courseMetadata?.section || ''}<br>\r\n            Rubric: ${sharedRubric?.assignmentInfo?.title || 'Unnamed Rubric'}<br>\r\n            Generated: ${currentDate} | ${currentTime}\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"table-container\">\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>#</th><th>Student ID</th><th>Name</th><th>Email</th>\r\n                    <th>Program</th><th>Status</th><th>Grade Type</th>\r\n                    <th>Final Grade</th><th>Letter Grade</th><th>Percentage</th><th>Last Modified</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ${rowsHtml}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n        Imported from: ${classList.fileName}\r\n    </div>\r\n</body>\r\n</html>`;\r\n    };\r\n\r\n    // PRESERVED: Export class grades as HTML\r\n    const exportClassGradesHTML = () => {\r\n        if (!classList) return;\r\n\r\n        console.log('üîÑ Exporting HTML with grade calculations...');\r\n\r\n        const htmlContent = getClassGradesHTML();\r\n        const blob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n\r\n        link.href = url;\r\n        link.download = `${classList.courseMetadata?.courseCode || 'Class'}_grades.html`;\r\n        link.style.display = 'none';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        URL.revokeObjectURL(url);\r\n\r\n        console.log('‚úÖ HTML export completed with letter grades');\r\n    };\r\n\r\n    // MODIFIED: Portrait PDF report with logo support\r\n    const getPortraitClassReportHTML = () => {\r\n        const now = new Date();\r\n        const currentDate = now.toLocaleDateString('en-CA');\r\n        const currentTime = now.toLocaleTimeString('en-CA');\r\n        const rubricName = sharedRubric?.assignmentInfo?.title || 'Unnamed Rubric';\r\n\r\n        console.log('üîÑ Generating portrait report with grade calculations...');\r\n\r\n        // Calculate grades for all students\r\n        const studentRows = classList.students.map((student, idx) => {\r\n            const info = calculateStudentGrade(student.id);\r\n            const num = info.score !== 'N/A'\r\n                ? parseFloat(info.score)\r\n                : 0;\r\n\r\n            return `\r\n                <tr>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center;\">${idx + 1}</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd;\">${student.id}</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; font-weight: 500;\">${student.name}</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: 600; font-size: 14px;\">${info.score}</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-weight: 600;\">${info.letter}</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center;\">${info.percentage}%</td>\r\n                    <td style=\"padding: 6px; border: 1px solid #ddd; text-align: center; font-size: 11px; color: #666;\">\r\n                        ${info.status === 'final' ? '‚úÖ Final' : info.status === 'draft' ? 'üìù Draft' : '‚è≥ Pending'}\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        }).join('');\r\n\r\n        // NEW: Logo section for PDF\r\n        const logoSection = sessionLogo ?\r\n            `<div style=\"text-align: center; margin-bottom: 25px;\">\r\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 60px; max-width: 250px; object-fit: contain;\" />\r\n            </div>` : '';\r\n\r\n        return `<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Class Report - ${classList.courseMetadata?.courseCode || 'Course'}</title>\r\n    <style>\r\n        @page { size: A4 portrait; margin: 0.75in; }\r\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; font-size: 12px; color: #333; }\r\n        .header { text-align: center; margin-bottom: 25px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; }\r\n        .header h1 { margin: 0 0 8px 0; font-size: 22px; font-weight: 700; }\r\n        .header .subtitle { font-size: 14px; opacity: 0.9; }\r\n        .metadata { background: #f8f9fa; padding: 12px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid #667eea; }\r\n        .metadata div { margin: 3px 0; }\r\n        .metadata strong { color: #495057; }\r\n        table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 11px; }\r\n        th { background: #495057; color: white; padding: 8px 6px; text-align: center; font-weight: 600; font-size: 10px; text-transform: uppercase; }\r\n        td { padding: 6px; border: 1px solid #ddd; }\r\n        tr:nth-child(even) { background: #f8f9fa; }\r\n        .footer { text-align: center; margin-top: 20px; font-size: 10px; color: #6c757d; border-top: 1px solid #dee2e6; padding-top: 10px; }\r\n        @media print { \r\n            body { print-color-adjust: exact; -webkit-print-color-adjust: exact; } \r\n            .header { break-inside: avoid; }\r\n            table { break-inside: auto; }\r\n            tr { break-inside: avoid; break-after: auto; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    ${logoSection}\r\n    <div class=\"header\">\r\n        <h1>üìä ${rubricName} - Class Results</h1>\r\n        <div class=\"subtitle\">${classList.courseMetadata?.courseCode || ''} ${classList.courseMetadata?.courseName || ''}</div>\r\n    </div>\r\n\r\n    <div class=\"metadata\">\r\n        <div><strong>Course:</strong> ${classList.courseMetadata?.courseCode || 'N/A'} - ${classList.courseMetadata?.courseName || 'N/A'}</div>\r\n        <div><strong>Section:</strong> ${classList.courseMetadata?.section || 'N/A'}</div>\r\n        <div><strong>Instructor:</strong> ${classList.courseMetadata?.instructor || 'N/A'}</div>\r\n        <div><strong>Assessment:</strong> ${rubricName}</div>\r\n        <div><strong>Generated:</strong> ${currentDate} at ${currentTime}</div>\r\n        <div><strong>Total Students:</strong> ${classList.students.length}</div>\r\n    </div>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th style=\"width: 8%;\">#</th>\r\n                <th style=\"width: 15%;\">Student ID</th>\r\n                <th style=\"width: 25%;\">Name</th>\r\n                <th style=\"width: 12%;\">Score</th>\r\n                <th style=\"width: 10%;\">Grade</th>\r\n                <th style=\"width: 12%;\">Percentage</th>\r\n                <th style=\"width: 18%;\">Status</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${studentRows}\r\n        </tbody>\r\n    </table>\r\n\r\n    <div class=\"footer\">\r\n        <div>Generated by GradingPilot ‚Ä¢ ${new Date().toLocaleDateString()} ‚Ä¢ Session-Only Data</div>\r\n        <div style=\"margin-top: 5px;\">Imported from: ${classList.fileName}</div>\r\n    </div>\r\n</body>\r\n</html>`;\r\n    };\r\n\r\n    // PRESERVED: Export portrait PDF\r\n    const exportClassGradesPortraitPDF = () => {\r\n        if (!classList) return;\r\n\r\n        console.log('üîÑ Generating PDF with grade calculations...');\r\n\r\n        const htmlContent = getPortraitClassReportHTML();\r\n        const printWin = window.open('', '_blank', 'width=800,height=600');\r\n        printWin.document.write(htmlContent);\r\n        printWin.document.close();\r\n        printWin.focus();\r\n\r\n        printWin.onload = () => {\r\n            printWin.print();\r\n        };\r\n\r\n        console.log('‚úÖ PDF generation completed with letter grades');\r\n    };\r\n\r\n    // PRESERVED: Complete exportStudentGrade function (preserved exactly from original)\r\n    const exportStudentGrade = (studentId) => {\r\n        // 1. Make sure we have a classList and sharedRubric\r\n        if (!classList || !sharedRubric) {\r\n            alert('No class list or rubric available. Please ensure both are loaded.');\r\n            return;\r\n        }\r\n\r\n        // 2. Find the student in the class list\r\n        const student = classList.students.find(s => s.id === studentId);\r\n        if (!student) {\r\n            alert('Student not found in class list.');\r\n            return;\r\n        }\r\n\r\n        // 3. Load the student's grade data\r\n        const gradeStatus = getGradeStatus(studentId);\r\n        let gradeData = null;\r\n\r\n        if (gradeStatus === 'final') {\r\n            gradeData = loadFinalGrade(studentId);\r\n        } else if (gradeStatus === 'draft') {\r\n            gradeData = loadDraft(studentId);\r\n        } else {\r\n            alert('No grade data found for this student. Please grade the student first.');\r\n            return;\r\n        }\r\n\r\n        if (!gradeData) {\r\n            alert('Unable to load grade data for this student.');\r\n            return;\r\n        }\r\n\r\n        // 4. Access active late policy levels\r\n        const activeLevels = currentLatePolicy?.levels || DEFAULT_LATE_POLICY.levels;\r\n        const getSafeLatePolicy = (level) => {\r\n            if (!level || typeof level !== \"string\" || !activeLevels[level]) {\r\n                return activeLevels.none;\r\n            }\r\n            return activeLevels[level];\r\n        };\r\n\r\n        // 5. Calculate score using the same logic as calculateTotalScore from GradingTemplate\r\n        let totalRawScore = 0;\r\n        let totalMaxScore = 0;\r\n        let totalFinalScore = 0;\r\n\r\n        if (gradeData.rubricGrading && sharedRubric.criteria) {\r\n            sharedRubric.criteria.forEach(criterion => {\r\n                const grading = gradeData.rubricGrading[criterion.id];\r\n                if (grading && grading.selectedLevel !== undefined) {\r\n                    const levelIndex = grading.selectedLevel;\r\n                    const points = sharedRubric.levels[levelIndex]?.points || 0;\r\n                    const criterionScore = points * criterion.multiplier;\r\n                    totalRawScore += criterionScore;\r\n                }\r\n\r\n                const maxPoints = sharedRubric.levels[sharedRubric.levels.length - 1]?.points || 0;\r\n                totalMaxScore += maxPoints * criterion.multiplier;\r\n            });\r\n        }\r\n\r\n        // Apply late policy if applicable\r\n        totalFinalScore = totalRawScore;\r\n        let penaltyApplied = false;\r\n\r\n        if (gradeData.studentInfo?.lateSubmission && gradeData.studentInfo?.lateSubmissionLevel) {\r\n            const latePolicy = getSafeLatePolicy(gradeData.studentInfo.lateSubmissionLevel);\r\n\r\n            if (latePolicy.action === 'percentage') {\r\n                totalFinalScore = totalRawScore * (latePolicy.value / 100);\r\n                penaltyApplied = true;\r\n            } else if (latePolicy.action === 'deduction') {\r\n                totalFinalScore = Math.max(0, totalRawScore - latePolicy.value);\r\n                penaltyApplied = true;\r\n            }\r\n        }\r\n\r\n        const percentage = totalMaxScore > 0 ? ((totalFinalScore / totalMaxScore) * 100) : 0;\r\n\r\n        // Generate attachments HTML\r\n        const attachmentsHTML = gradeData.attachments?.map((att, index) => {\r\n            if (att.base64Data) {\r\n                return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\r\n            } else {\r\n                return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">üìÑ</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\r\n            }\r\n        }).join('') || '';\r\n\r\n        // Generate video links HTML\r\n        const videoLinksHTML = gradeData.videoLinks?.map(link =>\r\n            `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">üé•</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`\r\n        ).join('') || '';\r\n\r\n        // Generate rubric table HTML\r\n        const rubricTableHTML = sharedRubric ? `\r\n            <table style=\"width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.875rem;\">\r\n                <thead>\r\n                    <tr style=\"background: #f8f9fa;\">\r\n                        <th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: left; font-weight: 600;\">Criterion</th>\r\n                        ${sharedRubric.levels.map(level =>\r\n            `<th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">${level.name}<br><span style=\"font-size: 0.75rem; font-weight: normal;\">(${level.points} pts)</span></th>`\r\n        ).join('')}\r\n                        <th style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">Score</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${sharedRubric.criteria.map(criterion => {\r\n            const grading = gradeData.rubricGrading?.[criterion.id];\r\n            const selectedLevel = grading?.selectedLevel;\r\n            const score = selectedLevel !== undefined\r\n                ? (sharedRubric.levels[selectedLevel]?.points || 0) * criterion.multiplier\r\n                : 0;\r\n\r\n            return `\r\n                            <tr>\r\n                                <td style=\"border: 1px solid #dee2e6; padding: 0.75rem; font-weight: 500; vertical-align: top;\">\r\n                                    ${criterion.name}\r\n                                    <br><span style=\"font-size: 0.75rem; color: #6c757d;\">Weight: ${criterion.multiplier}x</span>\r\n                                </td>\r\n                                ${sharedRubric.levels.map((level, levelIndex) =>\r\n                `<td style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; vertical-align: top; ${selectedLevel === levelIndex ? 'background: #e7f3ff; font-weight: 600;' : ''}\">\r\n                                        ${selectedLevel === levelIndex ? '‚úì' : ''}\r\n                                    </td>`\r\n            ).join('')}\r\n                                <td style=\"border: 1px solid #dee2e6; padding: 0.75rem; text-align: center; font-weight: 600;\">\r\n                                    ${score.toFixed(1)}\r\n                                </td>\r\n                            </tr>\r\n                        `;\r\n        }).join('')}\r\n                </tbody>\r\n            </table>\r\n        ` : '';\r\n\r\n        // NEW: Include logo in individual reports\r\n        const logoSection = sessionLogo ?\r\n            `<div style=\"text-align: center; margin-bottom: 20px;\">\r\n                <img src=\"${sessionLogo}\" alt=\"School Logo\" style=\"max-height: 60px; max-width: 250px; object-fit: contain;\" />\r\n            </div>` : '';\r\n\r\n        // Generate HTML report (based on GradingTemplate.js generateStudentReportHTML)\r\n        const generateStudentReportHTML = () => {\r\n            return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Grade Report - ${student.name}</title>\r\n    <style>\r\n        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #f8f9fa; color: #333; line-height: 1.6; }\r\n        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; text-align: center; }\r\n        .header h1 { margin: 0 0 0.5rem 0; font-size: 2rem; font-weight: 700; }\r\n        .header .subtitle { opacity: 0.9; font-size: 1.1rem; }\r\n        .content { padding: 2rem; }\r\n        .score-section { background: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; text-align: center; }\r\n        .score-big { font-size: 3rem; font-weight: 700; color: #0066cc; margin: 0; }\r\n        .score-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; }\r\n        .score-item { background: white; padding: 1rem; border-radius: 6px; text-align: center; }\r\n        .score-item .label { font-size: 0.875rem; color: #666; margin-bottom: 0.25rem; }\r\n        .score-item .value { font-size: 1.25rem; font-weight: 600; color: #333; }\r\n        .section { margin: 2rem 0; }\r\n        .section h2 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: #333; border-bottom: 2px solid #eee; padding-bottom: 0.5rem; }\r\n        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }\r\n        .info-item { background: #f8f9fa; padding: 1rem; border-radius: 6px; }\r\n        .info-item .label { font-size: 0.875rem; color: #666; margin-bottom: 0.25rem; }\r\n        .info-item .value { font-weight: 500; }\r\n        .feedback-section { background: #f8f9fa; border-radius: 8px; padding: 1.5rem; margin: 1rem 0; }\r\n        .feedback-section h3 { margin: 0 0 1rem 0; color: #495057; }\r\n        .feedback-content { background: white; padding: 1rem; border-radius: 4px; border-left: 4px solid #007bff; }\r\n        .attachments-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }\r\n        .attachment-item { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; text-align: center; }\r\n        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }\r\n        th, td { border: 1px solid #dee2e6; padding: 0.75rem; text-align: left; }\r\n        th { background: #f8f9fa; font-weight: 600; }\r\n        .footer { text-align: center; padding: 1rem; border-top: 1px solid #eee; color: #666; font-size: 0.875rem; }\r\n        @media print { \r\n            body { background: white; } \r\n            .container { box-shadow: none; } \r\n            @page { margin: 0.5in; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        ${logoSection}\r\n        <div class=\"header\">\r\n            <h1>üìä Grade Report</h1>\r\n            <div class=\"subtitle\">${sharedRubric.assignmentInfo?.title || 'Assessment'}</div>\r\n        </div>\r\n\r\n        <div class=\"content\">\r\n            <div class=\"section\">\r\n                <div class=\"info-grid\">\r\n                    <div class=\"info-item\">\r\n                        <div class=\"label\">Student Name</div>\r\n                        <div class=\"value\">${student.name}</div>\r\n                    </div>\r\n                    <div class=\"info-item\">\r\n                        <div class=\"label\">Student ID</div>\r\n                        <div class=\"value\">${student.id}</div>\r\n                    </div>\r\n                    <div class=\"info-item\">\r\n                        <div class=\"label\">Course</div>\r\n                        <div class=\"value\">${gradeData.course?.code || 'N/A'} - ${gradeData.course?.name || 'N/A'}</div>\r\n                    </div>\r\n                    <div class=\"info-item\">\r\n                        <div class=\"label\">Assignment</div>\r\n                        <div class=\"value\">${sharedRubric.assignmentInfo?.title || 'N/A'}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"score-section\">\r\n                <div class=\"score-big\">${totalFinalScore.toFixed(1)}/${totalMaxScore}</div>\r\n                <div class=\"score-details\">\r\n                    <div class=\"score-item\">\r\n                        <div class=\"label\">Raw Score</div>\r\n                        <div class=\"value\">${totalRawScore.toFixed(1)}</div>\r\n                    </div>\r\n                    <div class=\"score-item\">\r\n                        <div class=\"label\">Final Score</div>\r\n                        <div class=\"value\">${totalFinalScore.toFixed(1)}</div>\r\n                    </div>\r\n                    <div class=\"score-item\">\r\n                        <div class=\"label\">Percentage</div>\r\n                        <div class=\"value\">${percentage.toFixed(1)}%</div>\r\n                    </div>\r\n                    <div class=\"score-item\">\r\n                        <div class=\"label\">Letter Grade</div>\r\n                        <div class=\"value\">${getLetterGrade(percentage, student.program?.toLowerCase() || 'degree')}</div>\r\n                    </div>\r\n                </div>\r\n                ${penaltyApplied ? '<div style=\"margin-top: 1rem; color: #dc3545; font-weight: 500;\">‚ö†Ô∏è Late penalty applied</div>' : ''}\r\n            </div>\r\n\r\n            ${rubricTableHTML ? `\r\n                <div class=\"section\">\r\n                    <h2>üìã Detailed Rubric Assessment</h2>\r\n                    ${rubricTableHTML}\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${gradeData.feedback?.general ? `\r\n                <div class=\"section\">\r\n                    <h2>üí¨ General Feedback</h2>\r\n                    <div class=\"feedback-section\">\r\n                        <div class=\"feedback-content\">${gradeData.feedback.general}</div>\r\n                    </div>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${gradeData.feedback?.strengths ? `\r\n                <div class=\"section\">\r\n                    <h2>‚úÖ Strengths</h2>\r\n                    <div class=\"feedback-section\">\r\n                        <div class=\"feedback-content\">${gradeData.feedback.strengths}</div>\r\n                    </div>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${gradeData.feedback?.improvements ? `\r\n                <div class=\"section\">\r\n                    <h2>üéØ Areas for Improvement</h2>\r\n                    <div class=\"feedback-section\">\r\n                        <div class=\"feedback-content\">${gradeData.feedback.improvements}</div>\r\n                    </div>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${attachmentsHTML ? `\r\n                <div class=\"section\">\r\n                    <h2>üìé Attachments</h2>\r\n                    <div class=\"attachments-grid\">\r\n                        ${attachmentsHTML}\r\n                    </div>\r\n                </div>\r\n            ` : ''}\r\n\r\n            ${videoLinksHTML ? `\r\n                <div class=\"section\">\r\n                    <h2>üé• Video Links</h2>\r\n                    ${videoLinksHTML}\r\n                </div>\r\n            ` : ''}\r\n        </div>\r\n\r\n        <div class=\"footer\">\r\n            Generated on ${new Date().toLocaleDateString()} ‚Ä¢ GradingPilot Session Report\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>`;\r\n        };\r\n\r\n        // Generate and export the HTML file\r\n        try {\r\n            const htmlContent = generateStudentReportHTML();\r\n            const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n            const url = URL.createObjectURL(htmlBlob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = `grade_report_${student.name.replace(/[^a-zA-Z0-9]/g, '_')}_${sharedRubric.assignmentInfo?.title?.replace(/[^a-zA-Z0-9]/g, '_') || 'assignment'}.html`;\r\n            link.click();\r\n            URL.revokeObjectURL(url);\r\n\r\n            console.log(`‚úÖ Individual grade report exported for student: ${student.name}`);\r\n        } catch (error) {\r\n            console.error('Error generating individual grade report:', error);\r\n            alert('Error generating grade report. Please check the console for details.');\r\n        }\r\n    };\r\n\r\n    // PRIVACY: Modified file upload handling - NO AUTO-PERSISTENCE\r\n    const handleFileUpload = async (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        // PRIVACY: Check session status\r\n        if (!sessionActive) {\r\n            alert('Session has expired. Please refresh the page to start a new session.');\r\n            return;\r\n        }\r\n\r\n        setImportStatus('processing');\r\n\r\n        try {\r\n            // Use Excel parser instead of manual CSV parsing\r\n            const result = await parseExcelFile(file);\r\n\r\n            if (!result.success) {\r\n                throw new Error(result.error || 'Failed to parse Excel file');\r\n            }\r\n\r\n            // Validate the parsed student data\r\n            const validation = validateStudentData(result.students);\r\n\r\n            if (result.students.length === 0) {\r\n                throw new Error('No valid student records found in Excel file');\r\n            }\r\n\r\n            // Create grading progress tracking for each student\r\n            const gradingProgress = result.students.map(() => ({\r\n                status: 'pending',\r\n                lastModified: null,\r\n                gradeType: null\r\n            }));\r\n\r\n            // PRIVACY: Create the class list data structure with session-only storage\r\n            const classListData = {\r\n                students: result.students,\r\n                gradingProgress,\r\n                fileName: file.name,\r\n                fileSize: file.size,\r\n                importTime: new Date().toISOString(),\r\n                courseMetadata: {\r\n                    courseCode: result.courseMetadata?.courseCode || 'IMPORTED',\r\n                    courseName: result.courseMetadata?.courseName || 'Excel Import',\r\n                    section: result.courseMetadata?.section || '',\r\n                    instructor: result.courseMetadata?.instructor || '',\r\n                    term: result.courseMetadata?.term || '',\r\n                    program: result.courseMetadata?.program || ''\r\n                }\r\n            };\r\n\r\n            // PRIVACY: Set class list in session-only context\r\n            setClassList(classListData);\r\n            setValidationErrors(validation.errors);\r\n            setImportStatus('success');\r\n\r\n            console.log(`‚úÖ Imported ${result.students.length} students from ${file.name}`);\r\n            console.log('üìä Class list stored in session-only memory (auto-clears in 1 hour)');\r\n\r\n        } catch (error) {\r\n            console.error('Import error:', error);\r\n            setImportStatus('error');\r\n            setValidationErrors([error.message]);\r\n        }\r\n    };\r\n\r\n    // PRESERVED: Calculate grading progress\r\n    const getGradingProgress = () => {\r\n        if (!classList) return { completed: 0, total: 0, percentage: 0, final: 0, draft: 0 };\r\n\r\n        const final = classList.students.filter(student => getGradeStatus(student.id) === 'final').length;\r\n        const draft = classList.students.filter(student => getGradeStatus(student.id) === 'draft').length;\r\n        const completed = final + draft;\r\n        const total = classList.students.length;\r\n        const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\r\n\r\n        return { completed, total, percentage, final, draft };\r\n    };\r\n\r\n    // PRESERVED: Export functions\r\n    const exportClassList = () => {\r\n        if (!classList || !classList.students) {\r\n            alert('No class list to export');\r\n            return;\r\n        }\r\n\r\n        const exportData = {\r\n            ...classList,\r\n            exportedAt: new Date().toISOString(),\r\n            version: '1.0',\r\n            sessionExport: true,\r\n            sessionLogo: sessionLogo // Include logo in JSON export\r\n        };\r\n\r\n        const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `class_list_${classList.courseMetadata?.courseCode || 'course'}_${new Date().toISOString().split('T')[0]}.json`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const exportToExcel = () => {\r\n        if (!classList || !classList.students) {\r\n            alert('No class list to export');\r\n            return;\r\n        }\r\n\r\n        const worksheetData = [];\r\n\r\n        // Header row\r\n        worksheetData.push(['Student ID', 'Student Name', 'Email', 'Program', 'Grading Status']);\r\n\r\n        // Student rows\r\n        classList.students.forEach((student, index) => {\r\n            const progress = classList.gradingProgress[index] || {};\r\n            const gradeStatus = getGradeStatus(student.id);\r\n\r\n            worksheetData.push([\r\n                student.id,\r\n                student.name,\r\n                student.email || '',\r\n                student.program || '',\r\n                gradeStatus === 'final' ? 'Final' : gradeStatus === 'draft' ? 'Draft' : 'Pending'\r\n            ]);\r\n        });\r\n\r\n        const wb = XLSX.utils.book_new();\r\n        const ws = XLSX.utils.aoa_to_sheet(worksheetData);\r\n        XLSX.utils.book_append_sheet(wb, ws, 'Class List');\r\n\r\n        XLSX.writeFile(wb, `class_list_${classList.courseMetadata?.courseCode || 'course'}_${new Date().toISOString().split('T')[0]}.xlsx`);\r\n    };\r\n\r\n    // PRESERVED: Clear class list\r\n    const clearClassList = () => {\r\n        if (window.confirm('Are you sure you want to clear the current class list? This action cannot be undone.')) {\r\n            setClassList(null);\r\n            setValidationErrors([]);\r\n            setImportStatus('idle');\r\n            setCurrentStudent(null);\r\n            console.log('üóëÔ∏è Class list cleared from session');\r\n        }\r\n    };\r\n\r\n    // PRESERVED: Load student for grading\r\n    const loadStudentForGrading = (studentId) => {\r\n        const student = classList.students.find(s => s.id === studentId);\r\n        if (student && sharedRubric) {\r\n            setCurrentStudent(student);\r\n            setActiveTab('grading');\r\n            console.log(`üë§ Loading student for grading: ${student.name}`);\r\n        } else if (!sharedRubric) {\r\n            alert('Please create or load a rubric before grading students.');\r\n        }\r\n    };\r\n\r\n    // PRESERVED: Grade status helpers\r\n    const getGradeStatusDisplay = (studentId) => {\r\n        const status = getGradeStatus(studentId);\r\n\r\n        if (status === 'final') {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\r\n                    <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium\">\r\n                        Final\r\n                    </span>\r\n                </div>\r\n            );\r\n        } else if (status === 'draft') {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\r\n                    <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium\">\r\n                        Draft\r\n                    </span>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-gray-300 rounded-full\"></div>\r\n                    <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">\r\n                        Pending\r\n                    </span>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    const finalizeGrade = (studentId) => {\r\n        contextFinalizeGrade(studentId);\r\n    };\r\n\r\n    const unlockGrade = (studentId) => {\r\n        contextUnlockGrade(studentId);\r\n    };\r\n\r\n    // PRESERVED: Filtering and pagination\r\n    const filteredStudents = classList?.students?.filter(student => {\r\n        const searchLower = searchTerm.toLowerCase();\r\n        return (\r\n            student.name.toLowerCase().includes(searchLower) ||\r\n            student.id.toLowerCase().includes(searchLower) ||\r\n            (student.email && student.email.toLowerCase().includes(searchLower))\r\n        );\r\n    }) || [];\r\n\r\n    const sortedStudents = [...filteredStudents].sort((a, b) => {\r\n        let aValue, bValue;\r\n\r\n        switch (sortBy) {\r\n            case 'name':\r\n                aValue = a.name.toLowerCase();\r\n                bValue = b.name.toLowerCase();\r\n                break;\r\n            case 'id':\r\n                aValue = a.id.toLowerCase();\r\n                bValue = b.id.toLowerCase();\r\n                break;\r\n            case 'email':\r\n                aValue = (a.email || '').toLowerCase();\r\n                bValue = (b.email || '').toLowerCase();\r\n                break;\r\n            case 'status':\r\n                aValue = getGradeStatus(a.id);\r\n                bValue = getGradeStatus(b.id);\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n\r\n        if (aValue < bValue) return sortOrder === 'asc' ? -1 : 1;\r\n        if (aValue > bValue) return sortOrder === 'asc' ? 1 : -1;\r\n        return 0;\r\n    });\r\n\r\n    const totalPages = Math.ceil(sortedStudents.length / studentsPerPage);\r\n    const startIndex = (currentPage - 1) * studentsPerPage;\r\n    const paginatedStudents = sortedStudents.slice(startIndex, startIndex + studentsPerPage);\r\n\r\n    // REFACTORED: This is the view shown before a class list is uploaded.\r\n    // It's been updated to match the provided screenshot, with improved layout and contrast.\r\n    if (!classList) {\r\n        return (\r\n            <div className=\"bg-gray-50 p-4 sm:p-6\">\r\n                {/* Privacy Notice Banner */}\r\n                <div className=\"bg-yellow-100 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded-md mb-6 flex items-start gap-3\">\r\n                    <AlertCircle className=\"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5\" />\r\n                    <div>\r\n                        <h3 className=\"font-bold\">Privacy Notice</h3>\r\n                        <p className=\"text-sm\">\r\n                            All imported data is stored in a temporary session and will be automatically cleared after 1 hour of inactivity or when you close this tab.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Content Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n\r\n                    {/* Left Column: Main Upload Area */}\r\n                    <div className=\"lg:col-span-2\">\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 h-full flex flex-col items-center justify-center p-8\">\r\n                            <div className=\"border-2 border-dashed border-gray-300 rounded-xl w-full h-full flex flex-col items-center justify-center p-8 text-center bg-gray-50/50 hover:bg-gray-50 transition-colors\">\r\n                                <div className=\"mb-4\">\r\n                                    <Upload size={48} className=\"text-blue-500 mx-auto\" />\r\n                                </div>\r\n                                <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">Upload Your Excel Class List</h2>\r\n                                <p className=\"text-gray-500 mb-6\">Drag and drop your .xlsx or .xls file here, or click to browse</p>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputRef}\r\n                                    accept=\".xlsx,.xls\"\r\n                                    onChange={handleFileUpload}\r\n                                    className=\"hidden\"\r\n                                    disabled={importStatus === 'processing'}\r\n                                />\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    disabled={importStatus === 'processing'}\r\n                                    className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2\"\r\n                                >\r\n                                    {importStatus === 'processing' ? (\r\n                                        <>\r\n                                            <RefreshCw size={18} className=\"animate-spin\" />\r\n                                            Processing...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <FileSpreadsheet size={18} />\r\n                                            Choose Excel File\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                                {importStatus === 'error' && (\r\n                                    <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-left w-full\">\r\n                                        <div className=\"flex items-center gap-2 text-red-700\">\r\n                                            <AlertCircle size={18} />\r\n                                            <h4 className=\"font-medium\">Import Failed</h4>\r\n                                        </div>\r\n                                        <div className=\"mt-2 text-sm text-red-600\">\r\n                                            {validationErrors.map((error, index) => (\r\n                                                <div key={index}>{error}</div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Column: Info Sidebar */}\r\n                    <div className=\"lg:col-span-1 space-y-6\">\r\n                        {/* Card 1: Required Format */}\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-5\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\">\r\n                                <CheckCircle2 size={20} className=\"text-green-600\" />\r\n                                Required Format\r\n                            </h3>\r\n                            <ul className=\"space-y-2 text-sm text-gray-600 list-disc list-inside\">\r\n                                <li>Headers required: <strong>Student ID</strong>, <strong>First Name</strong>, <strong>Last Name</strong> (or a single <strong>Name</strong> column).</li>\r\n                                <li>Optional columns: <strong>Email</strong>, <strong>Program</strong>.</li>\r\n                                <li>Course metadata (e.g., \"Course Code\", \"Instructor\") can be added in the first few rows.</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        {/* Card 2: Privacy Protection */}\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-5\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\">\r\n                                <Shield size={20} className=\"text-blue-600\" />\r\n                                Privacy Protection\r\n                            </h3>\r\n                            <ul className=\"space-y-2 text-sm text-gray-600\">\r\n                                <li className=\"flex items-center gap-3\"><Timer size={16} className=\"text-gray-500\" />Data stored in session only (1 hour max)</li>\r\n                                <li className=\"flex items-center gap-3\"><Lock size={16} className=\"text-gray-500\" />No persistent browser storage</li>\r\n                                <li className=\"flex items-center gap-3\"><RefreshCw size={16} className=\"text-gray-500\" />Automatic data clearing on restart</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        {/* Card 3: Quick Start */}\r\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-5\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2\">\r\n                                <GraduationCap size={20} className=\"text-indigo-600\" />\r\n                                Quick Start\r\n                            </h3>\r\n                            <ol className=\"space-y-2 text-sm text-gray-600\">\r\n                                <li className=\"flex items-start gap-3\">\r\n                                    <span className=\"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\">1</span>\r\n                                    <span>Upload your Excel class list.</span>\r\n                                </li>\r\n                                <li className=\"flex items-start gap-3\">\r\n                                    <span className=\"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\">2</span>\r\n                                    <span>Create or import a rubric in the next tabs.</span>\r\n                                </li>\r\n                                <li className=\"flex items-start gap-3\">\r\n                                    <span className=\"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\">3</span>\r\n                                    <span>Begin grading students from the list.</span>\r\n                                </li>\r\n                                <li className=\"flex items-start gap-3\">\r\n                                    <span className=\"bg-gray-200 text-gray-700 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5\">4</span>\r\n                                    <span>Export class or individual reports.</span>\r\n                                </li>\r\n                            </ol>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Main interface with class list loaded (preserved from original)\r\n    const progress = getGradingProgress();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            {/* PRIVACY: Session warning banner */}\r\n            <div className=\"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 p-4\">\r\n                <div className=\"flex items-center\">\r\n                    <div className=\"flex-shrink-0\">\r\n                        <AlertCircle className=\"h-5 w-5 text-amber-400\" />\r\n                    </div>\r\n                    <div className=\"ml-3\">\r\n                        <p className=\"text-sm text-amber-700\">\r\n                            <strong>Privacy Notice:</strong> All imported data is stored in session only and will be automatically cleared after 1 hour\r\n                            or when the application restarts.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-6\">\r\n                {/* Header Section */}\r\n                <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 mb-8 overflow-hidden\">\r\n                    {/* Header Bar */}\r\n                    <div className=\"bg-gradient-to-r from-blue-700 to-indigo-700 px-8 py-6\">\r\n                        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n                            <div className=\"flex items-center space-x-4\">\r\n                                <div className=\"bg-white/30 rounded-lg p-3 backdrop-blur-sm\">\r\n                                    <Users size={32} className=\"text-white\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h1 className=\"text-3xl font-bold text-white drop-shadow-lg\">Class Manager</h1>\r\n                                    <p className=\"text-blue-100 font-medium text-lg drop-shadow-md\">\r\n                                        {classList.students.length} students imported\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Logo Display */}\r\n                            {sessionLogo && (\r\n                                <div className=\"mt-4 lg:mt-0 text-center\">\r\n                                    <img\r\n                                        src={sessionLogo}\r\n                                        alt=\"School Logo\"\r\n                                        className=\"max-h-12 max-w-32 mx-auto object-contain bg-white/20 rounded-lg p-2 backdrop-blur-sm\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Action Bar */}\r\n                    <div className=\"px-8 py-6 bg-gray-50 border-b border-gray-200\">\r\n                        <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n                            <div className=\"flex flex-wrap items-center gap-3\">\r\n                                <button\r\n                                    onClick={exportClassList}\r\n                                    className=\"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors\"\r\n                                >\r\n                                    <Download size={16} />\r\n                                    Export JSON\r\n                                </button>\r\n                                <button\r\n                                    onClick={exportToExcel}\r\n                                    className=\"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors\"\r\n                                >\r\n                                    <FileSpreadsheet size={16} />\r\n                                    Export Excel\r\n                                </button>\r\n                                <button\r\n                                    onClick={clearClassList}\r\n                                    className=\"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors\"\r\n                                >\r\n                                    <Trash2 size={16} />\r\n                                    Clear List\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-3\">\r\n                                {!sessionLogo && (\r\n                                    <button\r\n                                        onClick={() => logoInputRef.current?.click()}\r\n                                        className=\"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm\"\r\n                                    >\r\n                                        <Image size={16} />\r\n                                        Add Logo\r\n                                    </button>\r\n                                )}\r\n                                {sessionLogo && (\r\n                                    <button\r\n                                        onClick={removeLogo}\r\n                                        className=\"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors text-sm\"\r\n                                    >\r\n                                        <X size={16} />\r\n                                        Remove Logo\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Hidden logo input */}\r\n                            <input\r\n                                type=\"file\"\r\n                                ref={logoInputRef}\r\n                                accept=\"image/png,image/jpeg,image/jpg,image/svg+xml\"\r\n                                onChange={handleLogoUpload}\r\n                                className=\"hidden\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Import Summary */}\r\n                        <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Import Summary</h3>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                <div>\r\n                                    <span className=\"text-gray-600\">File:</span>\r\n                                    <div className=\"font-medium\">{classList.fileName}</div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-600\">Import Date:</span>\r\n                                    <div className=\"font-medium\">\r\n                                        {new Date(classList.importTime).toLocaleDateString()}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-600\">Storage:</span>\r\n                                    <div className=\"font-medium text-orange-600 flex items-center gap-1\">\r\n                                        <Shield size={12} />\r\n                                        Session Only\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-600\">Total Students:</span>\r\n                                    <div className=\"font-medium\">{classList.students.length}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Progress and Export Section */}\r\n                <div className=\"grid lg:grid-cols-4 gap-6 mb-8\">\r\n                    {/* Progress Card */}\r\n                    <div className=\"lg:col-span-3 bg-white rounded-xl shadow-lg border border-gray-100 p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2\">\r\n                            <BarChart3 size={20} />\r\n                            Grading Progress\r\n                        </h3>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"text-2xl font-bold text-gray-800\">{progress.total}</div>\r\n                                <div className=\"text-sm text-gray-600\">Total Students</div>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <div className=\"text-2xl font-bold text-green-600\">{progress.final}</div>\r\n                                <div className=\"text-sm text-gray-600\">Final Grades</div>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <div className=\"text-2xl font-bold text-yellow-600\">{progress.draft}</div>\r\n                                <div className=\"text-sm text-gray-600\">Draft Grades</div>\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <div className=\"text-2xl font-bold text-blue-600\">{progress.percentage}%</div>\r\n                                <div className=\"text-sm text-gray-600\">Complete</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n                            <div\r\n                                className=\"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500\"\r\n                                style={{ width: `${progress.percentage}%` }}\r\n                            ></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Export Reports Card */}\r\n                    <div className=\"bg-white rounded-xl shadow-lg border border-gray-100 p-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2\">\r\n                            <FileDown size={20} />\r\n                            Export Reports\r\n                        </h3>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={exportClassGradesHTML}\r\n                                disabled={!sharedRubric}\r\n                                className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm\"\r\n                            >\r\n                                <FileText size={16} />\r\n                                HTML Report\r\n                            </button>\r\n                            <button\r\n                                onClick={exportClassGradesPortraitPDF}\r\n                                disabled={!sharedRubric}\r\n                                className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm\"\r\n                            >\r\n                                <FileText size={16} />\r\n                                PDF Report\r\n                            </button>\r\n                            {!sharedRubric && (\r\n                                <p className=\"text-xs text-gray-500 text-center\">\r\n                                    Load a rubric to enable exports\r\n                                </p>\r\n                            )}\r\n                            {sessionLogo && (\r\n                                <p className=\"text-xs text-green-600 text-center flex items-center justify-center gap-1\">\r\n                                    <CheckCircle size={12} />\r\n                                    Logo will be included\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Search and Filter Bar */}\r\n                <div className=\"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6\">\r\n                    <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n                        <div className=\"flex-1 relative\">\r\n                            <Search size={20} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search students by name, ID, or email...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <select\r\n                                value={sortBy}\r\n                                onChange={(e) => setSortBy(e.target.value)}\r\n                                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            >\r\n                                <option value=\"name\">Sort by Name</option>\r\n                                <option value=\"id\">Sort by ID</option>\r\n                                <option value=\"email\">Sort by Email</option>\r\n                                <option value=\"status\">Sort by Status</option>\r\n                            </select>\r\n\r\n                            <button\r\n                                onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\r\n                                className=\"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                            >\r\n                                {sortOrder === 'asc' ? <SortAsc size={20} /> : <SortDesc size={20} />}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Student List */}\r\n                <div className=\"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"table-auto w-full\">\r\n                            <thead className=\"bg-gray-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        #\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Status\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Student ID\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Name\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Email\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Program\r\n                                    </th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                        Actions\r\n                                    </th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                {paginatedStudents.map((student, index) => {\r\n                                    const actualIndex = startIndex + index + 1;\r\n                                    const gradeStatus = getGradeStatus(student.id);\r\n\r\n                                    return (\r\n                                        <tr key={student.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                                {actualIndex}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                                {getGradeStatusDisplay(student.id)}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                                {student.id}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                                {student.name}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                                {student.email || '‚Äî'}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                                {student.program || '‚Äî'}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => loadStudentForGrading(student.id)}\r\n                                                        disabled={!sharedRubric}\r\n                                                        className=\"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded text-sm transition-colors\"\r\n                                                    >\r\n                                                        <GraduationCap size={14} />\r\n                                                        Grade\r\n                                                    </button>\r\n\r\n                                                    {gradeStatus === 'final' && (\r\n                                                        <>\r\n                                                            <button\r\n                                                                onClick={() => unlockGrade(student.id)}\r\n                                                                className=\"flex items-center gap-1 px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm transition-colors\"\r\n                                                            >\r\n                                                                <Unlock size={14} />\r\n                                                                Unlock\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => exportStudentGrade(student.id)}\r\n                                                                className=\"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors\"\r\n                                                            >\r\n                                                                <Download size={14} />\r\n                                                                Export\r\n                                                            </button>\r\n                                                        </>\r\n                                                    )}\r\n\r\n                                                    {gradeStatus === 'draft' && (\r\n                                                        <button\r\n                                                            onClick={() => finalizeGrade(student.id)}\r\n                                                            className=\"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm transition-colors\"\r\n                                                        >\r\n                                                            <Lock size={14} />\r\n                                                            Finalize\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {/* Pagination */}\r\n                    {totalPages > 1 && (\r\n                        <div className=\"px-6 py-4 border-t border-gray-200 flex items-center justify-between\">\r\n                            <div className=\"text-sm text-gray-700\">\r\n                                Showing {startIndex + 1} to {Math.min(startIndex + studentsPerPage, sortedStudents.length)} of {sortedStudents.length} students\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <button\r\n                                    onClick={() => setCurrentPage(currentPage - 1)}\r\n                                    disabled={currentPage === 1}\r\n                                    className=\"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\"\r\n                                >\r\n                                    Previous\r\n                                </button>\r\n                                <span className=\"px-3 py-1 text-sm\">\r\n                                    Page {currentPage} of {totalPages}\r\n                                </span>\r\n                                <button\r\n                                    onClick={() => setCurrentPage(currentPage + 1)}\r\n                                    disabled={currentPage === totalPages}\r\n                                    className=\"px-3 py-1 border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\"\r\n                                >\r\n                                    Next\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ClassListManager;"],"mappings":";;AAAA;AACA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AACvE,SACIC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,WAAW,EACtDC,WAAW,EAAEC,KAAK,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,QAAQ,EACrDC,QAAQ,EAAEC,SAAS,EAAEC,KAAK,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EACpDC,SAAS,EAAEC,IAAI,EAAEC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEC,YAAY,EAChDC,OAAO,EAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,eAAe,EAC3DC,YAAY,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,CAAC,QAClC,cAAc;AACrB,SAASC,aAAa,EAAEC,mBAAmB,QAAQ,iBAAiB;AACpE,OAAO,KAAKC,IAAI,MAAM,MAAM;;AAE5B;AACA;AACA;AACA;AAHA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAIA,MAAMC,cAAc,GAAGA,CAACC,UAAU,EAAEC,WAAW,GAAG,QAAQ,KAAK;EAC3D;EACA,MAAMC,MAAM,GAAG;IACXC,MAAM,EAAE,CACJ;MAAEC,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAI,CAAC,CACzB;IACDC,OAAO,EAAE,CACL;MAAEF,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAK,CAAC,EACxB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAI,CAAC,CACzB;IACDE,WAAW,EAAE,CACT;MAAEH,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAI,CAAC,EACvB;MAAED,GAAG,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAI,CAAC;EAE9B,CAAC;EAED,MAAMG,KAAK,GAAGN,MAAM,CAACD,WAAW,CAAC,IAAIC,MAAM,CAACC,MAAM;EAElD,KAAK,MAAMM,SAAS,IAAID,KAAK,EAAE;IAC3B,IAAIR,UAAU,IAAIS,SAAS,CAACL,GAAG,EAAE;MAC7B,OAAOK,SAAS,CAACJ,KAAK;IAC1B;EACJ;EAEA,OAAO,GAAG;AACd,CAAC;AAED,MAAMK,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,oBAAA;EAC3B,MAAM;IACFC,SAAS;IACTC,YAAY;IACZC,YAAY;IACZC,YAAY;IACZC,cAAc;IACdC,iBAAiB;IACjBC,MAAM;IACNC,WAAW;IACXC,cAAc;IACdC,SAAS;IACTC,cAAc;IACdC,cAAc;IACdC,SAAS;IACTC,WAAW,EAAEC,kBAAkB;IAC/BC,aAAa,EAAEC,oBAAoB;IACnCC,aAAa;IACbC;EACJ,CAAC,GAAGvC,aAAa,CAAC,CAAC;;EAEnB;EACA,MAAM,CAACwC,YAAY,EAAEC,eAAe,CAAC,GAAG/E,QAAQ,CAAC,MAAM,CAAC;EACxD,MAAM,CAACgF,WAAW,EAAEC,cAAc,CAAC,GAAGjF,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACkF,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnF,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACoF,WAAW,EAAEC,cAAc,CAAC,GAAGrF,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACsF,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGvF,QAAQ,CAAC,IAAIwF,GAAG,CAAC,CAAC,CAAC;EACnE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG1F,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC2F,eAAe,CAAC,GAAG3F,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC4F,UAAU,EAAEC,aAAa,CAAC,GAAG7F,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC8F,MAAM,EAAEC,SAAS,CAAC,GAAG/F,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACgG,SAAS,EAAEC,YAAY,CAAC,GAAGjG,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACkG,QAAQ,EAAEC,WAAW,CAAC,GAAGnG,QAAQ,CAAC,OAAO,CAAC;;EAEjD;EACA,MAAM,CAACoG,WAAW,EAAEC,cAAc,CAAC,GAAGrG,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACsG,cAAc,EAAEC,iBAAiB,CAAC,GAAGvG,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACwG,WAAW,EAAEC,cAAc,CAAC,GAAGzG,QAAQ,CAAC,IAAI,CAAC;;EAEpD;EACA,MAAM0G,YAAY,GAAGzG,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM0G,YAAY,GAAG1G,MAAM,CAAC,IAAI,CAAC;;EAEjC;EACA,MAAM2G,cAAc,GAAG,MAAOC,IAAI,IAAK;IACnC,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;MAC5B,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAE/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;QACnB,IAAI;UACA,MAAMC,IAAI,GAAG,IAAIC,UAAU,CAACF,CAAC,CAACG,MAAM,CAACC,MAAM,CAAC;UAC5C,MAAMC,QAAQ,GAAGhF,IAAI,CAACiF,IAAI,CAACL,IAAI,EAAE;YAAEM,IAAI,EAAE;UAAQ,CAAC,CAAC;UACnD,MAAMC,SAAS,GAAGH,QAAQ,CAACI,UAAU,CAAC,CAAC,CAAC;UACxC,MAAMC,SAAS,GAAGL,QAAQ,CAACM,MAAM,CAACH,SAAS,CAAC;UAC5C,MAAMI,QAAQ,GAAGvF,IAAI,CAACwF,KAAK,CAACC,aAAa,CAACJ,SAAS,EAAE;YAAEK,MAAM,EAAE;UAAE,CAAC,CAAC;UAEnE,IAAIH,QAAQ,CAACI,MAAM,GAAG,CAAC,EAAE;YACrBpB,OAAO,CAAC;cAAEqB,OAAO,EAAE,KAAK;cAAEC,KAAK,EAAE;YAA2D,CAAC,CAAC;YAC9F;UACJ;UAEA,MAAMC,OAAO,GAAGP,QAAQ,CAAC,CAAC,CAAC,CAACQ,GAAG,CAACC,CAAC,IAAIA,CAAC,GAAGA,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC;UAChF,MAAMC,QAAQ,GAAGb,QAAQ,CAACc,KAAK,CAAC,CAAC,CAAC,CAACC,MAAM,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,EAAE,CAAC,CAAC;UAEhG,MAAMC,QAAQ,GAAG,EAAE;UACnB,IAAIC,cAAc,GAAG,CAAC,CAAC;;UAEvB;UACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,IAAI,CAACnG,GAAG,CAAC,EAAE,EAAE0F,QAAQ,CAACT,MAAM,CAAC,EAAEiB,CAAC,EAAE,EAAE;YACpD,MAAML,GAAG,GAAGH,QAAQ,CAACQ,CAAC,CAAC;YACvB,IAAIL,GAAG,CAACZ,MAAM,GAAG,CAAC,EAAE;cAChB,MAAMmB,SAAS,GAAGP,GAAG,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC,CAACN,QAAQ,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,GAAG,EAAE;cAC/D,MAAMY,UAAU,GAAGR,GAAG,CAAC,CAAC,CAAC,GAAGA,GAAG,CAAC,CAAC,CAAC,CAACN,QAAQ,CAAC,CAAC,GAAG,EAAE;cAElD,IAAIa,SAAS,CAACE,QAAQ,CAAC,QAAQ,CAAC,IAAID,UAAU,EAAE;gBAC5CJ,cAAc,CAACM,UAAU,GAAGF,UAAU;cAC1C,CAAC,MAAM,IAAID,SAAS,CAACE,QAAQ,CAAC,YAAY,CAAC,IAAIF,SAAS,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAE;gBAC5EL,cAAc,CAACO,UAAU,GAAGH,UAAU;cAC1C,CAAC,MAAM,IAAID,SAAS,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE;gBACtCL,cAAc,CAACQ,OAAO,GAAGJ,UAAU;cACvC,CAAC,MAAM,IAAID,SAAS,CAACE,QAAQ,CAAC,MAAM,CAAC,IAAIF,SAAS,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAE;gBACrEL,cAAc,CAACS,IAAI,GAAGL,UAAU;cACpC,CAAC,MAAM,IAAID,SAAS,CAACE,QAAQ,CAAC,SAAS,CAAC,EAAE;gBACtCL,cAAc,CAACU,OAAO,GAAGN,UAAU;cACvC;YACJ;UACJ;;UAEA;UACA,MAAMO,YAAY,GAAGxB,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,CAACgB,QAAQ,CAAC,OAAO,CAAC,IAAIhB,CAAC,CAACgB,QAAQ,CAAC,MAAM,CAAC,CAAC;UACtF,MAAMQ,WAAW,GAAG1B,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,CAACgB,QAAQ,CAAC,MAAM,CAAC,IAAIhB,CAAC,CAACgB,QAAQ,CAAC,MAAM,CAAC,CAAC;UACpF,MAAMS,OAAO,GAAG3B,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,KAAK,MAAM,IAAIA,CAAC,KAAK,cAAc,CAAC;UAC5E,MAAM0B,KAAK,GAAG5B,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,CAACgB,QAAQ,CAAC,IAAI,CAAC,IAAIhB,CAAC,CAACgB,QAAQ,CAAC,QAAQ,CAAC,CAAC;UAC9E,MAAMW,QAAQ,GAAG7B,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,CAACgB,QAAQ,CAAC,OAAO,CAAC,IAAIhB,CAAC,CAACgB,QAAQ,CAAC,MAAM,CAAC,CAAC;UAClF,MAAMY,UAAU,GAAG9B,OAAO,CAACyB,SAAS,CAACvB,CAAC,IAAIA,CAAC,CAACgB,QAAQ,CAAC,SAAS,CAAC,CAAC;UAEhE,IAAI,CAACM,YAAY,KAAK,CAAC,CAAC,IAAIE,WAAW,KAAK,CAAC,CAAC,KAAKC,OAAO,KAAK,CAAC,CAAC,EAAE;YAC/DlD,OAAO,CAAC;cAAEqB,OAAO,EAAE,KAAK;cAAEC,KAAK,EAAE;YAA2E,CAAC,CAAC;YAC9G;UACJ;UAEA,IAAI6B,KAAK,KAAK,CAAC,CAAC,EAAE;YACdnD,OAAO,CAAC;cAAEqB,OAAO,EAAE,KAAK;cAAEC,KAAK,EAAE;YAAiD,CAAC,CAAC;YACpF;UACJ;;UAEA;UACAO,QAAQ,CAACyB,OAAO,CAAC,CAACtB,GAAG,EAAEuB,KAAK,KAAK;YAC7B,IAAIC,IAAI,GAAG,EAAE;YAEb,IAAIN,OAAO,KAAK,CAAC,CAAC,IAAIlB,GAAG,CAACkB,OAAO,CAAC,EAAE;cAChCM,IAAI,GAAGxB,GAAG,CAACkB,OAAO,CAAC,CAACxB,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;YACzC,CAAC,MAAM,IAAIoB,YAAY,KAAK,CAAC,CAAC,IAAIE,WAAW,KAAK,CAAC,CAAC,EAAE;cAClD,MAAMQ,SAAS,GAAGzB,GAAG,CAACe,YAAY,CAAC,GAAGf,GAAG,CAACe,YAAY,CAAC,CAACrB,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAG,EAAE;cAC9E,MAAM+B,QAAQ,GAAG1B,GAAG,CAACiB,WAAW,CAAC,GAAGjB,GAAG,CAACiB,WAAW,CAAC,CAACvB,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAG,EAAE;cAC3E6B,IAAI,GAAG,GAAGC,SAAS,IAAIC,QAAQ,EAAE,CAAC/B,IAAI,CAAC,CAAC;YAC5C;YAEA,MAAMgC,SAAS,GAAG3B,GAAG,CAACmB,KAAK,CAAC,GAAGnB,GAAG,CAACmB,KAAK,CAAC,CAACzB,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAG,EAAE;YAChE,MAAMiC,KAAK,GAAGR,QAAQ,KAAK,CAAC,CAAC,IAAIpB,GAAG,CAACoB,QAAQ,CAAC,GAAGpB,GAAG,CAACoB,QAAQ,CAAC,CAAC1B,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAG,EAAE;YACrF,MAAMmB,OAAO,GAAGO,UAAU,KAAK,CAAC,CAAC,IAAIrB,GAAG,CAACqB,UAAU,CAAC,GAAGrB,GAAG,CAACqB,UAAU,CAAC,CAAC3B,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAG,EAAE;YAE7F,IAAI6B,IAAI,IAAIG,SAAS,EAAE;cACnBxB,QAAQ,CAAC0B,IAAI,CAAC;gBACVC,EAAE,EAAEH,SAAS;gBACbH,IAAI,EAAEA,IAAI;gBACVI,KAAK,EAAEA,KAAK,IAAI,EAAE;gBAClBd,OAAO,EAAEA,OAAO,IAAI,EAAE;gBACtBiB,SAAS,EAAER,KAAK,GAAG;cACvB,CAAC,CAAC;YACN;UACJ,CAAC,CAAC;UAEFvD,OAAO,CAAC;YACJqB,OAAO,EAAE,IAAI;YACbc,QAAQ,EAAEA,QAAQ;YAClBC,cAAc,EAAEA,cAAc;YAC9B4B,SAAS,EAAEnC,QAAQ,CAACT,MAAM;YAC1BG,OAAO,EAAEA;UACb,CAAC,CAAC;QAEN,CAAC,CAAC,OAAOD,KAAK,EAAE;UACZtB,OAAO,CAAC;YAAEqB,OAAO,EAAE,KAAK;YAAEC,KAAK,EAAE,6BAA6BA,KAAK,CAAC2C,OAAO;UAAG,CAAC,CAAC;QACpF;MACJ,CAAC;MAEDhE,MAAM,CAACiE,OAAO,GAAG,MAAM;QACnBlE,OAAO,CAAC;UAAEqB,OAAO,EAAE,KAAK;UAAEC,KAAK,EAAE;QAAqB,CAAC,CAAC;MAC5D,CAAC;MAEDrB,MAAM,CAACkE,iBAAiB,CAACrE,IAAI,CAAC;IAClC,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMsE,mBAAmB,GAAIjC,QAAQ,IAAK;IACtC,MAAMkC,MAAM,GAAG,EAAE;IACjB,MAAMC,YAAY,GAAG,EAAE;IACvB,MAAMC,cAAc,GAAG,EAAE;IACzB,MAAMC,OAAO,GAAG,IAAI/F,GAAG,CAAC,CAAC;IACzB,MAAMgG,SAAS,GAAG,IAAIhG,GAAG,CAAC,CAAC;IAE3B0D,QAAQ,CAACmB,OAAO,CAAC,CAACoB,OAAO,EAAEnB,KAAK,KAAK;MACjC,IAAI,CAACmB,OAAO,CAAClB,IAAI,IAAIkB,OAAO,CAAClB,IAAI,CAAC7B,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QAC7C0C,MAAM,CAACR,IAAI,CAAC,OAAON,KAAK,GAAG,CAAC,wBAAwB,CAAC;MACzD;MAEA,IAAI,CAACmB,OAAO,CAACZ,EAAE,IAAIY,OAAO,CAACZ,EAAE,CAACnC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QACzC0C,MAAM,CAACR,IAAI,CAAC,OAAON,KAAK,GAAG,CAAC,sBAAsB,CAAC;MACvD;MAEA,IAAIiB,OAAO,CAACG,GAAG,CAACD,OAAO,CAACZ,EAAE,CAAC,EAAE;QACzBQ,YAAY,CAACT,IAAI,CAACa,OAAO,CAACZ,EAAE,CAAC;MACjC,CAAC,MAAM;QACHU,OAAO,CAACI,GAAG,CAACF,OAAO,CAACZ,EAAE,CAAC;MAC3B;MAEA,IAAIW,SAAS,CAACE,GAAG,CAACD,OAAO,CAAClB,IAAI,CAAC5B,WAAW,CAAC,CAAC,CAAC,EAAE;QAC3C2C,cAAc,CAACV,IAAI,CAACa,OAAO,CAAClB,IAAI,CAAC;MACrC,CAAC,MAAM;QACHiB,SAAS,CAACG,GAAG,CAACF,OAAO,CAAClB,IAAI,CAAC5B,WAAW,CAAC,CAAC,CAAC;MAC7C;IACJ,CAAC,CAAC;IAEF,IAAI0C,YAAY,CAAClD,MAAM,GAAG,CAAC,EAAE;MACzBiD,MAAM,CAACR,IAAI,CAAC,gCAAgCS,YAAY,CAACO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;IAC1E;IAEA,IAAIN,cAAc,CAACnD,MAAM,GAAG,CAAC,EAAE;MAC3BiD,MAAM,CAACR,IAAI,CAAC,kCAAkCU,cAAc,CAACM,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;IAC9E;IAEA,OAAO;MACHC,KAAK,EAAET,MAAM,CAACjD,MAAM,KAAK,CAAC;MAC1BiD,MAAM,EAAEA,MAAM;MACdC,YAAY,EAAEA,YAAY;MAC1BC,cAAc,EAAEA;IACpB,CAAC;EACL,CAAC;;EAED;EACA,MAAMQ,gBAAgB,GAAIC,KAAK,IAAK;IAChC,MAAMlF,IAAI,GAAGkF,KAAK,CAACzE,MAAM,CAAC0E,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACnF,IAAI,EAAE;;IAEX;IACA,MAAMoF,UAAU,GAAG,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,eAAe,CAAC;IAC5E,IAAI,CAACA,UAAU,CAACzC,QAAQ,CAAC3C,IAAI,CAACa,IAAI,CAAC,EAAE;MACjCwE,KAAK,CAAC,qDAAqD,CAAC;MAC5D;IACJ;;IAEA;IACA,MAAMC,OAAO,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;IACjC,IAAItF,IAAI,CAACuF,IAAI,GAAGD,OAAO,EAAE;MACrBD,KAAK,CAAC,oCAAoC,CAAC;MAC3C;IACJ;IAEA,MAAMlF,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;MACnB,MAAMkF,QAAQ,GAAGlF,CAAC,CAACG,MAAM,CAACC,MAAM;MAChClB,cAAc,CAACgG,QAAQ,CAAC;MACxB5F,cAAc,CAAC4F,QAAQ,CAAC;MACxB9F,iBAAiB,CAAC,KAAK,CAAC;MACxB+F,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACxD,CAAC;IACDvF,MAAM,CAACwF,aAAa,CAAC3F,IAAI,CAAC;EAC9B,CAAC;EAED,MAAM4F,UAAU,GAAGA,CAAA,KAAM;IACrBpG,cAAc,CAAC,IAAI,CAAC;IACpBI,cAAc,CAAC,IAAI,CAAC;IACpB,IAAIE,YAAY,CAAC+F,OAAO,EAAE;MACtB/F,YAAY,CAAC+F,OAAO,CAACC,KAAK,GAAG,EAAE;IACnC;IACAL,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAChD,CAAC;;EAED;EACA,MAAMK,qBAAqB,GAAIlC,SAAS,IAAK;IAAA,IAAAmC,qBAAA,EAAAC,sBAAA,EAAAC,mBAAA,EAAAC,gBAAA;IACzC,MAAMC,WAAW,GAAG9I,cAAc,CAACuG,SAAS,CAAC;IAC7C,IAAIwC,SAAS,GAAG,IAAI;IAEpB,IAAID,WAAW,KAAK,OAAO,EAAE;MACzBC,SAAS,GAAG7I,cAAc,CAACqG,SAAS,CAAC;IACzC,CAAC,MAAM,IAAIuC,WAAW,KAAK,OAAO,EAAE;MAChCC,SAAS,GAAG9I,SAAS,CAACsG,SAAS,CAAC;IACpC;IAEA,IAAI,CAACwC,SAAS,IAAI,CAACpJ,YAAY,EAAE;MAC7B,OAAO;QACHqJ,KAAK,EAAE,KAAK;QACZC,MAAM,EAAE,KAAK;QACbtK,UAAU,EAAE,KAAK;QACjBuK,MAAM,EAAEJ,WAAW,IAAI,SAAS;QAChCK,YAAY,EAAE;MAClB,CAAC;IACL;;IAEA;IACA,IAAIC,UAAU,GAAG,CAAC;IAClB,IAAIC,aAAa,GAAG,CAAC;IAErB,IAAIN,SAAS,CAACO,aAAa,IAAI3J,YAAY,CAAC4J,QAAQ,EAAE;MAClD5J,YAAY,CAAC4J,QAAQ,CAACrD,OAAO,CAACsD,SAAS,IAAI;QAAA,IAAAC,oBAAA;QACvC,MAAMC,OAAO,GAAGX,SAAS,CAACO,aAAa,CAACE,SAAS,CAAC9C,EAAE,CAAC;QACrD,IAAIgD,OAAO,IAAIA,OAAO,CAACC,aAAa,KAAKC,SAAS,EAAE;UAAA,IAAAC,qBAAA;UAChD,MAAMC,UAAU,GAAGJ,OAAO,CAACC,aAAa;UACxC,MAAMI,MAAM,GAAG,EAAAF,qBAAA,GAAAlK,YAAY,CAACqK,MAAM,CAACF,UAAU,CAAC,cAAAD,qBAAA,uBAA/BA,qBAAA,CAAiCE,MAAM,KAAI,CAAC;UAC3DX,UAAU,IAAIW,MAAM,GAAGP,SAAS,CAACS,UAAU;QAC/C;QACAZ,aAAa,IAAI,CAAC,EAAAI,oBAAA,GAAA9J,YAAY,CAACqK,MAAM,CAACrK,YAAY,CAACqK,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC,cAAAyF,oBAAA,uBAAnDA,oBAAA,CAAqDM,MAAM,KAAI,CAAC,IAAIP,SAAS,CAACS,UAAU;MAC9G,CAAC,CAAC;IACN;;IAEA;IACA,IAAIC,UAAU,GAAGd,UAAU;IAC3B,MAAMe,YAAY,GAAG,CAAAzJ,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEsJ,MAAM,KAAI5L,mBAAmB,CAAC4L,MAAM;IAE5E,IAAI,CAAAtB,qBAAA,GAAAK,SAAS,CAACqB,WAAW,cAAA1B,qBAAA,eAArBA,qBAAA,CAAuB2B,cAAc,KAAA1B,sBAAA,GAAII,SAAS,CAACqB,WAAW,cAAAzB,sBAAA,eAArBA,sBAAA,CAAuB2B,mBAAmB,EAAE;MACrF,MAAMC,SAAS,GAAGJ,YAAY,CAACpB,SAAS,CAACqB,WAAW,CAACE,mBAAmB,CAAC;MACzE,IAAIC,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,YAAY,EAAE;QAChDN,UAAU,GAAGd,UAAU,IAAImB,SAAS,CAAC/B,KAAK,GAAG,GAAG,CAAC;MACrD,CAAC,MAAM,IAAI+B,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,WAAW,EAAE;QACtDN,UAAU,GAAGhF,IAAI,CAACuF,GAAG,CAAC,CAAC,EAAErB,UAAU,GAAGmB,SAAS,CAAC/B,KAAK,CAAC;MAC1D;IACJ;IAEA,MAAM7J,UAAU,GAAG0K,aAAa,GAAG,CAAC,GAAIa,UAAU,GAAGb,aAAa,GAAI,GAAG,GAAG,CAAC;;IAE7E;IACA,MAAM/B,OAAO,GAAG9H,SAAS,aAATA,SAAS,wBAAAoJ,mBAAA,GAATpJ,SAAS,CAAEuF,QAAQ,cAAA6D,mBAAA,uBAAnBA,mBAAA,CAAqB8B,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjE,EAAE,KAAKH,SAAS,CAAC;IAClE,MAAM3H,WAAW,GAAG,CAAA0I,OAAO,aAAPA,OAAO,wBAAAuB,gBAAA,GAAPvB,OAAO,CAAE5B,OAAO,cAAAmD,gBAAA,uBAAhBA,gBAAA,CAAkBrE,WAAW,CAAC,CAAC,KAAI,QAAQ;IAE/D,IAAI;MACA,MAAMoG,WAAW,GAAGlM,cAAc,CAACC,UAAU,EAAEC,WAAW,CAAC;MAE3D,OAAO;QACHoK,KAAK,EAAEkB,UAAU,CAACW,OAAO,CAAC,CAAC,CAAC;QAC5B5B,MAAM,EAAE2B,WAAW;QACnBjM,UAAU,EAAEA,UAAU,CAACkM,OAAO,CAAC,CAAC,CAAC;QACjC3B,MAAM,EAAEJ,WAAW;QACnBK,YAAY,EAAEJ,SAAS,CAACI,YAAY,IAAI,IAAI;QAC5C2B,QAAQ,EAAE1B,UAAU,CAACyB,OAAO,CAAC,CAAC,CAAC;QAC/BE,cAAc,EAAEb,UAAU,KAAKd;MACnC,CAAC;IACL,CAAC,CAAC,OAAOlF,KAAK,EAAE;MACZiE,OAAO,CAACjE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,OAAO;QACH8E,KAAK,EAAEkB,UAAU,CAACW,OAAO,CAAC,CAAC,CAAC;QAC5B5B,MAAM,EAAE,OAAO;QACftK,UAAU,EAAEA,UAAU,CAACkM,OAAO,CAAC,CAAC,CAAC;QACjC3B,MAAM,EAAEJ,WAAW;QACnBK,YAAY,EAAEJ,SAAS,CAACI,YAAY,IAAI,IAAI;QAC5C2B,QAAQ,EAAE1B,UAAU,CAACyB,OAAO,CAAC,CAAC,CAAC;QAC/BE,cAAc,EAAEb,UAAU,KAAKd;MACnC,CAAC;IACL;EACJ,CAAC;;EAED;EACA,MAAM4B,kBAAkB,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA;IAC7B,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;IACtB,MAAMC,WAAW,GAAGF,GAAG,CAACG,kBAAkB,CAAC,OAAO,CAAC;IACnD,MAAMC,WAAW,GAAGJ,GAAG,CAACK,kBAAkB,CAAC,OAAO,CAAC;;IAEnD;IACA,MAAMC,aAAa,GAAGpM,SAAS,CAACuF,QAAQ,CAACX,GAAG,CAAC,CAACkD,OAAO,EAAEnB,KAAK,KAAK;MAAA,IAAA0F,qBAAA;MAC7D,MAAMC,SAAS,GAAGrD,qBAAqB,CAACnB,OAAO,CAACZ,EAAE,CAAC;MACnD,MAAMqF,eAAe,GAAG,EAAAF,qBAAA,GAAArM,SAAS,CAACuM,eAAe,cAAAF,qBAAA,uBAAzBA,qBAAA,CAA4B1F,KAAK,CAAC,KAAI,CAAC,CAAC;MAEhE,OAAO;QACHmB,OAAO;QACPwE,SAAS;QACTC,eAAe;QACf5F,KAAK,EAAEA,KAAK,GAAG;MACnB,CAAC;IACL,CAAC,CAAC;IAEF,MAAM6F,QAAQ,GAAGJ,aAAa,CAACxH,GAAG,CAAC,CAAC;MAAEkD,OAAO;MAAEwE,SAAS;MAAEC,eAAe;MAAE5F;IAAM,CAAC,KAAK;MACnF,MAAMgD,YAAY,GAAG2C,SAAS,CAAC3C,YAAY,GACrC,IAAIoC,IAAI,CAACO,SAAS,CAAC3C,YAAY,CAAC,CAACsC,kBAAkB,CAAC,OAAO,CAAC,GAC5D,OAAO;MAEb,OAAO;AACnB;AACA,sFAAsFtF,KAAK;AAC3F,gDAAgDmB,OAAO,CAACZ,EAAE;AAC1D,kEAAkEY,OAAO,CAAClB,IAAI;AAC9E,gEAAgEkB,OAAO,CAACd,KAAK,IAAI,EAAE;AACnF,gEAAgEc,OAAO,CAAC5B,OAAO,IAAI,EAAE;AACrF;AACA;AACA,8BAA8BoG,SAAS,CAAC5C,MAAM,KAAK,OAAO,GAAG,sCAAsC,GAC/E4C,SAAS,CAAC5C,MAAM,KAAK,OAAO,GAAG,sCAAsC,GACjE,sCAAsC;AAC9D,8BAA8B4C,SAAS,CAAC5C,MAAM,KAAK,OAAO,GAAG,OAAO,GAAG4C,SAAS,CAAC5C,MAAM,KAAK,OAAO,GAAG,OAAO,GAAG,SAAS;AACzH;AACA;AACA,gDAAgD6C,eAAe,CAACE,SAAS,IAAI,KAAK;AAClF,mFAAmFH,SAAS,CAAC9C,KAAK;AAClG,kFAAkF8C,SAAS,CAAC7C,MAAM;AAClG,gDAAgD6C,SAAS,CAACnN,UAAU;AACpE,iFAAiFwK,YAAY;AAC7F;AACA,aAAa;IACL,CAAC,CAAC,CAAC1B,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAMyE,WAAW,GAAGjK,WAAW,GAC3B;AACZ,4BAA4BA,WAAW;AACvC,mBAAmB,GAAG,EAAE;IAEhB,OAAO;AACf;AACA;AACA;AACA;AACA,kCAAkC,EAAAgJ,qBAAA,GAAAzL,SAAS,CAACwF,cAAc,cAAAiG,qBAAA,uBAAxBA,qBAAA,CAA0B3F,UAAU,KAAI,QAAQ;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM4G,WAAW;AACjB;AACA;AACA;AACA,cAAc,EAAAhB,sBAAA,GAAA1L,SAAS,CAACwF,cAAc,cAAAkG,sBAAA,uBAAxBA,sBAAA,CAA0B5F,UAAU,KAAI,EAAE,MAAM,EAAA6F,sBAAA,GAAA3L,SAAS,CAACwF,cAAc,cAAAmG,sBAAA,uBAAxBA,sBAAA,CAA0BgB,UAAU,KAAI,EAAE;AACxG,uBAAuB,EAAAf,sBAAA,GAAA5L,SAAS,CAACwF,cAAc,cAAAoG,sBAAA,uBAAxBA,sBAAA,CAA0B5F,OAAO,KAAI,EAAE;AAC9D,sBAAsB,CAAA7F,YAAY,aAAZA,YAAY,wBAAA0L,qBAAA,GAAZ1L,YAAY,CAAEyM,cAAc,cAAAf,qBAAA,uBAA5BA,qBAAA,CAA8BgB,KAAK,KAAI,gBAAgB;AAC7E,yBAAyBb,WAAW,MAAME,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkBM,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA,yBAAyBxM,SAAS,CAAC8M,QAAQ;AAC3C;AACA;AACA,QAAQ;EACJ,CAAC;;EAED;EACA,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;IAAA,IAAAC,sBAAA;IAChC,IAAI,CAAChN,SAAS,EAAE;IAEhB2I,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAE3D,MAAMqE,WAAW,GAAGzB,kBAAkB,CAAC,CAAC;IACxC,MAAM0B,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACF,WAAW,CAAC,EAAE;MAAElJ,IAAI,EAAE;IAAY,CAAC,CAAC;IAC3D,MAAMqJ,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;IACrC,MAAMK,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IAExCF,IAAI,CAACG,IAAI,GAAGN,GAAG;IACfG,IAAI,CAACI,QAAQ,GAAG,GAAG,EAAAX,sBAAA,GAAAhN,SAAS,CAACwF,cAAc,cAAAwH,sBAAA,uBAAxBA,sBAAA,CAA0BlH,UAAU,KAAI,OAAO,cAAc;IAChFyH,IAAI,CAACK,KAAK,CAACC,OAAO,GAAG,MAAM;IAC3BL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,IAAI,CAAC;IAC/BA,IAAI,CAACS,KAAK,CAAC,CAAC;IACZR,QAAQ,CAACM,IAAI,CAACG,WAAW,CAACV,IAAI,CAAC;IAE/BF,GAAG,CAACa,eAAe,CAACd,GAAG,CAAC;IAExBzE,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC;EAC7D,CAAC;;EAED;EACA,MAAMuF,0BAA0B,GAAGA,CAAA,KAAM;IAAA,IAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,uBAAA;IACrC,MAAM7C,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;IACtB,MAAMC,WAAW,GAAGF,GAAG,CAACG,kBAAkB,CAAC,OAAO,CAAC;IACnD,MAAMC,WAAW,GAAGJ,GAAG,CAACK,kBAAkB,CAAC,OAAO,CAAC;IACnD,MAAMyC,UAAU,GAAG,CAAAzO,YAAY,aAAZA,YAAY,wBAAAiO,sBAAA,GAAZjO,YAAY,CAAEyM,cAAc,cAAAwB,sBAAA,uBAA5BA,sBAAA,CAA8BvB,KAAK,KAAI,gBAAgB;IAE1ElE,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;;IAEvE;IACA,MAAMiG,WAAW,GAAG7O,SAAS,CAACuF,QAAQ,CAACX,GAAG,CAAC,CAACkD,OAAO,EAAEgH,GAAG,KAAK;MACzD,MAAMC,IAAI,GAAG9F,qBAAqB,CAACnB,OAAO,CAACZ,EAAE,CAAC;MAC9C,MAAM8H,GAAG,GAAGD,IAAI,CAACvF,KAAK,KAAK,KAAK,GAC1ByF,UAAU,CAACF,IAAI,CAACvF,KAAK,CAAC,GACtB,CAAC;MAEP,OAAO;AACnB;AACA,4FAA4FsF,GAAG,GAAG,CAAC;AACnG,wEAAwEhH,OAAO,CAACZ,EAAE;AAClF,0FAA0FY,OAAO,CAAClB,IAAI;AACtG,+HAA+HmI,IAAI,CAACvF,KAAK;AACzI,8GAA8GuF,IAAI,CAACtF,MAAM;AACzH,4FAA4FsF,IAAI,CAAC5P,UAAU;AAC3G;AACA,0BAA0B4P,IAAI,CAACrF,MAAM,KAAK,OAAO,GAAG,SAAS,GAAGqF,IAAI,CAACrF,MAAM,KAAK,OAAO,GAAG,UAAU,GAAG,WAAW;AAClH;AACA;AACA,aAAa;IACL,CAAC,CAAC,CAACzB,IAAI,CAAC,EAAE,CAAC;;IAEX;IACA,MAAMyE,WAAW,GAAGjK,WAAW,GAC3B;AACZ,4BAA4BA,WAAW;AACvC,mBAAmB,GAAG,EAAE;IAEhB,OAAO;AACf;AACA;AACA;AACA,4BAA4B,EAAA4L,sBAAA,GAAArO,SAAS,CAACwF,cAAc,cAAA6I,sBAAA,uBAAxBA,sBAAA,CAA0BvI,UAAU,KAAI,QAAQ;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM4G,WAAW;AACjB;AACA,iBAAiBkC,UAAU;AAC3B,gCAAgC,EAAAN,sBAAA,GAAAtO,SAAS,CAACwF,cAAc,cAAA8I,sBAAA,uBAAxBA,sBAAA,CAA0BxI,UAAU,KAAI,EAAE,IAAI,EAAAyI,sBAAA,GAAAvO,SAAS,CAACwF,cAAc,cAAA+I,sBAAA,uBAAxBA,sBAAA,CAA0B5B,UAAU,KAAI,EAAE;AACxH;AACA;AACA;AACA,wCAAwC,EAAA6B,sBAAA,GAAAxO,SAAS,CAACwF,cAAc,cAAAgJ,sBAAA,uBAAxBA,sBAAA,CAA0B1I,UAAU,KAAI,KAAK,MAAM,EAAA2I,sBAAA,GAAAzO,SAAS,CAACwF,cAAc,cAAAiJ,sBAAA,uBAAxBA,sBAAA,CAA0B9B,UAAU,KAAI,KAAK;AACxI,yCAAyC,EAAA+B,sBAAA,GAAA1O,SAAS,CAACwF,cAAc,cAAAkJ,sBAAA,uBAAxBA,sBAAA,CAA0B1I,OAAO,KAAI,KAAK;AACnF,4CAA4C,EAAA2I,uBAAA,GAAA3O,SAAS,CAACwF,cAAc,cAAAmJ,uBAAA,uBAAxBA,uBAAA,CAA0B5I,UAAU,KAAI,KAAK;AACzF,4CAA4C6I,UAAU;AACtD,2CAA2C5C,WAAW,OAAOE,WAAW;AACxE,gDAAgDlM,SAAS,CAACuF,QAAQ,CAACf,MAAM;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAcqK,WAAW;AACzB;AACA;AACA;AACA;AACA,2CAA2C,IAAI9C,IAAI,CAAC,CAAC,CAACE,kBAAkB,CAAC,CAAC;AAC1E,uDAAuDjM,SAAS,CAAC8M,QAAQ;AACzE;AACA;AACA,QAAQ;EACJ,CAAC;;EAED;EACA,MAAMoC,4BAA4B,GAAGA,CAAA,KAAM;IACvC,IAAI,CAAClP,SAAS,EAAE;IAEhB2I,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;IAE3D,MAAMqE,WAAW,GAAGkB,0BAA0B,CAAC,CAAC;IAChD,MAAMgB,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,EAAE,QAAQ,EAAE,sBAAsB,CAAC;IAClEF,QAAQ,CAAC3B,QAAQ,CAAC8B,KAAK,CAACrC,WAAW,CAAC;IACpCkC,QAAQ,CAAC3B,QAAQ,CAAC+B,KAAK,CAAC,CAAC;IACzBJ,QAAQ,CAACK,KAAK,CAAC,CAAC;IAEhBL,QAAQ,CAAC5L,MAAM,GAAG,MAAM;MACpB4L,QAAQ,CAACM,KAAK,CAAC,CAAC;IACpB,CAAC;IAED9G,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;EAChE,CAAC;;EAED;EACA,MAAM8G,kBAAkB,GAAI3I,SAAS,IAAK;IAAA,IAAA4I,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,qBAAA;IACtC;IACA,IAAI,CAAC9P,SAAS,IAAI,CAACG,YAAY,EAAE;MAC7BoI,KAAK,CAAC,mEAAmE,CAAC;MAC1E;IACJ;;IAEA;IACA,MAAMT,OAAO,GAAG9H,SAAS,CAACuF,QAAQ,CAAC2F,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjE,EAAE,KAAKH,SAAS,CAAC;IAChE,IAAI,CAACe,OAAO,EAAE;MACVS,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACJ;;IAEA;IACA,MAAMe,WAAW,GAAG9I,cAAc,CAACuG,SAAS,CAAC;IAC7C,IAAIwC,SAAS,GAAG,IAAI;IAEpB,IAAID,WAAW,KAAK,OAAO,EAAE;MACzBC,SAAS,GAAG7I,cAAc,CAACqG,SAAS,CAAC;IACzC,CAAC,MAAM,IAAIuC,WAAW,KAAK,OAAO,EAAE;MAChCC,SAAS,GAAG9I,SAAS,CAACsG,SAAS,CAAC;IACpC,CAAC,MAAM;MACHwB,KAAK,CAAC,uEAAuE,CAAC;MAC9E;IACJ;IAEA,IAAI,CAACgB,SAAS,EAAE;MACZhB,KAAK,CAAC,6CAA6C,CAAC;MACpD;IACJ;;IAEA;IACA,MAAMoC,YAAY,GAAG,CAAAzJ,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEsJ,MAAM,KAAI5L,mBAAmB,CAAC4L,MAAM;IAC5E,MAAMuF,iBAAiB,GAAIC,KAAK,IAAK;MACjC,IAAI,CAACA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,CAACrF,YAAY,CAACqF,KAAK,CAAC,EAAE;QAC7D,OAAOrF,YAAY,CAACsF,IAAI;MAC5B;MACA,OAAOtF,YAAY,CAACqF,KAAK,CAAC;IAC9B,CAAC;;IAED;IACA,IAAIE,aAAa,GAAG,CAAC;IACrB,IAAIC,aAAa,GAAG,CAAC;IACrB,IAAIC,eAAe,GAAG,CAAC;IAEvB,IAAI7G,SAAS,CAACO,aAAa,IAAI3J,YAAY,CAAC4J,QAAQ,EAAE;MAClD5J,YAAY,CAAC4J,QAAQ,CAACrD,OAAO,CAACsD,SAAS,IAAI;QAAA,IAAAqG,qBAAA;QACvC,MAAMnG,OAAO,GAAGX,SAAS,CAACO,aAAa,CAACE,SAAS,CAAC9C,EAAE,CAAC;QACrD,IAAIgD,OAAO,IAAIA,OAAO,CAACC,aAAa,KAAKC,SAAS,EAAE;UAAA,IAAAkG,sBAAA;UAChD,MAAMhG,UAAU,GAAGJ,OAAO,CAACC,aAAa;UACxC,MAAMI,MAAM,GAAG,EAAA+F,sBAAA,GAAAnQ,YAAY,CAACqK,MAAM,CAACF,UAAU,CAAC,cAAAgG,sBAAA,uBAA/BA,sBAAA,CAAiC/F,MAAM,KAAI,CAAC;UAC3D,MAAMgG,cAAc,GAAGhG,MAAM,GAAGP,SAAS,CAACS,UAAU;UACpDyF,aAAa,IAAIK,cAAc;QACnC;QAEA,MAAMC,SAAS,GAAG,EAAAH,qBAAA,GAAAlQ,YAAY,CAACqK,MAAM,CAACrK,YAAY,CAACqK,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC,cAAA6L,qBAAA,uBAAnDA,qBAAA,CAAqD9F,MAAM,KAAI,CAAC;QAClF4F,aAAa,IAAIK,SAAS,GAAGxG,SAAS,CAACS,UAAU;MACrD,CAAC,CAAC;IACN;;IAEA;IACA2F,eAAe,GAAGF,aAAa;IAC/B,IAAI3E,cAAc,GAAG,KAAK;IAE1B,IAAI,CAAAoE,sBAAA,GAAApG,SAAS,CAACqB,WAAW,cAAA+E,sBAAA,eAArBA,sBAAA,CAAuB9E,cAAc,KAAA+E,sBAAA,GAAIrG,SAAS,CAACqB,WAAW,cAAAgF,sBAAA,eAArBA,sBAAA,CAAuB9E,mBAAmB,EAAE;MACrF,MAAM2F,UAAU,GAAGV,iBAAiB,CAACxG,SAAS,CAACqB,WAAW,CAACE,mBAAmB,CAAC;MAE/E,IAAI2F,UAAU,CAACzF,MAAM,KAAK,YAAY,EAAE;QACpCoF,eAAe,GAAGF,aAAa,IAAIO,UAAU,CAACzH,KAAK,GAAG,GAAG,CAAC;QAC1DuC,cAAc,GAAG,IAAI;MACzB,CAAC,MAAM,IAAIkF,UAAU,CAACzF,MAAM,KAAK,WAAW,EAAE;QAC1CoF,eAAe,GAAG1K,IAAI,CAACuF,GAAG,CAAC,CAAC,EAAEiF,aAAa,GAAGO,UAAU,CAACzH,KAAK,CAAC;QAC/DuC,cAAc,GAAG,IAAI;MACzB;IACJ;IAEA,MAAMpM,UAAU,GAAGgR,aAAa,GAAG,CAAC,GAAKC,eAAe,GAAGD,aAAa,GAAI,GAAG,GAAI,CAAC;;IAEpF;IACA,MAAMO,eAAe,GAAG,EAAAb,qBAAA,GAAAtG,SAAS,CAACoH,WAAW,cAAAd,qBAAA,uBAArBA,qBAAA,CAAuBjL,GAAG,CAAC,CAACgM,GAAG,EAAEjK,KAAK,KAAK;MAC/D,IAAIiK,GAAG,CAACC,UAAU,EAAE;QAChB,OAAO,0CAA0CD,GAAG,CAACC,UAAU,UAAUD,GAAG,CAAChK,IAAI,yCAAyCD,KAAK,wOAAwOiK,GAAG,CAAChK,IAAI,uDAAuD,CAACgK,GAAG,CAACnI,IAAI,GAAG,IAAI,EAAE4C,OAAO,CAAC,CAAC,CAAC,yGAAyG;MAC/iB,CAAC,MAAM;QACH,OAAO,8RAA8RuF,GAAG,CAAChK,IAAI,uDAAuD,CAACgK,GAAG,CAACnI,IAAI,GAAG,IAAI,EAAE4C,OAAO,CAAC,CAAC,CAAC,iBAAiB;MACrZ;IACJ,CAAC,CAAC,CAACpD,IAAI,CAAC,EAAE,CAAC,KAAI,EAAE;;IAEjB;IACA,MAAM6I,cAAc,GAAG,EAAAhB,qBAAA,GAAAvG,SAAS,CAACwH,UAAU,cAAAjB,qBAAA,uBAApBA,qBAAA,CAAsBlL,GAAG,CAAC2I,IAAI,IACjD,gTAAgTA,IAAI,CAACV,KAAK,2BAA2BU,IAAI,CAACH,GAAG,qHAAqHG,IAAI,CAACH,GAAG,YAC9d,CAAC,CAACnF,IAAI,CAAC,EAAE,CAAC,KAAI,EAAE;;IAEhB;IACA,MAAM+I,eAAe,GAAG7Q,YAAY,GAAG;AAC/C;AACA;AACA;AACA;AACA,0BAA0BA,YAAY,CAACqK,MAAM,CAAC5F,GAAG,CAACoL,KAAK,IAC3C,kGAAkGA,KAAK,CAACpJ,IAAI,+DAA+DoJ,KAAK,CAACzF,MAAM,mBAC3L,CAAC,CAACtC,IAAI,CAAC,EAAE,CAAC;AAClB;AACA;AACA;AACA;AACA,sBAAsB9H,YAAY,CAAC4J,QAAQ,CAACnF,GAAG,CAACoF,SAAS,IAAI;MAAA,IAAAiH,qBAAA,EAAAC,sBAAA;MACjD,MAAMhH,OAAO,IAAA+G,qBAAA,GAAG1H,SAAS,CAACO,aAAa,cAAAmH,qBAAA,uBAAvBA,qBAAA,CAA0BjH,SAAS,CAAC9C,EAAE,CAAC;MACvD,MAAMiD,aAAa,GAAGD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,aAAa;MAC5C,MAAMX,KAAK,GAAGW,aAAa,KAAKC,SAAS,GACnC,CAAC,EAAA8G,sBAAA,GAAA/Q,YAAY,CAACqK,MAAM,CAACL,aAAa,CAAC,cAAA+G,sBAAA,uBAAlCA,sBAAA,CAAoC3G,MAAM,KAAI,CAAC,IAAIP,SAAS,CAACS,UAAU,GACxE,CAAC;MAEP,OAAO;AACnB;AACA;AACA,sCAAsCT,SAAS,CAACpD,IAAI;AACpD,oGAAoGoD,SAAS,CAACS,UAAU;AACxH;AACA,kCAAkCtK,YAAY,CAACqK,MAAM,CAAC5F,GAAG,CAAC,CAACoL,KAAK,EAAE1F,UAAU,KAC5D,oGAAoGH,aAAa,KAAKG,UAAU,GAAG,wCAAwC,GAAG,EAAE;AAChM,0CAA0CH,aAAa,KAAKG,UAAU,GAAG,GAAG,GAAG,EAAE;AACjF,0CACY,CAAC,CAACrC,IAAI,CAAC,EAAE,CAAC;AACtB;AACA,sCAAsCuB,KAAK,CAAC6B,OAAO,CAAC,CAAC,CAAC;AACtD;AACA;AACA,yBAAyB;IACjB,CAAC,CAAC,CAACpD,IAAI,CAAC,EAAE,CAAC;AACnB;AACA;AACA,SAAS,GAAG,EAAE;;IAEN;IACA,MAAMyE,WAAW,GAAGjK,WAAW,GAC3B;AACZ,4BAA4BA,WAAW;AACvC,mBAAmB,GAAG,EAAE;;IAEhB;IACA,MAAM0O,yBAAyB,GAAGA,CAAA,KAAM;MAAA,IAAAC,sBAAA,EAAAC,iBAAA,EAAAC,kBAAA,EAAAC,sBAAA,EAAAC,iBAAA,EAAAC,mBAAA,EAAAC,oBAAA,EAAAC,oBAAA;MACpC,OAAO;AACnB;AACA;AACA;AACA;AACA,4BAA4B7J,OAAO,CAAClB,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU8F,WAAW;AACrB;AACA;AACA,oCAAoC,EAAA0E,sBAAA,GAAAjR,YAAY,CAACyM,cAAc,cAAAwE,sBAAA,uBAA3BA,sBAAA,CAA6BvE,KAAK,KAAI,YAAY;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C/E,OAAO,CAAClB,IAAI;AACzD;AACA;AACA;AACA,6CAA6CkB,OAAO,CAACZ,EAAE;AACvD;AACA;AACA;AACA,6CAA6C,EAAAmK,iBAAA,GAAA9H,SAAS,CAACqI,MAAM,cAAAP,iBAAA,uBAAhBA,iBAAA,CAAkBQ,IAAI,KAAI,KAAK,MAAM,EAAAP,kBAAA,GAAA/H,SAAS,CAACqI,MAAM,cAAAN,kBAAA,uBAAhBA,kBAAA,CAAkB1K,IAAI,KAAI,KAAK;AACjH;AACA;AACA;AACA,6CAA6C,EAAA2K,sBAAA,GAAApR,YAAY,CAACyM,cAAc,cAAA2E,sBAAA,uBAA3BA,sBAAA,CAA6B1E,KAAK,KAAI,KAAK;AACxF;AACA;AACA;AACA;AACA;AACA,yCAAyCuD,eAAe,CAAC/E,OAAO,CAAC,CAAC,CAAC,IAAI8E,aAAa;AACpF;AACA;AACA;AACA,6CAA6CD,aAAa,CAAC7E,OAAO,CAAC,CAAC,CAAC;AACrE;AACA;AACA;AACA,6CAA6C+E,eAAe,CAAC/E,OAAO,CAAC,CAAC,CAAC;AACvE;AACA;AACA;AACA,6CAA6ClM,UAAU,CAACkM,OAAO,CAAC,CAAC,CAAC;AAClE;AACA;AACA;AACA,6CAA6CnM,cAAc,CAACC,UAAU,EAAE,EAAAqS,iBAAA,GAAA1J,OAAO,CAAC5B,OAAO,cAAAsL,iBAAA,uBAAfA,iBAAA,CAAiBxM,WAAW,CAAC,CAAC,KAAI,QAAQ,CAAC;AACnH;AACA;AACA,kBAAkBuG,cAAc,GAAG,gGAAgG,GAAG,EAAE;AACxI;AACA;AACA,cAAcyF,eAAe,GAAG;AAChC;AACA;AACA,sBAAsBA,eAAe;AACrC;AACA,aAAa,GAAG,EAAE;AAClB;AACA,cAAc,CAAAS,mBAAA,GAAAlI,SAAS,CAACuI,QAAQ,cAAAL,mBAAA,eAAlBA,mBAAA,CAAoBM,OAAO,GAAG;AAC5C;AACA;AACA;AACA,wDAAwDxI,SAAS,CAACuI,QAAQ,CAACC,OAAO;AAClF;AACA;AACA,aAAa,GAAG,EAAE;AAClB;AACA,cAAc,CAAAL,oBAAA,GAAAnI,SAAS,CAACuI,QAAQ,cAAAJ,oBAAA,eAAlBA,oBAAA,CAAoBM,SAAS,GAAG;AAC9C;AACA;AACA;AACA,wDAAwDzI,SAAS,CAACuI,QAAQ,CAACE,SAAS;AACpF;AACA;AACA,aAAa,GAAG,EAAE;AAClB;AACA,cAAc,CAAAL,oBAAA,GAAApI,SAAS,CAACuI,QAAQ,cAAAH,oBAAA,eAAlBA,oBAAA,CAAoBM,YAAY,GAAG;AACjD;AACA;AACA;AACA,wDAAwD1I,SAAS,CAACuI,QAAQ,CAACG,YAAY;AACvF;AACA;AACA,aAAa,GAAG,EAAE;AAClB;AACA,cAAcvB,eAAe,GAAG;AAChC;AACA;AACA;AACA,0BAA0BA,eAAe;AACzC;AACA;AACA,aAAa,GAAG,EAAE;AAClB;AACA,cAAcI,cAAc,GAAG;AAC/B;AACA;AACA,sBAAsBA,cAAc;AACpC;AACA,aAAa,GAAG,EAAE;AAClB;AACA;AACA;AACA,2BAA2B,IAAI/E,IAAI,CAAC,CAAC,CAACE,kBAAkB,CAAC,CAAC;AAC1D;AACA;AACA;AACA,QAAQ;IACA,CAAC;;IAED;IACA,IAAI;MAAA,IAAAiG,sBAAA,EAAAC,sBAAA;MACA,MAAMlF,WAAW,GAAGkE,yBAAyB,CAAC,CAAC;MAC/C,MAAMiB,QAAQ,GAAG,IAAIjF,IAAI,CAAC,CAACF,WAAW,CAAC,EAAE;QAAElJ,IAAI,EAAE;MAAY,CAAC,CAAC;MAC/D,MAAMqJ,GAAG,GAAGC,GAAG,CAACC,eAAe,CAAC8E,QAAQ,CAAC;MACzC,MAAM7E,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;MACfG,IAAI,CAACI,QAAQ,GAAG,gBAAgB7F,OAAO,CAAClB,IAAI,CAACyL,OAAO,CAAC,eAAe,EAAE,GAAG,CAAC,IAAI,EAAAH,sBAAA,GAAA/R,YAAY,CAACyM,cAAc,cAAAsF,sBAAA,wBAAAC,sBAAA,GAA3BD,sBAAA,CAA6BrF,KAAK,cAAAsF,sBAAA,uBAAlCA,sBAAA,CAAoCE,OAAO,CAAC,eAAe,EAAE,GAAG,CAAC,KAAI,YAAY,OAAO;MACtK9E,IAAI,CAACS,KAAK,CAAC,CAAC;MACZX,GAAG,CAACa,eAAe,CAACd,GAAG,CAAC;MAExBzE,OAAO,CAACC,GAAG,CAAC,mDAAmDd,OAAO,CAAClB,IAAI,EAAE,CAAC;IAClF,CAAC,CAAC,OAAOlC,KAAK,EAAE;MACZiE,OAAO,CAACjE,KAAK,CAAC,2CAA2C,EAAEA,KAAK,CAAC;MACjE6D,KAAK,CAAC,sEAAsE,CAAC;IACjF;EACJ,CAAC;;EAED;EACA,MAAM+J,gBAAgB,GAAG,MAAOlK,KAAK,IAAK;IACtC,MAAMlF,IAAI,GAAGkF,KAAK,CAACzE,MAAM,CAAC0E,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACnF,IAAI,EAAE;;IAEX;IACA,IAAI,CAACjC,aAAa,EAAE;MAChBsH,KAAK,CAAC,sEAAsE,CAAC;MAC7E;IACJ;IAEAnH,eAAe,CAAC,YAAY,CAAC;IAE7B,IAAI;MAAA,IAAAmR,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACA;MACA,MAAMhP,MAAM,GAAG,MAAMX,cAAc,CAACC,IAAI,CAAC;MAEzC,IAAI,CAACU,MAAM,CAACa,OAAO,EAAE;QACjB,MAAM,IAAIoO,KAAK,CAACjP,MAAM,CAACc,KAAK,IAAI,4BAA4B,CAAC;MACjE;;MAEA;MACA,MAAMoO,UAAU,GAAGtL,mBAAmB,CAAC5D,MAAM,CAAC2B,QAAQ,CAAC;MAEvD,IAAI3B,MAAM,CAAC2B,QAAQ,CAACf,MAAM,KAAK,CAAC,EAAE;QAC9B,MAAM,IAAIqO,KAAK,CAAC,8CAA8C,CAAC;MACnE;;MAEA;MACA,MAAMtG,eAAe,GAAG3I,MAAM,CAAC2B,QAAQ,CAACX,GAAG,CAAC,OAAO;QAC/C8E,MAAM,EAAE,SAAS;QACjBC,YAAY,EAAE,IAAI;QAClB8C,SAAS,EAAE;MACf,CAAC,CAAC,CAAC;;MAEH;MACA,MAAMsG,aAAa,GAAG;QAClBxN,QAAQ,EAAE3B,MAAM,CAAC2B,QAAQ;QACzBgH,eAAe;QACfO,QAAQ,EAAE5J,IAAI,CAAC0D,IAAI;QACnBoM,QAAQ,EAAE9P,IAAI,CAACuF,IAAI;QACnBwK,UAAU,EAAE,IAAIlH,IAAI,CAAC,CAAC,CAACmH,WAAW,CAAC,CAAC;QACpC1N,cAAc,EAAE;UACZM,UAAU,EAAE,EAAAyM,qBAAA,GAAA3O,MAAM,CAAC4B,cAAc,cAAA+M,qBAAA,uBAArBA,qBAAA,CAAuBzM,UAAU,KAAI,UAAU;UAC3D6G,UAAU,EAAE,EAAA6F,sBAAA,GAAA5O,MAAM,CAAC4B,cAAc,cAAAgN,sBAAA,uBAArBA,sBAAA,CAAuB7F,UAAU,KAAI,cAAc;UAC/D3G,OAAO,EAAE,EAAAyM,sBAAA,GAAA7O,MAAM,CAAC4B,cAAc,cAAAiN,sBAAA,uBAArBA,sBAAA,CAAuBzM,OAAO,KAAI,EAAE;UAC7CD,UAAU,EAAE,EAAA2M,sBAAA,GAAA9O,MAAM,CAAC4B,cAAc,cAAAkN,sBAAA,uBAArBA,sBAAA,CAAuB3M,UAAU,KAAI,EAAE;UACnDE,IAAI,EAAE,EAAA0M,sBAAA,GAAA/O,MAAM,CAAC4B,cAAc,cAAAmN,sBAAA,uBAArBA,sBAAA,CAAuB1M,IAAI,KAAI,EAAE;UACvCC,OAAO,EAAE,EAAA0M,sBAAA,GAAAhP,MAAM,CAAC4B,cAAc,cAAAoN,sBAAA,uBAArBA,sBAAA,CAAuB1M,OAAO,KAAI;QAC/C;MACJ,CAAC;;MAED;MACAjG,YAAY,CAAC8S,aAAa,CAAC;MAC3BvR,mBAAmB,CAACsR,UAAU,CAACrL,MAAM,CAAC;MACtCrG,eAAe,CAAC,SAAS,CAAC;MAE1BuH,OAAO,CAACC,GAAG,CAAC,cAAchF,MAAM,CAAC2B,QAAQ,CAACf,MAAM,kBAAkBtB,IAAI,CAAC0D,IAAI,EAAE,CAAC;MAC9E+B,OAAO,CAACC,GAAG,CAAC,qEAAqE,CAAC;IAEtF,CAAC,CAAC,OAAOlE,KAAK,EAAE;MACZiE,OAAO,CAACjE,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrCtD,eAAe,CAAC,OAAO,CAAC;MACxBI,mBAAmB,CAAC,CAACkD,KAAK,CAAC2C,OAAO,CAAC,CAAC;IACxC;EACJ,CAAC;;EAED;EACA,MAAM8L,kBAAkB,GAAGA,CAAA,KAAM;IAC7B,IAAI,CAACnT,SAAS,EAAE,OAAO;MAAEoT,SAAS,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAElU,UAAU,EAAE,CAAC;MAAEmU,KAAK,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC;IAEpF,MAAMD,KAAK,GAAGtT,SAAS,CAACuF,QAAQ,CAACJ,MAAM,CAAC2C,OAAO,IAAItH,cAAc,CAACsH,OAAO,CAACZ,EAAE,CAAC,KAAK,OAAO,CAAC,CAAC1C,MAAM;IACjG,MAAM+O,KAAK,GAAGvT,SAAS,CAACuF,QAAQ,CAACJ,MAAM,CAAC2C,OAAO,IAAItH,cAAc,CAACsH,OAAO,CAACZ,EAAE,CAAC,KAAK,OAAO,CAAC,CAAC1C,MAAM;IACjG,MAAM4O,SAAS,GAAGE,KAAK,GAAGC,KAAK;IAC/B,MAAMF,KAAK,GAAGrT,SAAS,CAACuF,QAAQ,CAACf,MAAM;IACvC,MAAMrF,UAAU,GAAGkU,KAAK,GAAG,CAAC,GAAG3N,IAAI,CAAC8N,KAAK,CAAEJ,SAAS,GAAGC,KAAK,GAAI,GAAG,CAAC,GAAG,CAAC;IAExE,OAAO;MAAED,SAAS;MAAEC,KAAK;MAAElU,UAAU;MAAEmU,KAAK;MAAEC;IAAM,CAAC;EACzD,CAAC;;EAED;EACA,MAAME,eAAe,GAAGA,CAAA,KAAM;IAAA,IAAAC,uBAAA;IAC1B,IAAI,CAAC1T,SAAS,IAAI,CAACA,SAAS,CAACuF,QAAQ,EAAE;MACnCgD,KAAK,CAAC,yBAAyB,CAAC;MAChC;IACJ;IAEA,MAAMoL,UAAU,GAAG;MACf,GAAG3T,SAAS;MACZ4T,UAAU,EAAE,IAAI7H,IAAI,CAAC,CAAC,CAACmH,WAAW,CAAC,CAAC;MACpCW,OAAO,EAAE,KAAK;MACdC,aAAa,EAAE,IAAI;MACnBrR,WAAW,EAAEA,WAAW,CAAC;IAC7B,CAAC;IAED,MAAMyK,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAC4G,IAAI,CAACC,SAAS,CAACL,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE;MAAE5P,IAAI,EAAE;IAAmB,CAAC,CAAC;IAC1F,MAAMqJ,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;IACrC,MAAMK,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;IACfG,IAAI,CAACI,QAAQ,GAAG,cAAc,EAAA+F,uBAAA,GAAA1T,SAAS,CAACwF,cAAc,cAAAkO,uBAAA,uBAAxBA,uBAAA,CAA0B5N,UAAU,KAAI,QAAQ,IAAI,IAAIiG,IAAI,CAAC,CAAC,CAACmH,WAAW,CAAC,CAAC,CAACe,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO;IAC/H1G,IAAI,CAACS,KAAK,CAAC,CAAC;IACZX,GAAG,CAACa,eAAe,CAACd,GAAG,CAAC;EAC5B,CAAC;EAED,MAAM8G,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,uBAAA;IACxB,IAAI,CAACnU,SAAS,IAAI,CAACA,SAAS,CAACuF,QAAQ,EAAE;MACnCgD,KAAK,CAAC,yBAAyB,CAAC;MAChC;IACJ;IAEA,MAAM6L,aAAa,GAAG,EAAE;;IAExB;IACAA,aAAa,CAACnN,IAAI,CAAC,CAAC,YAAY,EAAE,cAAc,EAAE,OAAO,EAAE,SAAS,EAAE,gBAAgB,CAAC,CAAC;;IAExF;IACAjH,SAAS,CAACuF,QAAQ,CAACmB,OAAO,CAAC,CAACoB,OAAO,EAAEnB,KAAK,KAAK;MAC3C,MAAM0N,QAAQ,GAAGrU,SAAS,CAACuM,eAAe,CAAC5F,KAAK,CAAC,IAAI,CAAC,CAAC;MACvD,MAAM2C,WAAW,GAAG9I,cAAc,CAACsH,OAAO,CAACZ,EAAE,CAAC;MAE9CkN,aAAa,CAACnN,IAAI,CAAC,CACfa,OAAO,CAACZ,EAAE,EACVY,OAAO,CAAClB,IAAI,EACZkB,OAAO,CAACd,KAAK,IAAI,EAAE,EACnBc,OAAO,CAAC5B,OAAO,IAAI,EAAE,EACrBoD,WAAW,KAAK,OAAO,GAAG,OAAO,GAAGA,WAAW,KAAK,OAAO,GAAG,OAAO,GAAG,SAAS,CACpF,CAAC;IACN,CAAC,CAAC;IAEF,MAAMgL,EAAE,GAAGzV,IAAI,CAACwF,KAAK,CAACkQ,QAAQ,CAAC,CAAC;IAChC,MAAMC,EAAE,GAAG3V,IAAI,CAACwF,KAAK,CAACoQ,YAAY,CAACL,aAAa,CAAC;IACjDvV,IAAI,CAACwF,KAAK,CAACqQ,iBAAiB,CAACJ,EAAE,EAAEE,EAAE,EAAE,YAAY,CAAC;IAElD3V,IAAI,CAAC8V,SAAS,CAACL,EAAE,EAAE,cAAc,EAAAH,uBAAA,GAAAnU,SAAS,CAACwF,cAAc,cAAA2O,uBAAA,uBAAxBA,uBAAA,CAA0BrO,UAAU,KAAI,QAAQ,IAAI,IAAIiG,IAAI,CAAC,CAAC,CAACmH,WAAW,CAAC,CAAC,CAACe,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;EACvI,CAAC;;EAED;EACA,MAAMW,cAAc,GAAGA,CAAA,KAAM;IACzB,IAAIxF,MAAM,CAACyF,OAAO,CAAC,sFAAsF,CAAC,EAAE;MACxG5U,YAAY,CAAC,IAAI,CAAC;MAClBuB,mBAAmB,CAAC,EAAE,CAAC;MACvBJ,eAAe,CAAC,MAAM,CAAC;MACvBf,iBAAiB,CAAC,IAAI,CAAC;MACvBsI,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;IACtD;EACJ,CAAC;;EAED;EACA,MAAMkM,qBAAqB,GAAI/N,SAAS,IAAK;IACzC,MAAMe,OAAO,GAAG9H,SAAS,CAACuF,QAAQ,CAAC2F,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACjE,EAAE,KAAKH,SAAS,CAAC;IAChE,IAAIe,OAAO,IAAI3H,YAAY,EAAE;MACzBE,iBAAiB,CAACyH,OAAO,CAAC;MAC1B5H,YAAY,CAAC,SAAS,CAAC;MACvByI,OAAO,CAACC,GAAG,CAAC,mCAAmCd,OAAO,CAAClB,IAAI,EAAE,CAAC;IAClE,CAAC,MAAM,IAAI,CAACzG,YAAY,EAAE;MACtBoI,KAAK,CAAC,yDAAyD,CAAC;IACpE;EACJ,CAAC;;EAED;EACA,MAAMwM,qBAAqB,GAAIhO,SAAS,IAAK;IACzC,MAAM2C,MAAM,GAAGlJ,cAAc,CAACuG,SAAS,CAAC;IAExC,IAAI2C,MAAM,KAAK,OAAO,EAAE;MACpB,oBACI3K,OAAA;QAAKiW,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACpClW,OAAA;UAAKiW,SAAS,EAAC;QAAmC;UAAAlI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACzDrW,OAAA;UAAMiW,SAAS,EAAC,wEAAwE;UAAAC,QAAA,EAAC;QAEzF;UAAAnI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAEd,CAAC,MAAM,IAAI1L,MAAM,KAAK,OAAO,EAAE;MAC3B,oBACI3K,OAAA;QAAKiW,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACpClW,OAAA;UAAKiW,SAAS,EAAC;QAAoC;UAAAlI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC1DrW,OAAA;UAAMiW,SAAS,EAAC,0EAA0E;UAAAC,QAAA,EAAC;QAE3F;UAAAnI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAEd,CAAC,MAAM;MACH,oBACIrW,OAAA;QAAKiW,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACpClW,OAAA;UAAKiW,SAAS,EAAC;QAAkC;UAAAlI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACxDrW,OAAA;UAAMiW,SAAS,EAAC,0DAA0D;UAAAC,QAAA,EAAC;QAE3E;UAAAnI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAEd;EACJ,CAAC;EAED,MAAMrU,aAAa,GAAIgG,SAAS,IAAK;IACjC/F,oBAAoB,CAAC+F,SAAS,CAAC;EACnC,CAAC;EAED,MAAMlG,WAAW,GAAIkG,SAAS,IAAK;IAC/BjG,kBAAkB,CAACiG,SAAS,CAAC;EACjC,CAAC;;EAED;EACA,MAAMsO,gBAAgB,GAAG,CAAArV,SAAS,aAATA,SAAS,wBAAAD,oBAAA,GAATC,SAAS,CAAEuF,QAAQ,cAAAxF,oBAAA,uBAAnBA,oBAAA,CAAqBoF,MAAM,CAAC2C,OAAO,IAAI;IAC5D,MAAMwN,WAAW,GAAGrT,UAAU,CAAC+C,WAAW,CAAC,CAAC;IAC5C,OACI8C,OAAO,CAAClB,IAAI,CAAC5B,WAAW,CAAC,CAAC,CAACa,QAAQ,CAACyP,WAAW,CAAC,IAChDxN,OAAO,CAACZ,EAAE,CAAClC,WAAW,CAAC,CAAC,CAACa,QAAQ,CAACyP,WAAW,CAAC,IAC7CxN,OAAO,CAACd,KAAK,IAAIc,OAAO,CAACd,KAAK,CAAChC,WAAW,CAAC,CAAC,CAACa,QAAQ,CAACyP,WAAW,CAAE;EAE5E,CAAC,CAAC,KAAI,EAAE;EAER,MAAMC,cAAc,GAAG,CAAC,GAAGF,gBAAgB,CAAC,CAACG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;IACxD,IAAIC,MAAM,EAAEC,MAAM;IAElB,QAAQzT,MAAM;MACV,KAAK,MAAM;QACPwT,MAAM,GAAGF,CAAC,CAAC7O,IAAI,CAAC5B,WAAW,CAAC,CAAC;QAC7B4Q,MAAM,GAAGF,CAAC,CAAC9O,IAAI,CAAC5B,WAAW,CAAC,CAAC;QAC7B;MACJ,KAAK,IAAI;QACL2Q,MAAM,GAAGF,CAAC,CAACvO,EAAE,CAAClC,WAAW,CAAC,CAAC;QAC3B4Q,MAAM,GAAGF,CAAC,CAACxO,EAAE,CAAClC,WAAW,CAAC,CAAC;QAC3B;MACJ,KAAK,OAAO;QACR2Q,MAAM,GAAG,CAACF,CAAC,CAACzO,KAAK,IAAI,EAAE,EAAEhC,WAAW,CAAC,CAAC;QACtC4Q,MAAM,GAAG,CAACF,CAAC,CAAC1O,KAAK,IAAI,EAAE,EAAEhC,WAAW,CAAC,CAAC;QACtC;MACJ,KAAK,QAAQ;QACT2Q,MAAM,GAAGnV,cAAc,CAACiV,CAAC,CAACvO,EAAE,CAAC;QAC7B0O,MAAM,GAAGpV,cAAc,CAACkV,CAAC,CAACxO,EAAE,CAAC;QAC7B;MACJ;QACI,OAAO,CAAC;IAChB;IAEA,IAAIyO,MAAM,GAAGC,MAAM,EAAE,OAAOvT,SAAS,KAAK,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC;IACxD,IAAIsT,MAAM,GAAGC,MAAM,EAAE,OAAOvT,SAAS,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;IACxD,OAAO,CAAC;EACZ,CAAC,CAAC;EAEF,MAAMwT,UAAU,GAAGnQ,IAAI,CAACoQ,IAAI,CAACP,cAAc,CAAC/Q,MAAM,GAAGxC,eAAe,CAAC;EACrE,MAAM+T,UAAU,GAAG,CAACjU,WAAW,GAAG,CAAC,IAAIE,eAAe;EACtD,MAAMgU,iBAAiB,GAAGT,cAAc,CAACrQ,KAAK,CAAC6Q,UAAU,EAAEA,UAAU,GAAG/T,eAAe,CAAC;;EAExF;EACA;EACA,IAAI,CAAChC,SAAS,EAAE;IACZ,oBACIjB,OAAA;MAAKiW,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBAElClW,OAAA;QAAKiW,SAAS,EAAC,uGAAuG;QAAAC,QAAA,gBAClHlW,OAAA,CAACjC,WAAW;UAACkY,SAAS,EAAC;QAA8C;UAAAlI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACxErW,OAAA;UAAAkW,QAAA,gBACIlW,OAAA;YAAIiW,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAC;UAAc;YAAAnI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC7CrW,OAAA;YAAGiW,SAAS,EAAC,SAAS;YAAAC,QAAA,EAAC;UAEvB;YAAAnI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGNrW,OAAA;QAAKiW,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBAGlDlW,OAAA;UAAKiW,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC1BlW,OAAA;YAAKiW,SAAS,EAAC,2GAA2G;YAAAC,QAAA,eACtHlW,OAAA;cAAKiW,SAAS,EAAC,4KAA4K;cAAAC,QAAA,gBACvLlW,OAAA;gBAAKiW,SAAS,EAAC,MAAM;gBAAAC,QAAA,eACjBlW,OAAA,CAACtC,MAAM;kBAACgM,IAAI,EAAE,EAAG;kBAACuM,SAAS,EAAC;gBAAuB;kBAAAlI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD,CAAC,eACNrW,OAAA;gBAAIiW,SAAS,EAAC,0CAA0C;gBAAAC,QAAA,EAAC;cAA4B;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC1FrW,OAAA;gBAAGiW,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAAC;cAA8D;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACpGrW,OAAA;gBACIgF,IAAI,EAAC,MAAM;gBACXkS,GAAG,EAAElT,YAAa;gBAClBmT,MAAM,EAAC,YAAY;gBACnBC,QAAQ,EAAE7D,gBAAiB;gBAC3B0C,SAAS,EAAC,QAAQ;gBAClBoB,QAAQ,EAAEjV,YAAY,KAAK;cAAa;gBAAA2L,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3C,CAAC,eACFrW,OAAA;gBACIsX,OAAO,EAAEA,CAAA;kBAAA,IAAAC,qBAAA;kBAAA,QAAAA,qBAAA,GAAMvT,YAAY,CAACgG,OAAO,cAAAuN,qBAAA,uBAApBA,qBAAA,CAAsBtI,KAAK,CAAC,CAAC;gBAAA,CAAC;gBAC7CoI,QAAQ,EAAEjV,YAAY,KAAK,YAAa;gBACxC6T,SAAS,EAAC,0IAA0I;gBAAAC,QAAA,EAEnJ9T,YAAY,KAAK,YAAY,gBAC1BpC,OAAA,CAAAE,SAAA;kBAAAgW,QAAA,gBACIlW,OAAA,CAACrB,SAAS;oBAAC+K,IAAI,EAAE,EAAG;oBAACuM,SAAS,EAAC;kBAAc;oBAAAlI,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,iBAEpD;gBAAA,eAAE,CAAC,gBAEHrW,OAAA,CAAAE,SAAA;kBAAAgW,QAAA,gBACIlW,OAAA,CAACV,eAAe;oBAACoK,IAAI,EAAE;kBAAG;oBAAAqE,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,qBAEjC;gBAAA,eAAE;cACL;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACG,CAAC,EACRjU,YAAY,KAAK,OAAO,iBACrBpC,OAAA;gBAAKiW,SAAS,EAAC,sEAAsE;gBAAAC,QAAA,gBACjFlW,OAAA;kBAAKiW,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,gBACjDlW,OAAA,CAACjC,WAAW;oBAAC2L,IAAI,EAAE;kBAAG;oBAAAqE,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eACzBrW,OAAA;oBAAIiW,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAC;kBAAa;oBAAAnI,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAtI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC,eACNrW,OAAA;kBAAKiW,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,EACrC1T,gBAAgB,CAACqD,GAAG,CAAC,CAACF,KAAK,EAAEiC,KAAK,kBAC/B5H,OAAA;oBAAAkW,QAAA,EAAkBvQ;kBAAK,GAAbiC,KAAK;oBAAAmG,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAc,CAChC;gBAAC;kBAAAtI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACD,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CACR;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA;UAAC;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNrW,OAAA;UAAKiW,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBAEpClW,OAAA;YAAKiW,SAAS,EAAC,0DAA0D;YAAAC,QAAA,gBACrElW,OAAA;cAAIiW,SAAS,EAAC,kEAAkE;cAAAC,QAAA,gBAC5ElW,OAAA,CAACT,YAAY;gBAACmK,IAAI,EAAE,EAAG;gBAACuM,SAAS,EAAC;cAAgB;gBAAAlI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,mBAEzD;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACLrW,OAAA;cAAIiW,SAAS,EAAC,uDAAuD;cAAAC,QAAA,gBACjElW,OAAA;gBAAAkW,QAAA,GAAI,oBAAkB,eAAAlW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAU;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,MAAE,eAAArW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAU;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,MAAE,eAAArW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAS;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,kBAAc,eAAArW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAI;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,aAAS;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC3JrW,OAAA;gBAAAkW,QAAA,GAAI,oBAAkB,eAAAlW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAK;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,MAAE,eAAArW,OAAA;kBAAAkW,QAAA,EAAQ;gBAAO;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC5ErW,OAAA;gBAAAkW,QAAA,EAAI;cAAuF;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAGNrW,OAAA;YAAKiW,SAAS,EAAC,0DAA0D;YAAAC,QAAA,gBACrElW,OAAA;cAAIiW,SAAS,EAAC,kEAAkE;cAAAC,QAAA,gBAC5ElW,OAAA,CAACR,MAAM;gBAACkK,IAAI,EAAE,EAAG;gBAACuM,SAAS,EAAC;cAAe;gBAAAlI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,sBAElD;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACLrW,OAAA;cAAIiW,SAAS,EAAC,iCAAiC;cAAAC,QAAA,gBAC3ClW,OAAA;gBAAIiW,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBAAClW,OAAA,CAACP,KAAK;kBAACiK,IAAI,EAAE,EAAG;kBAACuM,SAAS,EAAC;gBAAe;kBAAAlI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,4CAAwC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClIrW,OAAA;gBAAIiW,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBAAClW,OAAA,CAACtB,IAAI;kBAACgL,IAAI,EAAE,EAAG;kBAACuM,SAAS,EAAC;gBAAe;kBAAAlI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,iCAA6B;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACtHrW,OAAA;gBAAIiW,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBAAClW,OAAA,CAACrB,SAAS;kBAAC+K,IAAI,EAAE,EAAG;kBAACuM,SAAS,EAAC;gBAAe;kBAAAlI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,sCAAkC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChI,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAGNrW,OAAA;YAAKiW,SAAS,EAAC,0DAA0D;YAAAC,QAAA,gBACrElW,OAAA;cAAIiW,SAAS,EAAC,kEAAkE;cAAAC,QAAA,gBAC5ElW,OAAA,CAAC9B,aAAa;gBAACwL,IAAI,EAAE,EAAG;gBAACuM,SAAS,EAAC;cAAiB;gBAAAlI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAE3D;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACLrW,OAAA;cAAIiW,SAAS,EAAC,iCAAiC;cAAAC,QAAA,gBAC3ClW,OAAA;gBAAIiW,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,gBAClClW,OAAA;kBAAMiW,SAAS,EAAC,wHAAwH;kBAAAC,QAAA,EAAC;gBAAC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjJrW,OAAA;kBAAAkW,QAAA,EAAM;gBAA6B;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1C,CAAC,eACLrW,OAAA;gBAAIiW,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,gBAClClW,OAAA;kBAAMiW,SAAS,EAAC,wHAAwH;kBAAAC,QAAA,EAAC;gBAAC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjJrW,OAAA;kBAAAkW,QAAA,EAAM;gBAA2C;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxD,CAAC,eACLrW,OAAA;gBAAIiW,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,gBAClClW,OAAA;kBAAMiW,SAAS,EAAC,wHAAwH;kBAAAC,QAAA,EAAC;gBAAC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjJrW,OAAA;kBAAAkW,QAAA,EAAM;gBAAqC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CAAC,eACLrW,OAAA;gBAAIiW,SAAS,EAAC,wBAAwB;gBAAAC,QAAA,gBAClClW,OAAA;kBAAMiW,SAAS,EAAC,wHAAwH;kBAAAC,QAAA,EAAC;gBAAC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjJrW,OAAA;kBAAAkW,QAAA,EAAM;gBAAmC;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChD,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAtI,QAAA,EAAAoI,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd;;EAEA;EACA,MAAMf,QAAQ,GAAGlB,kBAAkB,CAAC,CAAC;EAErC,oBACIpU,OAAA;IAAKiW,SAAS,EAAC,yBAAyB;IAAAC,QAAA,gBAEpClW,OAAA;MAAKiW,SAAS,EAAC,6EAA6E;MAAAC,QAAA,eACxFlW,OAAA;QAAKiW,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAC9BlW,OAAA;UAAKiW,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC1BlW,OAAA,CAACjC,WAAW;YAACkY,SAAS,EAAC;UAAwB;YAAAlI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eACNrW,OAAA;UAAKiW,SAAS,EAAC,MAAM;UAAAC,QAAA,eACjBlW,OAAA;YAAGiW,SAAS,EAAC,wBAAwB;YAAAC,QAAA,gBACjClW,OAAA;cAAAkW,QAAA,EAAQ;YAAe;cAAAnI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,iIAEpC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAtI,QAAA,EAAAoI,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAENrW,OAAA;MAAKiW,SAAS,EAAC,KAAK;MAAAC,QAAA,gBAEhBlW,OAAA;QAAKiW,SAAS,EAAC,4EAA4E;QAAAC,QAAA,gBAEvFlW,OAAA;UAAKiW,SAAS,EAAC,wDAAwD;UAAAC,QAAA,eACnElW,OAAA;YAAKiW,SAAS,EAAC,8DAA8D;YAAAC,QAAA,gBACzElW,OAAA;cAAKiW,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBACxClW,OAAA;gBAAKiW,SAAS,EAAC,6CAA6C;gBAAAC,QAAA,eACxDlW,OAAA,CAACrC,KAAK;kBAAC+L,IAAI,EAAE,EAAG;kBAACuM,SAAS,EAAC;gBAAY;kBAAAlI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CAAC,eACNrW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAIiW,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,EAAC;gBAAa;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC/ErW,OAAA;kBAAGiW,SAAS,EAAC,kDAAkD;kBAAAC,QAAA,GAC1DjV,SAAS,CAACuF,QAAQ,CAACf,MAAM,EAAC,oBAC/B;gBAAA;kBAAAsI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,EAGL3S,WAAW,iBACR1D,OAAA;cAAKiW,SAAS,EAAC,0BAA0B;cAAAC,QAAA,eACrClW,OAAA;gBACIwX,GAAG,EAAE9T,WAAY;gBACjB+T,GAAG,EAAC,aAAa;gBACjBxB,SAAS,EAAC;cAAsF;gBAAAlI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnG;YAAC;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CACR;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA;QAAC;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNrW,OAAA;UAAKiW,SAAS,EAAC,+CAA+C;UAAAC,QAAA,gBAC1DlW,OAAA;YAAKiW,SAAS,EAAC,mDAAmD;YAAAC,QAAA,gBAC9DlW,OAAA;cAAKiW,SAAS,EAAC,mCAAmC;cAAAC,QAAA,gBAC9ClW,OAAA;gBACIsX,OAAO,EAAE5C,eAAgB;gBACzBuB,SAAS,EAAC,2GAA2G;gBAAAC,QAAA,gBAErHlW,OAAA,CAACpC,QAAQ;kBAAC8L,IAAI,EAAE;gBAAG;kBAAAqE,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAE1B;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTrW,OAAA;gBACIsX,OAAO,EAAEnC,aAAc;gBACvBc,SAAS,EAAC,+GAA+G;gBAAAC,QAAA,gBAEzHlW,OAAA,CAACV,eAAe;kBAACoK,IAAI,EAAE;gBAAG;kBAAAqE,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAEjC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTrW,OAAA;gBACIsX,OAAO,EAAEzB,cAAe;gBACxBI,SAAS,EAAC,uGAAuG;gBAAAC,QAAA,gBAEjHlW,OAAA,CAACnC,MAAM;kBAAC6L,IAAI,EAAE;gBAAG;kBAAAqE,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,cAExB;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,eAENrW,OAAA;cAAKiW,SAAS,EAAC,yBAAyB;cAAAC,QAAA,GACnC,CAACxS,WAAW,iBACT1D,OAAA;gBACIsX,OAAO,EAAEA,CAAA;kBAAA,IAAAI,qBAAA;kBAAA,QAAAA,qBAAA,GAAMzT,YAAY,CAAC+F,OAAO,cAAA0N,qBAAA,uBAApBA,qBAAA,CAAsBzI,KAAK,CAAC,CAAC;gBAAA,CAAC;gBAC7CgH,SAAS,EAAC,iHAAiH;gBAAAC,QAAA,gBAE3HlW,OAAA,CAACN,KAAK;kBAACgK,IAAI,EAAE;gBAAG;kBAAAqE,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,YAEvB;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CACX,EACA3S,WAAW,iBACR1D,OAAA;gBACIsX,OAAO,EAAEvN,UAAW;gBACpBkM,SAAS,EAAC,iHAAiH;gBAAAC,QAAA,gBAE3HlW,OAAA,CAACL,CAAC;kBAAC+J,IAAI,EAAE;gBAAG;kBAAAqE,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAEnB;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CACX;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eAGNrW,OAAA;cACIgF,IAAI,EAAC,MAAM;cACXkS,GAAG,EAAEjT,YAAa;cAClBkT,MAAM,EAAC,8CAA8C;cACrDC,QAAQ,EAAEhO,gBAAiB;cAC3B6M,SAAS,EAAC;YAAQ;cAAAlI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrB,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAGNrW,OAAA;YAAKiW,SAAS,EAAC,oCAAoC;YAAAC,QAAA,gBAC/ClW,OAAA;cAAIiW,SAAS,EAAC,0CAA0C;cAAAC,QAAA,EAAC;YAAc;cAAAnI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC5ErW,OAAA;cAAKiW,SAAS,EAAC,+CAA+C;cAAAC,QAAA,gBAC1DlW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAMiW,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAK;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC5CrW,OAAA;kBAAKiW,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEjV,SAAS,CAAC8M;gBAAQ;kBAAAA,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtD,CAAC,eACNrW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAMiW,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAY;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACnDrW,OAAA;kBAAKiW,SAAS,EAAC,aAAa;kBAAAC,QAAA,EACvB,IAAIlJ,IAAI,CAAC/L,SAAS,CAACiT,UAAU,CAAC,CAAChH,kBAAkB,CAAC;gBAAC;kBAAAa,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACNrW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAMiW,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAQ;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC/CrW,OAAA;kBAAKiW,SAAS,EAAC,qDAAqD;kBAAAC,QAAA,gBAChElW,OAAA,CAACR,MAAM;oBAACkK,IAAI,EAAE;kBAAG;oBAAAqE,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,gBAExB;gBAAA;kBAAAtI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACNrW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAMiW,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAe;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtDrW,OAAA;kBAAKiW,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEjV,SAAS,CAACuF,QAAQ,CAACf;gBAAM;kBAAAsI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7D,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGNrW,OAAA;QAAKiW,SAAS,EAAC,gCAAgC;QAAAC,QAAA,gBAE3ClW,OAAA;UAAKiW,SAAS,EAAC,wEAAwE;UAAAC,QAAA,gBACnFlW,OAAA;YAAIiW,SAAS,EAAC,kEAAkE;YAAAC,QAAA,gBAC5ElW,OAAA,CAAC1B,SAAS;cAACoL,IAAI,EAAE;YAAG;cAAAqE,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,oBAE3B;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAELrW,OAAA;YAAKiW,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBACvDlW,OAAA;cAAKiW,SAAS,EAAC,aAAa;cAAAC,QAAA,gBACxBlW,OAAA;gBAAKiW,SAAS,EAAC,kCAAkC;gBAAAC,QAAA,EAAEZ,QAAQ,CAAChB;cAAK;gBAAAvG,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACxErW,OAAA;gBAAKiW,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAc;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1D,CAAC,eACNrW,OAAA;cAAKiW,SAAS,EAAC,aAAa;cAAAC,QAAA,gBACxBlW,OAAA;gBAAKiW,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAEZ,QAAQ,CAACf;cAAK;gBAAAxG,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACzErW,OAAA;gBAAKiW,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAY;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxD,CAAC,eACNrW,OAAA;cAAKiW,SAAS,EAAC,aAAa;cAAAC,QAAA,gBACxBlW,OAAA;gBAAKiW,SAAS,EAAC,oCAAoC;gBAAAC,QAAA,EAAEZ,QAAQ,CAACd;cAAK;gBAAAzG,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC1ErW,OAAA;gBAAKiW,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAY;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxD,CAAC,eACNrW,OAAA;cAAKiW,SAAS,EAAC,aAAa;cAAAC,QAAA,gBACxBlW,OAAA;gBAAKiW,SAAS,EAAC,kCAAkC;gBAAAC,QAAA,GAAEZ,QAAQ,CAAClV,UAAU,EAAC,GAAC;cAAA;gBAAA2N,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC9ErW,OAAA;gBAAKiW,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAQ;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpD,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAENrW,OAAA;YAAKiW,SAAS,EAAC,qCAAqC;YAAAC,QAAA,eAChDlW,OAAA;cACIiW,SAAS,EAAC,0FAA0F;cACpGpH,KAAK,EAAE;gBAAE8I,KAAK,EAAE,GAAGrC,QAAQ,CAAClV,UAAU;cAAI;YAAE;cAAA2N,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1C;UAAC;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNrW,OAAA;UAAKiW,SAAS,EAAC,0DAA0D;UAAAC,QAAA,gBACrElW,OAAA;YAAIiW,SAAS,EAAC,kEAAkE;YAAAC,QAAA,gBAC5ElW,OAAA,CAAC3B,QAAQ;cAACqL,IAAI,EAAE;YAAG;cAAAqE,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,kBAE1B;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAELrW,OAAA;YAAKiW,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACtBlW,OAAA;cACIsX,OAAO,EAAEtJ,qBAAsB;cAC/BqJ,QAAQ,EAAE,CAACjW,YAAa;cACxB6U,SAAS,EAAC,wLAAwL;cAAAC,QAAA,gBAElMlW,OAAA,CAAClC,QAAQ;gBAAC4L,IAAI,EAAE;cAAG;gBAAAqE,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAE1B;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTrW,OAAA;cACIsX,OAAO,EAAEnH,4BAA6B;cACtCkH,QAAQ,EAAE,CAACjW,YAAa;cACxB6U,SAAS,EAAC,sLAAsL;cAAAC,QAAA,gBAEhMlW,OAAA,CAAClC,QAAQ;gBAAC4L,IAAI,EAAE;cAAG;gBAAAqE,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,cAE1B;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EACR,CAACjV,YAAY,iBACVpB,OAAA;cAAGiW,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAC;YAEjD;cAAAnI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CACN,EACA3S,WAAW,iBACR1D,OAAA;cAAGiW,SAAS,EAAC,2EAA2E;cAAAC,QAAA,gBACpFlW,OAAA,CAAChC,WAAW;gBAAC0L,IAAI,EAAE;cAAG;gBAAAqE,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,yBAE7B;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CACN;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGNrW,OAAA;QAAKiW,SAAS,EAAC,+DAA+D;QAAAC,QAAA,eAC1ElW,OAAA;UAAKiW,SAAS,EAAC,oEAAoE;UAAAC,QAAA,gBAC/ElW,OAAA;YAAKiW,SAAS,EAAC,iBAAiB;YAAAC,QAAA,gBAC5BlW,OAAA,CAACb,MAAM;cAACuK,IAAI,EAAE,EAAG;cAACuM,SAAS,EAAC;YAAkE;cAAAlI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACjGrW,OAAA;cACIgF,IAAI,EAAC,MAAM;cACX4S,WAAW,EAAC,0CAA0C;cACtD3N,KAAK,EAAE/G,UAAW;cAClBkU,QAAQ,EAAG3S,CAAC,IAAKtB,aAAa,CAACsB,CAAC,CAACG,MAAM,CAACqF,KAAK,CAAE;cAC/CgM,SAAS,EAAC;YAAoH;cAAAlI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjI,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAENrW,OAAA;YAAKiW,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACpClW,OAAA;cACIiK,KAAK,EAAE7G,MAAO;cACdgU,QAAQ,EAAG3S,CAAC,IAAKpB,SAAS,CAACoB,CAAC,CAACG,MAAM,CAACqF,KAAK,CAAE;cAC3CgM,SAAS,EAAC,uGAAuG;cAAAC,QAAA,gBAEjHlW,OAAA;gBAAQiK,KAAK,EAAC,MAAM;gBAAAiM,QAAA,EAAC;cAAY;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC1CrW,OAAA;gBAAQiK,KAAK,EAAC,IAAI;gBAAAiM,QAAA,EAAC;cAAU;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACtCrW,OAAA;gBAAQiK,KAAK,EAAC,OAAO;gBAAAiM,QAAA,EAAC;cAAa;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC5CrW,OAAA;gBAAQiK,KAAK,EAAC,QAAQ;gBAAAiM,QAAA,EAAC;cAAc;gBAAAnI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1C,CAAC,eAETrW,OAAA;cACIsX,OAAO,EAAEA,CAAA,KAAM/T,YAAY,CAACD,SAAS,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,CAAE;cAClE2S,SAAS,EAAC,0EAA0E;cAAAC,QAAA,EAEnF5S,SAAS,KAAK,KAAK,gBAAGtD,OAAA,CAACZ,OAAO;gBAACsK,IAAI,EAAE;cAAG;gBAAAqE,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGrW,OAAA,CAACX,QAAQ;gBAACqK,IAAI,EAAE;cAAG;gBAAAqE,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjE,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGNrW,OAAA;QAAKiW,SAAS,EAAC,sEAAsE;QAAAC,QAAA,gBACjFlW,OAAA;UAAKiW,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC5BlW,OAAA;YAAOiW,SAAS,EAAC,mBAAmB;YAAAC,QAAA,gBAChClW,OAAA;cAAOiW,SAAS,EAAC,YAAY;cAAAC,QAAA,eACzBlW,OAAA;gBAAAkW,QAAA,gBACIlW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLrW,OAAA;kBAAIiW,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAnI,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAtI,QAAA,EAAAoI,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL;YAAC;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC,eACRrW,OAAA;cAAOiW,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAC/Ce,iBAAiB,CAACpR,GAAG,CAAC,CAACkD,OAAO,EAAEnB,KAAK,KAAK;gBACvC,MAAMiQ,WAAW,GAAGb,UAAU,GAAGpP,KAAK,GAAG,CAAC;gBAC1C,MAAM2C,WAAW,GAAG9I,cAAc,CAACsH,OAAO,CAACZ,EAAE,CAAC;gBAE9C,oBACInI,OAAA;kBAAqBiW,SAAS,EAAC,oCAAoC;kBAAAC,QAAA,gBAC/DlW,OAAA;oBAAIiW,SAAS,EAAC,+DAA+D;oBAAAC,QAAA,EACxE2B;kBAAW;oBAAA9J,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACZ,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,6BAA6B;oBAAAC,QAAA,EACtCF,qBAAqB,CAACjN,OAAO,CAACZ,EAAE;kBAAC;oBAAA4F,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClC,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,+DAA+D;oBAAAC,QAAA,EACxEnN,OAAO,CAACZ;kBAAE;oBAAA4F,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACX,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,+DAA+D;oBAAAC,QAAA,EACxEnN,OAAO,CAAClB;kBAAI;oBAAAkG,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACb,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,mDAAmD;oBAAAC,QAAA,EAC5DnN,OAAO,CAACd,KAAK,IAAI;kBAAG;oBAAA8F,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrB,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,mDAAmD;oBAAAC,QAAA,EAC5DnN,OAAO,CAAC5B,OAAO,IAAI;kBAAG;oBAAA4G,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvB,CAAC,eACLrW,OAAA;oBAAIiW,SAAS,EAAC,iDAAiD;oBAAAC,QAAA,eAC3DlW,OAAA;sBAAKiW,SAAS,EAAC,yBAAyB;sBAAAC,QAAA,gBACpClW,OAAA;wBACIsX,OAAO,EAAEA,CAAA,KAAMvB,qBAAqB,CAAChN,OAAO,CAACZ,EAAE,CAAE;wBACjDkP,QAAQ,EAAE,CAACjW,YAAa;wBACxB6U,SAAS,EAAC,+JAA+J;wBAAAC,QAAA,gBAEzKlW,OAAA,CAAC9B,aAAa;0BAACwL,IAAI,EAAE;wBAAG;0BAAAqE,QAAA,EAAAoI,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,SAE/B;sBAAA;wBAAAtI,QAAA,EAAAoI,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC,EAER9L,WAAW,KAAK,OAAO,iBACpBvK,OAAA,CAAAE,SAAA;wBAAAgW,QAAA,gBACIlW,OAAA;0BACIsX,OAAO,EAAEA,CAAA,KAAMxV,WAAW,CAACiH,OAAO,CAACZ,EAAE,CAAE;0BACvC8N,SAAS,EAAC,kHAAkH;0BAAAC,QAAA,gBAE5HlW,OAAA,CAACjB,MAAM;4BAAC2K,IAAI,EAAE;0BAAG;4BAAAqE,QAAA,EAAAoI,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAE,CAAC,UAExB;wBAAA;0BAAAtI,QAAA,EAAAoI,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAQ,CAAC,eACTrW,OAAA;0BACIsX,OAAO,EAAEA,CAAA,KAAM3G,kBAAkB,CAAC5H,OAAO,CAACZ,EAAE,CAAE;0BAC9C8N,SAAS,EAAC,gHAAgH;0BAAAC,QAAA,gBAE1HlW,OAAA,CAACpC,QAAQ;4BAAC8L,IAAI,EAAE;0BAAG;4BAAAqE,QAAA,EAAAoI,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAE,CAAC,UAE1B;wBAAA;0BAAAtI,QAAA,EAAAoI,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAQ,CAAC;sBAAA,eACX,CACL,EAEA9L,WAAW,KAAK,OAAO,iBACpBvK,OAAA;wBACIsX,OAAO,EAAEA,CAAA,KAAMtV,aAAa,CAAC+G,OAAO,CAACZ,EAAE,CAAE;wBACzC8N,SAAS,EAAC,gHAAgH;wBAAAC,QAAA,gBAE1HlW,OAAA,CAACtB,IAAI;0BAACgL,IAAI,EAAE;wBAAG;0BAAAqE,QAAA,EAAAoI,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,YAEtB;sBAAA;wBAAAtI,QAAA,EAAAoI,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CACX;oBAAA;sBAAAtI,QAAA,EAAAoI,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACA;kBAAC;oBAAAtI,QAAA,EAAAoI,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CAAC;gBAAA,GA3DAtN,OAAO,CAACZ,EAAE;kBAAA4F,QAAA,EAAAoI,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OA4Df,CAAC;cAEb,CAAC;YAAC;cAAAtI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CAAC,EAGLS,UAAU,GAAG,CAAC,iBACX9W,OAAA;UAAKiW,SAAS,EAAC,sEAAsE;UAAAC,QAAA,gBACjFlW,OAAA;YAAKiW,SAAS,EAAC,uBAAuB;YAAAC,QAAA,GAAC,UAC3B,EAACc,UAAU,GAAG,CAAC,EAAC,MAAI,EAACrQ,IAAI,CAACnG,GAAG,CAACwW,UAAU,GAAG/T,eAAe,EAAEuT,cAAc,CAAC/Q,MAAM,CAAC,EAAC,MAAI,EAAC+Q,cAAc,CAAC/Q,MAAM,EAAC,WAC1H;UAAA;YAAAsI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACNrW,OAAA;YAAKiW,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACpClW,OAAA;cACIsX,OAAO,EAAEA,CAAA,KAAMtU,cAAc,CAACD,WAAW,GAAG,CAAC,CAAE;cAC/CsU,QAAQ,EAAEtU,WAAW,KAAK,CAAE;cAC5BkT,SAAS,EAAC,6HAA6H;cAAAC,QAAA,EAC1I;YAED;cAAAnI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTrW,OAAA;cAAMiW,SAAS,EAAC,mBAAmB;cAAAC,QAAA,GAAC,OAC3B,EAACnT,WAAW,EAAC,MAAI,EAAC+T,UAAU;YAAA;cAAA/I,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC,eACPrW,OAAA;cACIsX,OAAO,EAAEA,CAAA,KAAMtU,cAAc,CAACD,WAAW,GAAG,CAAC,CAAE;cAC/CsU,QAAQ,EAAEtU,WAAW,KAAK+T,UAAW;cACrCb,SAAS,EAAC,6HAA6H;cAAAC,QAAA,EAC1I;YAED;cAAAnI,QAAA,EAAAoI,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAtI,QAAA,EAAAoI,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAtI,QAAA,EAAAoI,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CACR;MAAA;QAAAtI,QAAA,EAAAoI,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAtI,QAAA,EAAAoI,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAtI,QAAA,EAAAoI,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACtV,EAAA,CAlnDID,gBAAgB;EAAA,QAmBdlB,aAAa;AAAA;AAAAkY,EAAA,GAnBfhX,gBAAgB;AAonDtB,eAAeA,gBAAgB;AAAC,IAAAgX,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}