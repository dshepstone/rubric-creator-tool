{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\ClassListManager.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { Upload, Users, BookOpen, GraduationCap, Play, Download, CheckCircle, Clock, AlertCircle, Unlock, FileText, ExternalLink, FileSpreadsheet } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { parseExcelFile, validateStudentData } from '../utils/excelParser';\n\n/**\r\n * Map a percentage to a letter grade, per programType\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getLetterGrade = (percentage, programType) => {\n  // Example scales — customize these thresholds to match your policy!\n  const scales = {\n    degree: [{\n      min: 90,\n      grade: 'A+'\n    }, {\n      min: 80,\n      grade: 'A'\n    }, {\n      min: 70,\n      grade: 'B'\n    }, {\n      min: 60,\n      grade: 'C'\n    }, {\n      min: 50,\n      grade: 'D'\n    }, {\n      min: 0,\n      grade: 'F'\n    }],\n    diploma: [{\n      min: 70,\n      grade: 'PASS'\n    }, {\n      min: 0,\n      grade: 'FAIL'\n    }],\n    certificate: [{\n      min: 50,\n      grade: 'P'\n    }, {\n      min: 0,\n      grade: 'F'\n    }]\n    // …add other programType scales as needed\n  };\n  const scale = scales[programType] || scales.diploma;\n  for (let tier of scale) {\n    if (percentage >= tier.min) return tier.grade;\n  }\n  return 'N/A';\n};\nconst ClassListManager = () => {\n  _s();\n  var _classList$courseMeta9, _classList$courseMeta0, _classList$courseMeta1, _classList$courseMeta10, _classList$validation;\n  const fileInputRef = useRef(null);\n  const [importStatus, setImportStatus] = useState('');\n\n  /*\r\n   * FIXES COMPLETED IN THIS UPDATE:\r\n   * ===============================\r\n   * ✅ Excel import functionality (instead of CSV)\r\n   * ✅ Start batch grading session with pause/resume functionality\r\n   * ✅ Enhanced status indicators with proper draft/final states\r\n   * ✅ Export entire class grades as CSV, HTML, and PDF with Final Grade column\r\n   * ✅ Action buttons properly handle Edit/View, Finalize, Export Grade, Unlock\r\n   * ✅ Grade calculation function added for exports\r\n   * ✅ CSV and HTML exports now include calculated final grades and percentages\r\n   *\r\n   * PENDING FIX (requires GradingTemplate update):\r\n   * ==============================================\r\n   * ❌ View action still opens empty grade sheet for saved grades\r\n   *\r\n   * SOLUTION: Add the useEffect from gradingtemplate_fix artifact to GradingTemplate.js\r\n   * and add loadFinalGrade + finalGrades to SharedContext value object.\r\n   *\r\n   * Once implemented, the View action will properly load saved rubric selections,\r\n   * feedback, attachments, video links, and late policy for both draft and final grades.\r\n   */\n\n  const {\n    classList,\n    setClassList,\n    gradingSession,\n    setGradingSession,\n    initializeGradingSession,\n    setActiveTab,\n    setCurrentStudent,\n    hasDraft,\n    getGradeStatus,\n    saveFinalGrade,\n    loadDraft,\n    saveDraft,\n    drafts,\n    sharedRubric,\n    updateStudentInfo,\n    updateAssignmentInfo,\n    loadFinalGrade,\n    // This should be available after SharedContext fix\n    finalGrades // This should be available after SharedContext fix\n  } = useAssessment();\n\n  // Helper function for status display\n  const getStatusDisplay = (progress, studentId) => {\n    const gradeStatus = getGradeStatus(studentId);\n    if (gradeStatus === 'final') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"w-4 h-4 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium\",\n          children: \"Final\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this);\n    } else if (gradeStatus === 'draft') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Clock, {\n          className: \"w-4 h-4 text-yellow-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium\",\n          children: \"Draft\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this);\n    } else if ((progress === null || progress === void 0 ? void 0 : progress.status) === 'in-progress') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium\",\n          children: \"In Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-4 h-4 bg-gray-300 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\",\n          children: \"Not Started\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  // Helper function to finalize a draft grade\n  const finalizeGrade = studentId => {\n    const draftData = drafts[studentId];\n    if (draftData) {\n      saveFinalGrade(studentId, draftData);\n\n      // Update class list progress\n      const studentIndex = classList.students.findIndex(s => s.id === studentId);\n      if (studentIndex >= 0) {\n        const updatedProgress = [...classList.gradingProgress];\n        updatedProgress[studentIndex] = {\n          ...updatedProgress[studentIndex],\n          status: 'completed_final',\n          lastModified: new Date().toISOString(),\n          gradeType: 'final'\n        };\n        setClassList(prev => ({\n          ...prev,\n          gradingProgress: updatedProgress\n        }));\n      }\n    }\n  };\n\n  // Helper function to unlock a final grade\n  const unlockGrade = studentId => {\n    // For now, we'll implement this by updating the class list progress\n    // The actual unlocking logic should be implemented in SharedContext\n    const studentIndex = classList.students.findIndex(s => s.id === studentId);\n    if (studentIndex >= 0) {\n      const updatedProgress = [...classList.gradingProgress];\n      updatedProgress[studentIndex] = {\n        ...updatedProgress[studentIndex],\n        status: 'completed_draft',\n        lastModified: new Date().toISOString(),\n        gradeType: 'draft'\n      };\n      setClassList(prev => ({\n        ...prev,\n        gradingProgress: updatedProgress\n      }));\n    }\n\n    // Note: Full unlock functionality requires additional implementation in SharedContext\n    console.log('Unlock grade for student:', studentId);\n  };\n\n  // Helper function to load final grade data\n  const loadFinalGradeData = studentId => {\n    // Use loadFinalGrade if available, otherwise fallback to checking finalGrades directly\n    if (typeof loadFinalGrade === 'function') {\n      return loadFinalGrade(studentId);\n    }\n    // Fallback: check finalGrades directly if available\n    if (finalGrades && finalGrades[studentId]) {\n      return finalGrades[studentId];\n    }\n    // Last resort: check drafts (this maintains current behavior)\n    return drafts[studentId] || null;\n  };\n\n  // Helper function to calculate grade for a student\n  const calculateStudentGrade = studentId => {\n    var _classList$courseMeta;\n    const gradeStatus = getGradeStatus(studentId);\n    let gradeData = null;\n    if (gradeStatus === 'final') {\n      gradeData = loadFinalGradeData(studentId);\n    } else if (gradeStatus === 'draft') {\n      gradeData = loadDraft(studentId);\n    }\n    if (!gradeData || !gradeData.rubricGrading) {\n      return {\n        score: 'N/A',\n        percentage: 'N/A',\n        maxPossible: 'N/A',\n        letterGrade: 'N/A'\n      };\n    }\n\n    // Calculate total score from rubric grading\n    let totalScore = 0;\n    let maxPossible = 0;\n    if (sharedRubric && sharedRubric.criteria) {\n      sharedRubric.criteria.forEach(criterion => {\n        const grading = gradeData.rubricGrading[criterion.id];\n        if (grading && grading.selectedLevel !== null) {\n          const level = criterion.levels[grading.selectedLevel];\n          if (level) {\n            totalScore += level.points * criterion.weight;\n          }\n        }\n        // Calculate max possible for this criterion\n        if (criterion.levels && criterion.levels.length > 0) {\n          const maxLevel = criterion.levels[criterion.levels.length - 1];\n          maxPossible += maxLevel.points * criterion.weight;\n        }\n      });\n\n      // Apply late penalty if applicable\n      if (gradeData.latePolicy && gradeData.latePolicy.level !== 'none') {\n        const latePenalties = {\n          within24: 0.8,\n          after24: 0.0\n        };\n        const multiplier = latePenalties[gradeData.latePolicy.level] || 1.0;\n        totalScore *= multiplier;\n      }\n    } else {\n      var _gradeData$assignment;\n      // Fallback: use assignment max points if no rubric\n      maxPossible = ((_gradeData$assignment = gradeData.assignment) === null || _gradeData$assignment === void 0 ? void 0 : _gradeData$assignment.maxPoints) || 100;\n      // Without rubric data, we can't calculate the score\n      return {\n        score: 'N/A',\n        percentage: 'N/A',\n        maxPossible,\n        letterGrade: 'N/A'\n      };\n    }\n    const percentage = maxPossible > 0 ? Math.round(totalScore / maxPossible * 100) : 0;\n    const numericScore = Math.round(totalScore * 10) / 10;\n    const maxScore = Math.round(maxPossible * 10) / 10;\n    // Compute letter grade based on course metadata\n    const letterGrade = getLetterGrade(percentage, (_classList$courseMeta = classList.courseMetadata) === null || _classList$courseMeta === void 0 ? void 0 : _classList$courseMeta.programType);\n    return {\n      score: numericScore,\n      maxPossible: maxScore,\n      percentage,\n      letterGrade\n    };\n  };\n\n  // Helper function to load student for grading\n  const loadStudentForGrading = student => {\n    const gradeStatus = getGradeStatus(student.id);\n\n    // Set the current student first\n    setCurrentStudent(student);\n\n    // Load the student info into the grading form\n    updateStudentInfo({\n      name: student.name,\n      id: student.id,\n      email: student.email\n    });\n\n    // Load rubric assignment info if available\n    if (sharedRubric) {\n      var _sharedRubric$assignm, _sharedRubric$assignm2;\n      updateAssignmentInfo({\n        name: ((_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.title) || '',\n        maxPoints: ((_sharedRubric$assignm2 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm2 === void 0 ? void 0 : _sharedRubric$assignm2.totalPoints) || 100\n      });\n    }\n\n    // Provide user feedback and load appropriate data\n    if (gradeStatus === 'final') {\n      const finalData = loadFinalGradeData(student.id);\n      console.log(`Loading final grade for ${student.name}:`, finalData ? 'Found' : 'Not found');\n    } else if (gradeStatus === 'draft') {\n      const draftData = loadDraft(student.id);\n      console.log(`Loading draft for ${student.name}:`, draftData ? 'Found' : 'Not found');\n    } else {\n      console.log(`Starting new grade for ${student.name}`);\n    }\n\n    // Switch to grading tool - the GradingTemplate useEffect will handle loading the data\n    setActiveTab('grading-tool');\n\n    // Note: The actual data loading happens in GradingTemplate's useEffect for currentStudent\n  };\n\n  // Helper function to get grading progress statistics\n  const getGradingProgress = () => {\n    if (!classList) return {\n      completed: 0,\n      total: 0,\n      percentage: 0,\n      final: 0,\n      draft: 0\n    };\n    const final = classList.gradingProgress.filter(p => {\n      var _p$status;\n      return (_p$status = p.status) === null || _p$status === void 0 ? void 0 : _p$status.startsWith('completed_final');\n    }).length;\n    const draft = classList.gradingProgress.filter(p => {\n      var _p$status2;\n      return (_p$status2 = p.status) === null || _p$status2 === void 0 ? void 0 : _p$status2.startsWith('completed_draft');\n    }).length;\n    const completed = final + draft;\n    const total = classList.students.length;\n    const percentage = total > 0 ? Math.round(completed / total * 100) : 0;\n    return {\n      completed,\n      total,\n      percentage,\n      final,\n      draft\n    };\n  };\n\n  // Export class grades as CSV\n  const exportClassGradesCSV = () => {\n    var _classList$courseMeta2;\n    if (!classList) return;\n    const csvContent = [['Student ID', 'Student Name', 'Email', 'Program', 'Status', 'Grade Type', 'Numeric Grade', 'Letter Grade', 'Percentage', 'Last Modified'], ...classList.students.map((student, index) => {\n      const progress = classList.gradingProgress[index];\n      const gradeInfo = calculateStudentGrade(student.id);\n      return [student.id, student.name, student.email, student.program || 'N/A', (progress === null || progress === void 0 ? void 0 : progress.status) || 'pending', (progress === null || progress === void 0 ? void 0 : progress.gradeType) || 'none', gradeInfo.score !== 'N/A' ? `${gradeInfo.score}/${gradeInfo.maxPossible}` : 'N/A', gradeInfo.letterGrade || 'N/A', gradeInfo.percentage !== 'N/A' ? `${gradeInfo.percentage}%` : 'N/A', progress !== null && progress !== void 0 && progress.lastModified ? new Date(progress.lastModified).toLocaleDateString() : 'Never'];\n    })].map(row => row.join(',')).join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${((_classList$courseMeta2 = classList.courseMetadata) === null || _classList$courseMeta2 === void 0 ? void 0 : _classList$courseMeta2.courseCode) || 'class'}_grades_${new Date().toISOString().split('T')[0]}.csv`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export class grades as HTML\n  const exportClassGradesHTML = () => {\n    var _classList$courseMeta3, _classList$courseMeta4, _classList$courseMeta5, _classList$courseMeta6, _classList$courseMeta7;\n    if (!classList) return;\n    const progress = getGradingProgress();\n    const currentDate = new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n    const htmlContent = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Class Grade Report - ${((_classList$courseMeta3 = classList.courseMetadata) === null || _classList$courseMeta3 === void 0 ? void 0 : _classList$courseMeta3.courseCode) || 'Class'}</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            line-height: 1.6;\n            margin: 0;\n            padding: 20px;\n            background-color: #f8fafc;\n        }\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            padding: 30px;\n        }\n        .header {\n            border-bottom: 3px solid #3b82f6;\n            padding-bottom: 20px;\n            margin-bottom: 30px;\n        }\n        .header h1 {\n            color: #1e40af;\n            margin: 0 0 10px 0;\n            font-size: 2rem;\n        }\n        .header .course-info {\n            color: #6b7280;\n            font-size: 1.1rem;\n        }\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .stat-card {\n            background: #f1f5f9;\n            padding: 20px;\n            border-radius: 8px;\n            text-align: center;\n            border-left: 4px solid #3b82f6;\n        }\n        .stat-card .number {\n            font-size: 2rem;\n            font-weight: bold;\n            color: #1e40af;\n            margin-bottom: 5px;\n        }\n        .stat-card .label {\n            color: #64748b;\n            font-size: 0.9rem;\n        }\n        .table-container {\n            overflow-x: auto;\n            margin-bottom: 30px;\n        }\n        table {\n            width: 100%;\n            border-collapse: collapse;\n            background: white;\n        }\n        th, td {\n            padding: 12px;\n            text-align: left;\n            border-bottom: 1px solid #e5e7eb;\n        }\n        th {\n            background-color: #f8fafc;\n            font-weight: 600;\n            color: #374151;\n            position: sticky;\n            top: 0;\n        }\n        tr:hover {\n            background-color: #f9fafb;\n        }\n        .status-badge {\n            padding: 4px 8px;\n            border-radius: 12px;\n            font-size: 0.75rem;\n            font-weight: 500;\n        }\n        .status-final {\n            background-color: #dcfce7;\n            color: #166534;\n        }\n        .status-draft {\n            background-color: #fef3c7;\n            color: #92400e;\n        }\n        .status-pending {\n            background-color: #f3f4f6;\n            color: #6b7280;\n        }\n        .footer {\n            text-align: center;\n            color: #6b7280;\n            font-size: 0.9rem;\n            border-top: 1px solid #e5e7eb;\n            padding-top: 20px;\n        }\n        @media print {\n            body { background: white; }\n            .container { box-shadow: none; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>📊 Class Grade Report</h1>\n            <div class=\"course-info\">\n                <strong>${((_classList$courseMeta4 = classList.courseMetadata) === null || _classList$courseMeta4 === void 0 ? void 0 : _classList$courseMeta4.courseCode) || 'N/A'}</strong> -\n                ${((_classList$courseMeta5 = classList.courseMetadata) === null || _classList$courseMeta5 === void 0 ? void 0 : _classList$courseMeta5.courseName) || 'Imported Class'} |\n                Section: ${((_classList$courseMeta6 = classList.courseMetadata) === null || _classList$courseMeta6 === void 0 ? void 0 : _classList$courseMeta6.section) || 'N/A'}\n            </div>\n        </div>\n\n        <div class=\"stats-grid\">\n            <div class=\"stat-card\">\n                <div class=\"number\">${progress.total}</div>\n                <div class=\"label\">Total Students</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"number\">${progress.final}</div>\n                <div class=\"label\">Final Grades</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"number\">${progress.draft}</div>\n                <div class=\"label\">Draft Grades</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"number\">${progress.percentage}%</div>\n                <div class=\"label\">Completion Rate</div>\n            </div>\n        </div>\n\n        <div class=\"table-container\">\n            <table>\n                <thead>\n                    <tr>\n                        <th>#</th>\n                        <th>Student ID</th>\n                        <th>Student Name</th>\n                        <th>Email</th>\n                        <th>Program</th>\n                        <th>Status</th>\n                        <th>Grade Type</th>\n                        <th>Final Grade</th>\n                        <th>Percentage</th>\n                        <th>Last Modified</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${classList.students.map((student, index) => {\n      const studentProgress = classList.gradingProgress[index];\n      const gradeInfo = calculateStudentGrade(student.id);\n      const status = (studentProgress === null || studentProgress === void 0 ? void 0 : studentProgress.status) || 'pending';\n      const gradeType = (studentProgress === null || studentProgress === void 0 ? void 0 : studentProgress.gradeType) || 'none';\n      const lastModified = studentProgress !== null && studentProgress !== void 0 && studentProgress.lastModified ? new Date(studentProgress.lastModified).toLocaleDateString() : 'Never';\n      let statusClass = 'status-pending';\n      if (status.includes('final')) statusClass = 'status-final';else if (status.includes('draft')) statusClass = 'status-draft';\n      return `\n                            <tr>\n                                <td>${index + 1}</td>\n                                <td>${student.id}</td>\n                                <td><strong>${student.name}</strong></td>\n                                <td>${student.email}</td>\n                                <td>${student.program || 'N/A'}</td>\n                                <td><span class=\"status-badge ${statusClass}\">${status}</span></td>\n                                <td>${gradeType}</td>\n                                <td><strong>${gradeInfo.score !== 'N/A' ? `${gradeInfo.score}/${gradeInfo.maxPossible}` : 'N/A'}</strong></td>\n                                <td>${gradeInfo.percentage !== 'N/A' ? `${gradeInfo.percentage}%` : 'N/A'}</td>\n                                <td>${lastModified}</td>\n                            </tr>\n                        `;\n    }).join('')}\n                </tbody>\n            </table>\n        </div>\n\n        <div class=\"footer\">\n            <p><strong>Class Grade Report Generated</strong></p>\n            <p>${currentDate} | ${new Date().toLocaleTimeString()}</p>\n            <p>Imported from: ${classList.fileName} | Assessment Platform v2.0</p>\n        </div>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${((_classList$courseMeta7 = classList.courseMetadata) === null || _classList$courseMeta7 === void 0 ? void 0 : _classList$courseMeta7.courseCode) || 'class'}_grade_report_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // ── PDF export stub ────────────────────────────────────────────────────────\n  // This makes your “PDF” button call the browser’s print dialog.\n  const exportClassGradesPDF = () => {\n    // If no class list is loaded, do nothing\n    if (!classList) return;\n\n    // Fire the print dialog (user can choose “Save as PDF”)\n    window.print();\n  };\n  // ──────────────────────────────\n\n  // ── New: Export a single student's grade as CSV ───────────────────────────────\n  const exportStudentGrade = studentId => {\n    var _classList$courseMeta8;\n    // 1. Make sure we have a classList\n    if (!classList) return;\n\n    // 2. Find the student record\n    const student = classList.students.find(s => s.id === studentId);\n    if (!student) return;\n\n    // 3. Calculate their grade (score, percentage, etc.)\n    const gradeInfo = calculateStudentGrade(studentId);\n\n    // 4. Build a 2-row CSV: headers + this student's data\n    const rows = [['Student ID', 'Numeric Score', 'Letter Grade', 'Percentage'], [student.id, `${gradeInfo.score}/${gradeInfo.maxPossible}`, gradeInfo.letterGrade, `${gradeInfo.percentage}%`]];\n    const csvContent = rows.map(r => r.join(',')).join('\\n');\n\n    // 5. Trigger download\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${((_classList$courseMeta8 = classList.courseMetadata) === null || _classList$courseMeta8 === void 0 ? void 0 : _classList$courseMeta8.courseCode) || 'grade'}_${student.id}.csv`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  // ────────────────────────────\n\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    setImportStatus('processing');\n    try {\n      var _result$courseMetadat, _result$courseMetadat2, _result$courseMetadat3, _result$courseMetadat4, _result$courseMetadat5, _result$courseMetadat6, _result$courseMetadat7;\n      // Use Excel parser instead of manual CSV parsing\n      const result = await parseExcelFile(file);\n      if (!result.success) {\n        throw new Error(result.error || 'Failed to parse Excel file');\n      }\n\n      // Validate the parsed student data\n      const validation = validateStudentData(result.students);\n      if (result.students.length === 0) {\n        throw new Error('No valid student records found in Excel file');\n      }\n\n      // Create grading progress tracking for each student\n      const gradingProgress = result.students.map(() => ({\n        status: 'pending',\n        lastModified: null,\n        gradeType: null\n      }));\n      const classListData = {\n        students: result.students,\n        gradingProgress,\n        fileName: file.name,\n        fileSize: file.size,\n        importTime: new Date().toISOString(),\n        // Now include \"instructor\" (falls back to 'TBD' if none)\n        courseMetadata: {\n          courseCode: ((_result$courseMetadat = result.courseMetadata) === null || _result$courseMetadat === void 0 ? void 0 : _result$courseMetadat.courseCode) || 'IMPORTED',\n          courseName: ((_result$courseMetadat2 = result.courseMetadata) === null || _result$courseMetadat2 === void 0 ? void 0 : _result$courseMetadat2.courseName) || 'Excel Import',\n          section: ((_result$courseMetadat3 = result.courseMetadata) === null || _result$courseMetadat3 === void 0 ? void 0 : _result$courseMetadat3.section) || 'DEFAULT',\n          programType: (_result$courseMetadat4 = result.courseMetadata) === null || _result$courseMetadat4 === void 0 ? void 0 : _result$courseMetadat4.programType,\n          // e.g. 'degree' | 'diploma' | 'certificate'\n          // ← Try .instructor first, then .professors (your Excel parser writes the names there)\n          instructor: ((_result$courseMetadat5 = result.courseMetadata) === null || _result$courseMetadat5 === void 0 ? void 0 : _result$courseMetadat5.instructor // if you manually had an \"Instructor\" column\n          ) || ((_result$courseMetadat6 = result.courseMetadata) === null || _result$courseMetadat6 === void 0 ? void 0 : _result$courseMetadat6.professors) // fall back to your \"Professors\" column\n          || 'TBD',\n          term: ((_result$courseMetadat7 = result.courseMetadata) === null || _result$courseMetadat7 === void 0 ? void 0 : _result$courseMetadat7.term) || 'TBD'\n        },\n        validation: {\n          validationScore: validation.validationScore || 100,\n          issues: validation.issues || []\n        }\n      };\n      setClassList(classListData);\n      setImportStatus('success');\n      setTimeout(() => setImportStatus(''), 3000);\n    } catch (error) {\n      console.error('Excel import error:', error);\n      setImportStatus('error');\n      setTimeout(() => setImportStatus(''), 3000);\n    }\n  };\n  const startGradingSession = () => {\n    if (!classList || classList.students.length === 0) {\n      alert('No students available for grading.');\n      return;\n    }\n    if (!sharedRubric) {\n      alert('Please load a rubric before starting batch grading.');\n      return;\n    }\n\n    // Initialize the grading session (this will set up the first student)\n    const success = initializeGradingSession(classList);\n    if (success) {\n      setActiveTab('grading-tool');\n    }\n  };\n\n  // Pause the grading session\n  const pauseGradingSession = () => {\n    setGradingSession(prev => ({\n      ...prev,\n      active: false\n    }));\n  };\n\n  // Resume the grading session\n  const resumeGradingSession = () => {\n    setGradingSession(prev => ({\n      ...prev,\n      active: true\n    }));\n    setActiveTab('grading-tool');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r text-gray-800 p-6 rounded-t-lg shadow-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-3xl font-bold mb-2\",\n              children: \"Class List Manager\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Import, manage, and grade entire classes efficiently\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [classList && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-bold\",\n                children: classList.students.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-700\",\n                children: \"Students\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Users, {\n              size: 48,\n              className: \"text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-b-lg shadow-lg\",\n        children: [!classList && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl mx-auto text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-50 border border-blue-200 rounded-lg p-8 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                size: 48,\n                className: \"mx-auto text-blue-600 mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-2xl font-bold text-gray-800 mb-4\",\n                children: \"Import Student List\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mb-6\",\n                children: \"Upload an Excel file (.xls or .xlsx) containing your student roster to begin class management.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileInputRef,\n                type: \"file\",\n                accept: \".xls,.xlsx\",\n                onChange: handleFileUpload,\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                disabled: importStatus === 'processing',\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors inline-flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n                children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 789,\n                  columnNumber: 41\n                }, this), importStatus === 'processing' ? 'Processing...' : 'Choose Excel File']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 37\n              }, this), importStatus === 'success' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 text-green-600 font-medium\",\n                children: \"\\u2713 Excel file imported successfully!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 41\n              }, this), importStatus === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 text-red-600 font-medium\",\n                children: \"\\u2717 Error importing Excel file. Please check format and try again.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 rounded-lg p-6 text-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-gray-800 mb-3\",\n                children: \"Expected Excel Format:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Required columns:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 809,\n                    columnNumber: 46\n                  }, this), \" ID, Name, Email\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 809,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Optional columns:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 810,\n                    columnNumber: 46\n                  }, this), \" Program, Campus, Level, Status\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 810,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"File types:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 811,\n                    columnNumber: 46\n                  }, this), \" .xls or .xlsx\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 811,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Note:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 812,\n                    columnNumber: 46\n                  }, this), \" First row should contain column headers\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 25\n        }, this), classList && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n                  className: \"text-blue-600\",\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-blue-800\",\n                  children: \"Course Information\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 828,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 826,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Code:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 45\n                  }, this), ' ', ((_classList$courseMeta9 = classList.courseMetadata) === null || _classList$courseMeta9 === void 0 ? void 0 : _classList$courseMeta9.courseCode) || 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 833,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Name:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 838,\n                    columnNumber: 45\n                  }, this), ' ', ((_classList$courseMeta0 = classList.courseMetadata) === null || _classList$courseMeta0 === void 0 ? void 0 : _classList$courseMeta0.courseName) || 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 837,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Section:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 842,\n                    columnNumber: 45\n                  }, this), ' ', ((_classList$courseMeta1 = classList.courseMetadata) === null || _classList$courseMeta1 === void 0 ? void 0 : _classList$courseMeta1.section) || 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 841,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Professor:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 846,\n                    columnNumber: 45\n                  }, this), ' ', ((_classList$courseMeta10 = classList.courseMetadata) === null || _classList$courseMeta10 === void 0 ? void 0 : _classList$courseMeta10.instructor) || 'N/A']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 845,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(GraduationCap, {\n                  className: \"text-green-600\",\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 855,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-green-800\",\n                  children: \"Grading Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Total Students:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 862,\n                    columnNumber: 45\n                  }, this), \" \", classList.students.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 861,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Final Grades:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 865,\n                    columnNumber: 45\n                  }, this), ' ', getGradingProgress().final]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 864,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Draft Grades:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 869,\n                    columnNumber: 45\n                  }, this), ' ', getGradingProgress().draft]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Completion:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 873,\n                    columnNumber: 45\n                  }, this), ' ', getGradingProgress().percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 872,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(Play, {\n                  className: \"text-purple-600\",\n                  size: 24\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 882,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-purple-800\",\n                  children: \"Batch Grading Session\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 883,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-3\",\n                children: !(gradingSession !== null && gradingSession !== void 0 && gradingSession.active) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-purple-600 mb-2\",\n                    children: (gradingSession === null || gradingSession === void 0 ? void 0 : gradingSession.currentStudentIndex) > 0 ? `Paused at student ${gradingSession.currentStudentIndex + 1} of ${classList.students.length}` : 'Ready to start batch grading'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 890,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-2\",\n                    children: [(gradingSession === null || gradingSession === void 0 ? void 0 : gradingSession.currentStudentIndex) > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: resumeGradingSession,\n                      className: \"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors\",\n                      children: [/*#__PURE__*/_jsxDEV(Play, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 902,\n                        columnNumber: 61\n                      }, this), \"Resume Session\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 898,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: startGradingSession,\n                      disabled: !sharedRubric,\n                      className: \"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                      children: [/*#__PURE__*/_jsxDEV(Play, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 911,\n                        columnNumber: 61\n                      }, this), \"Start Batch Grading\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 906,\n                      columnNumber: 57\n                    }, this), !sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-purple-600 mt-1\",\n                      children: \"Load a rubric first\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 916,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 896,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 889,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm text-green-600 font-medium mb-2\",\n                    children: [\"\\u2713 Session Active - Student \", gradingSession.currentStudentIndex + 1, \" of \", classList.students.length]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 924,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: pauseGradingSession,\n                    className: \"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors\",\n                    children: [/*#__PURE__*/_jsxDEV(Clock, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 931,\n                      columnNumber: 53\n                    }, this), \"Pause Session\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 927,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 923,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 887,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 823,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border border-gray-200 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-800\",\n                children: \"Student Roster\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 943,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: exportClassGradesCSV,\n                  className: \"px-2 py-1 rounded text-xs font-medium text-white bg-green-500 hover:bg-green-700 focus:ring-2 focus:ring-green-500 transition-colors duration-150\",\n                  children: [/*#__PURE__*/_jsxDEV(Download, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 951,\n                    columnNumber: 45\n                  }, this), \"CSV\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 947,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: exportClassGradesHTML,\n                  className: \"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 958,\n                    columnNumber: 45\n                  }, this), \"HTML\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 954,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: exportClassGradesPDF,\n                  className: \"flex items-center gap-1 px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 965,\n                    columnNumber: 45\n                  }, this), \"PDF\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 961,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 946,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 942,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table-auto w-max mx-auto\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-50\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"#\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 976,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 979,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Student ID\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 982,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 985,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 988,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Program\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 991,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"w-48 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 995,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 975,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 974,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  className: \"bg-white divide-y divide-gray-200\",\n                  children: classList.students.map((student, index) => {\n                    const progress = classList.gradingProgress[index];\n                    const isCurrentStudent = gradingSession.active && index === gradingSession.currentStudentIndex;\n                    const gradeStatus = getGradeStatus(student.id);\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      className: `${isCurrentStudent ? 'bg-blue-50 border-l-4 border-blue-500' : 'hover:bg-gray-50'} transition-colors`,\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-4 py-2 whitespace-normal break-words text-sm text-gray-900 max-w-xs\",\n                        children: index + 1\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1014,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-6 py-4 whitespace-nowrap\",\n                        children: getStatusDisplay(progress, student.id)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1017,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n                        children: student.id\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1020,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-4 py-2 whitespace-normal break-words text-sm text-gray-900 max-w-xs\",\n                        children: student.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1023,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-4 py-2 whitespace-normal break-words text-sm text-gray-500 max-w-xs\",\n                        children: student.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1026,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                        children: student.program\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1029,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"w-48 px-4 py-2 text-sm whitespace-normal\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex flex-wrap items-center gap-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => loadStudentForGrading(student),\n                            className: \"flex items-center gap-1 px-3 py-1 bg-blue-500 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-blue-500 duration-150\",\n                            children: gradeStatus === 'final' ? 'View' : 'Edit'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1038,\n                            columnNumber: 65\n                          }, this), gradeStatus === 'draft' && /*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => finalizeGrade(student.id),\n                            className: \"flex items-center gap-1 px-3 py-1 bg-green-500 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-green-500 duration-150\",\n                            children: \"Finalize\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1047,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => exportStudentGrade(student.id),\n                            className: \"flex items-center gap-1 px-3 py-1 bg-purple-500 hover:bg-purple-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-purple-500 duration-150\",\n                            children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n                              size: 14\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1060,\n                              columnNumber: 69\n                            }, this), \"Export Grade\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1056,\n                            columnNumber: 65\n                          }, this), gradeStatus === 'final' && /*#__PURE__*/_jsxDEV(\"button\", {\n                            onClick: () => unlockGrade(student.id),\n                            className: \"flex items-center gap-1 px-3 py-1 bg-orange-500 hover:bg-orange-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-orange-500 duration-150\",\n                            children: [/*#__PURE__*/_jsxDEV(Unlock, {\n                              size: 14\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1070,\n                              columnNumber: 73\n                            }, this), \"Unlock\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1066,\n                            columnNumber: 69\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1036,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1035,\n                        columnNumber: 57\n                      }, this)]\n                    }, student.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1007,\n                      columnNumber: 53\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1000,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 973,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 971,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-8 bg-gray-50 rounded-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800 mb-4\",\n              children: \"Import Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"File:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1089,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: classList.fileName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1090,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1088,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Import Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1093,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: new Date(classList.importTime).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1094,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1092,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Data Quality:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1099,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: [((_classList$validation = classList.validation) === null || _classList$validation === void 0 ? void 0 : _classList$validation.validationScore) || 0, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1100,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1098,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Total Students:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1105,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: classList.students.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1106,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1104,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1085,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 762,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 735,\n    columnNumber: 9\n  }, this);\n};\n_s(ClassListManager, \"Mq6Qn+DWMOp+ZzxlfLlEwpDlHvM=\", false, function () {\n  return [useAssessment];\n});\n_c = ClassListManager;\nexport default ClassListManager;\nvar _c;\n$RefreshReg$(_c, \"ClassListManager\");","map":{"version":3,"names":["React","useRef","useState","Upload","Users","BookOpen","GraduationCap","Play","Download","CheckCircle","Clock","AlertCircle","Unlock","FileText","ExternalLink","FileSpreadsheet","useAssessment","parseExcelFile","validateStudentData","jsxDEV","_jsxDEV","getLetterGrade","percentage","programType","scales","degree","min","grade","diploma","certificate","scale","tier","ClassListManager","_s","_classList$courseMeta9","_classList$courseMeta0","_classList$courseMeta1","_classList$courseMeta10","_classList$validation","fileInputRef","importStatus","setImportStatus","classList","setClassList","gradingSession","setGradingSession","initializeGradingSession","setActiveTab","setCurrentStudent","hasDraft","getGradeStatus","saveFinalGrade","loadDraft","saveDraft","drafts","sharedRubric","updateStudentInfo","updateAssignmentInfo","loadFinalGrade","finalGrades","getStatusDisplay","progress","studentId","gradeStatus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","status","finalizeGrade","draftData","studentIndex","students","findIndex","s","id","updatedProgress","gradingProgress","lastModified","Date","toISOString","gradeType","prev","unlockGrade","console","log","loadFinalGradeData","calculateStudentGrade","_classList$courseMeta","gradeData","rubricGrading","score","maxPossible","letterGrade","totalScore","criteria","forEach","criterion","grading","selectedLevel","level","levels","points","weight","length","maxLevel","latePolicy","latePenalties","within24","after24","multiplier","_gradeData$assignment","assignment","maxPoints","Math","round","numericScore","maxScore","courseMetadata","loadStudentForGrading","student","name","email","_sharedRubric$assignm","_sharedRubric$assignm2","assignmentInfo","title","totalPoints","finalData","getGradingProgress","completed","total","final","draft","filter","p","_p$status","startsWith","_p$status2","exportClassGradesCSV","_classList$courseMeta2","csvContent","map","index","gradeInfo","program","toLocaleDateString","row","join","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","courseCode","split","click","revokeObjectURL","exportClassGradesHTML","_classList$courseMeta3","_classList$courseMeta4","_classList$courseMeta5","_classList$courseMeta6","_classList$courseMeta7","currentDate","weekday","year","month","day","htmlContent","courseName","section","studentProgress","statusClass","includes","toLocaleTimeString","htmlBlob","exportClassGradesPDF","window","print","exportStudentGrade","_classList$courseMeta8","find","rows","r","handleFileUpload","event","file","target","files","_result$courseMetadat","_result$courseMetadat2","_result$courseMetadat3","_result$courseMetadat4","_result$courseMetadat5","_result$courseMetadat6","_result$courseMetadat7","result","success","Error","error","validation","classListData","fileSize","size","importTime","instructor","professors","term","validationScore","issues","setTimeout","startGradingSession","alert","pauseGradingSession","active","resumeGradingSession","ref","accept","onChange","onClick","_fileInputRef$current","current","disabled","currentStudentIndex","isCurrentStudent","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/ClassListManager.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport {\r\n    Upload,\r\n    Users,\r\n    BookOpen,\r\n    GraduationCap,\r\n    Play,\r\n    Download,\r\n    CheckCircle,\r\n    Clock,\r\n    AlertCircle,\r\n    Unlock,\r\n    FileText,\r\n    ExternalLink,\r\n    FileSpreadsheet\r\n} from 'lucide-react';\r\nimport { useAssessment } from './SharedContext';\r\nimport { parseExcelFile, validateStudentData } from '../utils/excelParser';\r\n\r\n/**\r\n * Map a percentage to a letter grade, per programType\r\n */\r\nconst getLetterGrade = (percentage, programType) => {\r\n    // Example scales — customize these thresholds to match your policy!\r\n    const scales = {\r\n        degree: [\r\n            { min: 90, grade: 'A+' },\r\n            { min: 80, grade: 'A' },\r\n            { min: 70, grade: 'B' },\r\n            { min: 60, grade: 'C' },\r\n            { min: 50, grade: 'D' },\r\n            { min: 0, grade: 'F' },\r\n        ],\r\n        diploma: [\r\n            { min: 70, grade: 'PASS' },\r\n            { min: 0, grade: 'FAIL' }\r\n        ],\r\n        certificate: [\r\n            { min: 50, grade: 'P' },\r\n            { min: 0, grade: 'F' }\r\n        ]\r\n        // …add other programType scales as needed\r\n    };\r\n\r\n    const scale = scales[programType] || scales.diploma;\r\n    for (let tier of scale) {\r\n        if (percentage >= tier.min) return tier.grade;\r\n    }\r\n    return 'N/A';\r\n};\r\n\r\n\r\nconst ClassListManager = () => {\r\n    const fileInputRef = useRef(null);\r\n    const [importStatus, setImportStatus] = useState('');\r\n\r\n    /*\r\n     * FIXES COMPLETED IN THIS UPDATE:\r\n     * ===============================\r\n     * ✅ Excel import functionality (instead of CSV)\r\n     * ✅ Start batch grading session with pause/resume functionality\r\n     * ✅ Enhanced status indicators with proper draft/final states\r\n     * ✅ Export entire class grades as CSV, HTML, and PDF with Final Grade column\r\n     * ✅ Action buttons properly handle Edit/View, Finalize, Export Grade, Unlock\r\n     * ✅ Grade calculation function added for exports\r\n     * ✅ CSV and HTML exports now include calculated final grades and percentages\r\n     *\r\n     * PENDING FIX (requires GradingTemplate update):\r\n     * ==============================================\r\n     * ❌ View action still opens empty grade sheet for saved grades\r\n     *\r\n     * SOLUTION: Add the useEffect from gradingtemplate_fix artifact to GradingTemplate.js\r\n     * and add loadFinalGrade + finalGrades to SharedContext value object.\r\n     *\r\n     * Once implemented, the View action will properly load saved rubric selections,\r\n     * feedback, attachments, video links, and late policy for both draft and final grades.\r\n     */\r\n\r\n    const {\r\n        classList,\r\n        setClassList,\r\n        gradingSession,\r\n        setGradingSession,\r\n        initializeGradingSession,\r\n        setActiveTab,\r\n        setCurrentStudent,\r\n        hasDraft,\r\n        getGradeStatus,\r\n        saveFinalGrade,\r\n        loadDraft,\r\n        saveDraft,\r\n        drafts,\r\n        sharedRubric,\r\n        updateStudentInfo,\r\n        updateAssignmentInfo,\r\n        loadFinalGrade, // This should be available after SharedContext fix\r\n        finalGrades // This should be available after SharedContext fix\r\n    } = useAssessment();\r\n\r\n    // Helper function for status display\r\n    const getStatusDisplay = (progress, studentId) => {\r\n        const gradeStatus = getGradeStatus(studentId);\r\n\r\n        if (gradeStatus === 'final') {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <CheckCircle className=\"w-4 h-4 text-green-600\" />\r\n                    <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium\">\r\n                        Final\r\n                    </span>\r\n                </div>\r\n            );\r\n        } else if (gradeStatus === 'draft') {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Clock className=\"w-4 h-4 text-yellow-600\" />\r\n                    <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium\">\r\n                        Draft\r\n                    </span>\r\n                </div>\r\n            );\r\n        } else if (progress?.status === 'in-progress') {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\r\n                    <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium\">\r\n                        In Progress\r\n                    </span>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-4 h-4 bg-gray-300 rounded-full\"></div>\r\n                    <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">\r\n                        Not Started\r\n                    </span>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    // Helper function to finalize a draft grade\r\n    const finalizeGrade = (studentId) => {\r\n        const draftData = drafts[studentId];\r\n        if (draftData) {\r\n            saveFinalGrade(studentId, draftData);\r\n\r\n            // Update class list progress\r\n            const studentIndex = classList.students.findIndex(s => s.id === studentId);\r\n            if (studentIndex >= 0) {\r\n                const updatedProgress = [...classList.gradingProgress];\r\n                updatedProgress[studentIndex] = {\r\n                    ...updatedProgress[studentIndex],\r\n                    status: 'completed_final',\r\n                    lastModified: new Date().toISOString(),\r\n                    gradeType: 'final'\r\n                };\r\n                setClassList(prev => ({\r\n                    ...prev,\r\n                    gradingProgress: updatedProgress\r\n                }));\r\n            }\r\n        }\r\n    };\r\n\r\n    // Helper function to unlock a final grade\r\n    const unlockGrade = (studentId) => {\r\n        // For now, we'll implement this by updating the class list progress\r\n        // The actual unlocking logic should be implemented in SharedContext\r\n        const studentIndex = classList.students.findIndex(s => s.id === studentId);\r\n        if (studentIndex >= 0) {\r\n            const updatedProgress = [...classList.gradingProgress];\r\n            updatedProgress[studentIndex] = {\r\n                ...updatedProgress[studentIndex],\r\n                status: 'completed_draft',\r\n                lastModified: new Date().toISOString(),\r\n                gradeType: 'draft'\r\n            };\r\n            setClassList(prev => ({\r\n                ...prev,\r\n                gradingProgress: updatedProgress\r\n            }));\r\n        }\r\n\r\n        // Note: Full unlock functionality requires additional implementation in SharedContext\r\n        console.log('Unlock grade for student:', studentId);\r\n    };\r\n\r\n    // Helper function to load final grade data\r\n    const loadFinalGradeData = (studentId) => {\r\n        // Use loadFinalGrade if available, otherwise fallback to checking finalGrades directly\r\n        if (typeof loadFinalGrade === 'function') {\r\n            return loadFinalGrade(studentId);\r\n        }\r\n        // Fallback: check finalGrades directly if available\r\n        if (finalGrades && finalGrades[studentId]) {\r\n            return finalGrades[studentId];\r\n        }\r\n        // Last resort: check drafts (this maintains current behavior)\r\n        return drafts[studentId] || null;\r\n    };\r\n\r\n    // Helper function to calculate grade for a student\r\n    const calculateStudentGrade = (studentId) => {\r\n        const gradeStatus = getGradeStatus(studentId);\r\n        let gradeData = null;\r\n\r\n        if (gradeStatus === 'final') {\r\n            gradeData = loadFinalGradeData(studentId);\r\n        } else if (gradeStatus === 'draft') {\r\n            gradeData = loadDraft(studentId);\r\n        }\r\n\r\n        if (!gradeData || !gradeData.rubricGrading) {\r\n            return { score: 'N/A', percentage: 'N/A', maxPossible: 'N/A', letterGrade: 'N/A' };\r\n        }\r\n\r\n        // Calculate total score from rubric grading\r\n        let totalScore = 0;\r\n        let maxPossible = 0;\r\n\r\n        if (sharedRubric && sharedRubric.criteria) {\r\n            sharedRubric.criteria.forEach(criterion => {\r\n                const grading = gradeData.rubricGrading[criterion.id];\r\n                if (grading && grading.selectedLevel !== null) {\r\n                    const level = criterion.levels[grading.selectedLevel];\r\n                    if (level) {\r\n                        totalScore += level.points * criterion.weight;\r\n                    }\r\n                }\r\n                // Calculate max possible for this criterion\r\n                if (criterion.levels && criterion.levels.length > 0) {\r\n                    const maxLevel = criterion.levels[criterion.levels.length - 1];\r\n                    maxPossible += maxLevel.points * criterion.weight;\r\n                }\r\n            });\r\n\r\n            // Apply late penalty if applicable\r\n            if (gradeData.latePolicy && gradeData.latePolicy.level !== 'none') {\r\n                const latePenalties = {\r\n                    within24: 0.8,\r\n                    after24: 0.0\r\n                };\r\n                const multiplier = latePenalties[gradeData.latePolicy.level] || 1.0;\r\n                totalScore *= multiplier;\r\n            }\r\n        } else {\r\n            // Fallback: use assignment max points if no rubric\r\n            maxPossible = gradeData.assignment?.maxPoints || 100;\r\n            // Without rubric data, we can't calculate the score\r\n            return { score: 'N/A', percentage: 'N/A', maxPossible, letterGrade: 'N/A' };\r\n        }\r\n\r\n        const percentage = maxPossible > 0 ? Math.round((totalScore / maxPossible) * 100) : 0;\r\n        const numericScore = Math.round(totalScore * 10) / 10;\r\n        const maxScore = Math.round(maxPossible * 10) / 10;\r\n        // Compute letter grade based on course metadata\r\n        const letterGrade = getLetterGrade(\r\n            percentage,\r\n            classList.courseMetadata?.programType\r\n        );\r\n\r\n        return {\r\n            score: numericScore,\r\n            maxPossible: maxScore,\r\n            percentage,\r\n            letterGrade\r\n        };\r\n    };\r\n\r\n    // Helper function to load student for grading\r\n    const loadStudentForGrading = (student) => {\r\n        const gradeStatus = getGradeStatus(student.id);\r\n\r\n        // Set the current student first\r\n        setCurrentStudent(student);\r\n\r\n        // Load the student info into the grading form\r\n        updateStudentInfo({\r\n            name: student.name,\r\n            id: student.id,\r\n            email: student.email\r\n        });\r\n\r\n        // Load rubric assignment info if available\r\n        if (sharedRubric) {\r\n            updateAssignmentInfo({\r\n                name: sharedRubric.assignmentInfo?.title || '',\r\n                maxPoints: sharedRubric.assignmentInfo?.totalPoints || 100\r\n            });\r\n        }\r\n\r\n        // Provide user feedback and load appropriate data\r\n        if (gradeStatus === 'final') {\r\n            const finalData = loadFinalGradeData(student.id);\r\n            console.log(`Loading final grade for ${student.name}:`, finalData ? 'Found' : 'Not found');\r\n        } else if (gradeStatus === 'draft') {\r\n            const draftData = loadDraft(student.id);\r\n            console.log(`Loading draft for ${student.name}:`, draftData ? 'Found' : 'Not found');\r\n        } else {\r\n            console.log(`Starting new grade for ${student.name}`);\r\n        }\r\n\r\n        // Switch to grading tool - the GradingTemplate useEffect will handle loading the data\r\n        setActiveTab('grading-tool');\r\n\r\n        // Note: The actual data loading happens in GradingTemplate's useEffect for currentStudent\r\n    };\r\n\r\n    // Helper function to get grading progress statistics\r\n    const getGradingProgress = () => {\r\n        if (!classList) return { completed: 0, total: 0, percentage: 0, final: 0, draft: 0 };\r\n\r\n        const final = classList.gradingProgress.filter(p =>\r\n            p.status?.startsWith('completed_final')\r\n        ).length;\r\n\r\n        const draft = classList.gradingProgress.filter(p =>\r\n            p.status?.startsWith('completed_draft')\r\n        ).length;\r\n\r\n        const completed = final + draft;\r\n        const total = classList.students.length;\r\n        const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\r\n\r\n        return { completed, total, percentage, final, draft };\r\n    };\r\n\r\n    // Export class grades as CSV\r\n    const exportClassGradesCSV = () => {\r\n        if (!classList) return;\r\n\r\n        const csvContent = [\r\n            ['Student ID', 'Student Name', 'Email', 'Program', 'Status', 'Grade Type', 'Numeric Grade', 'Letter Grade', 'Percentage', 'Last Modified'],\r\n            ...classList.students.map((student, index) => {\r\n                const progress = classList.gradingProgress[index];\r\n                const gradeInfo = calculateStudentGrade(student.id);\r\n                return [\r\n                    student.id,\r\n                    student.name,\r\n                    student.email,\r\n                    student.program || 'N/A',\r\n                    progress?.status || 'pending',\r\n                    progress?.gradeType || 'none',\r\n                    gradeInfo.score !== 'N/A' ? `${gradeInfo.score}/${gradeInfo.maxPossible}` : 'N/A',\r\n                    gradeInfo.letterGrade || 'N/A',\r\n                    gradeInfo.percentage !== 'N/A' ? `${gradeInfo.percentage}%` : 'N/A',\r\n                    progress?.lastModified ? new Date(progress.lastModified).toLocaleDateString() : 'Never'\r\n                ];\r\n            })\r\n        ].map(row => row.join(',')).join('\\n');\r\n\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `${classList.courseMetadata?.courseCode || 'class'}_grades_${new Date().toISOString().split('T')[0]}.csv`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // Export class grades as HTML\r\n    const exportClassGradesHTML = () => {\r\n        if (!classList) return;\r\n\r\n        const progress = getGradingProgress();\r\n        const currentDate = new Date().toLocaleDateString('en-US', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n\r\n        const htmlContent = `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Class Grade Report - ${classList.courseMetadata?.courseCode || 'Class'}</title>\r\n    <style>\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n            line-height: 1.6;\r\n            margin: 0;\r\n            padding: 20px;\r\n            background-color: #f8fafc;\r\n        }\r\n        .container {\r\n            max-width: 1200px;\r\n            margin: 0 auto;\r\n            background: white;\r\n            border-radius: 8px;\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n            padding: 30px;\r\n        }\r\n        .header {\r\n            border-bottom: 3px solid #3b82f6;\r\n            padding-bottom: 20px;\r\n            margin-bottom: 30px;\r\n        }\r\n        .header h1 {\r\n            color: #1e40af;\r\n            margin: 0 0 10px 0;\r\n            font-size: 2rem;\r\n        }\r\n        .header .course-info {\r\n            color: #6b7280;\r\n            font-size: 1.1rem;\r\n        }\r\n        .stats-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n            gap: 20px;\r\n            margin-bottom: 30px;\r\n        }\r\n        .stat-card {\r\n            background: #f1f5f9;\r\n            padding: 20px;\r\n            border-radius: 8px;\r\n            text-align: center;\r\n            border-left: 4px solid #3b82f6;\r\n        }\r\n        .stat-card .number {\r\n            font-size: 2rem;\r\n            font-weight: bold;\r\n            color: #1e40af;\r\n            margin-bottom: 5px;\r\n        }\r\n        .stat-card .label {\r\n            color: #64748b;\r\n            font-size: 0.9rem;\r\n        }\r\n        .table-container {\r\n            overflow-x: auto;\r\n            margin-bottom: 30px;\r\n        }\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            background: white;\r\n        }\r\n        th, td {\r\n            padding: 12px;\r\n            text-align: left;\r\n            border-bottom: 1px solid #e5e7eb;\r\n        }\r\n        th {\r\n            background-color: #f8fafc;\r\n            font-weight: 600;\r\n            color: #374151;\r\n            position: sticky;\r\n            top: 0;\r\n        }\r\n        tr:hover {\r\n            background-color: #f9fafb;\r\n        }\r\n        .status-badge {\r\n            padding: 4px 8px;\r\n            border-radius: 12px;\r\n            font-size: 0.75rem;\r\n            font-weight: 500;\r\n        }\r\n        .status-final {\r\n            background-color: #dcfce7;\r\n            color: #166534;\r\n        }\r\n        .status-draft {\r\n            background-color: #fef3c7;\r\n            color: #92400e;\r\n        }\r\n        .status-pending {\r\n            background-color: #f3f4f6;\r\n            color: #6b7280;\r\n        }\r\n        .footer {\r\n            text-align: center;\r\n            color: #6b7280;\r\n            font-size: 0.9rem;\r\n            border-top: 1px solid #e5e7eb;\r\n            padding-top: 20px;\r\n        }\r\n        @media print {\r\n            body { background: white; }\r\n            .container { box-shadow: none; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <h1>📊 Class Grade Report</h1>\r\n            <div class=\"course-info\">\r\n                <strong>${classList.courseMetadata?.courseCode || 'N/A'}</strong> -\r\n                ${classList.courseMetadata?.courseName || 'Imported Class'} |\r\n                Section: ${classList.courseMetadata?.section || 'N/A'}\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"stats-grid\">\r\n            <div class=\"stat-card\">\r\n                <div class=\"number\">${progress.total}</div>\r\n                <div class=\"label\">Total Students</div>\r\n            </div>\r\n            <div class=\"stat-card\">\r\n                <div class=\"number\">${progress.final}</div>\r\n                <div class=\"label\">Final Grades</div>\r\n            </div>\r\n            <div class=\"stat-card\">\r\n                <div class=\"number\">${progress.draft}</div>\r\n                <div class=\"label\">Draft Grades</div>\r\n            </div>\r\n            <div class=\"stat-card\">\r\n                <div class=\"number\">${progress.percentage}%</div>\r\n                <div class=\"label\">Completion Rate</div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"table-container\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Student ID</th>\r\n                        <th>Student Name</th>\r\n                        <th>Email</th>\r\n                        <th>Program</th>\r\n                        <th>Status</th>\r\n                        <th>Grade Type</th>\r\n                        <th>Final Grade</th>\r\n                        <th>Percentage</th>\r\n                        <th>Last Modified</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${classList.students.map((student, index) => {\r\n            const studentProgress = classList.gradingProgress[index];\r\n            const gradeInfo = calculateStudentGrade(student.id);\r\n            const status = studentProgress?.status || 'pending';\r\n            const gradeType = studentProgress?.gradeType || 'none';\r\n            const lastModified = studentProgress?.lastModified\r\n                ? new Date(studentProgress.lastModified).toLocaleDateString()\r\n                : 'Never';\r\n\r\n            let statusClass = 'status-pending';\r\n            if (status.includes('final')) statusClass = 'status-final';\r\n            else if (status.includes('draft')) statusClass = 'status-draft';\r\n\r\n            return `\r\n                            <tr>\r\n                                <td>${index + 1}</td>\r\n                                <td>${student.id}</td>\r\n                                <td><strong>${student.name}</strong></td>\r\n                                <td>${student.email}</td>\r\n                                <td>${student.program || 'N/A'}</td>\r\n                                <td><span class=\"status-badge ${statusClass}\">${status}</span></td>\r\n                                <td>${gradeType}</td>\r\n                                <td><strong>${gradeInfo.score !== 'N/A' ? `${gradeInfo.score}/${gradeInfo.maxPossible}` : 'N/A'}</strong></td>\r\n                                <td>${gradeInfo.percentage !== 'N/A' ? `${gradeInfo.percentage}%` : 'N/A'}</td>\r\n                                <td>${lastModified}</td>\r\n                            </tr>\r\n                        `;\r\n        }).join('')}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <div class=\"footer\">\r\n            <p><strong>Class Grade Report Generated</strong></p>\r\n            <p>${currentDate} | ${new Date().toLocaleTimeString()}</p>\r\n            <p>Imported from: ${classList.fileName} | Assessment Platform v2.0</p>\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(htmlBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `${classList.courseMetadata?.courseCode || 'class'}_grade_report_${new Date().toISOString().split('T')[0]}.html`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    // ── PDF export stub ────────────────────────────────────────────────────────\r\n    // This makes your “PDF” button call the browser’s print dialog.\r\n    const exportClassGradesPDF = () => {\r\n        // If no class list is loaded, do nothing\r\n        if (!classList) return;\r\n\r\n        // Fire the print dialog (user can choose “Save as PDF”)\r\n        window.print();\r\n    };\r\n    // ──────────────────────────────\r\n\r\n    // ── New: Export a single student's grade as CSV ───────────────────────────────\r\n    const exportStudentGrade = (studentId) => {\r\n        // 1. Make sure we have a classList\r\n        if (!classList) return;\r\n\r\n        // 2. Find the student record\r\n        const student = classList.students.find(s => s.id === studentId);\r\n        if (!student) return;\r\n\r\n        // 3. Calculate their grade (score, percentage, etc.)\r\n        const gradeInfo = calculateStudentGrade(studentId);\r\n\r\n        // 4. Build a 2-row CSV: headers + this student's data\r\n        const rows = [\r\n            ['Student ID', 'Numeric Score', 'Letter Grade', 'Percentage'],\r\n            [\r\n                student.id,\r\n                `${gradeInfo.score}/${gradeInfo.maxPossible}`,\r\n                gradeInfo.letterGrade,\r\n                `${gradeInfo.percentage}%`\r\n            ]\r\n        ];\r\n\r\n        const csvContent = rows.map(r => r.join(',')).join('\\n');\r\n\r\n        // 5. Trigger download\r\n        const blob = new Blob([csvContent], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `${classList.courseMetadata?.courseCode || 'grade'}_${student.id}.csv`;\r\n        link.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n    // ────────────────────────────\r\n\r\n    const handleFileUpload = async (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        setImportStatus('processing');\r\n\r\n        try {\r\n            // Use Excel parser instead of manual CSV parsing\r\n            const result = await parseExcelFile(file);\r\n\r\n            if (!result.success) {\r\n                throw new Error(result.error || 'Failed to parse Excel file');\r\n            }\r\n\r\n            // Validate the parsed student data\r\n            const validation = validateStudentData(result.students);\r\n\r\n            if (result.students.length === 0) {\r\n                throw new Error('No valid student records found in Excel file');\r\n            }\r\n\r\n            // Create grading progress tracking for each student\r\n            const gradingProgress = result.students.map(() => ({\r\n                status: 'pending',\r\n                lastModified: null,\r\n                gradeType: null\r\n            }));\r\n\r\n            const classListData = {\r\n                students: result.students,\r\n                gradingProgress,\r\n                fileName: file.name,\r\n                fileSize: file.size,\r\n                importTime: new Date().toISOString(),\r\n                // Now include \"instructor\" (falls back to 'TBD' if none)\r\n                courseMetadata: {\r\n                    courseCode: result.courseMetadata?.courseCode || 'IMPORTED',\r\n                    courseName: result.courseMetadata?.courseName || 'Excel Import',\r\n                    section: result.courseMetadata?.section || 'DEFAULT',\r\n                    programType: result.courseMetadata?.programType, // e.g. 'degree' | 'diploma' | 'certificate'\r\n                    // ← Try .instructor first, then .professors (your Excel parser writes the names there)\r\n                    instructor: result.courseMetadata?.instructor // if you manually had an \"Instructor\" column\r\n                        ||\r\n                        result.courseMetadata?.professors // fall back to your \"Professors\" column\r\n                        ||\r\n                        'TBD',\r\n                    term: result.courseMetadata?.term || 'TBD'\r\n                },\r\n                validation: {\r\n                    validationScore: validation.validationScore || 100,\r\n                    issues: validation.issues || []\r\n                }\r\n            };\r\n\r\n            setClassList(classListData);\r\n            setImportStatus('success');\r\n\r\n            setTimeout(() => setImportStatus(''), 3000);\r\n        } catch (error) {\r\n            console.error('Excel import error:', error);\r\n            setImportStatus('error');\r\n            setTimeout(() => setImportStatus(''), 3000);\r\n        }\r\n    };\r\n\r\n    const startGradingSession = () => {\r\n        if (!classList || classList.students.length === 0) {\r\n            alert('No students available for grading.');\r\n            return;\r\n        }\r\n\r\n        if (!sharedRubric) {\r\n            alert('Please load a rubric before starting batch grading.');\r\n            return;\r\n        }\r\n\r\n        // Initialize the grading session (this will set up the first student)\r\n        const success = initializeGradingSession(classList);\r\n        if (success) {\r\n            setActiveTab('grading-tool');\r\n        }\r\n    };\r\n\r\n    // Pause the grading session\r\n    const pauseGradingSession = () => {\r\n        setGradingSession(prev => ({\r\n            ...prev,\r\n            active: false\r\n        }));\r\n    };\r\n\r\n    // Resume the grading session\r\n    const resumeGradingSession = () => {\r\n        setGradingSession(prev => ({\r\n            ...prev,\r\n            active: true\r\n        }));\r\n        setActiveTab('grading-tool');\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r text-gray-800 p-6 rounded-t-lg shadow-lg\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold mb-2\">Class List Manager</h1>\r\n                            <p className=\"text-gray-600\">\r\n                                Import, manage, and grade entire classes efficiently\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            {classList && (\r\n                                <div className=\"text-right\">\r\n                                    <div className=\"text-2xl font-bold\">\r\n                                        {classList.students.length}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-700\">\r\n                                        Students\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <Users size={48} className=\"text-gray-700\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-b-lg shadow-lg\">\r\n                    {/* Import Section */}\r\n                    {!classList && (\r\n                        <div className=\"p-8\">\r\n                            <div className=\"max-w-2xl mx-auto text-center\">\r\n                                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-8 mb-6\">\r\n                                    <FileSpreadsheet size={48} className=\"mx-auto text-blue-600 mb-4\" />\r\n                                    <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\r\n                                        Import Student List\r\n                                    </h2>\r\n                                    <p className=\"text-gray-600 mb-6\">\r\n                                        Upload an Excel file (.xls or .xlsx) containing your student roster to begin class management.\r\n                                    </p>\r\n\r\n                                    <input\r\n                                        ref={fileInputRef}\r\n                                        type=\"file\"\r\n                                        accept=\".xls,.xlsx\"\r\n                                        onChange={handleFileUpload}\r\n                                        className=\"hidden\"\r\n                                    />\r\n\r\n                                    <button\r\n                                        onClick={() => fileInputRef.current?.click()}\r\n                                        disabled={importStatus === 'processing'}\r\n                                        className=\"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors inline-flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                    >\r\n                                        <FileSpreadsheet size={20} />\r\n                                        {importStatus === 'processing' ? 'Processing...' : 'Choose Excel File'}\r\n                                    </button>\r\n\r\n                                    {importStatus === 'success' && (\r\n                                        <div className=\"mt-4 text-green-600 font-medium\">\r\n                                            ✓ Excel file imported successfully!\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {importStatus === 'error' && (\r\n                                        <div className=\"mt-4 text-red-600 font-medium\">\r\n                                            ✗ Error importing Excel file. Please check format and try again.\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"bg-gray-50 rounded-lg p-6 text-left\">\r\n                                    <h3 className=\"font-semibold text-gray-800 mb-3\">Expected Excel Format:</h3>\r\n                                    <div className=\"text-sm text-gray-600 space-y-2\">\r\n                                        <div><strong>Required columns:</strong> ID, Name, Email</div>\r\n                                        <div><strong>Optional columns:</strong> Program, Campus, Level, Status</div>\r\n                                        <div><strong>File types:</strong> .xls or .xlsx</div>\r\n                                        <div><strong>Note:</strong> First row should contain column headers</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Management Dashboard */}\r\n                    {classList && (\r\n                        <div className=\"p-6\">\r\n                            {/* Overview Cards */}\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\r\n                                {/* Course Info */}\r\n                                <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <BookOpen className=\"text-blue-600\" size={24} />\r\n                                        <h3 className=\"text-lg font-semibold text-blue-800\">\r\n                                            Course Information\r\n                                        </h3>\r\n                                    </div>\r\n                                    <div className=\"space-y-2 text-sm\">\r\n                                        <div>\r\n                                            <strong>Code:</strong>{' '}\r\n                                            {classList.courseMetadata?.courseCode || 'N/A'}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Name:</strong>{' '}\r\n                                            {classList.courseMetadata?.courseName || 'N/A'}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Section:</strong>{' '}\r\n                                            {classList.courseMetadata?.section || 'N/A'}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Professor:</strong>{' '}\r\n                                            {classList.courseMetadata?.instructor || 'N/A'}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Progress Stats */}\r\n                                <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <GraduationCap className=\"text-green-600\" size={24} />\r\n                                        <h3 className=\"text-lg font-semibold text-green-800\">\r\n                                            Grading Progress\r\n                                        </h3>\r\n                                    </div>\r\n                                    <div className=\"space-y-2 text-sm\">\r\n                                        <div>\r\n                                            <strong>Total Students:</strong> {classList.students.length}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Final Grades:</strong>{' '}\r\n                                            {getGradingProgress().final}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Draft Grades:</strong>{' '}\r\n                                            {getGradingProgress().draft}\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>Completion:</strong>{' '}\r\n                                            {getGradingProgress().percentage}%\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Session Control */}\r\n                                <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-6\">\r\n                                    <div className=\"flex items-center gap-3 mb-4\">\r\n                                        <Play className=\"text-purple-600\" size={24} />\r\n                                        <h3 className=\"text-lg font-semibold text-purple-800\">\r\n                                            Batch Grading Session\r\n                                        </h3>\r\n                                    </div>\r\n                                    <div className=\"space-y-3\">\r\n                                        {!gradingSession?.active ? (\r\n                                            <div>\r\n                                                <div className=\"text-sm text-purple-600 mb-2\">\r\n                                                    {gradingSession?.currentStudentIndex > 0\r\n                                                        ? `Paused at student ${gradingSession.currentStudentIndex + 1} of ${classList.students.length}`\r\n                                                        : 'Ready to start batch grading'\r\n                                                    }\r\n                                                </div>\r\n                                                <div className=\"flex gap-2\">\r\n                                                    {gradingSession?.currentStudentIndex > 0 ? (\r\n                                                        <button\r\n                                                            onClick={resumeGradingSession}\r\n                                                            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors\"\r\n                                                        >\r\n                                                            <Play size={16} />\r\n                                                            Resume Session\r\n                                                        </button>\r\n                                                    ) : (\r\n                                                        <button\r\n                                                            onClick={startGradingSession}\r\n                                                            disabled={!sharedRubric}\r\n                                                            className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                                        >\r\n                                                            <Play size={16} />\r\n                                                            Start Batch Grading\r\n                                                        </button>\r\n                                                    )}\r\n                                                    {!sharedRubric && (\r\n                                                        <div className=\"text-xs text-purple-600 mt-1\">\r\n                                                            Load a rubric first\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div>\r\n                                                <div className=\"text-sm text-green-600 font-medium mb-2\">\r\n                                                    ✓ Session Active - Student {gradingSession.currentStudentIndex + 1} of {classList.students.length}\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={pauseGradingSession}\r\n                                                    className=\"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-colors\"\r\n                                                >\r\n                                                    <Clock size={16} />\r\n                                                    Pause Session\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Student Table */}\r\n                            <div className=\"bg-white border border-gray-200 rounded-lg\">\r\n                                <div className=\"px-6 py-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center\">\r\n                                    <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                                        Student Roster\r\n                                    </h3>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={exportClassGradesCSV}\r\n                                            className=\"px-2 py-1 rounded text-xs font-medium text-white bg-green-500 hover:bg-green-700 focus:ring-2 focus:ring-green-500 transition-colors duration-150\"\r\n                                        >\r\n                                            <Download size={14} />\r\n                                            CSV\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={exportClassGradesHTML}\r\n                                            className=\"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors\"\r\n                                        >\r\n                                            <FileText size={14} />\r\n                                            HTML\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={exportClassGradesPDF}\r\n                                            className=\"flex items-center gap-1 px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium transition-colors\"\r\n                                        >\r\n                                            <FileText size={14} />\r\n                                            PDF\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"overflow-x-auto\">\r\n                                    {/* w-max = width: max-content; mx-auto centers if you want */}\r\n                                    <table className=\"table-auto w-max mx-auto\">\r\n                                        <thead className=\"bg-gray-50\">\r\n                                            <tr>\r\n                                                <th className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    #\r\n                                                </th>\r\n                                                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Status\r\n                                                </th>\r\n                                                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Student ID\r\n                                                </th>\r\n                                                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Name\r\n                                                </th>\r\n                                                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Email\r\n                                                </th>\r\n                                                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Program\r\n                                                </th>\r\n                                                {/* limit Actions col to 12rem */}\r\n                                                <th className=\"w-48 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                                                    Actions\r\n                                                </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                            {classList.students.map((student, index) => {\r\n                                                const progress = classList.gradingProgress[index];\r\n                                                const isCurrentStudent = gradingSession.active && index === gradingSession.currentStudentIndex;\r\n                                                const gradeStatus = getGradeStatus(student.id);\r\n\r\n                                                return (\r\n                                                    <tr\r\n                                                        key={student.id}\r\n                                                        className={`${isCurrentStudent\r\n                                                            ? 'bg-blue-50 border-l-4 border-blue-500'\r\n                                                            : 'hover:bg-gray-50'\r\n                                                            } transition-colors`}\r\n                                                    >\r\n                                                        <td className=\"px-4 py-2 whitespace-normal break-words text-sm text-gray-900 max-w-xs\">\r\n                                                            {index + 1}\r\n                                                        </td>\r\n                                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                                            {getStatusDisplay(progress, student.id)}\r\n                                                        </td>\r\n                                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                                                            {student.id}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-2 whitespace-normal break-words text-sm text-gray-900 max-w-xs\">\r\n                                                            {student.name}\r\n                                                        </td>\r\n                                                        <td className=\"px-4 py-2 whitespace-normal break-words text-sm text-gray-500 max-w-xs\">\r\n                                                            {student.email}\r\n                                                        </td>\r\n                                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                                            {student.program}\r\n                                                        </td>\r\n\r\n\r\n                                                        {/* match the header width here so the cell can’t grow beyond 12rem */}\r\n                                                        <td className=\"w-48 px-4 py-2 text-sm whitespace-normal\">\r\n                                                            <div className=\"flex flex-wrap items-center gap-2\">\r\n                                                                {/* View or Edit */}\r\n                                                                <button\r\n                                                                    onClick={() => loadStudentForGrading(student)}\r\n                                                                    className=\"flex items-center gap-1 px-3 py-1 bg-blue-500 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-blue-500 duration-150\"\r\n                                                                >\r\n                                                                    {gradeStatus === 'final' ? 'View' : 'Edit'}\r\n                                                                </button>\r\n\r\n                                                                {/* Finalize draft */}\r\n                                                                {gradeStatus === 'draft' && (\r\n                                                                    <button\r\n                                                                        onClick={() => finalizeGrade(student.id)}\r\n                                                                        className=\"flex items-center gap-1 px-3 py-1 bg-green-500 hover:bg-green-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-green-500 duration-150\"\r\n                                                                    >\r\n                                                                        Finalize\r\n                                                                    </button>\r\n                                                                )}\r\n\r\n                                                                {/* Export Grade (always visible) */}\r\n                                                                <button\r\n                                                                    onClick={() => exportStudentGrade(student.id)}\r\n                                                                    className=\"flex items-center gap-1 px-3 py-1 bg-purple-500 hover:bg-purple-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-purple-500 duration-150\"\r\n                                                                >\r\n                                                                    <ExternalLink size={14} />\r\n                                                                    Export Grade\r\n                                                                </button>\r\n\r\n                                                                {/* Unlock (only for final) */}\r\n                                                                {gradeStatus === 'final' && (\r\n                                                                    <button\r\n                                                                        onClick={() => unlockGrade(student.id)}\r\n                                                                        className=\"flex items-center gap-1 px-3 py-1 bg-orange-500 hover:bg-orange-700 text-white rounded text-sm font-medium transition-colors focus:ring-2 focus:ring-orange-500 duration-150\"\r\n                                                                    >\r\n                                                                        <Unlock size={14} />\r\n                                                                        Unlock\r\n                                                                    </button>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                );\r\n                                            })}\r\n                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Import Summary */}\r\n                            <div className=\"mt-8 bg-gray-50 rounded-lg p-6\">\r\n                                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Import Summary</h3>\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                    <div>\r\n                                        <span className=\"text-gray-600\">File:</span>\r\n                                        <div className=\"font-medium\">{classList.fileName}</div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"text-gray-600\">Import Date:</span>\r\n                                        <div className=\"font-medium\">\r\n                                            {new Date(classList.importTime).toLocaleDateString()}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"text-gray-600\">Data Quality:</span>\r\n                                        <div className=\"font-medium\">\r\n                                            {classList.validation?.validationScore || 0}%\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"text-gray-600\">Total Students:</span>\r\n                                        <div className=\"font-medium\">{classList.students.length}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ClassListManager;"],"mappings":"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AAkB,CAAC,CAAC;IACrC,MAAMyC,WAAW,GAAG,IAAI3F,IAAI,CAAC,CAAC,CAACmE,kBAAkB,CAAC,OAAO,EAAE;MACvDyB,OAAO,EAAE,MAAM;MACfC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,GAAG,EAAE;IACT,CAAC,CAAC;IAEF,MAAMC,WAAW,GAAG;AAC5B;AACA;AACA;AACA;AACA,kCAAkC,EAAAV,sBAAA,GAAA7H,SAAS,CAAC8E,cAAc,cAAA+C,sBAAA,uBAAxBA,sBAAA,CAA0BL,UAAU,KAAI,OAAO;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,EAAAM,sBAAA,GAAA9H,SAAS,CAAC8E,cAAc,cAAAgD,sBAAA,uBAAxBA,sBAAA,CAA0BN,UAAU,KAAI,KAAK;AACvE,kBAAkB,EAAAO,sBAAA,GAAA/H,SAAS,CAAC8E,cAAc,cAAAiD,sBAAA,uBAAxBA,sBAAA,CAA0BS,UAAU,KAAI,gBAAgB;AAC1E,2BAA2B,EAAAR,sBAAA,GAAAhI,SAAS,CAAC8E,cAAc,cAAAkD,sBAAA,uBAAxBA,sBAAA,CAA0BS,OAAO,KAAI,KAAK;AACrE;AACA;AACA;AACA;AACA;AACA,sCAAsCtH,QAAQ,CAACwE,KAAK;AACpD;AACA;AACA;AACA,sCAAsCxE,QAAQ,CAACyE,KAAK;AACpD;AACA;AACA;AACA,sCAAsCzE,QAAQ,CAAC0E,KAAK;AACpD;AACA;AACA;AACA,sCAAsC1E,QAAQ,CAACvC,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsBoB,SAAS,CAACgC,QAAQ,CAACsE,GAAG,CAAC,CAACtB,OAAO,EAAEuB,KAAK,KAAK;MACrD,MAAMmC,eAAe,GAAG1I,SAAS,CAACqC,eAAe,CAACkE,KAAK,CAAC;MACxD,MAAMC,SAAS,GAAGzD,qBAAqB,CAACiC,OAAO,CAAC7C,EAAE,CAAC;MACnD,MAAMP,MAAM,GAAG,CAAA8G,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAE9G,MAAM,KAAI,SAAS;MACnD,MAAMa,SAAS,GAAG,CAAAiG,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEjG,SAAS,KAAI,MAAM;MACtD,MAAMH,YAAY,GAAGoG,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAEpG,YAAY,GAC5C,IAAIC,IAAI,CAACmG,eAAe,CAACpG,YAAY,CAAC,CAACoE,kBAAkB,CAAC,CAAC,GAC3D,OAAO;MAEb,IAAIiC,WAAW,GAAG,gBAAgB;MAClC,IAAI/G,MAAM,CAACgH,QAAQ,CAAC,OAAO,CAAC,EAAED,WAAW,GAAG,cAAc,CAAC,KACtD,IAAI/G,MAAM,CAACgH,QAAQ,CAAC,OAAO,CAAC,EAAED,WAAW,GAAG,cAAc;MAE/D,OAAO;AACnB;AACA,sCAAsCpC,KAAK,GAAG,CAAC;AAC/C,sCAAsCvB,OAAO,CAAC7C,EAAE;AAChD,8CAA8C6C,OAAO,CAACC,IAAI;AAC1D,sCAAsCD,OAAO,CAACE,KAAK;AACnD,sCAAsCF,OAAO,CAACyB,OAAO,IAAI,KAAK;AAC9D,gEAAgEkC,WAAW,KAAK/G,MAAM;AACtF,sCAAsCa,SAAS;AAC/C,8CAA8C+D,SAAS,CAACrD,KAAK,KAAK,KAAK,GAAG,GAAGqD,SAAS,CAACrD,KAAK,IAAIqD,SAAS,CAACpD,WAAW,EAAE,GAAG,KAAK;AAC/H,sCAAsCoD,SAAS,CAAC5H,UAAU,KAAK,KAAK,GAAG,GAAG4H,SAAS,CAAC5H,UAAU,GAAG,GAAG,KAAK;AACzG,sCAAsC0D,YAAY;AAClD;AACA,yBAAyB;IACjB,CAAC,CAAC,CAACsE,IAAI,CAAC,EAAE,CAAC;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiBsB,WAAW,MAAM,IAAI3F,IAAI,CAAC,CAAC,CAACsG,kBAAkB,CAAC,CAAC;AACjE,gCAAgC7I,SAAS,CAACwB,QAAQ;AAClD;AACA;AACA;AACA,QAAQ;IAEA,MAAMsH,QAAQ,GAAG,IAAIhC,IAAI,CAAC,CAACyB,WAAW,CAAC,EAAE;MAAExB,IAAI,EAAE;IAAY,CAAC,CAAC;IAC/D,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAAC4B,QAAQ,CAAC;IACzC,MAAM3B,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;IACfG,IAAI,CAACI,QAAQ,GAAG,GAAG,EAAAU,sBAAA,GAAAjI,SAAS,CAAC8E,cAAc,cAAAmD,sBAAA,uBAAxBA,sBAAA,CAA0BT,UAAU,KAAI,OAAO,iBAAiB,IAAIjF,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACiF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO;IAChIN,IAAI,CAACO,KAAK,CAAC,CAAC;IACZT,GAAG,CAACU,eAAe,CAACX,GAAG,CAAC;EAC5B,CAAC;;EAED;EACA;EACA,MAAM+B,oBAAoB,GAAGA,CAAA,KAAM;IAC/B;IACA,IAAI,CAAC/I,SAAS,EAAE;;IAEhB;IACAgJ,MAAM,CAACC,KAAK,CAAC,CAAC;EAClB,CAAC;EACD;;EAEA;EACA,MAAMC,kBAAkB,GAAI9H,SAAS,IAAK;IAAA,IAAA+H,sBAAA;IACtC;IACA,IAAI,CAACnJ,SAAS,EAAE;;IAEhB;IACA,MAAMgF,OAAO,GAAGhF,SAAS,CAACgC,QAAQ,CAACoH,IAAI,CAAClH,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKf,SAAS,CAAC;IAChE,IAAI,CAAC4D,OAAO,EAAE;;IAEd;IACA,MAAMwB,SAAS,GAAGzD,qBAAqB,CAAC3B,SAAS,CAAC;;IAElD;IACA,MAAMiI,IAAI,GAAG,CACT,CAAC,YAAY,EAAE,eAAe,EAAE,cAAc,EAAE,YAAY,CAAC,EAC7D,CACIrE,OAAO,CAAC7C,EAAE,EACV,GAAGqE,SAAS,CAACrD,KAAK,IAAIqD,SAAS,CAACpD,WAAW,EAAE,EAC7CoD,SAAS,CAACnD,WAAW,EACrB,GAAGmD,SAAS,CAAC5H,UAAU,GAAG,CAC7B,CACJ;IAED,MAAMyH,UAAU,GAAGgD,IAAI,CAAC/C,GAAG,CAACgD,CAAC,IAAIA,CAAC,CAAC1C,IAAI,CAAC,GAAG,CAAC,CAAC,CAACA,IAAI,CAAC,IAAI,CAAC;;IAExD;IACA,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACT,UAAU,CAAC,EAAE;MAAEU,IAAI,EAAE;IAAW,CAAC,CAAC;IACzD,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;IACrC,MAAMM,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACxCF,IAAI,CAACG,IAAI,GAAGN,GAAG;IACfG,IAAI,CAACI,QAAQ,GAAG,GAAG,EAAA4B,sBAAA,GAAAnJ,SAAS,CAAC8E,cAAc,cAAAqE,sBAAA,uBAAxBA,sBAAA,CAA0B3B,UAAU,KAAI,OAAO,IAAIxC,OAAO,CAAC7C,EAAE,MAAM;IACtFgF,IAAI,CAACO,KAAK,CAAC,CAAC;IACZT,GAAG,CAACU,eAAe,CAACX,GAAG,CAAC;EAC5B,CAAC;EACD;;EAEA,MAAMuC,gBAAgB,GAAG,MAAOC,KAAK,IAAK;IACtC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACF,IAAI,EAAE;IAEX1J,eAAe,CAAC,YAAY,CAAC;IAE7B,IAAI;MAAA,IAAA6J,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACA;MACA,MAAMC,MAAM,GAAG,MAAM5L,cAAc,CAACkL,IAAI,CAAC;MAEzC,IAAI,CAACU,MAAM,CAACC,OAAO,EAAE;QACjB,MAAM,IAAIC,KAAK,CAACF,MAAM,CAACG,KAAK,IAAI,4BAA4B,CAAC;MACjE;;MAEA;MACA,MAAMC,UAAU,GAAG/L,mBAAmB,CAAC2L,MAAM,CAACnI,QAAQ,CAAC;MAEvD,IAAImI,MAAM,CAACnI,QAAQ,CAACgC,MAAM,KAAK,CAAC,EAAE;QAC9B,MAAM,IAAIqG,KAAK,CAAC,8CAA8C,CAAC;MACnE;;MAEA;MACA,MAAMhI,eAAe,GAAG8H,MAAM,CAACnI,QAAQ,CAACsE,GAAG,CAAC,OAAO;QAC/C1E,MAAM,EAAE,SAAS;QACjBU,YAAY,EAAE,IAAI;QAClBG,SAAS,EAAE;MACf,CAAC,CAAC,CAAC;MAEH,MAAM+H,aAAa,GAAG;QAClBxI,QAAQ,EAAEmI,MAAM,CAACnI,QAAQ;QACzBK,eAAe;QACfb,QAAQ,EAAEiI,IAAI,CAACxE,IAAI;QACnBwF,QAAQ,EAAEhB,IAAI,CAACiB,IAAI;QACnBC,UAAU,EAAE,IAAIpI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACpC;QACAsC,cAAc,EAAE;UACZ0C,UAAU,EAAE,EAAAoC,qBAAA,GAAAO,MAAM,CAACrF,cAAc,cAAA8E,qBAAA,uBAArBA,qBAAA,CAAuBpC,UAAU,KAAI,UAAU;UAC3DgB,UAAU,EAAE,EAAAqB,sBAAA,GAAAM,MAAM,CAACrF,cAAc,cAAA+E,sBAAA,uBAArBA,sBAAA,CAAuBrB,UAAU,KAAI,cAAc;UAC/DC,OAAO,EAAE,EAAAqB,sBAAA,GAAAK,MAAM,CAACrF,cAAc,cAAAgF,sBAAA,uBAArBA,sBAAA,CAAuBrB,OAAO,KAAI,SAAS;UACpD5J,WAAW,GAAAkL,sBAAA,GAAEI,MAAM,CAACrF,cAAc,cAAAiF,sBAAA,uBAArBA,sBAAA,CAAuBlL,WAAW;UAAE;UACjD;UACA+L,UAAU,EAAE,EAAAZ,sBAAA,GAAAG,MAAM,CAACrF,cAAc,cAAAkF,sBAAA,uBAArBA,sBAAA,CAAuBY,UAAU,CAAC;UAAA,OAAAX,sBAAA,GAE1CE,MAAM,CAACrF,cAAc,cAAAmF,sBAAA,uBAArBA,sBAAA,CAAuBY,UAAU,EAAC;UAAA,GAElC,KAAK;UACTC,IAAI,EAAE,EAAAZ,sBAAA,GAAAC,MAAM,CAACrF,cAAc,cAAAoF,sBAAA,uBAArBA,sBAAA,CAAuBY,IAAI,KAAI;QACzC,CAAC;QACDP,UAAU,EAAE;UACRQ,eAAe,EAAER,UAAU,CAACQ,eAAe,IAAI,GAAG;UAClDC,MAAM,EAAET,UAAU,CAACS,MAAM,IAAI;QACjC;MACJ,CAAC;MAED/K,YAAY,CAACuK,aAAa,CAAC;MAC3BzK,eAAe,CAAC,SAAS,CAAC;MAE1BkL,UAAU,CAAC,MAAMlL,eAAe,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IAC/C,CAAC,CAAC,OAAOuK,KAAK,EAAE;MACZ1H,OAAO,CAAC0H,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3CvK,eAAe,CAAC,OAAO,CAAC;MACxBkL,UAAU,CAAC,MAAMlL,eAAe,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IAC/C;EACJ,CAAC;EAED,MAAMmL,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAAClL,SAAS,IAAIA,SAAS,CAACgC,QAAQ,CAACgC,MAAM,KAAK,CAAC,EAAE;MAC/CmH,KAAK,CAAC,oCAAoC,CAAC;MAC3C;IACJ;IAEA,IAAI,CAACtK,YAAY,EAAE;MACfsK,KAAK,CAAC,qDAAqD,CAAC;MAC5D;IACJ;;IAEA;IACA,MAAMf,OAAO,GAAGhK,wBAAwB,CAACJ,SAAS,CAAC;IACnD,IAAIoK,OAAO,EAAE;MACT/J,YAAY,CAAC,cAAc,CAAC;IAChC;EACJ,CAAC;;EAED;EACA,MAAM+K,mBAAmB,GAAGA,CAAA,KAAM;IAC9BjL,iBAAiB,CAACuC,IAAI,KAAK;MACvB,GAAGA,IAAI;MACP2I,MAAM,EAAE;IACZ,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IAC/BnL,iBAAiB,CAACuC,IAAI,KAAK;MACvB,GAAGA,IAAI;MACP2I,MAAM,EAAE;IACZ,CAAC,CAAC,CAAC;IACHhL,YAAY,CAAC,cAAc,CAAC;EAChC,CAAC;EAED,oBACI3B,OAAA;IAAK4C,SAAS,EAAC,yBAAyB;IAAAC,QAAA,eACpC7C,OAAA;MAAK4C,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAE9B7C,OAAA;QAAK4C,SAAS,EAAC,2DAA2D;QAAAC,QAAA,eACtE7C,OAAA;UAAK4C,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAC9C7C,OAAA;YAAA6C,QAAA,gBACI7C,OAAA;cAAI4C,SAAS,EAAC,yBAAyB;cAAAC,QAAA,EAAC;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC/DjD,OAAA;cAAG4C,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAC;YAE7B;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNjD,OAAA;YAAK4C,SAAS,EAAC,yBAAyB;YAAAC,QAAA,GACnCvB,SAAS,iBACNtB,OAAA;cAAK4C,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACvB7C,OAAA;gBAAK4C,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAC9BvB,SAAS,CAACgC,QAAQ,CAACgC;cAAM;gBAAAxC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzB,CAAC,eACNjD,OAAA;gBAAK4C,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAEvC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CACR,eACDjD,OAAA,CAAChB,KAAK;cAACgN,IAAI,EAAE,EAAG;cAACpJ,SAAS,EAAC;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAENjD,OAAA;QAAK4C,SAAS,EAAC,iCAAiC;QAAAC,QAAA,GAE3C,CAACvB,SAAS,iBACPtB,OAAA;UAAK4C,SAAS,EAAC,KAAK;UAAAC,QAAA,eAChB7C,OAAA;YAAK4C,SAAS,EAAC,+BAA+B;YAAAC,QAAA,gBAC1C7C,OAAA;cAAK4C,SAAS,EAAC,uDAAuD;cAAAC,QAAA,gBAClE7C,OAAA,CAACL,eAAe;gBAACqM,IAAI,EAAE,EAAG;gBAACpJ,SAAS,EAAC;cAA4B;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACpEjD,OAAA;gBAAI4C,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,EAAC;cAEtD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACLjD,OAAA;gBAAG4C,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAAC;cAElC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAEJjD,OAAA;gBACI6M,GAAG,EAAE1L,YAAa;gBAClBkH,IAAI,EAAC,MAAM;gBACXyE,MAAM,EAAC,YAAY;gBACnBC,QAAQ,EAAElC,gBAAiB;gBAC3BjI,SAAS,EAAC;cAAQ;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrB,CAAC,eAEFjD,OAAA;gBACIgN,OAAO,EAAEA,CAAA;kBAAA,IAAAC,qBAAA;kBAAA,QAAAA,qBAAA,GAAM9L,YAAY,CAAC+L,OAAO,cAAAD,qBAAA,uBAApBA,qBAAA,CAAsBjE,KAAK,CAAC,CAAC;gBAAA,CAAC;gBAC7CmE,QAAQ,EAAE/L,YAAY,KAAK,YAAa;gBACxCwB,SAAS,EAAC,4KAA4K;gBAAAC,QAAA,gBAEtL7C,OAAA,CAACL,eAAe;kBAACqM,IAAI,EAAE;gBAAG;kBAAAlJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EAC5B7B,YAAY,KAAK,YAAY,GAAG,eAAe,GAAG,mBAAmB;cAAA;gBAAA0B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClE,CAAC,EAER7B,YAAY,KAAK,SAAS,iBACvBpB,OAAA;gBAAK4C,SAAS,EAAC,iCAAiC;gBAAAC,QAAA,EAAC;cAEjD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACR,EAEA7B,YAAY,KAAK,OAAO,iBACrBpB,OAAA;gBAAK4C,SAAS,EAAC,+BAA+B;gBAAAC,QAAA,EAAC;cAE/C;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACR;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eAENjD,OAAA;cAAK4C,SAAS,EAAC,qCAAqC;cAAAC,QAAA,gBAChD7C,OAAA;gBAAI4C,SAAS,EAAC,kCAAkC;gBAAAC,QAAA,EAAC;cAAsB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC5EjD,OAAA;gBAAK4C,SAAS,EAAC,iCAAiC;gBAAAC,QAAA,gBAC5C7C,OAAA;kBAAA6C,QAAA,gBAAK7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAiB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,oBAAgB;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC7DjD,OAAA;kBAAA6C,QAAA,gBAAK7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAiB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,mCAA+B;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC5EjD,OAAA;kBAAA6C,QAAA,gBAAK7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,kBAAc;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACrDjD,OAAA;kBAAA6C,QAAA,gBAAK7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAK;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,4CAAwC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CACR,EAGA3B,SAAS,iBACNtB,OAAA;UAAK4C,SAAS,EAAC,KAAK;UAAAC,QAAA,gBAEhB7C,OAAA;YAAK4C,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBAEvD7C,OAAA;cAAK4C,SAAS,EAAC,kFAAkF;cAAAC,QAAA,gBAC7F7C,OAAA;gBAAK4C,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzC7C,OAAA,CAACf,QAAQ;kBAAC2D,SAAS,EAAC,eAAe;kBAACoJ,IAAI,EAAE;gBAAG;kBAAAlJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAChDjD,OAAA;kBAAI4C,SAAS,EAAC,qCAAqC;kBAAAC,QAAA,EAAC;gBAEpD;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACNjD,OAAA;gBAAK4C,SAAS,EAAC,mBAAmB;gBAAAC,QAAA,gBAC9B7C,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAK;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EACzB,EAAAnC,sBAAA,GAAAQ,SAAS,CAAC8E,cAAc,cAAAtF,sBAAA,uBAAxBA,sBAAA,CAA0BgI,UAAU,KAAI,KAAK;gBAAA;kBAAAhG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAK;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EACzB,EAAAlC,sBAAA,GAAAO,SAAS,CAAC8E,cAAc,cAAArF,sBAAA,uBAAxBA,sBAAA,CAA0B+I,UAAU,KAAI,KAAK;gBAAA;kBAAAhH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EAC5B,EAAAjC,sBAAA,GAAAM,SAAS,CAAC8E,cAAc,cAAApF,sBAAA,uBAAxBA,sBAAA,CAA0B+I,OAAO,KAAI,KAAK;gBAAA;kBAAAjH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1C,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAU;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EAC9B,EAAAhC,uBAAA,GAAAK,SAAS,CAAC8E,cAAc,cAAAnF,uBAAA,uBAAxBA,uBAAA,CAA0BiL,UAAU,KAAI,KAAK;gBAAA;kBAAApJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAGNjD,OAAA;cAAK4C,SAAS,EAAC,qFAAqF;cAAAC,QAAA,gBAChG7C,OAAA;gBAAK4C,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzC7C,OAAA,CAACd,aAAa;kBAAC0D,SAAS,EAAC,gBAAgB;kBAACoJ,IAAI,EAAE;gBAAG;kBAAAlJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACtDjD,OAAA;kBAAI4C,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAErD;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACNjD,OAAA;gBAAK4C,SAAS,EAAC,mBAAmB;gBAAAC,QAAA,gBAC9B7C,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAe;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,KAAC,EAAC3B,SAAS,CAACgC,QAAQ,CAACgC,MAAM;gBAAA;kBAAAxC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1D,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAa;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EACjC8D,kBAAkB,CAAC,CAAC,CAACG,KAAK;gBAAA;kBAAApE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1B,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAa;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EACjC8D,kBAAkB,CAAC,CAAC,CAACI,KAAK;gBAAA;kBAAArE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1B,CAAC,eACNjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAA6C,QAAA,EAAQ;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAAC,GAAG,EAC/B8D,kBAAkB,CAAC,CAAC,CAAC7G,UAAU,EAAC,GACrC;gBAAA;kBAAA4C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAGNjD,OAAA;cAAK4C,SAAS,EAAC,oFAAoF;cAAAC,QAAA,gBAC/F7C,OAAA;gBAAK4C,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBACzC7C,OAAA,CAACb,IAAI;kBAACyD,SAAS,EAAC,iBAAiB;kBAACoJ,IAAI,EAAE;gBAAG;kBAAAlJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC9CjD,OAAA;kBAAI4C,SAAS,EAAC,uCAAuC;kBAAAC,QAAA,EAAC;gBAEtD;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACNjD,OAAA;gBAAK4C,SAAS,EAAC,WAAW;gBAAAC,QAAA,EACrB,EAACrB,cAAc,aAAdA,cAAc,eAAdA,cAAc,CAAEmL,MAAM,iBACpB3M,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAK4C,SAAS,EAAC,8BAA8B;oBAAAC,QAAA,EACxC,CAAArB,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE4L,mBAAmB,IAAG,CAAC,GAClC,qBAAqB5L,cAAc,CAAC4L,mBAAmB,GAAG,CAAC,OAAO9L,SAAS,CAACgC,QAAQ,CAACgC,MAAM,EAAE,GAC7F;kBAA8B;oBAAAxC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAEnC,CAAC,eACNjD,OAAA;oBAAK4C,SAAS,EAAC,YAAY;oBAAAC,QAAA,GACtB,CAAArB,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE4L,mBAAmB,IAAG,CAAC,gBACpCpN,OAAA;sBACIgN,OAAO,EAAEJ,oBAAqB;sBAC9BhK,SAAS,EAAC,uHAAuH;sBAAAC,QAAA,gBAEjI7C,OAAA,CAACb,IAAI;wBAAC6M,IAAI,EAAE;sBAAG;wBAAAlJ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,kBAEtB;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,gBAETjD,OAAA;sBACIgN,OAAO,EAAER,mBAAoB;sBAC7BW,QAAQ,EAAE,CAAChL,YAAa;sBACxBS,SAAS,EAAC,yKAAyK;sBAAAC,QAAA,gBAEnL7C,OAAA,CAACb,IAAI;wBAAC6M,IAAI,EAAE;sBAAG;wBAAAlJ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,uBAEtB;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CACX,EACA,CAACd,YAAY,iBACVnC,OAAA;sBAAK4C,SAAS,EAAC,8BAA8B;sBAAAC,QAAA,EAAC;oBAE9C;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAK,CACR;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACA,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,gBAENjD,OAAA;kBAAA6C,QAAA,gBACI7C,OAAA;oBAAK4C,SAAS,EAAC,yCAAyC;oBAAAC,QAAA,GAAC,kCAC1B,EAACrB,cAAc,CAAC4L,mBAAmB,GAAG,CAAC,EAAC,MAAI,EAAC9L,SAAS,CAACgC,QAAQ,CAACgC,MAAM;kBAAA;oBAAAxC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChG,CAAC,eACNjD,OAAA;oBACIgN,OAAO,EAAEN,mBAAoB;oBAC7B9J,SAAS,EAAC,yHAAyH;oBAAAC,QAAA,gBAEnI7C,OAAA,CAACV,KAAK;sBAAC0M,IAAI,EAAE;oBAAG;sBAAAlJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,iBAEvB;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR;cACR;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAGNjD,OAAA;YAAK4C,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBACvD7C,OAAA;cAAK4C,SAAS,EAAC,iFAAiF;cAAAC,QAAA,gBAC5F7C,OAAA;gBAAI4C,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,EAAC;cAEpD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACLjD,OAAA;gBAAK4C,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACvB7C,OAAA;kBACIgN,OAAO,EAAEvF,oBAAqB;kBAC9B7E,SAAS,EAAC,mJAAmJ;kBAAAC,QAAA,gBAE7J7C,OAAA,CAACZ,QAAQ;oBAAC4M,IAAI,EAAE;kBAAG;oBAAAlJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,OAE1B;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACTjD,OAAA;kBACIgN,OAAO,EAAE9D,qBAAsB;kBAC/BtG,SAAS,EAAC,4HAA4H;kBAAAC,QAAA,gBAEtI7C,OAAA,CAACP,QAAQ;oBAACuM,IAAI,EAAE;kBAAG;oBAAAlJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,QAE1B;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACTjD,OAAA;kBACIgN,OAAO,EAAE3C,oBAAqB;kBAC9BzH,SAAS,EAAC,wHAAwH;kBAAAC,QAAA,gBAElI7C,OAAA,CAACP,QAAQ;oBAACuM,IAAI,EAAE;kBAAG;oBAAAlJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,OAE1B;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACR,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAENjD,OAAA;cAAK4C,SAAS,EAAC,iBAAiB;cAAAC,QAAA,eAE5B7C,OAAA;gBAAO4C,SAAS,EAAC,0BAA0B;gBAAAC,QAAA,gBACvC7C,OAAA;kBAAO4C,SAAS,EAAC,YAAY;kBAAAC,QAAA,eACzB7C,OAAA;oBAAA6C,QAAA,gBACI7C,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACLjD,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACLjD,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACLjD,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACLjD,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACLjD,OAAA;sBAAI4C,SAAS,EAAC,gFAAgF;sBAAAC,QAAA,EAAC;oBAE/F;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eAELjD,OAAA;sBAAI4C,SAAS,EAAC,qFAAqF;sBAAAC,QAAA,EAAC;oBAEpG;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACF,CAAC,eACRjD,OAAA;kBAAO4C,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,EAC/CvB,SAAS,CAACgC,QAAQ,CAACsE,GAAG,CAAC,CAACtB,OAAO,EAAEuB,KAAK,KAAK;oBACxC,MAAMpF,QAAQ,GAAGnB,SAAS,CAACqC,eAAe,CAACkE,KAAK,CAAC;oBACjD,MAAMwF,gBAAgB,GAAG7L,cAAc,CAACmL,MAAM,IAAI9E,KAAK,KAAKrG,cAAc,CAAC4L,mBAAmB;oBAC9F,MAAMzK,WAAW,GAAGb,cAAc,CAACwE,OAAO,CAAC7C,EAAE,CAAC;oBAE9C,oBACIzD,OAAA;sBAEI4C,SAAS,EAAE,GAAGyK,gBAAgB,GACxB,uCAAuC,GACvC,kBAAkB,oBACC;sBAAAxK,QAAA,gBAEzB7C,OAAA;wBAAI4C,SAAS,EAAC,wEAAwE;wBAAAC,QAAA,EACjFgF,KAAK,GAAG;sBAAC;wBAAA/E,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACV,CAAC,eACLjD,OAAA;wBAAI4C,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,EACtCL,gBAAgB,CAACC,QAAQ,EAAE6D,OAAO,CAAC7C,EAAE;sBAAC;wBAAAX,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACvC,CAAC,eACLjD,OAAA;wBAAI4C,SAAS,EAAC,+DAA+D;wBAAAC,QAAA,EACxEyD,OAAO,CAAC7C;sBAAE;wBAAAX,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACX,CAAC,eACLjD,OAAA;wBAAI4C,SAAS,EAAC,wEAAwE;wBAAAC,QAAA,EACjFyD,OAAO,CAACC;sBAAI;wBAAAzD,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACb,CAAC,eACLjD,OAAA;wBAAI4C,SAAS,EAAC,wEAAwE;wBAAAC,QAAA,EACjFyD,OAAO,CAACE;sBAAK;wBAAA1D,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACd,CAAC,eACLjD,OAAA;wBAAI4C,SAAS,EAAC,mDAAmD;wBAAAC,QAAA,EAC5DyD,OAAO,CAACyB;sBAAO;wBAAAjF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAChB,CAAC,eAILjD,OAAA;wBAAI4C,SAAS,EAAC,0CAA0C;wBAAAC,QAAA,eACpD7C,OAAA;0BAAK4C,SAAS,EAAC,mCAAmC;0BAAAC,QAAA,gBAE9C7C,OAAA;4BACIgN,OAAO,EAAEA,CAAA,KAAM3G,qBAAqB,CAACC,OAAO,CAAE;4BAC9C1D,SAAS,EAAC,wKAAwK;4BAAAC,QAAA,EAEjLF,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG;0BAAM;4BAAAG,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACtC,CAAC,EAGRN,WAAW,KAAK,OAAO,iBACpB3C,OAAA;4BACIgN,OAAO,EAAEA,CAAA,KAAM7J,aAAa,CAACmD,OAAO,CAAC7C,EAAE,CAAE;4BACzCb,SAAS,EAAC,2KAA2K;4BAAAC,QAAA,EACxL;0BAED;4BAAAC,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAQ,CACX,eAGDjD,OAAA;4BACIgN,OAAO,EAAEA,CAAA,KAAMxC,kBAAkB,CAAClE,OAAO,CAAC7C,EAAE,CAAE;4BAC9Cb,SAAS,EAAC,8KAA8K;4BAAAC,QAAA,gBAExL7C,OAAA,CAACN,YAAY;8BAACsM,IAAI,EAAE;4BAAG;8BAAAlJ,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAE,CAAC,gBAE9B;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAQ,CAAC,EAGRN,WAAW,KAAK,OAAO,iBACpB3C,OAAA;4BACIgN,OAAO,EAAEA,CAAA,KAAM/I,WAAW,CAACqC,OAAO,CAAC7C,EAAE,CAAE;4BACvCb,SAAS,EAAC,8KAA8K;4BAAAC,QAAA,gBAExL7C,OAAA,CAACR,MAAM;8BAACwM,IAAI,EAAE;4BAAG;8BAAAlJ,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAE,CAAC,UAExB;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAQ,CACX;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACA;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACN,CAAC;oBAAA,GAnEAqD,OAAO,CAAC7C,EAAE;sBAAAX,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAoEf,CAAC;kBAEb,CAAC;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACP,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAGNjD,OAAA;YAAK4C,SAAS,EAAC,gCAAgC;YAAAC,QAAA,gBAC3C7C,OAAA;cAAI4C,SAAS,EAAC,0CAA0C;cAAAC,QAAA,EAAC;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC5EjD,OAAA;cAAK4C,SAAS,EAAC,+CAA+C;cAAAC,QAAA,gBAC1D7C,OAAA;gBAAA6C,QAAA,gBACI7C,OAAA;kBAAM4C,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC5CjD,OAAA;kBAAK4C,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEvB,SAAS,CAACwB;gBAAQ;kBAAAA,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtD,CAAC,eACNjD,OAAA;gBAAA6C,QAAA,gBACI7C,OAAA;kBAAM4C,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACnDjD,OAAA;kBAAK4C,SAAS,EAAC,aAAa;kBAAAC,QAAA,EACvB,IAAIgB,IAAI,CAACvC,SAAS,CAAC2K,UAAU,CAAC,CAACjE,kBAAkB,CAAC;gBAAC;kBAAAlF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACNjD,OAAA;gBAAA6C,QAAA,gBACI7C,OAAA;kBAAM4C,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACpDjD,OAAA;kBAAK4C,SAAS,EAAC,aAAa;kBAAAC,QAAA,GACvB,EAAA3B,qBAAA,GAAAI,SAAS,CAACuK,UAAU,cAAA3K,qBAAA,uBAApBA,qBAAA,CAAsBmL,eAAe,KAAI,CAAC,EAAC,GAChD;gBAAA;kBAAAvJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eACNjD,OAAA;gBAAA6C,QAAA,gBACI7C,OAAA;kBAAM4C,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAe;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtDjD,OAAA;kBAAK4C,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEvB,SAAS,CAACgC,QAAQ,CAACgC;gBAAM;kBAAAxC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7D,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACpC,EAAA,CAviCID,gBAAgB;EAAA,QA6CdhB,aAAa;AAAA;AAAA0N,EAAA,GA7Cf1M,gBAAgB;AAyiCtB,eAAeA,gBAAgB;AAAC,IAAA0M,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}