{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RubricCreator = () => {\n  _s();\n  // Default rubric levels (5+2 design)\n  const {\n    setSharedRubric,\n    transferRubricToGrading\n  } = useAssessment();\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // State management\n  const [rubricData, setRubricData] = useState({\n    assignmentInfo: {\n      title: '',\n      description: '',\n      weight: 25,\n      passingThreshold: 60,\n      totalPoints: 100\n    },\n    rubricLevels: [...defaultLevels],\n    criteria: [{\n      id: 'criterion-1',\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    }]\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [modalEdit, setModalEdit] = useState({\n    show: false,\n    content: '',\n    field: null,\n    onSave: null\n  });\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Open modal for text editing\n  const openModalEdit = (content, field, onSave) => {\n    setModalEdit({\n      show: true,\n      content,\n      field,\n      onSave\n    });\n  };\n\n  // Close modal and save if needed\n  const closeModalEdit = (save = false) => {\n    if (save && modalEdit.onSave) {\n      modalEdit.onSave(modalEdit.content);\n    }\n    setModalEdit({\n      show: false,\n      content: '',\n      field: null,\n      onSave: null\n    });\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n  useEffect(() => {\n    setRubricData(prev => ({\n      ...prev,\n      assignmentInfo: {\n        ...prev.assignmentInfo,\n        totalPoints: calculateTotalPoints()\n      }\n    }));\n  }, [rubricData.criteria, calculateTotalPoints]); // â† This fixes the warning\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], item]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_draft.json`;\n    link.click();\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as before\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_final.json`;\n    link.click();\n  };\n\n  // Transfer to grading tool directly\n  const transferToGrading = () => {\n    const exportData = {\n      ...rubricData\n    };\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev3;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || ''\n        }];\n      }))\n    }));\n    transferRubricToGrading(exportData);\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n          setRubricData(importedData);\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  // Export to HTML\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title} - Rubric</title>\n    <style>\n        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #333; }\n        .assignment-info { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 25px; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 10px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #2c3e50; color: white; text-align: center; font-weight: 600; }\n        .level-header { text-align: center; font-weight: bold; }\n        .criterion-name { font-weight: bold; background: #f8f9fa; }\n        .point-range { text-align: center; font-weight: bold; color: #2c3e50; }\n        .overall-score { background: #e8f4fd; padding: 20px; border-radius: 8px; margin-top: 30px; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title}</h1>\n        <p>${rubricData.assignmentInfo.description}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n        <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n        <p><strong>Total Points:</strong> ${rubricData.assignmentInfo.totalPoints}</p>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong>${criterion.name}</strong> (${criterion.maxPoints} pts)\n                        <br><small style=\"color: #666; font-style: italic;\">${criterion.description}</small>\n                    </td>\n                    ${displayLevels.map(level => {\n      var _criterion$levels$lev4;\n      return `\n                        <td>\n                            <div class=\"point-range\">${calculatePointRange(criterion, level.level)} pts</div>\n                            <div style=\"margin-top: 8px; font-size: 0.9rem;\">\n                                ${((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || 'Not defined'}\n                            </div>\n                        </td>\n                    `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3>Overall Score</h3>\n        <p>Each submission is assigned a level of achievement based on its overall rubric score.</p>\n        <div style=\"display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;\">\n            ${displayLevels.map(level => `\n                <div style=\"flex: 1; min-width: 120px; text-align: center; padding: 10px; border: 2px solid ${level.color}; border-radius: 8px; background: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color};\">${level.name}</div>\n                    <div style=\"font-size: 0.9rem; margin-top: 5px;\">${Math.round(rubricData.assignmentInfo.totalPoints * level.multiplier)} or more</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p>Generated on ${new Date().toLocaleDateString()} | Total Points: ${rubricData.assignmentInfo.totalPoints}</p>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_display.html`;\n    link.click();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Rubric Creation Tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-200\",\n              children: \"Professional Rubric Builder for Educational Assessment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _importInputRef$curre;\n                return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n              },\n              className: \"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Import AI-generated rubric content or existing rubric\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 33\n              }, this), \"Import\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferToGrading,\n              className: \"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Send rubric directly to grading tool\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 33\n              }, this), \"Use for Grading\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveRubric,\n              className: \"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Save work in progress as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 33\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForGrading,\n              className: \"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export final rubric for use in grading template\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 33\n              }, this), \"Export JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              className: \"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export HTML version for student distribution\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Button Guide & Instructions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Rubric Building\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 454,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated rubric content or existing rubrics\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 455,\n                      columnNumber: 49\n                    }, this), \" Save work in progress (JSON format)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 456,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template use\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 457,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reverse Order:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 458,\n                      columnNumber: 49\n                    }, this), \" Switch between low\\u2192high and high\\u2192low level ordering\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Usage Instructions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment information\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add/remove criteria as needed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Export JSON for grading template\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => setRubricData(prev => ({\n                  ...prev,\n                  assignmentInfo: {\n                    ...prev.assignmentInfo,\n                    title: e.target.value\n                  }\n                })),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Assignment 4: Animation B Final\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => setRubricData(prev => ({\n                  ...prev,\n                  assignmentInfo: {\n                    ...prev.assignmentInfo,\n                    weight: parseInt(e.target.value) || 0\n                  }\n                })),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: rubricData.assignmentInfo.description,\n                onChange: e => setRubricData(prev => ({\n                  ...prev,\n                  assignmentInfo: {\n                    ...prev.assignmentInfo,\n                    description: e.target.value\n                  }\n                })),\n                onContextMenu: e => {\n                  e.preventDefault();\n                  openModalEdit(rubricData.assignmentInfo.description, 'Assignment Description', newContent => setRubricData(prev => ({\n                    ...prev,\n                    assignmentInfo: {\n                      ...prev.assignmentInfo,\n                      description: newContent\n                    }\n                  })));\n                },\n                className: \"w-full p-3 border rounded-lg resize-both\",\n                rows: \"2\",\n                placeholder: \"Brief description of the assignment and its requirements\",\n                title: \"Right-click for full-page editor\",\n                style: {\n                  minHeight: '60px',\n                  maxHeight: '200px',\n                  resize: 'both'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => setRubricData(prev => ({\n                  ...prev,\n                  assignmentInfo: {\n                    ...prev.assignmentInfo,\n                    passingThreshold: parseInt(e.target.value) || 0\n                  }\n                })),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 33\n              }, this), \"Automatic (Multiplier-based): Points calculated automatically based on level multipliers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 33\n              }, this), \"Custom: Manually set point ranges for each level\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Rubric Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Reverse level order (lowest to highest or highest to lowest)\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'Standard' : 'Reverse', \" Order\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold\",\n                    style: {\n                      width: '200px'\n                    },\n                    children: \"Criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 616,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      minWidth: '150px'\n                    },\n                    children: level.name\n                  }, level.level, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 620,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      width: '80px'\n                    },\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 628,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 bg-gray-50\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: criterion.name,\n                        onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                        className: \"w-full p-2 border rounded text-sm font-medium\",\n                        placeholder: \"Criterion name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 639,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                        value: criterion.description,\n                        onChange: e => updateCriterion(criterion.id, 'description', e.target.value),\n                        onContextMenu: e => {\n                          e.preventDefault();\n                          openModalEdit(criterion.description, 'Criterion Description', newContent => updateCriterion(criterion.id, 'description', newContent));\n                        },\n                        className: \"w-full p-2 border rounded text-xs resize-both\",\n                        rows: \"2\",\n                        placeholder: \"Brief description\",\n                        title: \"Right-click for full-page editor\",\n                        style: {\n                          minHeight: '48px',\n                          maxHeight: '200px',\n                          resize: 'both'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 646,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex gap-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex-1\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            className: \"text-xs text-gray-600\",\n                            children: \"Max Points\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 665,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"number\",\n                            value: criterion.maxPoints,\n                            onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                            className: \"w-full p-1 border rounded text-sm\",\n                            min: \"0\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 666,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 664,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 663,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 638,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 637,\n                    columnNumber: 45\n                  }, this), getDisplayLevels().map(level => {\n                    var _criterion$levels$lev5, _criterion$levels$lev7;\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 align-top\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-bold text-sm\",\n                            style: {\n                              color: level.color\n                            },\n                            children: [calculatePointRange(criterion, level.level), \" pts\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 683,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 682,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                          value: ((_criterion$levels$lev5 = criterion.levels[level.level]) === null || _criterion$levels$lev5 === void 0 ? void 0 : _criterion$levels$lev5.description) || '',\n                          onChange: e => updateCriterionLevel(criterion.id, level.level, 'description', e.target.value),\n                          onContextMenu: e => {\n                            var _criterion$levels$lev6;\n                            e.preventDefault();\n                            openModalEdit(((_criterion$levels$lev6 = criterion.levels[level.level]) === null || _criterion$levels$lev6 === void 0 ? void 0 : _criterion$levels$lev6.description) || '', `${level.name} Description`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent));\n                          },\n                          className: \"w-full p-2 border rounded text-xs resize-both\",\n                          rows: \"4\",\n                          placeholder: `${level.name} description...`,\n                          title: \"Right-click for full-page editor\",\n                          style: {\n                            minHeight: '80px',\n                            maxHeight: '300px',\n                            resize: 'both'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 687,\n                          columnNumber: 57\n                        }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: ((_criterion$levels$lev7 = criterion.levels[level.level]) === null || _criterion$levels$lev7 === void 0 ? void 0 : _criterion$levels$lev7.pointRange) || '',\n                          onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                          className: \"w-full p-1 border rounded text-xs text-center\",\n                          placeholder: \"Point range\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 705,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 681,\n                        columnNumber: 53\n                      }, this)\n                    }, level.level, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 680,\n                      columnNumber: 49\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeCriterion(criterion.id),\n                      className: \"text-red-600 hover:text-red-800 p-1\",\n                      disabled: rubricData.criteria.length === 1,\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 724,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 719,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 45\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 736,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || 'Unnamed Criterion', \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 745,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 748,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 744,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 755,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category, \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 767,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => {\n                          const newComment = prompt(`Add ${category} comment:`);\n                          if (newComment) {\n                            addFeedbackItem(criterion.id, category, newComment);\n                          }\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 770,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 766,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-start gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100\",\n                          onClick: () => {\n                            openModalEdit(item, `${category} Comment`, newContent => {\n                              const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                              updatedFeedback[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updatedFeedback\n                                  }\n                                } : c)\n                              }));\n                            });\n                          },\n                          title: \"Click to edit in full-page editor\",\n                          children: item\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 785,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 819,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 815,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 784,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4\",\n                        children: [\"No \", category, \" comments added\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 824,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 782,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 765,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"Overall Score Breakdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 841,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Each submission is assigned a level of achievement based on its overall rubric score.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 842,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\",\n            children: getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center p-3 rounded-lg border-2\",\n              style: {\n                borderColor: level.color,\n                backgroundColor: level.color + '15'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold text-sm\",\n                style: {\n                  color: level.color\n                },\n                children: level.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-lg font-bold mt-1\",\n                style: {\n                  color: level.color\n                },\n                children: Math.round(calculateTotalPoints() * level.multiplier)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 857,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-600\",\n                children: \"or more\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 37\n              }, this)]\n            }, level.level, true, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 17\n      }, this), modalEdit.show && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center p-4 border-b\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: [\"Edit \", modalEdit.field]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => closeModalEdit(true),\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 880,\n                  columnNumber: 41\n                }, this), \"Save & Close\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => closeModalEdit(false),\n                className: \"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 887,\n                  columnNumber: 41\n                }, this), \"Cancel\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 883,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 875,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: modalEdit.content,\n              onChange: e => setModalEdit(prev => ({\n                ...prev,\n                content: e.target.value\n              })),\n              className: \"w-full h-full p-4 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n              placeholder: \"Enter your text here...\",\n              style: {\n                minHeight: '400px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 892,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t bg-gray-50 rounded-b-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Tip:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 37\n              }, this), \" Use this full-page editor for longer descriptions and detailed feedback comments. Click \\\"Save & Close\\\" to apply your changes.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 869,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 9\n  }, this);\n};\n_s(RubricCreator, \"3/toHtnLAXKr6ZIaLD5ZKIsuLyM=\", false, function () {\n  return [useAssessment];\n});\n_c = RubricCreator;\nexport default RubricCreator;\nvar _c;\n$RefreshReg$(_c, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Plus","X","Upload","Download","Save","FileText","RotateCcw","ChevronDown","ChevronUp","Maximize2","ArrowRight","useAssessment","jsxDEV","_jsxDEV","RubricCreator","_s","setSharedRubric","transferRubricToGrading","defaultLevels","level","name","description","color","multiplier","rubricData","setRubricData","assignmentInfo","title","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","maxPoints","levels","feedbackLibrary","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","modalEdit","setModalEdit","show","content","field","onSave","importInputRef","toggleFeedbackExpansion","criterionId","prev","openModalEdit","closeModalEdit","save","calculateTotalPoints","reduce","total","criterion","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","value","map","updateCriterionLevel","addFeedbackItem","category","item","removeFeedbackItem","index","_","i","calculatePointRange","rubricLevel","find","l","points","Math","round","toString","_criterion$levels$lev","pointRange","getDisplayLevels","reverse","saveRubric","dataStr","JSON","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","replace","click","exportForGrading","exportData","Object","fromEntries","_criterion$levels$lev2","transferToGrading","_criterion$levels$lev3","importRubric","event","file","target","files","reader","FileReader","onload","e","importedData","parse","result","error","alert","readAsText","exportToHTML","displayLevels","htmlContent","length","join","_criterion$levels$lev4","toLocaleDateString","htmlBlob","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_importInputRef$curre","current","size","onChange","placeholder","parseInt","min","max","onContextMenu","preventDefault","newContent","rows","style","minHeight","maxHeight","resize","disabled","checked","width","backgroundColor","minWidth","_criterion$levels$lev5","_criterion$levels$lev7","_criterion$levels$lev6","newComment","prompt","updatedFeedback","borderColor","ref","accept","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight } from 'lucide-react'; \r\nimport { useAssessment } from './SharedContext';\r\n\r\nconst RubricCreator = () => {\r\n    // Default rubric levels (5+2 design)\r\n    const { setSharedRubric, transferRubricToGrading } = useAssessment();\r\n    \r\n    const defaultLevels = [\r\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\r\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\r\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\r\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\r\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\r\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\r\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\r\n    ];\r\n\r\n    // State management\r\n    const [rubricData, setRubricData] = useState({\r\n        assignmentInfo: {\r\n            title: '',\r\n            description: '',\r\n            weight: 25,\r\n            passingThreshold: 60,\r\n            totalPoints: 100\r\n        },\r\n        rubricLevels: [...defaultLevels],\r\n        criteria: [\r\n            {\r\n                id: 'criterion-1',\r\n                name: '',\r\n                description: '',\r\n                maxPoints: 20,\r\n                weight: 20,\r\n                levels: {},\r\n                feedbackLibrary: {\r\n                    strengths: [],\r\n                    improvements: [],\r\n                    general: []\r\n                }\r\n            }\r\n        ]\r\n    });\r\n\r\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\r\n    const [reversedOrder, setReversedOrder] = useState(false);\r\n    const [showGuide, setShowGuide] = useState(false);\r\n    const [expandedFeedback, setExpandedFeedback] = useState({});\r\n    const [modalEdit, setModalEdit] = useState({ show: false, content: '', field: null, onSave: null });\r\n\r\n    // Refs for file inputs\r\n    const importInputRef = useRef(null);\r\n\r\n    // Toggle feedback section expansion\r\n    const toggleFeedbackExpansion = (criterionId) => {\r\n        setExpandedFeedback(prev => ({\r\n            ...prev,\r\n            [criterionId]: !prev[criterionId]\r\n        }));\r\n    };\r\n\r\n    // Open modal for text editing\r\n    const openModalEdit = (content, field, onSave) => {\r\n        setModalEdit({\r\n            show: true,\r\n            content,\r\n            field,\r\n            onSave\r\n        });\r\n    };\r\n\r\n    // Close modal and save if needed\r\n    const closeModalEdit = (save = false) => {\r\n        if (save && modalEdit.onSave) {\r\n            modalEdit.onSave(modalEdit.content);\r\n        }\r\n        setModalEdit({ show: false, content: '', field: null, onSave: null });\r\n    };\r\n\r\n    // Calculate total points based on current settings\r\n    const calculateTotalPoints = () => {\r\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            assignmentInfo: {\r\n                ...prev.assignmentInfo,\r\n                totalPoints: calculateTotalPoints()\r\n            }\r\n        }));\r\n    }, [rubricData.criteria, calculateTotalPoints]); // â† This fixes the warning\r\n\r\n    // Add new criterion\r\n    const addCriterion = () => {\r\n        const newCriterion = {\r\n            id: `criterion-${Date.now()}`,\r\n            name: '',\r\n            description: '',\r\n            maxPoints: 20,\r\n            weight: 20,\r\n            levels: {},\r\n            feedbackLibrary: {\r\n                strengths: [],\r\n                improvements: [],\r\n                general: []\r\n            }\r\n        };\r\n\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: [...prev.criteria, newCriterion]\r\n        }));\r\n    };\r\n\r\n    // Remove criterion\r\n    const removeCriterion = (criterionId) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\r\n        }));\r\n    };\r\n\r\n    // Update criterion\r\n    const updateCriterion = (criterionId, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? { ...criterion, [field]: value }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Update criterion level description\r\n    const updateCriterionLevel = (criterionId, level, field, value) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        levels: {\r\n                            ...criterion.levels,\r\n                            [level]: {\r\n                                ...criterion.levels[level],\r\n                                [field]: value\r\n                            }\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Add feedback item to criterion\r\n    const addFeedbackItem = (criterionId, category, item) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: [...criterion.feedbackLibrary[category], item]\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Remove feedback item\r\n    const removeFeedbackItem = (criterionId, category, index) => {\r\n        setRubricData(prev => ({\r\n            ...prev,\r\n            criteria: prev.criteria.map(criterion =>\r\n                criterion.id === criterionId\r\n                    ? {\r\n                        ...criterion,\r\n                        feedbackLibrary: {\r\n                            ...criterion.feedbackLibrary,\r\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\r\n                        }\r\n                    }\r\n                    : criterion\r\n            )\r\n        }));\r\n    };\r\n\r\n    // Calculate point range for a level\r\n    const calculatePointRange = (criterion, level) => {\r\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\r\n        if (!rubricLevel) return '0';\r\n\r\n        if (pointingSystem === 'multiplier') {\r\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\r\n            return level === 'incomplete' ? '0' : points.toString();\r\n        } else {\r\n            // Custom points would be entered directly\r\n            return criterion.levels[level]?.pointRange || '0';\r\n        }\r\n    };\r\n\r\n    // Get display levels (potentially reversed)\r\n    const getDisplayLevels = () => {\r\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\r\n    };\r\n\r\n    // Save rubric to JSON\r\n    const saveRubric = () => {\r\n        const dataStr = JSON.stringify(rubricData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_draft.json`;\r\n        link.click();\r\n    };\r\n\r\n    // Export rubric for grading template\r\n    const exportForGrading = () => {\r\n        const exportData = { ...rubricData };\r\n\r\n        // Ensure all criterion levels have proper point ranges\r\n        exportData.criteria = exportData.criteria.map(criterion => ({\r\n            ...criterion,\r\n            levels: Object.fromEntries(\r\n                rubricData.rubricLevels.map(level => [\r\n                    level.level,\r\n                    {\r\n                        pointRange: calculatePointRange(criterion, level.level),\r\n                        description: criterion.levels[level.level]?.description || ''\r\n                    }\r\n                ])\r\n            )\r\n        }));\r\n\r\n        // Save to shared context for grading tool\r\n        setSharedRubric(exportData);\r\n\r\n        // Also download as before\r\n        const dataStr = JSON.stringify(exportData, null, 2);\r\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n        const url = URL.createObjectURL(dataBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_final.json`;\r\n        link.click();\r\n    };\r\n\r\n    // Transfer to grading tool directly\r\n    const transferToGrading = () => {\r\n        const exportData = { ...rubricData };\r\n\r\n        exportData.criteria = exportData.criteria.map(criterion => ({\r\n            ...criterion,\r\n            levels: Object.fromEntries(\r\n                rubricData.rubricLevels.map(level => [\r\n                    level.level,\r\n                    {\r\n                        pointRange: calculatePointRange(criterion, level.level),\r\n                        description: criterion.levels[level.level]?.description || ''\r\n                    }\r\n                ])\r\n            )\r\n        }));\r\n\r\n        transferRubricToGrading(exportData);\r\n    };\r\n\r\n    // Import rubric data\r\n    const importRubric = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                try {\r\n                    const importedData = JSON.parse(e.target.result);\r\n                    setRubricData(importedData);\r\n                } catch (error) {\r\n                    alert('Error loading rubric. Please check the JSON format.');\r\n                }\r\n            };\r\n            reader.readAsText(file);\r\n        }\r\n    };\r\n\r\n    // Export to HTML\r\n    const exportToHTML = () => {\r\n        const displayLevels = getDisplayLevels();\r\n\r\n        const htmlContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>${rubricData.assignmentInfo.title} - Rubric</title>\r\n    <style>\r\n        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\r\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #333; }\r\n        .assignment-info { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 25px; }\r\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; }\r\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 10px; text-align: left; vertical-align: top; }\r\n        .rubric-table th { background: #2c3e50; color: white; text-align: center; font-weight: 600; }\r\n        .level-header { text-align: center; font-weight: bold; }\r\n        .criterion-name { font-weight: bold; background: #f8f9fa; }\r\n        .point-range { text-align: center; font-weight: bold; color: #2c3e50; }\r\n        .overall-score { background: #e8f4fd; padding: 20px; border-radius: 8px; margin-top: 30px; }\r\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1>${rubricData.assignmentInfo.title}</h1>\r\n        <p>${rubricData.assignmentInfo.description}</p>\r\n    </div>\r\n    \r\n    <div class=\"assignment-info\">\r\n        <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\r\n        <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\r\n        <p><strong>Total Points:</strong> ${rubricData.assignmentInfo.totalPoints}</p>\r\n    </div>\r\n    \r\n    <table class=\"rubric-table\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"width: 20%\">Criterion</th>\r\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%\">${level.name}</th>`).join('')}\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ${rubricData.criteria.map(criterion => `\r\n                <tr>\r\n                    <td class=\"criterion-name\">\r\n                        <strong>${criterion.name}</strong> (${criterion.maxPoints} pts)\r\n                        <br><small style=\"color: #666; font-style: italic;\">${criterion.description}</small>\r\n                    </td>\r\n                    ${displayLevels.map(level => `\r\n                        <td>\r\n                            <div class=\"point-range\">${calculatePointRange(criterion, level.level)} pts</div>\r\n                            <div style=\"margin-top: 8px; font-size: 0.9rem;\">\r\n                                ${criterion.levels[level.level]?.description || 'Not defined'}\r\n                            </div>\r\n                        </td>\r\n                    `).join('')}\r\n                </tr>\r\n            `).join('')}\r\n        </tbody>\r\n    </table>\r\n    \r\n    <div class=\"overall-score\">\r\n        <h3>Overall Score</h3>\r\n        <p>Each submission is assigned a level of achievement based on its overall rubric score.</p>\r\n        <div style=\"display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;\">\r\n            ${displayLevels.map(level => `\r\n                <div style=\"flex: 1; min-width: 120px; text-align: center; padding: 10px; border: 2px solid ${level.color}; border-radius: 8px; background: ${level.color}15;\">\r\n                    <div style=\"font-weight: bold; color: ${level.color};\">${level.name}</div>\r\n                    <div style=\"font-size: 0.9rem; margin-top: 5px;\">${Math.round(rubricData.assignmentInfo.totalPoints * level.multiplier)} or more</div>\r\n                </div>\r\n            `).join('')}\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"footer\">\r\n        <p>Generated on ${new Date().toLocaleDateString()} | Total Points: ${rubricData.assignmentInfo.totalPoints}</p>\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n        const url = URL.createObjectURL(htmlBlob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_')}_display.html`;\r\n        link.click();\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\r\n                {/* Header */}\r\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl font-bold\">Rubric Creation Tool</h1>\r\n                            <p className=\"text-blue-200\">Professional Rubric Builder for Educational Assessment</p>\r\n                        </div>\r\n                        <div className=\"flex gap-2 flex-wrap\">\r\n                            <button\r\n                                onClick={() => importInputRef.current?.click()}\r\n                                className=\"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Import AI-generated rubric content or existing rubric\"\r\n                            >\r\n                                <Upload size={14} />\r\n                                Import\r\n                            </button>\r\n                            <button\r\n                                onClick={transferToGrading}\r\n                                className=\"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Send rubric directly to grading tool\"\r\n                            >\r\n                                <ArrowRight size={14} />\r\n                                Use for Grading\r\n                            </button>\r\n                            <button\r\n                                onClick={saveRubric}\r\n                                className=\"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Save work in progress as JSON file\"\r\n                            >\r\n                                <Save size={14} />\r\n                                Save Draft\r\n                            </button>\r\n                            <button\r\n                                onClick={exportForGrading}\r\n                                className=\"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export final rubric for use in grading template\"\r\n                            >\r\n                                <Download size={14} />\r\n                                Export JSON\r\n                            </button>\r\n                            <button\r\n                                onClick={exportToHTML}\r\n                                className=\"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                title=\"Export HTML version for student distribution\"\r\n                            >\r\n                                <FileText size={14} />\r\n                                Export HTML\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                    {/* Button Guide */}\r\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\r\n                        <button\r\n                            onClick={() => setShowGuide(!showGuide)}\r\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\r\n                        >\r\n                            ðŸ“– Button Guide & Instructions\r\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}>â–¼</span>\r\n                        </button>\r\n                        {showGuide && (\r\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">ðŸ”§ Rubric Building</h4>\r\n                                        <ul className=\"space-y-1 text-gray-700\">\r\n                                            <li><strong>Import:</strong> Load AI-generated rubric content or existing rubrics</li>\r\n                                            <li><strong>Save Draft:</strong> Save work in progress (JSON format)</li>\r\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template use</li>\r\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\r\n                                            <li><strong>Reverse Order:</strong> Switch between lowâ†’high and highâ†’low level ordering</li>\r\n                                        </ul>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">ðŸ“ Usage Instructions</h4>\r\n                                        <ul className=\"space-y-1 text-gray-700\">\r\n                                            <li>1. Fill in assignment information</li>\r\n                                            <li>2. Add/remove criteria as needed</li>\r\n                                            <li>3. Define level descriptions for each criterion</li>\r\n                                            <li>4. Add feedback library items (optional)</li>\r\n                                            <li>5. Export JSON for grading template</li>\r\n                                            <li>6. Export HTML for student distribution</li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Assignment Information */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={rubricData.assignmentInfo.title}\r\n                                    onChange={(e) => setRubricData(prev => ({\r\n                                        ...prev,\r\n                                        assignmentInfo: { ...prev.assignmentInfo, title: e.target.value }\r\n                                    }))}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    placeholder=\"e.g., Assignment 4: Animation B Final\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight (% of Final Grade)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.weight}\r\n                                    onChange={(e) => setRubricData(prev => ({\r\n                                        ...prev,\r\n                                        assignmentInfo: { ...prev.assignmentInfo, weight: parseInt(e.target.value) || 0 }\r\n                                    }))}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"md:col-span-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\r\n                                <textarea\r\n                                    value={rubricData.assignmentInfo.description}\r\n                                    onChange={(e) => setRubricData(prev => ({\r\n                                        ...prev,\r\n                                        assignmentInfo: { ...prev.assignmentInfo, description: e.target.value }\r\n                                    }))}\r\n                                    onContextMenu={(e) => {\r\n                                        e.preventDefault();\r\n                                        openModalEdit(\r\n                                            rubricData.assignmentInfo.description,\r\n                                            'Assignment Description',\r\n                                            (newContent) => setRubricData(prev => ({\r\n                                                ...prev,\r\n                                                assignmentInfo: { ...prev.assignmentInfo, description: newContent }\r\n                                            }))\r\n                                        );\r\n                                    }}\r\n                                    className=\"w-full p-3 border rounded-lg resize-both\"\r\n                                    rows=\"2\"\r\n                                    placeholder=\"Brief description of the assignment and its requirements\"\r\n                                    title=\"Right-click for full-page editor\"\r\n                                    style={{ minHeight: '60px', maxHeight: '200px', resize: 'both' }}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Passing Threshold (%)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={rubricData.assignmentInfo.passingThreshold}\r\n                                    onChange={(e) => setRubricData(prev => ({\r\n                                        ...prev,\r\n                                        assignmentInfo: { ...prev.assignmentInfo, passingThreshold: parseInt(e.target.value) || 0 }\r\n                                    }))}\r\n                                    className=\"w-full p-3 border rounded-lg\"\r\n                                    min=\"0\"\r\n                                    max=\"100\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Points (Calculated)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={calculateTotalPoints()}\r\n                                    disabled\r\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Point System Selection */}\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\r\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\r\n                        <div className=\"flex gap-4\">\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"multiplier\"\r\n                                    checked={pointingSystem === 'multiplier'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                Automatic (Multiplier-based): Points calculated automatically based on level multipliers\r\n                            </label>\r\n                            <label className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    name=\"pointSystem\"\r\n                                    value=\"custom\"\r\n                                    checked={pointingSystem === 'custom'}\r\n                                    onChange={(e) => setPointingSystem(e.target.value)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                Custom: Manually set point ranges for each level\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Rubric Table */}\r\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6\">\r\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Rubric Matrix</h3>\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={() => setReversedOrder(!reversedOrder)}\r\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\r\n                                    title=\"Reverse level order (lowest to highest or highest to lowest)\"\r\n                                >\r\n                                    <RotateCcw size={14} />\r\n                                    {reversedOrder ? 'Standard' : 'Reverse'} Order\r\n                                </button>\r\n                                <button\r\n                                    onClick={addCriterion}\r\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\r\n                                >\r\n                                    <Plus size={16} />\r\n                                    Add Criterion\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full border-collapse\">\r\n                                <thead>\r\n                                    <tr className=\"bg-gray-100\">\r\n                                        <th className=\"border p-3 text-left font-semibold\" style={{ width: '200px' }}>\r\n                                            Criterion\r\n                                        </th>\r\n                                        {getDisplayLevels().map((level) => (\r\n                                            <th\r\n                                                key={level.level}\r\n                                                className=\"border p-3 text-center font-semibold\"\r\n                                                style={{ backgroundColor: level.color + '20', color: level.color, minWidth: '150px' }}\r\n                                            >\r\n                                                {level.name}\r\n                                            </th>\r\n                                        ))}\r\n                                        <th className=\"border p-3 text-center font-semibold\" style={{ width: '80px' }}>\r\n                                            Actions\r\n                                        </th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {rubricData.criteria.map((criterion) => (\r\n                                        <tr key={criterion.id}>\r\n                                            {/* Criterion Column */}\r\n                                            <td className=\"border p-3 bg-gray-50\">\r\n                                                <div className=\"space-y-2\">\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        value={criterion.name}\r\n                                                        onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\r\n                                                        className=\"w-full p-2 border rounded text-sm font-medium\"\r\n                                                        placeholder=\"Criterion name\"\r\n                                                    />\r\n                                                    <textarea\r\n                                                        value={criterion.description}\r\n                                                        onChange={(e) => updateCriterion(criterion.id, 'description', e.target.value)}\r\n                                                        onContextMenu={(e) => {\r\n                                                            e.preventDefault();\r\n                                                            openModalEdit(\r\n                                                                criterion.description,\r\n                                                                'Criterion Description',\r\n                                                                (newContent) => updateCriterion(criterion.id, 'description', newContent)\r\n                                                            );\r\n                                                        }}\r\n                                                        className=\"w-full p-2 border rounded text-xs resize-both\"\r\n                                                        rows=\"2\"\r\n                                                        placeholder=\"Brief description\"\r\n                                                        title=\"Right-click for full-page editor\"\r\n                                                        style={{ minHeight: '48px', maxHeight: '200px', resize: 'both' }}\r\n                                                    />\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <label className=\"text-xs text-gray-600\">Max Points</label>\r\n                                                            <input\r\n                                                                type=\"number\"\r\n                                                                value={criterion.maxPoints}\r\n                                                                onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\r\n                                                                className=\"w-full p-1 border rounded text-sm\"\r\n                                                                min=\"0\"\r\n                                                            />\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n\r\n                                            {/* Level Columns */}\r\n                                            {getDisplayLevels().map((level) => (\r\n                                                <td key={level.level} className=\"border p-3 align-top\">\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <div className=\"text-center\">\r\n                                                            <div className=\"font-bold text-sm\" style={{ color: level.color }}>\r\n                                                                {calculatePointRange(criterion, level.level)} pts\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <textarea\r\n                                                            value={criterion.levels[level.level]?.description || ''}\r\n                                                            onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'description', e.target.value)}\r\n                                                            onContextMenu={(e) => {\r\n                                                                e.preventDefault();\r\n                                                                openModalEdit(\r\n                                                                    criterion.levels[level.level]?.description || '',\r\n                                                                    `${level.name} Description`,\r\n                                                                    (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent)\r\n                                                                );\r\n                                                            }}\r\n                                                            className=\"w-full p-2 border rounded text-xs resize-both\"\r\n                                                            rows=\"4\"\r\n                                                            placeholder={`${level.name} description...`}\r\n                                                            title=\"Right-click for full-page editor\"\r\n                                                            style={{ minHeight: '80px', maxHeight: '300px', resize: 'both' }}\r\n                                                        />\r\n                                                        {pointingSystem === 'custom' && (\r\n                                                            <input\r\n                                                                type=\"text\"\r\n                                                                value={criterion.levels[level.level]?.pointRange || ''}\r\n                                                                onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\r\n                                                                className=\"w-full p-1 border rounded text-xs text-center\"\r\n                                                                placeholder=\"Point range\"\r\n                                                            />\r\n                                                        )}\r\n                                                    </div>\r\n                                                </td>\r\n                                            ))}\r\n\r\n                                            {/* Actions Column */}\r\n                                            <td className=\"border p-3 text-center\">\r\n                                                <button\r\n                                                    onClick={() => removeCriterion(criterion.id)}\r\n                                                    className=\"text-red-600 hover:text-red-800 p-1\"\r\n                                                    disabled={rubricData.criteria.length === 1}\r\n                                                >\r\n                                                    <X size={16} />\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Feedback Library Management - Accordion Style */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Feedback Libraries</h3>\r\n                        <div className=\"space-y-4\">\r\n                            {rubricData.criteria.map((criterion) => (\r\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\r\n                                    <button\r\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\r\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\r\n                                    >\r\n                                        <div>\r\n                                            <h4 className=\"font-semibold text-gray-800\">\r\n                                                {criterion.name || 'Unnamed Criterion'} - Feedback Library\r\n                                            </h4>\r\n                                            <p className=\"text-sm text-gray-600 mt-1\">\r\n                                                {criterion.feedbackLibrary.strengths.length +\r\n                                                    criterion.feedbackLibrary.improvements.length +\r\n                                                    criterion.feedbackLibrary.general.length} feedback items\r\n                                            </p>\r\n                                        </div>\r\n                                        {expandedFeedback[criterion.id] ? (\r\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\r\n                                        ) : (\r\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\r\n                                        )}\r\n                                    </button>\r\n\r\n                                    {expandedFeedback[criterion.id] && (\r\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\r\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n                                                {['strengths', 'improvements', 'general'].map((category) => (\r\n                                                    <div key={category} className=\"space-y-3\">\r\n                                                        <div className=\"flex justify-between items-center\">\r\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\r\n                                                                {category} Comments\r\n                                                            </label>\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    const newComment = prompt(`Add ${category} comment:`);\r\n                                                                    if (newComment) {\r\n                                                                        addFeedbackItem(criterion.id, category, newComment);\r\n                                                                    }\r\n                                                                }}\r\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium\"\r\n                                                            >\r\n                                                                + Add\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\r\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\r\n                                                                <div key={index} className=\"flex items-start gap-2 text-xs\">\r\n                                                                    <span\r\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100\"\r\n                                                                        onClick={() => {\r\n                                                                            openModalEdit(\r\n                                                                                item,\r\n                                                                                `${category} Comment`,\r\n                                                                                (newContent) => {\r\n                                                                                    const updatedFeedback = [...criterion.feedbackLibrary[category]];\r\n                                                                                    updatedFeedback[index] = newContent;\r\n                                                                                    setRubricData(prev => ({\r\n                                                                                        ...prev,\r\n                                                                                        criteria: prev.criteria.map(c =>\r\n                                                                                            c.id === criterion.id\r\n                                                                                                ? {\r\n                                                                                                    ...c,\r\n                                                                                                    feedbackLibrary: {\r\n                                                                                                        ...c.feedbackLibrary,\r\n                                                                                                        [category]: updatedFeedback\r\n                                                                                                    }\r\n                                                                                                }\r\n                                                                                                : c\r\n                                                                                        )\r\n                                                                                    }));\r\n                                                                                }\r\n                                                                            );\r\n                                                                        }}\r\n                                                                        title=\"Click to edit in full-page editor\"\r\n                                                                    >\r\n                                                                        {item}\r\n                                                                    </span>\r\n                                                                    <button\r\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\r\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1\"\r\n                                                                    >\r\n                                                                        <X size={12} />\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            ))}\r\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\r\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4\">\r\n                                                                    No {category} comments added\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Overall Score Preview */}\r\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">Overall Score Breakdown</h3>\r\n                        <p className=\"text-gray-600 mb-4\">Each submission is assigned a level of achievement based on its overall rubric score.</p>\r\n\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\">\r\n                            {getDisplayLevels().map((level) => (\r\n                                <div\r\n                                    key={level.level}\r\n                                    className=\"text-center p-3 rounded-lg border-2\"\r\n                                    style={{\r\n                                        borderColor: level.color,\r\n                                        backgroundColor: level.color + '15'\r\n                                    }}\r\n                                >\r\n                                    <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\r\n                                        {level.name}\r\n                                    </div>\r\n                                    <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\r\n                                        {Math.round(calculateTotalPoints() * level.multiplier)}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-gray-600\">or more</div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Full-Page Text Editor Modal */}\r\n                {modalEdit.show && (\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n                        <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl h-full max-h-[90vh] flex flex-col\">\r\n                            <div className=\"flex justify-between items-center p-4 border-b\">\r\n                                <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                                    Edit {modalEdit.field}\r\n                                </h3>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => closeModalEdit(true)}\r\n                                        className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\r\n                                    >\r\n                                        <Save size={16} />\r\n                                        Save & Close\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => closeModalEdit(false)}\r\n                                        className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded flex items-center gap-2\"\r\n                                    >\r\n                                        <X size={16} />\r\n                                        Cancel\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex-1 p-4\">\r\n                                <textarea\r\n                                    value={modalEdit.content}\r\n                                    onChange={(e) => setModalEdit(prev => ({ ...prev, content: e.target.value }))}\r\n                                    className=\"w-full h-full p-4 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                                    placeholder=\"Enter your text here...\"\r\n                                    style={{ minHeight: '400px' }}\r\n                                />\r\n                            </div>\r\n                            <div className=\"p-4 border-t bg-gray-50 rounded-b-lg\">\r\n                                <p className=\"text-sm text-gray-600\">\r\n                                    <strong>Tip:</strong> Use this full-page editor for longer descriptions and detailed feedback comments.\r\n                                    Click \"Save & Close\" to apply your changes.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Hidden file inputs */}\r\n                <input\r\n                    ref={importInputRef}\r\n                    type=\"file\"\r\n                    accept=\".json\"\r\n                    onChange={importRubric}\r\n                    className=\"hidden\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RubricCreator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}