{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2 } from 'lucide-react';\nimport RichTextEditor from '../RichTextEditor';\nimport { useAssessment } from './SharedContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RubricCreator = () => {\n  _s();\n  // Get shared context functions and state\n  const {\n    sharedRubric,\n    setSharedRubric,\n    transferRubricToGradingWithDetails,\n    activeTab\n  } = useAssessment();\n\n  // Default rubric levels (7-level system)\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // Initialize state from shared context or defaults\n  const [rubricData, setRubricData] = useState(() => {\n    if (sharedRubric) {\n      return sharedRubric;\n    }\n    return {\n      assignmentInfo: {\n        title: '',\n        description: '',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: [...defaultLevels],\n      criteria: [{\n        id: 'criterion-1',\n        name: '',\n        description: '',\n        maxPoints: 20,\n        weight: 20,\n        levels: {},\n        feedbackLibrary: {\n          strengths: [],\n          improvements: [],\n          general: []\n        }\n      }]\n    };\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [inlineEditor, setInlineEditor] = useState({\n    show: false,\n    content: '',\n    field: null,\n    onSave: null,\n    criterionId: null,\n    level: null,\n    type: null // 'assignment', 'criterion', or 'level'\n  });\n  const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n  // Use refs to store editor content and DOM node\n  const richTextContentRef = useRef('');\n  const editorRef = useRef(null);\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n\n  // Cursor position helpers for the inline editor\n  const saveCursorPosition = () => {\n    const editor = editorRef.current;\n    if (!editor) return null;\n    const selection = window.getSelection();\n    if (selection.rangeCount === 0) return null;\n    const range = selection.getRangeAt(0);\n    return {\n      startContainer: range.startContainer,\n      startOffset: range.startOffset,\n      endContainer: range.endContainer,\n      endOffset: range.endOffset\n    };\n  };\n  const restoreCursorPosition = savedPosition => {\n    if (!savedPosition || !editorRef.current) return;\n    try {\n      const selection = window.getSelection();\n      const range = document.createRange();\n      range.setStart(savedPosition.startContainer, savedPosition.startOffset);\n      range.setEnd(savedPosition.endContainer, savedPosition.endOffset);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } catch (error) {\n      // If cursor restoration fails, place cursor at end\n      const editor = editorRef.current;\n      const range = document.createRange();\n      const selection = window.getSelection();\n      range.selectNodeContents(editor);\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  };\n\n  // Auto-save to shared context whenever rubricData changes\n  useEffect(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout);\n    }\n    const timeoutId = setTimeout(() => {\n      setSharedRubric(rubricData);\n    }, 1000); // Auto-save after 1 second of inactivity\n\n    setAutoSaveTimeout(timeoutId);\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [rubricData, setSharedRubric]);\n\n  // Load shared rubric when it changes externally\n  useEffect(() => {\n    if (sharedRubric && activeTab === 'rubric-creator') {\n      setRubricData(sharedRubric);\n    }\n  }, [sharedRubric, activeTab]);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Launch the inline rich text editor\n  const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\n    // Initialize the ref with current content\n    richTextContentRef.current = content || '';\n    setInlineEditor({\n      show: true,\n      content: content || '',\n      field,\n      onSave,\n      criterionId,\n      level,\n      type\n    });\n  };\n  const convertHtmlToPlainText = html => {\n    // Create a temporary div to parse HTML\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n    return tempDiv.textContent || tempDiv.innerText || '';\n  };\n  const convertPlainTextToHtml = text => {\n    return text.replace(/\\n/g, '<br>');\n  };\n\n  // Close inline editor and optionally save\n  const closeInlineEditor = (save = false) => {\n    if (save && inlineEditor.onSave) {\n      // Get the current content from ref (most up-to-date)\n      const finalContent = richTextContentRef.current;\n      inlineEditor.onSave(finalContent);\n    }\n    setInlineEditor({\n      show: false,\n      content: '',\n      field: null,\n      onSave: null,\n      criterionId: null,\n      level: null,\n      type: null\n    });\n    richTextContentRef.current = '';\n  };\n\n  // Reset textarea sizes to original dimensions\n  const resetTextareaSizes = () => {\n    const textareas = document.querySelectorAll('textarea');\n    textareas.forEach(textarea => {\n      // Reset to default sizes based on context\n      if (textarea.closest('.assignment-info')) {\n        textarea.style.height = '80px';\n        textarea.style.maxHeight = '200px';\n      } else if (textarea.closest('td')) {\n        // Criterion or level descriptions\n        if (textarea.rows <= 2) {\n          textarea.style.height = '48px';\n          textarea.style.maxHeight = '200px';\n        } else {\n          textarea.style.height = '80px';\n          textarea.style.maxHeight = '300px';\n        }\n      }\n      textarea.style.width = '100%';\n    });\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n\n  // Update assignment info and recalculate total points\n  const updateAssignmentInfo = (field, value) => {\n    setRubricData(prev => {\n      const updated = {\n        ...prev,\n        assignmentInfo: {\n          ...prev.assignmentInfo,\n          [field]: value\n        }\n      };\n\n      // Auto-calculate total points\n      if (field !== 'totalPoints') {\n        updated.assignmentInfo.totalPoints = calculateTotalPoints();\n      }\n      return updated;\n    });\n  };\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    if (!item || !item.trim()) return;\n    const htmlItem = convertPlainTextToHtml(item.trim());\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], htmlItem]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as backup\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Prepare rubric data for export/transfer\n  const prepareRubricForExport = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Update total points\n    exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n    return exportData;\n  };\n\n  // Transfer to grading tool directly\n  const transferToGrading = () => {\n    const exportData = prepareRubricForExport();\n    transferRubricToGradingWithDetails(exportData);\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n\n          // Validate the imported data structure\n          if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n            setRubricData(importedData);\n          } else {\n            alert('Invalid rubric format. Please check the JSON structure.');\n          }\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n          console.error('Import error:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Reset to default rubric\n  const resetRubric = () => {\n    if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n      const defaultRubric = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100\n        },\n        rubricLevels: [...defaultLevels],\n        criteria: [{\n          id: 'criterion-1',\n          name: '',\n          description: '',\n          maxPoints: 20,\n          weight: 20,\n          levels: {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: []\n          }\n        }]\n      };\n      setRubricData(defaultRubric);\n    }\n  };\n\n  // Export to HTML\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const totalPoints = calculateTotalPoints();\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <p style=\"color: #64748b; font-size: 1.1em;\">${rubricData.assignmentInfo.description || 'No description provided'}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\n                            ${criterion.description || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => {\n      var _criterion$levels$lev3;\n      return `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Professional Rubric Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-200\",\n              children: \"Create comprehensive assessment rubrics with detailed criteria and feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetRubric,\n              className: \"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Reset to blank rubric\",\n              children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 33\n              }, this), \"Reset\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _importInputRef$curre;\n                return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n              },\n              className: \"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Import existing rubric JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 33\n              }, this), \"Import\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferToGrading,\n              className: \"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Transfer rubric directly to grading tool\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 33\n              }, this), \"Use for Grading\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveRubric,\n              className: \"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Save work in progress as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 33\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForGrading,\n              className: \"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export final rubric for grading template\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 33\n              }, this), \"Export JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              className: \"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export HTML version for distribution\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"Auto-saved - Ready for grading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Quick Start Guide & Button Functions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Building Your Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 694,\n                      columnNumber: 49\n                    }, this), \" Clear all data and start fresh\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 694,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset Sizes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 695,\n                      columnNumber: 49\n                    }, this), \" Return all text boxes to original size\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 695,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 696,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated or existing rubric files\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 696,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Use for Grading:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 697,\n                      columnNumber: 49\n                    }, this), \" Send directly to grading tool\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 697,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 698,\n                      columnNumber: 49\n                    }, this), \" Download work-in-progress (JSON)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 698,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 699,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 699,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 700,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 700,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Step-by-Step Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 704,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment details and requirements\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 706,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add criteria using \\\"Add Criterion\\\" button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 707,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 708,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional but recommended)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 709,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Use \\\"Use for Grading\\\" to switch to grading tool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 711,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 705,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCA1 Tip:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 41\n                }, this), \" Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCDD Markup Editing:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 720,\n                  columnNumber: 41\n                }, this), \" Type directly in any description box for quick edits, or click the blue expand button (\\u2922) to open the markup editor. Pasted formatting from Word or the web is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 719,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => updateAssignmentInfo('title', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project - Final Showcase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 742,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => updateAssignmentInfo('weight', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 753,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: convertHtmlToPlainText(rubricData.assignmentInfo.description),\n                  onChange: e => updateAssignmentInfo('description', convertPlainTextToHtml(e.target.value)),\n                  className: \"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12\",\n                  rows: \"3\",\n                  placeholder: \"Detailed description of assignment requirements and expectations...\",\n                  title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                  style: {\n                    minHeight: '80px',\n                    maxHeight: '200px',\n                    resize: 'both'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 755,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: e => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    openInlineEditor(rubricData.assignmentInfo.description, 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), null, null, 'assignment');\n                  },\n                  className: \"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                  title: \"Open inline rich text editor\",\n                  children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 764,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 787,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Auto-calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 797,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 796,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 25\n          }, this), inlineEditor.show && inlineEditor.type === 'assignment' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                  size: 20,\n                  className: \"text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 813,\n                  columnNumber: 41\n                }, this), \"Markup Editor: \", inlineEditor.field]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 812,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(true),\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 821,\n                    columnNumber: 45\n                  }, this), \"Save & Close\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 817,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => closeInlineEditor(false),\n                  className: \"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 828,\n                    columnNumber: 45\n                  }, this), \"Cancel\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 824,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: /*#__PURE__*/_jsxDEV(RichTextEditor, {\n                ref: editorRef,\n                value: inlineEditor.content,\n                onChange: html => {\n                  richTextContentRef.current = html;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 836,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 835,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4 text-sm text-gray-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-green-500 rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 850,\n                      columnNumber: 49\n                    }, this), \"Markup Editor Active\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 849,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Paste rich text from other sources\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 853,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 848,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Shortcuts:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 856,\n                    columnNumber: 45\n                  }, this), \" Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Line), Tab (Indent)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 855,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 847,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 866,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 869,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Automatic (Recommended):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 878,\n                  columnNumber: 37\n                }, this), \" Points calculated using level multipliers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Custom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 891,\n                  columnNumber: 37\n                }, this), \" Manually set point ranges for each level\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 881,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 867,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Assessment Criteria Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 900,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 907,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'High→Low' : 'Low→High']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 902,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: resetTextareaSizes,\n                className: \"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n                title: \"Reset all textarea sizes to original dimensions\",\n                children: [/*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 915,\n                  columnNumber: 37\n                }, this), \"Reset Sizes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 910,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 922,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 918,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 901,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold\",\n                    style: {\n                      width: '200px'\n                    },\n                    children: [\"Criterion (\", rubricData.criteria.length, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 932,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      minWidth: '150px',\n                      border: `2px solid ${level.color}`\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-bold\",\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 946,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs font-normal mt-1 opacity-75\",\n                      children: level.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 947,\n                      columnNumber: 49\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 936,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      width: '80px'\n                    },\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 952,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 931,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map((criterion, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 bg-gray-50\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: criterion.name,\n                          onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                          className: \"w-full p-2 border rounded text-sm font-medium\",\n                          placeholder: `Criterion ${index + 1} name`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 964,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"relative\",\n                          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                            value: convertHtmlToPlainText(criterion.description),\n                            onChange: e => updateCriterion(criterion.id, 'description', convertPlainTextToHtml(e.target.value)),\n                            className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\",\n                            rows: \"2\",\n                            placeholder: \"Brief description of what this criterion measures\",\n                            title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                            style: {\n                              minHeight: '48px',\n                              maxHeight: '200px',\n                              resize: 'both'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 972,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            onClick: e => {\n                              e.preventDefault();\n                              e.stopPropagation();\n                              openInlineEditor(criterion.description, `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), criterion.id, null, 'criterion');\n                            },\n                            className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                            title: \"Open inline rich text editor\",\n                            children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 12\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 998,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 981,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 971,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex gap-2\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex-1\",\n                            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                              className: \"text-xs text-gray-600\",\n                              children: \"Max Points\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1003,\n                              columnNumber: 65\n                            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                              type: \"number\",\n                              value: criterion.maxPoints,\n                              onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                              className: \"w-full p-1 border rounded text-sm\",\n                              min: \"0\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1004,\n                              columnNumber: 65\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1002,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1001,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 963,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 962,\n                      columnNumber: 49\n                    }, this), getDisplayLevels().map(level => {\n                      var _criterion$levels$lev4, _criterion$levels$lev6;\n                      return /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"border p-3 align-top\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"space-y-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-center\",\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"font-bold text-sm px-2 py-1 rounded\",\n                              style: {\n                                color: level.color,\n                                backgroundColor: level.color + '20'\n                              },\n                              children: [calculatePointRange(criterion, level.level), \" pts\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1021,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1020,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"relative\",\n                            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                              value: convertHtmlToPlainText(((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || ''),\n                              onChange: e => updateCriterionLevel(criterion.id, level.level, 'description', convertPlainTextToHtml(e.target.value)),\n                              className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\",\n                              rows: \"4\",\n                              placeholder: `Describe ${level.name.toLowerCase()} performance...`,\n                              title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                              style: {\n                                minHeight: '80px',\n                                maxHeight: '300px',\n                                resize: 'both'\n                              }\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1032,\n                              columnNumber: 65\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              type: \"button\",\n                              onClick: e => {\n                                var _criterion$levels$lev5;\n                                e.preventDefault();\n                                e.stopPropagation();\n                                openInlineEditor(((_criterion$levels$lev5 = criterion.levels[level.level]) === null || _criterion$levels$lev5 === void 0 ? void 0 : _criterion$levels$lev5.description) || '', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), criterion.id, level.level, 'level');\n                              },\n                              className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                              title: \"Open inline rich text editor\",\n                              children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                                size: 12\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1058,\n                                columnNumber: 69\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1041,\n                              columnNumber: 65\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1031,\n                            columnNumber: 61\n                          }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            value: ((_criterion$levels$lev6 = criterion.levels[level.level]) === null || _criterion$levels$lev6 === void 0 ? void 0 : _criterion$levels$lev6.pointRange) || '',\n                            onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                            className: \"w-full p-1 border rounded text-xs text-center\",\n                            placeholder: \"e.g., 18-20\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1062,\n                            columnNumber: 65\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1019,\n                          columnNumber: 57\n                        }, this)\n                      }, level.level, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1018,\n                        columnNumber: 53\n                      }, this);\n                    }), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 text-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => removeCriterion(criterion.id),\n                        className: \"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\",\n                        disabled: rubricData.criteria.length === 1,\n                        title: rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\",\n                        children: /*#__PURE__*/_jsxDEV(X, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1082,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1076,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1075,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 960,\n                    columnNumber: 45\n                  }, this), inlineEditor.show && inlineEditor.criterionId === criterion.id && (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: getDisplayLevels().length + 2,\n                      className: \"border-0 p-0\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                            className: \"text-lg font-semibold text-gray-800 flex items-center gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 20,\n                              className: \"text-blue-600\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1097,\n                              columnNumber: 73\n                            }, this), \"Markup Editor: \", inlineEditor.field]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1096,\n                            columnNumber: 69\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex gap-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(true),\n                              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(Save, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1105,\n                                columnNumber: 77\n                              }, this), \"Save & Close\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1101,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: () => closeInlineEditor(false),\n                              className: \"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\",\n                              children: [/*#__PURE__*/_jsxDEV(X, {\n                                size: 16\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1112,\n                                columnNumber: 77\n                              }, this), \"Cancel\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1108,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1100,\n                            columnNumber: 69\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1095,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4\",\n                          children: /*#__PURE__*/_jsxDEV(RichTextEditor, {\n                            ref: editorRef,\n                            value: inlineEditor.content,\n                            onChange: html => {\n                              richTextContentRef.current = html;\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1120,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1119,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex justify-between items-center\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"flex items-center gap-4 text-sm text-gray-600\",\n                              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"flex items-center gap-2\",\n                                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                  className: \"w-2 h-2 bg-green-500 rounded-full\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 1134,\n                                  columnNumber: 49\n                                }, this), \"Markup Editor Active\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1133,\n                                columnNumber: 77\n                              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                children: \"Paste rich text from other sources\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1137,\n                                columnNumber: 45\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1132,\n                              columnNumber: 73\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"text-xs text-gray-500\",\n                              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                                children: \"Shortcuts:\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 1140,\n                                columnNumber: 77\n                              }, this), \" Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Line), Tab (Indent)\"]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1139,\n                              columnNumber: 73\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1131,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1130,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1093,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1092,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1091,\n                    columnNumber: 53\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 959,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 957,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"\\uD83D\\uDCDD Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-4\",\n            children: \"Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`, \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1168,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items stored\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1171,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1167,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1178,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1180,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1163,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category === 'strengths' ? '👍 Strengths' : category === 'improvements' ? '🔧 Improvements' : '💬 General', \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1190,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => {\n                          const newComment = prompt(`Add ${category} comment:`);\n                          if (newComment && newComment.trim()) {\n                            addFeedbackItem(criterion.id, category, newComment.trim());\n                          }\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1195,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1189,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-start gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\",\n                          onClick: () => {\n                            openInlineEditor(item, `${category} Comment`, newContent => {\n                              const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                              // Store formatted HTML so formatting persists in exports\n                              updatedFeedback[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updatedFeedback\n                                  }\n                                } : c)\n                              }));\n                            }, criterion.id, null, 'feedback');\n                          },\n                          title: \"Click to edit\",\n                          children: convertHtmlToPlainText(item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1210,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\",\n                          title: \"Remove this comment\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1249,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1244,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1209,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\",\n                        children: [\"No \", category, \" comments yet - click \\\"Add\\\" to create some\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1254,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1207,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1188,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1186,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1185,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1162,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1160,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1156,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"\\uD83D\\uDCCA Achievement Level Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1271,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1272,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\",\n            children: getDisplayLevels().map(level => {\n              const totalPoints = calculateTotalPoints();\n              const pointsForLevel = Math.round(totalPoints * level.multiplier);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\",\n                style: {\n                  borderColor: level.color,\n                  backgroundColor: level.color + '15'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-sm\",\n                  style: {\n                    color: level.color\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1289,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-bold mt-1\",\n                  style: {\n                    color: level.color\n                  },\n                  children: [pointsForLevel, \"+\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1292,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600\",\n                  children: totalPoints > 0 ? `${Math.round(pointsForLevel / totalPoints * 100)}%+` : '-%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1295,\n                  columnNumber: 41\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1281,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1276,\n            columnNumber: 25\n          }, this), calculateTotalPoints() === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-yellow-800 text-sm\",\n              children: \"Add criteria with point values to see the achievement level breakdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1305,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1304,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1270,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1314,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 606,\n    columnNumber: 9\n  }, this);\n};\n_s(RubricCreator, \"1TEobIctGFm4nfn7wiWicJu1hmM=\", false, function () {\n  return [useAssessment];\n});\n_c = RubricCreator;\nexport default RubricCreator;\nvar _c;\n$RefreshReg$(_c, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Plus","X","Upload","Download","Save","FileText","RotateCcw","ChevronDown","ChevronUp","Maximize2","ArrowRight","Minimize2","RichTextEditor","useAssessment","jsxDEV","_jsxDEV","RubricCreator","_s","sharedRubric","setSharedRubric","transferRubricToGradingWithDetails","activeTab","defaultLevels","level","name","description","color","multiplier","rubricData","setRubricData","assignmentInfo","title","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","maxPoints","levels","feedbackLibrary","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","inlineEditor","setInlineEditor","show","content","field","onSave","criterionId","type","autoSaveTimeout","setAutoSaveTimeout","richTextContentRef","editorRef","importInputRef","saveCursorPosition","editor","current","selection","window","getSelection","rangeCount","range","getRangeAt","startContainer","startOffset","endContainer","endOffset","restoreCursorPosition","savedPosition","document","createRange","setStart","setEnd","removeAllRanges","addRange","error","selectNodeContents","collapse","clearTimeout","timeoutId","setTimeout","toggleFeedbackExpansion","prev","openInlineEditor","convertHtmlToPlainText","html","tempDiv","createElement","innerHTML","textContent","innerText","convertPlainTextToHtml","text","replace","closeInlineEditor","save","finalContent","resetTextareaSizes","textareas","querySelectorAll","forEach","textarea","closest","style","height","maxHeight","rows","width","calculateTotalPoints","reduce","total","criterion","updateAssignmentInfo","value","updated","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","map","updateCriterionLevel","addFeedbackItem","category","item","trim","htmlItem","removeFeedbackItem","index","_","i","calculatePointRange","rubricLevel","find","l","points","Math","round","toString","_criterion$levels$lev","pointRange","getDisplayLevels","reverse","saveRubric","dataStr","JSON","stringify","dataBlob","Blob","url","URL","createObjectURL","link","href","download","toISOString","split","click","revokeObjectURL","exportForGrading","exportData","prepareRubricForExport","Object","fromEntries","_criterion$levels$lev2","transferToGrading","importRubric","event","file","target","files","reader","FileReader","onload","e","importedData","parse","result","alert","console","readAsText","resetRubric","confirm","defaultRubric","exportToHTML","displayLevels","htmlContent","length","join","_criterion$levels$lev3","toFixed","toLocaleDateString","weekday","year","month","day","hour","minute","htmlBlob","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_importInputRef$curre","onChange","placeholder","parseInt","min","max","minHeight","resize","preventDefault","stopPropagation","newContent","disabled","ref","checked","backgroundColor","minWidth","border","Fragment","_criterion$levels$lev4","_criterion$levels$lev6","toLowerCase","_criterion$levels$lev5","colSpan","indexOf","newComment","prompt","updatedFeedback","pointsForLevel","borderColor","accept","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2 } from 'lucide-react';\nimport RichTextEditor from '../RichTextEditor';\nimport { useAssessment } from './SharedContext';\n\nconst RubricCreator = () => {\n    // Get shared context functions and state\n    const {\n        sharedRubric,\n        setSharedRubric,\n        transferRubricToGradingWithDetails,\n        activeTab\n    } = useAssessment();\n\n    // Default rubric levels (7-level system)\n    const defaultLevels = [\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\n    ];\n\n    // Initialize state from shared context or defaults\n    const [rubricData, setRubricData] = useState(() => {\n        if (sharedRubric) {\n            return sharedRubric;\n        }\n        return {\n            assignmentInfo: {\n                title: '',\n                description: '',\n                weight: 25,\n                passingThreshold: 60,\n                totalPoints: 100\n            },\n            rubricLevels: [...defaultLevels],\n            criteria: [\n                {\n                    id: 'criterion-1',\n                    name: '',\n                    description: '',\n                    maxPoints: 20,\n                    weight: 20,\n                    levels: {},\n                    feedbackLibrary: {\n                        strengths: [],\n                        improvements: [],\n                        general: []\n                    }\n                }\n            ]\n        };\n    });\n\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\n    const [reversedOrder, setReversedOrder] = useState(false);\n    const [showGuide, setShowGuide] = useState(false);\n    const [expandedFeedback, setExpandedFeedback] = useState({});\n    const [inlineEditor, setInlineEditor] = useState({\n        show: false,\n        content: '',\n        field: null,\n        onSave: null,\n        criterionId: null,\n        level: null,\n        type: null // 'assignment', 'criterion', or 'level'\n    });\n    const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n    // Use refs to store editor content and DOM node\n    const richTextContentRef = useRef('');\n    const editorRef = useRef(null);\n\n    // Refs for file inputs\n    const importInputRef = useRef(null);\n\n    // Cursor position helpers for the inline editor\n    const saveCursorPosition = () => {\n        const editor = editorRef.current;\n        if (!editor) return null;\n\n        const selection = window.getSelection();\n        if (selection.rangeCount === 0) return null;\n\n        const range = selection.getRangeAt(0);\n        return {\n            startContainer: range.startContainer,\n            startOffset: range.startOffset,\n            endContainer: range.endContainer,\n            endOffset: range.endOffset\n        };\n    };\n\n    const restoreCursorPosition = (savedPosition) => {\n        if (!savedPosition || !editorRef.current) return;\n\n        try {\n            const selection = window.getSelection();\n            const range = document.createRange();\n\n            range.setStart(savedPosition.startContainer, savedPosition.startOffset);\n            range.setEnd(savedPosition.endContainer, savedPosition.endOffset);\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        } catch (error) {\n            // If cursor restoration fails, place cursor at end\n            const editor = editorRef.current;\n            const range = document.createRange();\n            const selection = window.getSelection();\n\n            range.selectNodeContents(editor);\n            range.collapse(false);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    };\n\n    // Auto-save to shared context whenever rubricData changes\n    useEffect(() => {\n        if (autoSaveTimeout) {\n            clearTimeout(autoSaveTimeout);\n        }\n\n        const timeoutId = setTimeout(() => {\n            setSharedRubric(rubricData);\n        }, 1000); // Auto-save after 1 second of inactivity\n\n        setAutoSaveTimeout(timeoutId);\n\n        return () => {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        };\n    }, [rubricData, setSharedRubric]);\n\n    // Load shared rubric when it changes externally\n    useEffect(() => {\n        if (sharedRubric && activeTab === 'rubric-creator') {\n            setRubricData(sharedRubric);\n        }\n    }, [sharedRubric, activeTab]);\n\n    // Toggle feedback section expansion\n    const toggleFeedbackExpansion = (criterionId) => {\n        setExpandedFeedback(prev => ({\n            ...prev,\n            [criterionId]: !prev[criterionId]\n        }));\n    };\n\n    // Launch the inline rich text editor\n    const openInlineEditor = (content, field, onSave, criterionId = null, level = null, type = 'assignment') => {\n        // Initialize the ref with current content\n        richTextContentRef.current = content || '';\n\n        setInlineEditor({\n            show: true,\n            content: content || '',\n            field,\n            onSave,\n            criterionId,\n            level,\n            type\n        });\n    };\n\n    const convertHtmlToPlainText = (html) => {\n        // Create a temporary div to parse HTML\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = html;\n        return tempDiv.textContent || tempDiv.innerText || '';\n    };\n\n    const convertPlainTextToHtml = (text) => {\n        return text.replace(/\\n/g, '<br>');\n    };\n\n    // Close inline editor and optionally save\n    const closeInlineEditor = (save = false) => {\n        if (save && inlineEditor.onSave) {\n            // Get the current content from ref (most up-to-date)\n            const finalContent = richTextContentRef.current;\n            inlineEditor.onSave(finalContent);\n        }\n\n        setInlineEditor({\n            show: false,\n            content: '',\n            field: null,\n            onSave: null,\n            criterionId: null,\n            level: null,\n            type: null\n        });\n        richTextContentRef.current = '';\n    };\n\n    // Reset textarea sizes to original dimensions\n    const resetTextareaSizes = () => {\n        const textareas = document.querySelectorAll('textarea');\n        textareas.forEach(textarea => {\n            // Reset to default sizes based on context\n            if (textarea.closest('.assignment-info')) {\n                textarea.style.height = '80px';\n                textarea.style.maxHeight = '200px';\n            } else if (textarea.closest('td')) {\n                // Criterion or level descriptions\n                if (textarea.rows <= 2) {\n                    textarea.style.height = '48px';\n                    textarea.style.maxHeight = '200px';\n                } else {\n                    textarea.style.height = '80px';\n                    textarea.style.maxHeight = '300px';\n                }\n            }\n            textarea.style.width = '100%';\n        });\n    };\n\n    // Calculate total points based on current settings\n    const calculateTotalPoints = () => {\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n    };\n\n    // Update assignment info and recalculate total points\n    const updateAssignmentInfo = (field, value) => {\n        setRubricData(prev => {\n            const updated = {\n                ...prev,\n                assignmentInfo: { ...prev.assignmentInfo, [field]: value }\n            };\n\n            // Auto-calculate total points\n            if (field !== 'totalPoints') {\n                updated.assignmentInfo.totalPoints = calculateTotalPoints();\n            }\n\n            return updated;\n        });\n    };\n\n    // Add new criterion\n    const addCriterion = () => {\n        const newCriterion = {\n            id: `criterion-${Date.now()}`,\n            name: '',\n            description: '',\n            maxPoints: 20,\n            weight: 20,\n            levels: {},\n            feedbackLibrary: {\n                strengths: [],\n                improvements: [],\n                general: []\n            }\n        };\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: [...prev.criteria, newCriterion]\n        }));\n    };\n\n    // Remove criterion\n    const removeCriterion = (criterionId) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\n        }));\n    };\n\n    // Update criterion\n    const updateCriterion = (criterionId, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? { ...criterion, [field]: value }\n                    : criterion\n            )\n        }));\n    };\n\n    // Update criterion level description\n    const updateCriterionLevel = (criterionId, level, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        levels: {\n                            ...criterion.levels,\n                            [level]: {\n                                ...criterion.levels[level],\n                                [field]: value\n                            }\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Add feedback item to criterion\n    const addFeedbackItem = (criterionId, category, item) => {\n        if (!item || !item.trim()) return;\n\n        const htmlItem = convertPlainTextToHtml(item.trim());\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: [...criterion.feedbackLibrary[category], htmlItem]\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Remove feedback item\n    const removeFeedbackItem = (criterionId, category, index) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Calculate point range for a level\n    const calculatePointRange = (criterion, level) => {\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n        if (!rubricLevel) return '0';\n\n        if (pointingSystem === 'multiplier') {\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n            return level === 'incomplete' ? '0' : points.toString();\n        } else {\n            // Custom points would be entered directly\n            return criterion.levels[level]?.pointRange || '0';\n        }\n    };\n\n    // Get display levels (potentially reversed)\n    const getDisplayLevels = () => {\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n    };\n\n    // Save rubric to JSON\n    const saveRubric = () => {\n        const dataStr = JSON.stringify(rubricData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Export rubric for grading template\n    const exportForGrading = () => {\n        const exportData = prepareRubricForExport();\n\n        // Save to shared context for grading tool\n        setSharedRubric(exportData);\n\n        // Also download as backup\n        const dataStr = JSON.stringify(exportData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Prepare rubric data for export/transfer\n    const prepareRubricForExport = () => {\n        const exportData = { ...rubricData };\n\n        // Ensure all criterion levels have proper point ranges\n        exportData.criteria = exportData.criteria.map(criterion => ({\n            ...criterion,\n            levels: Object.fromEntries(\n                rubricData.rubricLevels.map(level => [\n                    level.level,\n                    {\n                        pointRange: calculatePointRange(criterion, level.level),\n                        description: criterion.levels[level.level]?.description || ''\n                    }\n                ])\n            )\n        }));\n\n        // Update total points\n        exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n\n        return exportData;\n    };\n\n    // Transfer to grading tool directly\n    const transferToGrading = () => {\n        const exportData = prepareRubricForExport();\n        transferRubricToGradingWithDetails(exportData);\n    };\n\n    // Import rubric data\n    const importRubric = (event) => {\n        const file = event.target.files[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                try {\n                    const importedData = JSON.parse(e.target.result);\n\n                    // Validate the imported data structure\n                    if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n                        setRubricData(importedData);\n                    } else {\n                        alert('Invalid rubric format. Please check the JSON structure.');\n                    }\n                } catch (error) {\n                    alert('Error loading rubric. Please check the JSON format.');\n                    console.error('Import error:', error);\n                }\n            };\n            reader.readAsText(file);\n        }\n        // Reset file input\n        event.target.value = '';\n    };\n\n    // Reset to default rubric\n    const resetRubric = () => {\n        if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n            const defaultRubric = {\n                assignmentInfo: {\n                    title: '',\n                    description: '',\n                    weight: 25,\n                    passingThreshold: 60,\n                    totalPoints: 100\n                },\n                rubricLevels: [...defaultLevels],\n                criteria: [\n                    {\n                        id: 'criterion-1',\n                        name: '',\n                        description: '',\n                        maxPoints: 20,\n                        weight: 20,\n                        levels: {},\n                        feedbackLibrary: {\n                            strengths: [],\n                            improvements: [],\n                            general: []\n                        }\n                    }\n                ]\n            };\n            setRubricData(defaultRubric);\n        }\n    };\n\n    // Export to HTML\n    const exportToHTML = () => {\n        const displayLevels = getDisplayLevels();\n        const totalPoints = calculateTotalPoints();\n\n        const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <p style=\"color: #64748b; font-size: 1.1em;\">${rubricData.assignmentInfo.description || 'No description provided'}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\n                            ${criterion.description || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${criterion.levels[level.level]?.description || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\n        const url = URL.createObjectURL(htmlBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-6\">\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\n                {/* Header */}\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\n                    <div className=\"flex justify-between items-center\">\n                        <div>\n                            <h1 className=\"text-2xl font-bold\">Professional Rubric Builder</h1>\n                            <p className=\"text-blue-200\">Create comprehensive assessment rubrics with detailed criteria and feedback</p>\n                        </div>\n                        <div className=\"flex gap-2 flex-wrap\">\n                            <button\n                                onClick={resetRubric}\n                                className=\"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Reset to blank rubric\"\n                            >\n                                <RotateCcw size={14} />\n                                Reset\n                            </button>\n                            <button\n                                onClick={() => importInputRef.current?.click()}\n                                className=\"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Import existing rubric JSON file\"\n                            >\n                                <Upload size={14} />\n                                Import\n                            </button>\n                            <button\n                                onClick={transferToGrading}\n                                className=\"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Transfer rubric directly to grading tool\"\n                            >\n                                <ArrowRight size={14} />\n                                Use for Grading\n                            </button>\n                            <button\n                                onClick={saveRubric}\n                                className=\"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Save work in progress as JSON file\"\n                            >\n                                <Save size={14} />\n                                Save Draft\n                            </button>\n                            <button\n                                onClick={exportForGrading}\n                                className=\"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Export final rubric for grading template\"\n                            >\n                                <Download size={14} />\n                                Export JSON\n                            </button>\n                            <button\n                                onClick={exportToHTML}\n                                className=\"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Export HTML version for distribution\"\n                            >\n                                <FileText size={14} />\n                                Export HTML\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6\">\n                    {/* Auto-save Indicator */}\n                    {sharedRubric && (\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\">\n                            <div className=\"flex items-center gap-2 text-green-800\">\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                <span className=\"text-sm font-medium\">Auto-saved - Ready for grading tool</span>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Button Guide */}\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\n                        <button\n                            onClick={() => setShowGuide(!showGuide)}\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\n                        >\n                            📖 Quick Start Guide & Button Functions\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}>▼</span>\n                        </button>\n                        {showGuide && (\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">🔧 Building Your Rubric</h4>\n                                        <ul className=\"space-y-1 text-gray-700\">\n                                            <li><strong>Reset:</strong> Clear all data and start fresh</li>\n                                            <li><strong>Reset Sizes:</strong> Return all text boxes to original size</li>\n                                            <li><strong>Import:</strong> Load AI-generated or existing rubric files</li>\n                                            <li><strong>Use for Grading:</strong> Send directly to grading tool</li>\n                                            <li><strong>Save Draft:</strong> Download work-in-progress (JSON)</li>\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template</li>\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\n                                        </ul>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">📝 Step-by-Step Process</h4>\n                                        <ol className=\"space-y-1 text-gray-700\">\n                                            <li>1. Fill in assignment details and requirements</li>\n                                            <li>2. Add criteria using \"Add Criterion\" button</li>\n                                            <li>3. Define level descriptions for each criterion</li>\n                                            <li>4. Add feedback library items (optional but recommended)</li>\n                                            <li>5. Use \"Use for Grading\" to switch to grading tool</li>\n                                            <li>6. Export HTML for student distribution</li>\n                                        </ol>\n                                    </div>\n                                </div>\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\n                                    <p className=\"text-blue-800 text-sm\">\n                                        <strong>💡 Tip:</strong> Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\n                                    </p>\n                                    <p className=\"text-blue-800 text-sm mt-2\">\n                                        <strong>📝 Markup Editing:</strong> Type directly in any description box for quick edits, or click the blue expand button (⤢) to open the markup editor. Pasted formatting from Word or the web is preserved.\n                                    </p>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Assignment Information */}\n                    <div className=\"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\n                                <input\n                                    type=\"text\"\n                                    value={rubricData.assignmentInfo.title}\n                                    onChange={(e) => updateAssignmentInfo('title', e.target.value)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    placeholder=\"e.g., Digital Portfolio Project - Final Showcase\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight (% of Final Grade)</label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.weight}\n                                    onChange={(e) => updateAssignmentInfo('weight', parseInt(e.target.value) || 0)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min=\"0\"\n                                    max=\"100\"\n                                />\n                            </div>\n                            <div className=\"md:col-span-2\">\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                                <div className=\"relative\">\n                                    <textarea\n                                        value={convertHtmlToPlainText(rubricData.assignmentInfo.description)}\n                                        onChange={(e) => updateAssignmentInfo('description', convertPlainTextToHtml(e.target.value))}\n                                        className=\"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12\"\n                                        rows=\"3\"\n                                        placeholder=\"Detailed description of assignment requirements and expectations...\"\n                                        title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                        style={{ minHeight: '80px', maxHeight: '200px', resize: 'both' }}\n                                    />\n                                    <button\n                                        type=\"button\"\n                                        onClick={(e) => {\n                                            e.preventDefault();\n                                            e.stopPropagation();\n                                            openInlineEditor(\n                                                rubricData.assignmentInfo.description,\n                                                'Assignment Description',\n                                                (newContent) => updateAssignmentInfo('description', newContent),\n                                                null,\n                                                null,\n                                                'assignment'\n                                            );\n                                        }}\n                                        className=\"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                        title=\"Open inline rich text editor\"\n                                    >\n                                        <Maximize2 size={14} />\n                                    </button>\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Passing Threshold (%)</label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.passingThreshold}\n                                    onChange={(e) => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min=\"0\"\n                                    max=\"100\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Points (Auto-calculated)</label>\n                                <input\n                                    type=\"number\"\n                                    value={calculateTotalPoints()}\n                                    disabled\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Inline Markup Editor for Assignment */}\n                        {inlineEditor.show && inlineEditor.type === 'assignment' && (\n                            <div className=\"mt-6 border-2 border-blue-300 rounded-lg bg-white shadow-lg\">\n                                {/* Editor Header */}\n                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                                        <Maximize2 size={20} className=\"text-blue-600\" />\n                                        Markup Editor: {inlineEditor.field}\n                                    </h4>\n                                    <div className=\"flex gap-2\">\n                                        <button\n                                            onClick={() => closeInlineEditor(true)}\n                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <Save size={16} />\n                                            Save & Close\n                                        </button>\n                                        <button\n                                            onClick={() => closeInlineEditor(false)}\n                                            className=\"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                        >\n                                            <X size={16} />\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {/* Editor Content */}\n                                <div className=\"p-4\">\n                                    <RichTextEditor\n                                        ref={editorRef}\n                                        value={inlineEditor.content}\n                                        onChange={(html) => {\n                                            richTextContentRef.current = html;\n                                        }}\n                                    />\n                                </div>\n\n                                {/* Footer */}\n                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\n                                    <div className=\"flex justify-between items-center\">\n                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                                            <span className=\"flex items-center gap-2\">\n                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                                Markup Editor Active\n                                            </span>\n                                            <span>Paste rich text from other sources</span>\n                                        </div>\n                                        <div className=\"text-xs text-gray-500\">\n                                            <strong>Shortcuts:</strong> Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Line), Tab (Indent)\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Point System Selection */}\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\n                        <div className=\"flex gap-6\">\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"multiplier\"\n                                    checked={pointingSystem === 'multiplier'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Automatic (Recommended):</strong> Points calculated using level multipliers\n                                </span>\n                            </label>\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"custom\"\n                                    checked={pointingSystem === 'custom'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Custom:</strong> Manually set point ranges for each level\n                                </span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {/* Rubric Table */}\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6\">\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Assessment Criteria Matrix</h3>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setReversedOrder(!reversedOrder)}\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                    title=\"Switch between ascending and descending level order\"\n                                >\n                                    <RotateCcw size={14} />\n                                    {reversedOrder ? 'High→Low' : 'Low→High'}\n                                </button>\n                                <button\n                                    onClick={resetTextareaSizes}\n                                    className=\"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                    title=\"Reset all textarea sizes to original dimensions\"\n                                >\n                                    <Minimize2 size={14} />\n                                    Reset Sizes\n                                </button>\n                                <button\n                                    onClick={addCriterion}\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\n                                >\n                                    <Plus size={16} />\n                                    Add Criterion\n                                </button>\n                            </div>\n                        </div>\n\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"w-full border-collapse\">\n                                <thead>\n                                    <tr className=\"bg-gray-100\">\n                                        <th className=\"border p-3 text-left font-semibold\" style={{ width: '200px' }}>\n                                            Criterion ({rubricData.criteria.length})\n                                        </th>\n                                        {getDisplayLevels().map((level) => (\n                                            <th\n                                                key={level.level}\n                                                className=\"border p-3 text-center font-semibold\"\n                                                style={{\n                                                    backgroundColor: level.color + '20',\n                                                    color: level.color,\n                                                    minWidth: '150px',\n                                                    border: `2px solid ${level.color}`\n                                                }}\n                                            >\n                                                <div className=\"font-bold\">{level.name}</div>\n                                                <div className=\"text-xs font-normal mt-1 opacity-75\">\n                                                    {level.description}\n                                                </div>\n                                            </th>\n                                        ))}\n                                        <th className=\"border p-3 text-center font-semibold\" style={{ width: '80px' }}>\n                                            Actions\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {rubricData.criteria.map((criterion, index) => (\n                                        <React.Fragment key={criterion.id}>\n                                            <tr>\n                                                {/* Criterion Column */}\n                                                <td className=\"border p-3 bg-gray-50\">\n                                                    <div className=\"space-y-2\">\n                                                        <input\n                                                            type=\"text\"\n                                                            value={criterion.name}\n                                                            onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\n                                                            className=\"w-full p-2 border rounded text-sm font-medium\"\n                                                            placeholder={`Criterion ${index + 1} name`}\n                                                        />\n                                                        <div className=\"relative\">\n                                                            <textarea\n                                                                value={convertHtmlToPlainText(criterion.description)}\n                                                                onChange={(e) => updateCriterion(criterion.id, 'description', convertPlainTextToHtml(e.target.value))}\n                                                                className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                                rows=\"2\"\n                                                                placeholder=\"Brief description of what this criterion measures\"\n                                                                title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                                style={{ minHeight: '48px', maxHeight: '200px', resize: 'both' }}\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={(e) => {\n                                                                    e.preventDefault();\n                                                                    e.stopPropagation();\n                                                                    openInlineEditor(\n                                                                        criterion.description,\n                                                                        `Criterion Description - ${criterion.name || 'Criterion'}`,\n                                                                        (newContent) => updateCriterion(criterion.id, 'description', newContent),\n                                                                        criterion.id,\n                                                                        null,\n                                                                        'criterion'\n                                                                    );\n                                                                }}\n                                                                className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                                                title=\"Open inline rich text editor\"\n                                                            >\n                                                                <Maximize2 size={12} />\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"flex gap-2\">\n                                                            <div className=\"flex-1\">\n                                                                <label className=\"text-xs text-gray-600\">Max Points</label>\n                                                                <input\n                                                                    type=\"number\"\n                                                                    value={criterion.maxPoints}\n                                                                    onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\n                                                                    className=\"w-full p-1 border rounded text-sm\"\n                                                                    min=\"0\"\n                                                                />\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </td>\n\n                                                {/* Level Columns */}\n                                                {getDisplayLevels().map((level) => (\n                                                    <td key={level.level} className=\"border p-3 align-top\">\n                                                        <div className=\"space-y-2\">\n                                                            <div className=\"text-center\">\n                                                                <div\n                                                                    className=\"font-bold text-sm px-2 py-1 rounded\"\n                                                                    style={{\n                                                                        color: level.color,\n                                                                        backgroundColor: level.color + '20'\n                                                                    }}\n                                                                >\n                                                                    {calculatePointRange(criterion, level.level)} pts\n                                                                </div>\n                                                            </div>\n                                                            <div className=\"relative\">\n                                                                <textarea\n                                                                    value={convertHtmlToPlainText(criterion.levels[level.level]?.description || '')}\n                                                                    onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'description', convertPlainTextToHtml(e.target.value))}\n                                                                    className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                                    rows=\"4\"\n                                                                    placeholder={`Describe ${level.name.toLowerCase()} performance...`}\n                                                                    title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                                    style={{ minHeight: '80px', maxHeight: '300px', resize: 'both' }}\n                                                                />\n                                                                <button\n                                                                    type=\"button\"\n                                                                    onClick={(e) => {\n                                                                        e.preventDefault();\n                                                                        e.stopPropagation();\n                                                                        openInlineEditor(\n                                                                            criterion.levels[level.level]?.description || '',\n                                                                            `${level.name} Level - ${criterion.name || 'Criterion'}`,\n                                                                            (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\n                                                                            criterion.id,\n                                                                            level.level,\n                                                                            'level'\n                                                                        );\n                                                                    }}\n                                                                    className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                                                    title=\"Open inline rich text editor\"\n                                                                >\n                                                                    <Maximize2 size={12} />\n                                                                </button>\n                                                            </div>\n                                                            {pointingSystem === 'custom' && (\n                                                                <input\n                                                                    type=\"text\"\n                                                                    value={criterion.levels[level.level]?.pointRange || ''}\n                                                                    onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\n                                                                    className=\"w-full p-1 border rounded text-xs text-center\"\n                                                                    placeholder=\"e.g., 18-20\"\n                                                                />\n                                                            )}\n                                                        </div>\n                                                    </td>\n                                                ))}\n\n                                                {/* Actions Column */}\n                                                <td className=\"border p-3 text-center\">\n                                                    <button\n                                                        onClick={() => removeCriterion(criterion.id)}\n                                                        className=\"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\"\n                                                        disabled={rubricData.criteria.length === 1}\n                                                        title={rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\"}\n                                                    >\n                                                        <X size={16} />\n                                                    </button>\n                                                </td>\n                                            </tr>\n\n                                            {/* Inline Markup Editor for Criterion or Level */}\n                                            {inlineEditor.show &&\n                                                inlineEditor.criterionId === criterion.id &&\n                                                (inlineEditor.type === 'criterion' || inlineEditor.type === 'level') && (\n                                                    <tr>\n                                                        <td colSpan={getDisplayLevels().length + 2} className=\"border-0 p-0\">\n                                                            <div className=\"border-2 border-blue-300 rounded-lg bg-white shadow-lg m-2\">\n                                                                {/* Editor Header */}\n                                                                <div className=\"flex justify-between items-center p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50\">\n                                                                    <h4 className=\"text-lg font-semibold text-gray-800 flex items-center gap-2\">\n                                                                        <Maximize2 size={20} className=\"text-blue-600\" />\n                                                                        Markup Editor: {inlineEditor.field}\n                                                                    </h4>\n                                                                    <div className=\"flex gap-2\">\n                                                                        <button\n                                                                            onClick={() => closeInlineEditor(true)}\n                                                                            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                                                        >\n                                                                            <Save size={16} />\n                                                                            Save & Close\n                                                                        </button>\n                                                                        <button\n                                                                            onClick={() => closeInlineEditor(false)}\n                                                                            className=\"bg-red-700 hover:bg-red-800 text-white px-4 py-2 rounded flex items-center gap-2 transition-colors\"\n                                                                        >\n                                                                            <X size={16} />\n                                                                            Cancel\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n\n                                                                {/* Editor Content */}\n                                                                <div className=\"p-4\">\n                                                                    <RichTextEditor\n                                                                        ref={editorRef}\n                                                                        value={inlineEditor.content}\n                                                                        onChange={(html) => {\n                                                                            richTextContentRef.current = html;\n                                                                        }}\n                                                                    />\n                                                                </div>\n\n                                                                {/* Footer */}\n                                                                <div className=\"p-4 border-t bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-lg\">\n                                                                    <div className=\"flex justify-between items-center\">\n                                                                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                                                                            <span className=\"flex items-center gap-2\">\n                                                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                                                Markup Editor Active\n                                            </span>\n                                            <span>Paste rich text from other sources</span>\n                                                                        </div>\n                                                                        <div className=\"text-xs text-gray-500\">\n                                                                            <strong>Shortcuts:</strong> Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Enter (New Line), Tab (Indent)\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                )}\n                                        </React.Fragment>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n\n                    {/* Feedback Library Management */}\n                    <div className=\"mb-6\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">📝 Feedback Libraries</h3>\n                        <p className=\"text-sm text-gray-600 mb-4\">Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.</p>\n\n                        <div className=\"space-y-4\">\n                            {rubricData.criteria.map((criterion) => (\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\n                                    <button\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\n                                    >\n                                        <div>\n                                            <h4 className=\"font-semibold text-gray-800\">\n                                                {criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`} - Feedback Library\n                                            </h4>\n                                            <p className=\"text-sm text-gray-600 mt-1\">\n                                                {criterion.feedbackLibrary.strengths.length +\n                                                    criterion.feedbackLibrary.improvements.length +\n                                                    criterion.feedbackLibrary.general.length} feedback items stored\n                                            </p>\n                                        </div>\n                                        {expandedFeedback[criterion.id] ? (\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\n                                        ) : (\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\n                                        )}\n                                    </button>\n\n                                    {expandedFeedback[criterion.id] && (\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                                                {['strengths', 'improvements', 'general'].map((category) => (\n                                                    <div key={category} className=\"space-y-3\">\n                                                        <div className=\"flex justify-between items-center\">\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\n                                                                {category === 'strengths' ? '👍 Strengths' :\n                                                                    category === 'improvements' ? '🔧 Improvements' :\n                                                                        '💬 General'} Comments\n                                                            </label>\n                                                            <button\n                                                                onClick={() => {\n                                                                    const newComment = prompt(`Add ${category} comment:`);\n                                                                    if (newComment && newComment.trim()) {\n                                                                        addFeedbackItem(criterion.id, category, newComment.trim());\n                                                                    }\n                                                                }}\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\"\n                                                            >\n                                                                + Add\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\n                                                                <div key={index} className=\"flex items-start gap-2 text-xs\">\n                                                                    <span\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\"\n                                                                        onClick={() => {\n                                                                            openInlineEditor(\n                                                                                item,\n                                                                                `${category} Comment`,\n                                                                                (newContent) => {\n                                                                                    const updatedFeedback = [...criterion.feedbackLibrary[category]];\n    // Store formatted HTML so formatting persists in exports\n    updatedFeedback[index] = newContent;\n                                                                                    setRubricData(prev => ({\n                                                                                        ...prev,\n                                                                                        criteria: prev.criteria.map(c =>\n                                                                                            c.id === criterion.id\n                                                                                                ? {\n                                                                                                    ...c,\n                                                                                                    feedbackLibrary: {\n                                                                                                        ...c.feedbackLibrary,\n                                                                                                        [category]: updatedFeedback\n                                                                                                    }\n                                                                                                }\n                                                                                                : c\n                                                                                        )\n                                                                                    }));\n                                                                                },\n                                                                                criterion.id,\n                                                                                null,\n                                                                                'feedback'\n                                                                            );\n                                                                        }}\n                                                                        title=\"Click to edit\"\n                                                                    >\n                                                                        {convertHtmlToPlainText(item)}\n                                                                    </span>\n                                                                    <button\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\"\n                                                                        title=\"Remove this comment\"\n                                                                    >\n                                                                        <X size={12} />\n                                                                    </button>\n                                                                </div>\n                                                            ))}\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\">\n                                                                    No {category} comments yet - click \"Add\" to create some\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* Overall Score Preview */}\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">📊 Achievement Level Preview</h3>\n                        <p className=\"text-gray-600 mb-4\">\n                            Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\n                        </p>\n\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\">\n                            {getDisplayLevels().map((level) => {\n                                const totalPoints = calculateTotalPoints();\n                                const pointsForLevel = Math.round(totalPoints * level.multiplier);\n                                return (\n                                    <div\n                                        key={level.level}\n                                        className=\"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\"\n                                        style={{\n                                            borderColor: level.color,\n                                            backgroundColor: level.color + '15'\n                                        }}\n                                    >\n                                        <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\n                                            {level.name}\n                                        </div>\n                                        <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\n                                            {pointsForLevel}+\n                                        </div>\n                                        <div className=\"text-xs text-gray-600\">\n                                            {totalPoints > 0 ? `${Math.round((pointsForLevel / totalPoints) * 100)}%+` : '-%'}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n\n                        {calculateTotalPoints() === 0 && (\n                            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\">\n                                <p className=\"text-yellow-800 text-sm\">\n                                    Add criteria with point values to see the achievement level breakdown\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Hidden file inputs */}\n                <input\n                    ref={importInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    onChange={importRubric}\n                    className=\"hidden\"\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default RubricCreator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}