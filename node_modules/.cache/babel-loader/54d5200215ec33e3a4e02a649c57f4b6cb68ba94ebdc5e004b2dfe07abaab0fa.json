{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\GradingTemplate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAssessment } from './SharedContext';\n\n// Sample rubric data for fallback\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sampleRubric = {\n  courseInfo: {\n    courseCode: 'SAMPLE 101',\n    courseName: 'Sample Course',\n    instructor: 'Sample Instructor',\n    term: 'Fall 2024'\n  },\n  assignmentInfo: {\n    name: 'Sample Assignment',\n    dueDate: '2024-12-15',\n    totalPoints: 100\n  },\n  criteria: [{\n    id: 'criteria-1',\n    name: 'Content Quality',\n    description: 'Demonstrates understanding of key concepts and applies them effectively.',\n    weight: 40,\n    levels: {\n      exceptional: {\n        description: 'Exceptional demonstration of mastery with innovative applications.',\n        pointRange: '36-40'\n      },\n      accomplished: {\n        description: 'Strong demonstration of understanding with effective applications.',\n        pointRange: '32-35'\n      },\n      emerging: {\n        description: 'Good understanding with some effective applications.',\n        pointRange: '28-31'\n      },\n      acceptable: {\n        description: 'Basic understanding with limited applications.',\n        pointRange: '24-27'\n      },\n      inadequate: {\n        description: 'Minimal understanding with little to no effective applications.',\n        pointRange: '0-23'\n      }\n    },\n    feedbackLibrary: {\n      strengths: ['Excellent grasp of key concepts', 'Creative application of ideas', 'Strong analytical thinking', 'Clear understanding demonstrated'],\n      improvements: ['Review fundamental concepts', 'Practice applying concepts to new situations', 'Seek additional examples', 'Connect ideas more clearly'],\n      general: ['Shows good progress in understanding', 'Consider exploring additional perspectives', 'Strong foundation for continued learning']\n    }\n  }]\n};\nconst GradingTemplate = () => {\n  _s();\n  // Get shared context - ENHANCED with new functions\n  const {\n    sharedRubric,\n    sharedCourseDetails,\n    setSharedCourseDetails,\n    gradingData: sharedGradingData,\n    setGradingData: setSharedGradingData,\n    updateStudentInfo,\n    updateCourseInfo,\n    updateAssignmentInfo,\n    clearGradingFormData,\n    classList,\n    setClassList,\n    setCurrentStudent,\n    gradingSession,\n    setGradingSession,\n    nextStudentInSession,\n    previousStudentInSession,\n    initializeGradingSession,\n    setActiveTab,\n    currentStudent,\n    saveDraft,\n    loadDraft,\n    // NEW: Add the draft/final grade functions\n    saveFinalGrade,\n    loadFinalGrade,\n    finalGrades,\n    getGradeStatus\n  } = useAssessment();\n\n  // Local state for this template\n  const [localGradingData, setLocalGradingData] = useState({\n    student: {\n      name: '',\n      id: '',\n      email: ''\n    },\n    course: {\n      code: '',\n      name: '',\n      instructor: '',\n      term: ''\n    },\n    assignment: {\n      name: '',\n      dueDate: '',\n      maxPoints: 100\n    },\n    feedback: {\n      general: '',\n      strengths: '',\n      improvements: ''\n    },\n    attachments: [],\n    videoLinks: [],\n    latePolicy: {\n      level: 'none',\n      penaltyApplied: false\n    },\n    rubricGrading: {},\n    metadata: {\n      gradedBy: '',\n      gradedDate: '',\n      aiAssisted: false,\n      rubricIntegrated: false\n    }\n  });\n  const [rubricGrading, setRubricGrading] = useState({});\n  const [loadedRubric, setLoadedRubric] = useState(null);\n  const fileInputRef = useRef(null);\n  const videoFileInputRef = useRef(null);\n\n  // Load rubric from shared context\n  useEffect(() => {\n    if (sharedRubric) {\n      setLoadedRubric(sharedRubric);\n\n      // Initialize rubric grading state\n      const initialGrading = {};\n      sharedRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setRubricGrading(initialGrading);\n\n      // Update local grading data with rubric info\n      setLocalGradingData(prev => {\n        var _sharedRubric$courseI, _sharedRubric$courseI2, _sharedRubric$courseI3, _sharedRubric$courseI4, _sharedRubric$assignm, _sharedRubric$assignm2, _sharedRubric$assignm3;\n        return {\n          ...prev,\n          course: {\n            code: ((_sharedRubric$courseI = sharedRubric.courseInfo) === null || _sharedRubric$courseI === void 0 ? void 0 : _sharedRubric$courseI.courseCode) || '',\n            name: ((_sharedRubric$courseI2 = sharedRubric.courseInfo) === null || _sharedRubric$courseI2 === void 0 ? void 0 : _sharedRubric$courseI2.courseName) || '',\n            instructor: ((_sharedRubric$courseI3 = sharedRubric.courseInfo) === null || _sharedRubric$courseI3 === void 0 ? void 0 : _sharedRubric$courseI3.instructor) || '',\n            term: ((_sharedRubric$courseI4 = sharedRubric.courseInfo) === null || _sharedRubric$courseI4 === void 0 ? void 0 : _sharedRubric$courseI4.term) || ''\n          },\n          assignment: {\n            name: ((_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.name) || '',\n            dueDate: ((_sharedRubric$assignm2 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm2 === void 0 ? void 0 : _sharedRubric$assignm2.dueDate) || '',\n            maxPoints: ((_sharedRubric$assignm3 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm3 === void 0 ? void 0 : _sharedRubric$assignm3.totalPoints) || 100\n          }\n        };\n      });\n    } else {\n      // Use sample rubric if none provided\n      setLoadedRubric(sampleRubric);\n      const initialGrading = {};\n      sampleRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setRubricGrading(initialGrading);\n    }\n  }, [sharedRubric]);\n\n  // ENHANCED: Load saved data when student changes\n  useEffect(() => {\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('üîç Loading data for student:', currentStudent.name);\n\n      // Get the grade status for this student\n      const gradeStatus = getGradeStatus(currentStudent.id);\n      console.log('üìä Grade status:', gradeStatus);\n      let savedData = null;\n      if (gradeStatus === 'final') {\n        // Load final grade data\n        savedData = loadFinalGrade ? loadFinalGrade(currentStudent.id) : null;\n        console.log('üìã Loading final grade data:', savedData ? 'Found' : 'Not found');\n      } else if (gradeStatus === 'draft') {\n        // Load draft data\n        savedData = loadDraft(currentStudent.id);\n        console.log('üìù Loading draft data:', savedData ? 'Found' : 'Not found');\n      }\n      if (savedData) {\n        console.log('‚úÖ Successfully loaded saved grade data');\n        setLocalGradingData(savedData);\n        if (savedData.rubricGrading) {\n          setRubricGrading(savedData.rubricGrading);\n        }\n      } else {\n        console.log('üÜï No saved data found, initializing fresh form');\n        setLocalGradingData(prev => ({\n          ...prev,\n          student: {\n            name: currentStudent.name,\n            id: currentStudent.id,\n            email: currentStudent.email\n          },\n          feedback: {\n            general: '',\n            strengths: '',\n            improvements: ''\n          },\n          attachments: [],\n          videoLinks: [],\n          latePolicy: {\n            level: 'none',\n            penaltyApplied: false\n          }\n        }));\n\n        // Reset rubric grading state\n        if (loadedRubric) {\n          const initialGrading = {};\n          loadedRubric.criteria.forEach(criterion => {\n            initialGrading[criterion.id] = {\n              criterionId: criterion.id,\n              selectedLevel: null,\n              customComments: ''\n            };\n          });\n          setRubricGrading(initialGrading);\n        }\n      }\n    }\n  }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\n\n  // Sync local data with shared context\n  useEffect(() => {\n    setSharedGradingData(localGradingData);\n  }, [localGradingData, setSharedGradingData]);\n\n  // Update rubric grading in local data\n  useEffect(() => {\n    setLocalGradingData(prev => ({\n      ...prev,\n      rubricGrading: rubricGrading\n    }));\n  }, [rubricGrading]);\n\n  // ENHANCED: New student navigation functions for draft/final system\n  const handleNextStudentAsDraft = () => {\n    // Save current student's work as draft\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('üíæ Saving as draft for student:', currentStudent.name);\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('draft');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      console.log('‚úÖ Draft saved, moved to next student');\n    }\n  };\n  const handleNextStudentAsFinal = () => {\n    // Save current student's work as final grade\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('‚úÖ Finalizing grade for student:', currentStudent.name);\n      saveFinalGrade(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('final');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      console.log('‚úÖ Final grade saved, moved to next student');\n    }\n  };\n  const handlePreviousStudent = () => {\n    // Auto-save current student's work before moving\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = previousStudentInSession();\n    if (!success) {\n      console.log('Already at first student or no active session');\n    } else {\n      resetGradingForm();\n    }\n  };\n  const resetGradingForm = () => {\n    // Reset only the grading-specific data\n    setLocalGradingData(prev => ({\n      ...prev,\n      feedback: {\n        general: '',\n        strengths: '',\n        improvements: ''\n      },\n      attachments: [],\n      videoLinks: [],\n      latePolicy: {\n        level: 'none',\n        penaltyApplied: false\n      }\n    }));\n\n    // Reset rubric grading state\n    if (loadedRubric) {\n      const initialGrading = {};\n      loadedRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setRubricGrading(initialGrading);\n    }\n  };\n\n  // Get current student info for navigation display\n  const getCurrentStudentInfo = () => {\n    if (!classList || !(gradingSession !== null && gradingSession !== void 0 && gradingSession.active) || !gradingSession.currentStudent) {\n      return null;\n    }\n    const currentIndex = gradingSession.currentStudentIndex;\n    const totalStudents = classList.students.length;\n    const student = gradingSession.currentStudent;\n    return {\n      student,\n      position: currentIndex + 1,\n      total: totalStudents,\n      isFirst: currentIndex === 0,\n      isLast: currentIndex === totalStudents - 1\n    };\n  };\n  const currentStudentInfo = getCurrentStudentInfo();\n\n  // Handle level selection for rubric criteria\n  const handleLevelSelect = (criterionId, level, pointRange) => {\n    setRubricGrading(prev => ({\n      ...prev,\n      [criterionId]: {\n        ...prev[criterionId],\n        selectedLevel: level,\n        pointRange: pointRange\n      }\n    }));\n  };\n\n  // Handle custom comments\n  const handleCustomComments = (criterionId, comments) => {\n    setRubricGrading(prev => ({\n      ...prev,\n      [criterionId]: {\n        ...prev[criterionId],\n        customComments: comments\n      }\n    }));\n  };\n\n  // Add quick feedback\n  const addQuickFeedback = (criterionId, feedback) => {\n    var _rubricGrading$criter;\n    const currentComments = ((_rubricGrading$criter = rubricGrading[criterionId]) === null || _rubricGrading$criter === void 0 ? void 0 : _rubricGrading$criter.customComments) || '';\n    const newComments = currentComments ? `${currentComments}\\n${feedback}` : feedback;\n    handleCustomComments(criterionId, newComments);\n  };\n\n  // Calculate total score\n  const calculateTotalScore = () => {\n    var _localGradingData$lat;\n    if (!loadedRubric) return {\n      totalScore: 0,\n      maxPoints: 100,\n      penaltyApplied: false\n    };\n    let totalScore = 0;\n    let maxPoints = 0;\n    loadedRubric.criteria.forEach(criterion => {\n      const grading = rubricGrading[criterion.id];\n      maxPoints += criterion.weight;\n      if (grading !== null && grading !== void 0 && grading.selectedLevel && grading !== null && grading !== void 0 && grading.pointRange) {\n        // Parse point range (e.g., \"36-40\" or \"10\")\n        const pointStr = grading.pointRange;\n        const pointValue = pointStr.includes('-') ? parseInt(pointStr.split('-')[1]) // Take the high end of range\n        : parseInt(pointStr);\n        if (!isNaN(pointValue)) {\n          totalScore += pointValue;\n        }\n      }\n    });\n\n    // Apply late penalty if applicable\n    const penaltyApplied = ((_localGradingData$lat = localGradingData.latePolicy) === null || _localGradingData$lat === void 0 ? void 0 : _localGradingData$lat.penaltyApplied) || false;\n    if (penaltyApplied) {\n      const penaltyPercent = {\n        'minor': 0.1,\n        'moderate': 0.2,\n        'significant': 0.3\n      }[localGradingData.latePolicy.level] || 0;\n      totalScore = Math.max(0, totalScore - totalScore * penaltyPercent);\n    }\n    return {\n      totalScore,\n      maxPoints,\n      penaltyApplied\n    };\n  };\n\n  // File attachment handlers\n  const handleFileUpload = event => {\n    const files = Array.from(event.target.files);\n    files.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const newAttachment = {\n          id: Date.now() + Math.random(),\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          base64Data: e.target.result\n        };\n        setLocalGradingData(prev => ({\n          ...prev,\n          attachments: [...prev.attachments, newAttachment]\n        }));\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  const removeAttachment = attachmentId => {\n    setLocalGradingData(prev => ({\n      ...prev,\n      attachments: prev.attachments.filter(att => att.id !== attachmentId)\n    }));\n  };\n\n  // Video link handlers\n  const addVideoLink = () => {\n    const title = prompt('Enter video title:');\n    const url = prompt('Enter video URL:');\n    if (title && url) {\n      const newVideoLink = {\n        id: Date.now(),\n        title,\n        url\n      };\n      setLocalGradingData(prev => ({\n        ...prev,\n        videoLinks: [...prev.videoLinks, newVideoLink]\n      }));\n    }\n  };\n  const removeVideoLink = linkId => {\n    setLocalGradingData(prev => ({\n      ...prev,\n      videoLinks: prev.videoLinks.filter(link => link.id !== linkId)\n    }));\n  };\n\n  // Export to PDF functionality\n  const exportToPDF = () => {\n    const scoreCalculation = calculateTotalScore();\n    const totalScore = scoreCalculation.totalScore.toFixed(1);\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : localGradingData.assignment.maxPoints;\n    const percentage = (totalScore / maxPoints * 100).toFixed(1);\n    const penaltyApplied = scoreCalculation.penaltyApplied;\n    const currentDate = new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n\n    // Build attachments HTML\n    const attachmentsHTML = localGradingData.attachments.map((att, index) => {\n      if (att.base64Data) {\n        return `\n          <div class=\"attachment-item\">\n            <img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"attachment-image\" />\n            <div class=\"attachment-info\">\n              <div class=\"attachment-name\">${att.name}</div>\n              <div class=\"attachment-size\">${(att.size / 1024).toFixed(1)} KB</div>\n            </div>\n          </div>\n        `;\n      } else {\n        return `\n          <div class=\"attachment-item\">\n            <div class=\"file-icon\">üìÑ</div>\n            <div class=\"attachment-info\">\n              <div class=\"attachment-name\">${att.name}</div>\n              <div class=\"attachment-size\">${(att.size / 1024).toFixed(1)} KB</div>\n            </div>\n          </div>\n        `;\n      }\n    }).join('');\n\n    // Build video links HTML\n    const videoLinksHTML = localGradingData.videoLinks.map(link => `\n      <div class=\"video-link-item\">\n        <span class=\"video-icon\">üé•</span>\n        <div class=\"video-info\">\n          <div class=\"video-title\">${link.title}</div>\n          <div class=\"video-url\">${link.url}</div>\n        </div>\n      </div>\n    `).join('');\n\n    // Enhanced rubric table for PDF\n    const rubricTableHTML = loadedRubric ? loadedRubric.criteria.map(criterion => {\n      const grading = rubricGrading[criterion.id] || {};\n      const selectedLevel = grading.selectedLevel;\n      const customComments = grading.customComments || '';\n      const levelsHTML = Object.entries(criterion.levels).map(([levelKey, levelInfo]) => {\n        const isSelected = selectedLevel === levelKey;\n        return `\n          <tr class=\"${isSelected ? 'selected-level' : ''}\">\n            <td class=\"level-name\">${levelKey}</td>\n            <td class=\"level-description\">${levelInfo.description}</td>\n            <td class=\"level-points\">${levelInfo.pointRange}</td>\n            <td class=\"level-selected\">${isSelected ? '‚úì' : ''}</td>\n          </tr>\n        `;\n      }).join('');\n      return `\n        <div class=\"criterion-section\">\n          <h3 class=\"criterion-title\">${criterion.name} (${criterion.weight} points)</h3>\n          <p class=\"criterion-description\">${criterion.description}</p>\n          <table class=\"levels-table\">\n            <thead>\n              <tr>\n                <th>Level</th>\n                <th>Description</th>\n                <th>Points</th>\n                <th>Selected</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${levelsHTML}\n            </tbody>\n          </table>\n          ${customComments ? `<div class=\"custom-comments\"><strong>Comments:</strong> ${customComments}</div>` : ''}\n        </div>\n      `;\n    }).join('') : '';\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Grade Report - ${localGradingData.student.name}</title>\n    <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; color: #333; }\n        .header { text-align: center; border-bottom: 3px solid #2563eb; padding-bottom: 20px; margin-bottom: 30px; }\n        .title { color: #2563eb; font-size: 28px; font-weight: bold; margin: 0; }\n        .subtitle { color: #666; font-size: 14px; margin: 5px 0; }\n        .score-summary { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border: 2px solid #0284c7; border-radius: 12px; padding: 20px; margin: 20px 0; text-align: center; }\n        .total-score { font-size: 36px; font-weight: bold; color: #0284c7; margin: 10px 0; }\n        .percentage { font-size: 18px; color: #0369a1; }\n        .penalty-notice { background: #fef3c7; border: 1px solid #f59e0b; border-radius: 6px; padding: 10px; margin: 10px 0; color: #92400e; }\n        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }\n        .info-card { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; }\n        .info-title { font-weight: bold; color: #1e40af; margin-bottom: 10px; border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; }\n        .criterion-section { margin: 30px 0; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; }\n        .criterion-title { color: #1f2937; font-size: 18px; margin: 0 0 10px 0; }\n        .criterion-description { color: #666; margin: 0 0 15px 0; font-style: italic; }\n        .levels-table { width: 100%; border-collapse: collapse; margin: 15px 0; }\n        .levels-table th, .levels-table td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }\n        .levels-table th { background: #f3f4f6; font-weight: bold; }\n        .selected-level { background: #dcfce7 !important; font-weight: bold; }\n        .custom-comments { background: #fffbeb; border: 1px solid #fbbf24; border-radius: 6px; padding: 10px; margin: 10px 0; }\n        .feedback-section { background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 20px; margin: 20px 0; }\n        .attachments-section, .videos-section { margin: 20px 0; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fafafa; }\n        .attachment-item, .video-link-item { display: flex; align-items: center; margin: 10px 0; padding: 10px; background: white; border-radius: 6px; border: 1px solid #e5e7eb; }\n        .attachment-image { max-width: 100px; max-height: 60px; margin-right: 10px; border-radius: 4px; }\n        .file-icon, .video-icon { font-size: 20px; margin-right: 10px; }\n        .attachment-info, .video-info { flex-grow: 1; }\n        .attachment-name, .video-title { font-weight: bold; color: #374151; }\n        .attachment-size, .video-url { color: #6b7280; font-size: 12px; }\n        .footer { margin-top: 40px; padding-top: 20px; border-top: 2px solid #e5e7eb; text-align: center; color: #666; font-size: 12px; }\n        @media print { .no-print { display: none; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1 class=\"title\">üìã Grade Report</h1>\n        <div class=\"subtitle\">Generated on ${currentDate}</div>\n    </div>\n\n    <div class=\"score-summary\">\n        <div class=\"total-score\">${totalScore} / ${maxPoints} points</div>\n        <div class=\"percentage\">${percentage}%</div>\n        ${penaltyApplied ? '<div class=\"penalty-notice\">‚ö†Ô∏è Late penalty applied</div>' : ''}\n    </div>\n\n    <div class=\"info-grid\">\n        <div class=\"info-card\">\n            <div class=\"info-title\">üë®‚Äçüéì Student Information</div>\n            <div><strong>Name:</strong> ${localGradingData.student.name}</div>\n            <div><strong>ID:</strong> ${localGradingData.student.id}</div>\n            <div><strong>Email:</strong> ${localGradingData.student.email}</div>\n        </div>\n        <div class=\"info-card\">\n            <div class=\"info-title\">üìö Course Information</div>\n            <div><strong>Course:</strong> ${localGradingData.course.code} - ${localGradingData.course.name}</div>\n            <div><strong>Instructor:</strong> ${localGradingData.course.instructor}</div>\n            <div><strong>Term:</strong> ${localGradingData.course.term}</div>\n        </div>\n        <div class=\"info-card\">\n            <div class=\"info-title\">üìù Assignment Details</div>\n            <div><strong>Assignment:</strong> ${localGradingData.assignment.name}</div>\n            <div><strong>Due Date:</strong> ${localGradingData.assignment.dueDate}</div>\n            <div><strong>Max Points:</strong> ${localGradingData.assignment.maxPoints}</div>\n        </div>\n        <div class=\"info-card\">\n            <div class=\"info-title\">‚è∞ Late Policy</div>\n            <div><strong>Level:</strong> ${localGradingData.latePolicy.level}</div>\n            <div><strong>Penalty Applied:</strong> ${localGradingData.latePolicy.penaltyApplied ? 'Yes' : 'No'}</div>\n        </div>\n    </div>\n\n    <div class=\"rubric-section\">\n        <h2 style=\"color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;\">üìä Rubric Assessment</h2>\n        ${rubricTableHTML}\n    </div>\n\n    ${localGradingData.feedback.general || localGradingData.feedback.strengths || localGradingData.feedback.improvements ? `\n    <div class=\"feedback-section\">\n        <h2 style=\"color: #15803d; margin-top: 0;\">üí¨ Instructor Feedback</h2>\n        ${localGradingData.feedback.general ? `<div><strong>General Comments:</strong><br>${localGradingData.feedback.general}</div>` : ''}\n        ${localGradingData.feedback.strengths ? `<div style=\"margin-top: 15px;\"><strong>Strengths:</strong><br>${localGradingData.feedback.strengths}</div>` : ''}\n        ${localGradingData.feedback.improvements ? `<div style=\"margin-top: 15px;\"><strong>Areas for Improvement:</strong><br>${localGradingData.feedback.improvements}</div>` : ''}\n    </div>\n    ` : ''}\n\n    ${localGradingData.attachments.length > 0 ? `\n    <div class=\"attachments-section\">\n        <h3 style=\"margin-top: 0; color: #374151;\">üìé Attachments</h3>\n        ${attachmentsHTML}\n    </div>\n    ` : ''}\n\n    ${localGradingData.videoLinks.length > 0 ? `\n    <div class=\"videos-section\">\n        <h3 style=\"margin-top: 0; color: #374151;\">üé• Video Links</h3>\n        ${videoLinksHTML}\n    </div>\n    ` : ''}\n\n    <div class=\"footer\">\n        This grade report was generated using the Enhanced Rubric Grading System.<br>\n        For questions about this assessment, please contact your instructor.\n    </div>\n</body>\n</html>\n    `;\n\n    // Create and download PDF\n    const newWindow = window.open('', '_blank');\n    newWindow.document.write(htmlContent);\n    newWindow.document.close();\n    setTimeout(() => {\n      newWindow.print();\n    }, 250);\n  };\n  if (!loadedRubric) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        textAlign: 'center',\n        background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\n        minHeight: '400px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '4rem',\n          marginBottom: '1rem'\n        },\n        children: \"\\uD83D\\uDCCB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          color: '#0369a1',\n          marginBottom: '1rem'\n        },\n        children: \"No Rubric Loaded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#0284c7',\n          fontSize: '1.1rem',\n          marginBottom: '2rem'\n        },\n        children: \"Please create or load a rubric from the Rubric Creator to begin grading.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab('rubric-creator'),\n        style: {\n          background: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',\n          color: 'white',\n          padding: '0.75rem 2rem',\n          borderRadius: '0.5rem',\n          border: 'none',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 6px rgba(59, 130, 246, 0.3)'\n        },\n        children: \"Go to Rubric Creator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '1200px',\n      margin: '0 auto',\n      padding: '2rem',\n      background: 'linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)',\n      minHeight: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #1e40af 0%, #3730a3 100%)',\n        color: 'white',\n        padding: '2rem',\n        borderRadius: '1rem',\n        marginBottom: '2rem',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          margin: '0 0 0.5rem 0',\n          fontSize: '2.5rem'\n        },\n        children: \"\\uD83D\\uDCDD Grading Template\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          fontSize: '1.1rem',\n          opacity: 0.9\n        },\n        children: [loadedRubric.courseInfo.courseCode, \" - \", loadedRubric.assignmentInfo.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 7\n    }, this), currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\n        border: '2px solid #10b981',\n        borderRadius: '0.75rem',\n        padding: '1rem',\n        marginBottom: '2rem',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: '0 0 0.5rem 0',\n          color: '#047857'\n        },\n        children: [\"\\uD83D\\uDC68\\u200D\\uD83C\\uDF93 Currently Grading: \", currentStudentInfo.student.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#065f46'\n        },\n        children: [\"Student \", currentStudentInfo.position, \" of \", currentStudentInfo.total, \" \\u2022 ID: \", currentStudentInfo.student.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        borderRadius: '1rem',\n        padding: '2rem',\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDF93 Student Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.5rem',\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"Student Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: localGradingData.student.name,\n              onChange: e => setLocalGradingData(prev => ({\n                ...prev,\n                student: {\n                  ...prev.student,\n                  name: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '2px solid #e5e7eb',\n                borderRadius: '0.5rem',\n                fontSize: '1rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.5rem',\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"Student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: localGradingData.student.id,\n              onChange: e => setLocalGradingData(prev => ({\n                ...prev,\n                student: {\n                  ...prev.student,\n                  id: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '2px solid #e5e7eb',\n                borderRadius: '0.5rem',\n                fontSize: '1rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.5rem',\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: localGradingData.student.email,\n              onChange: e => setLocalGradingData(prev => ({\n                ...prev,\n                student: {\n                  ...prev.student,\n                  email: e.target.value\n                }\n              })),\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '2px solid #e5e7eb',\n                borderRadius: '0.5rem',\n                fontSize: '1rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCCA Rubric Assessment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }, this), loadedRubric.criteria.map((criterion, index) => {\n          const currentGrading = rubricGrading[criterion.id] || {};\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: '2px solid #e5e7eb',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              marginBottom: '1.5rem',\n              background: '#fafafa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: '#1f2937',\n                fontSize: '1.25rem',\n                marginBottom: '0.5rem',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [criterion.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  background: '#3b82f6',\n                  color: 'white',\n                  padding: '0.25rem 0.75rem',\n                  borderRadius: '1rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: [criterion.weight, \" pts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 833,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 824,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#6b7280',\n                marginBottom: '1rem',\n                fontStyle: 'italic'\n              },\n              children: criterion.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gap: '0.75rem',\n                marginBottom: '1rem'\n              },\n              children: Object.entries(criterion.levels).map(([levelKey, levelInfo]) => {\n                const isSelected = currentGrading.selectedLevel === levelKey;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => handleLevelSelect(criterion.id, levelKey, levelInfo.pointRange),\n                  style: {\n                    border: `2px solid ${isSelected ? '#10b981' : '#d1d5db'}`,\n                    borderRadius: '0.5rem',\n                    padding: '1rem',\n                    cursor: 'pointer',\n                    background: isSelected ? '#ecfdf5' : 'white',\n                    transition: 'all 0.2s ease'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center',\n                      marginBottom: '0.5rem'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontWeight: '600',\n                        color: isSelected ? '#047857' : '#374151',\n                        textTransform: 'capitalize'\n                      },\n                      children: levelKey\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 872,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: isSelected ? '#10b981' : '#9ca3af',\n                        color: 'white',\n                        padding: '0.25rem 0.5rem',\n                        borderRadius: '0.25rem',\n                        fontSize: '0.75rem',\n                        fontWeight: '600'\n                      },\n                      children: [levelInfo.pointRange, \" pts\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 879,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 866,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0,\n                      color: isSelected ? '#065f46' : '#6b7280',\n                      fontSize: '0.875rem'\n                    },\n                    children: levelInfo.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 890,\n                    columnNumber: 25\n                  }, this)]\n                }, levelKey, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 854,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 849,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  marginBottom: '0.5rem',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: \"Custom Comments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 904,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: currentGrading.customComments || '',\n                onChange: e => handleCustomComments(criterion.id, e.target.value),\n                rows: 3,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '2px solid #e5e7eb',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'vertical'\n                },\n                placeholder: \"Add specific feedback for this criterion...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 903,\n              columnNumber: 17\n            }, this), criterion.feedbackLibrary && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                style: {\n                  color: '#6b7280',\n                  fontSize: '0.875rem',\n                  marginBottom: '0.5rem',\n                  fontWeight: '600'\n                },\n                children: \"Quick Feedback:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 931,\n                columnNumber: 21\n              }, this), Object.entries(criterion.feedbackLibrary).map(([category, feedbacks]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '0.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    fontWeight: '600',\n                    color: '#9ca3af',\n                    textTransform: 'capitalize'\n                  },\n                  children: [category, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    gap: '0.25rem',\n                    marginTop: '0.25rem'\n                  },\n                  children: feedbacks.map((feedback, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => addQuickFeedback(criterion.id, feedback),\n                    style: {\n                      fontSize: '0.75rem',\n                      padding: '0.25rem 0.5rem',\n                      margin: '0.125rem',\n                      background: '#e5e7eb',\n                      color: '#374151',\n                      border: 'none',\n                      borderRadius: '0.25rem',\n                      cursor: 'pointer'\n                    },\n                    children: [\"+ \", feedback]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 952,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 950,\n                  columnNumber: 25\n                }, this)]\n              }, category, true, {\n                fileName: _jsxFileName,\n                lineNumber: 941,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 930,\n              columnNumber: 19\n            }, this)]\n          }, criterion.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 817,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 810,\n        columnNumber: 9\n      }, this), currentStudentInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\n          border: '2px solid #10b981',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            color: '#047857',\n            marginBottom: '1rem'\n          },\n          children: \"Ready to move to the next student?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 989,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#065f46',\n            marginBottom: '1.5rem',\n            fontSize: '0.875rem'\n          },\n          children: \"Choose how to save the current grading before proceeding.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            justifyContent: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudentAsDraft,\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\n              transition: 'all 0.2s ease'\n            },\n            onMouseOver: e => {\n              e.target.style.transform = 'translateY(-2px)';\n              e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n            },\n            onMouseOut: e => {\n              e.target.style.transform = 'translateY(0)';\n              e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '1.1rem'\n              },\n              children: \"\\uD83D\\uDCDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1024,\n              columnNumber: 17\n            }, this), \"Save & Grade Next Student\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 998,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudentAsFinal,\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n              transition: 'all 0.2s ease'\n            },\n            onMouseOver: e => {\n              e.target.style.transform = 'translateY(-2px)';\n              e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\n            },\n            onMouseOut: e => {\n              e.target.style.transform = 'translateY(0)';\n              e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '1.1rem'\n              },\n              children: \"\\u2705\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1055,\n              columnNumber: 17\n            }, this), \"Finalize & Grade Next Student\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1029,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 996,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: 'rgba(255, 255, 255, 0.6)',\n            borderRadius: '0.375rem',\n            fontSize: '0.75rem',\n            color: '#065f46'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Draft:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 15\n          }, this), \" Save progress, can edit later \\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Finalize:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1068,\n            columnNumber: 71\n          }, this), \" Complete grading, ready for student/LMS\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1060,\n          columnNumber: 13\n        }, this), currentStudentInfo.isLast && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: '#fef3c7',\n            borderRadius: '0.375rem',\n            fontSize: '0.875rem',\n            color: '#92400e',\n            fontWeight: '500'\n          },\n          children: \"\\uD83C\\uDF89 This is the last student in your grading session!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1072,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 981,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCCA Score Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1089,\n          columnNumber: 11\n        }, this), (() => {\n          const scoreCalc = calculateTotalScore();\n          const percentage = (scoreCalc.totalScore / scoreCalc.maxPoints * 100).toFixed(1);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\n              border: '2px solid #0284c7',\n              borderRadius: '0.75rem',\n              padding: '1.5rem',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '2rem',\n                fontWeight: 'bold',\n                color: '#0284c7',\n                marginBottom: '0.5rem'\n              },\n              children: [scoreCalc.totalScore.toFixed(1), \" / \", scoreCalc.maxPoints, \" points\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1102,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '1.25rem',\n                color: '#0369a1',\n                marginBottom: '1rem'\n              },\n              children: [percentage, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1105,\n              columnNumber: 17\n            }, this), scoreCalc.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: '#fef3c7',\n                border: '1px solid #f59e0b',\n                borderRadius: '0.375rem',\n                padding: '0.5rem',\n                color: '#92400e',\n                fontSize: '0.875rem'\n              },\n              children: \"\\u26A0\\uFE0F Late penalty applied\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1109,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1095,\n            columnNumber: 15\n          }, this);\n        })()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1088,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\u23F0 Late Policy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            alignItems: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: localGradingData.latePolicy.level,\n            onChange: e => setLocalGradingData(prev => ({\n              ...prev,\n              latePolicy: {\n                ...prev.latePolicy,\n                level: e.target.value\n              }\n            })),\n            style: {\n              padding: '0.75rem',\n              border: '2px solid #e5e7eb',\n              borderRadius: '0.5rem',\n              fontSize: '1rem',\n              minWidth: '150px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"none\",\n              children: \"No Late Penalty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"minor\",\n              children: \"Minor (10%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"moderate\",\n              children: \"Moderate (20%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"significant\",\n              children: \"Significant (30%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1146,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: localGradingData.latePolicy.penaltyApplied,\n              onChange: e => setLocalGradingData(prev => ({\n                ...prev,\n                latePolicy: {\n                  ...prev.latePolicy,\n                  penaltyApplied: e.target.checked\n                }\n              })),\n              style: {\n                transform: 'scale(1.2)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"Apply Penalty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1159,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCAC Instructor Feedback\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.5rem',\n                fontWeight: '600',\n                color: '#374151'\n              },\n              children: \"General Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: localGradingData.feedback.general,\n              onChange: e => setLocalGradingData(prev => ({\n                ...prev,\n                feedback: {\n                  ...prev.feedback,\n                  general: e.target.value\n                }\n              })),\n              rows: 4,\n              style: {\n                width: '100%',\n                padding: '0.75rem',\n                border: '2px solid #e5e7eb',\n                borderRadius: '0.5rem',\n                fontSize: '1rem',\n                resize: 'vertical'\n              },\n              placeholder: \"Provide overall feedback about the student's work...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  marginBottom: '0.5rem',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: \"Strengths\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1194,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: localGradingData.feedback.strengths,\n                onChange: e => setLocalGradingData(prev => ({\n                  ...prev,\n                  feedback: {\n                    ...prev.feedback,\n                    strengths: e.target.value\n                  }\n                })),\n                rows: 3,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '2px solid #e5e7eb',\n                  borderRadius: '0.5rem',\n                  fontSize: '1rem',\n                  resize: 'vertical'\n                },\n                placeholder: \"What did the student do well?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1197,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  marginBottom: '0.5rem',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: \"Areas for Improvement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: localGradingData.feedback.improvements,\n                onChange: e => setLocalGradingData(prev => ({\n                  ...prev,\n                  feedback: {\n                    ...prev.feedback,\n                    improvements: e.target.value\n                  }\n                })),\n                rows: 3,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '2px solid #e5e7eb',\n                  borderRadius: '0.5rem',\n                  fontSize: '1rem',\n                  resize: 'vertical'\n                },\n                placeholder: \"What can be improved next time?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1220,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCCE File Attachments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileInputRef,\n            onChange: handleFileUpload,\n            multiple: true,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              var _fileInputRef$current;\n              return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n            },\n            style: {\n              background: 'linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '1rem',\n              fontWeight: '600'\n            },\n            children: \"\\uD83D\\uDCCE Add Files\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1254,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1246,\n          columnNumber: 11\n        }, this), localGradingData.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n            gap: '1rem'\n          },\n          children: localGradingData.attachments.map(attachment => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: '2px solid #e5e7eb',\n              borderRadius: '0.5rem',\n              padding: '1rem',\n              background: '#fafafa',\n              position: 'relative'\n            },\n            children: [attachment.base64Data && attachment.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: attachment.base64Data,\n              alt: attachment.name,\n              style: {\n                width: '100%',\n                maxHeight: '150px',\n                objectFit: 'cover',\n                borderRadius: '0.25rem',\n                marginBottom: '0.5rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1286,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100px',\n                background: '#e5e7eb',\n                borderRadius: '0.25rem',\n                marginBottom: '0.5rem',\n                fontSize: '2rem'\n              },\n              children: \"\\uD83D\\uDCC4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1298,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                marginBottom: '0.25rem'\n              },\n              children: attachment.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1312,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.75rem',\n                color: '#6b7280',\n                marginBottom: '0.5rem'\n              },\n              children: [(attachment.size / 1024).toFixed(1), \" KB\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeAttachment(attachment.id),\n              style: {\n                position: 'absolute',\n                top: '0.5rem',\n                right: '0.5rem',\n                background: '#ef4444',\n                color: 'white',\n                border: 'none',\n                borderRadius: '50%',\n                width: '24px',\n                height: '24px',\n                cursor: 'pointer',\n                fontSize: '0.75rem'\n              },\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1319,\n              columnNumber: 19\n            }, this)]\n          }, attachment.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1278,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1272,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83C\\uDFA5 Video Links\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '1rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addVideoLink,\n            style: {\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '1rem',\n              fontWeight: '600'\n            },\n            children: \"\\uD83C\\uDFA5 Add Video Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1348,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1347,\n          columnNumber: 11\n        }, this), localGradingData.videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '0.5rem'\n          },\n          children: localGradingData.videoLinks.map(link => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              border: '2px solid #e5e7eb',\n              borderRadius: '0.5rem',\n              padding: '1rem',\n              background: '#fafafa'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: '600',\n                  marginBottom: '0.25rem'\n                },\n                children: link.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1378,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#6b7280'\n                },\n                children: link.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1379,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1377,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeVideoLink(link.id),\n              style: {\n                background: '#ef4444',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.25rem',\n                padding: '0.5rem',\n                cursor: 'pointer'\n              },\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1381,\n              columnNumber: 19\n            }, this)]\n          }, link.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1368,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1366,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#374151',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCC4 Export Options\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportToPDF,\n          style: {\n            background: 'linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)',\n            color: 'white',\n            padding: '0.75rem 2rem',\n            borderRadius: '0.5rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '1rem',\n            fontWeight: '600',\n            boxShadow: '0 4px 6px rgba(220, 38, 38, 0.3)'\n          },\n          children: \"\\uD83D\\uDCC4 Export Grade Report (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1408,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1401,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 693,\n    columnNumber: 5\n  }, this);\n};\n_s(GradingTemplate, \"QOkkPT5Lp8OU6kjYKd8qOVGC6lk=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAssessment","jsxDEV","_jsxDEV","sampleRubric","courseInfo","courseCode","courseName","instructor","term","assignmentInfo","name","dueDate","totalPoints","criteria","id","description","weight","levels","exceptional","pointRange","accomplished","emerging","acceptable","inadequate","feedbackLibrary","strengths","improvements","general","GradingTemplate","_s","sharedRubric","sharedCourseDetails","setSharedCourseDetails","gradingData","sharedGradingData","setGradingData","setSharedGradingData","updateStudentInfo","updateCourseInfo","updateAssignmentInfo","clearGradingFormData","classList","setClassList","setCurrentStudent","gradingSession","setGradingSession","nextStudentInSession","previousStudentInSession","initializeGradingSession","setActiveTab","currentStudent","saveDraft","loadDraft","saveFinalGrade","loadFinalGrade","finalGrades","getGradeStatus","localGradingData","setLocalGradingData","student","email","course","code","assignment","maxPoints","feedback","attachments","videoLinks","latePolicy","level","penaltyApplied","rubricGrading","metadata","gradedBy","gradedDate","aiAssisted","rubricIntegrated","setRubricGrading","loadedRubric","setLoadedRubric","fileInputRef","videoFileInputRef","initialGrading","forEach","criterion","criterionId","selectedLevel","customComments","prev","_sharedRubric$courseI","_sharedRubric$courseI2","_sharedRubric$courseI3","_sharedRubric$courseI4","_sharedRubric$assignm","_sharedRubric$assignm2","_sharedRubric$assignm3","console","log","gradeStatus","savedData","handleNextStudentAsDraft","success","alert","resetGradingForm","handleNextStudentAsFinal","handlePreviousStudent","getCurrentStudentInfo","active","currentIndex","currentStudentIndex","totalStudents","students","length","position","total","isFirst","isLast","currentStudentInfo","handleLevelSelect","handleCustomComments","comments","addQuickFeedback","_rubricGrading$criter","currentComments","newComments","calculateTotalScore","_localGradingData$lat","totalScore","grading","pointStr","pointValue","includes","parseInt","split","isNaN","penaltyPercent","Math","max","handleFileUpload","event","files","Array","from","target","file","reader","FileReader","onload","e","newAttachment","Date","now","random","size","type","base64Data","result","readAsDataURL","removeAttachment","attachmentId","filter","att","addVideoLink","title","prompt","url","newVideoLink","removeVideoLink","linkId","link","exportToPDF","scoreCalculation","toFixed","percentage","currentDate","toLocaleDateString","weekday","year","month","day","attachmentsHTML","map","index","join","videoLinksHTML","rubricTableHTML","levelsHTML","Object","entries","levelKey","levelInfo","isSelected","htmlContent","newWindow","window","open","document","write","close","setTimeout","print","style","padding","textAlign","background","minHeight","display","flexDirection","justifyContent","alignItems","children","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","onClick","borderRadius","border","fontWeight","cursor","boxShadow","maxWidth","margin","opacity","gridTemplateColumns","gap","value","onChange","width","currentGrading","fontStyle","transition","textTransform","rows","resize","placeholder","marginTop","category","feedbacks","flexWrap","idx","onMouseOver","transform","onMouseOut","scoreCalc","minWidth","checked","ref","multiple","_fileInputRef$current","current","click","attachment","startsWith","src","alt","maxHeight","objectFit","height","top","right","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/GradingTemplate.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAssessment } from './SharedContext';\r\n\r\n// Sample rubric data for fallback\r\nconst sampleRubric = {\r\n  courseInfo: {\r\n    courseCode: 'SAMPLE 101',\r\n    courseName: 'Sample Course',\r\n    instructor: 'Sample Instructor',\r\n    term: 'Fall 2024'\r\n  },\r\n  assignmentInfo: {\r\n    name: 'Sample Assignment',\r\n    dueDate: '2024-12-15',\r\n    totalPoints: 100\r\n  },\r\n  criteria: [\r\n    {\r\n      id: 'criteria-1',\r\n      name: 'Content Quality',\r\n      description: 'Demonstrates understanding of key concepts and applies them effectively.',\r\n      weight: 40,\r\n      levels: {\r\n        exceptional: { description: 'Exceptional demonstration of mastery with innovative applications.', pointRange: '36-40' },\r\n        accomplished: { description: 'Strong demonstration of understanding with effective applications.', pointRange: '32-35' },\r\n        emerging: { description: 'Good understanding with some effective applications.', pointRange: '28-31' },\r\n        acceptable: { description: 'Basic understanding with limited applications.', pointRange: '24-27' },\r\n        inadequate: { description: 'Minimal understanding with little to no effective applications.', pointRange: '0-23' }\r\n      },\r\n      feedbackLibrary: {\r\n        strengths: [\r\n          'Excellent grasp of key concepts',\r\n          'Creative application of ideas',\r\n          'Strong analytical thinking',\r\n          'Clear understanding demonstrated'\r\n        ],\r\n        improvements: [\r\n          'Review fundamental concepts',\r\n          'Practice applying concepts to new situations',\r\n          'Seek additional examples',\r\n          'Connect ideas more clearly'\r\n        ],\r\n        general: [\r\n          'Shows good progress in understanding',\r\n          'Consider exploring additional perspectives',\r\n          'Strong foundation for continued learning'\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n};\r\n\r\nconst GradingTemplate = () => {\r\n  // Get shared context - ENHANCED with new functions\r\n  const {\r\n    sharedRubric,\r\n    sharedCourseDetails,\r\n    setSharedCourseDetails,\r\n    gradingData: sharedGradingData,\r\n    setGradingData: setSharedGradingData,\r\n    updateStudentInfo,\r\n    updateCourseInfo,\r\n    updateAssignmentInfo,\r\n    clearGradingFormData,\r\n    classList,\r\n    setClassList,\r\n    setCurrentStudent,\r\n    gradingSession,\r\n    setGradingSession,\r\n    nextStudentInSession,\r\n    previousStudentInSession,\r\n    initializeGradingSession,\r\n    setActiveTab,\r\n    currentStudent,\r\n    saveDraft,\r\n    loadDraft,\r\n    // NEW: Add the draft/final grade functions\r\n    saveFinalGrade,\r\n    loadFinalGrade,\r\n    finalGrades,\r\n    getGradeStatus\r\n  } = useAssessment();\r\n\r\n  // Local state for this template\r\n  const [localGradingData, setLocalGradingData] = useState({\r\n    student: { name: '', id: '', email: '' },\r\n    course: { code: '', name: '', instructor: '', term: '' },\r\n    assignment: { name: '', dueDate: '', maxPoints: 100 },\r\n    feedback: { general: '', strengths: '', improvements: '' },\r\n    attachments: [],\r\n    videoLinks: [],\r\n    latePolicy: { level: 'none', penaltyApplied: false },\r\n    rubricGrading: {},\r\n    metadata: {\r\n      gradedBy: '',\r\n      gradedDate: '',\r\n      aiAssisted: false,\r\n      rubricIntegrated: false\r\n    }\r\n  });\r\n\r\n  const [rubricGrading, setRubricGrading] = useState({});\r\n  const [loadedRubric, setLoadedRubric] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n  const videoFileInputRef = useRef(null);\r\n\r\n  // Load rubric from shared context\r\n  useEffect(() => {\r\n    if (sharedRubric) {\r\n      setLoadedRubric(sharedRubric);\r\n\r\n      // Initialize rubric grading state\r\n      const initialGrading = {};\r\n      sharedRubric.criteria.forEach(criterion => {\r\n        initialGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n      setRubricGrading(initialGrading);\r\n\r\n      // Update local grading data with rubric info\r\n      setLocalGradingData(prev => ({\r\n        ...prev,\r\n        course: {\r\n          code: sharedRubric.courseInfo?.courseCode || '',\r\n          name: sharedRubric.courseInfo?.courseName || '',\r\n          instructor: sharedRubric.courseInfo?.instructor || '',\r\n          term: sharedRubric.courseInfo?.term || ''\r\n        },\r\n        assignment: {\r\n          name: sharedRubric.assignmentInfo?.name || '',\r\n          dueDate: sharedRubric.assignmentInfo?.dueDate || '',\r\n          maxPoints: sharedRubric.assignmentInfo?.totalPoints || 100\r\n        }\r\n      }));\r\n    } else {\r\n      // Use sample rubric if none provided\r\n      setLoadedRubric(sampleRubric);\r\n      const initialGrading = {};\r\n      sampleRubric.criteria.forEach(criterion => {\r\n        initialGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n      setRubricGrading(initialGrading);\r\n    }\r\n  }, [sharedRubric]);\r\n\r\n  // ENHANCED: Load saved data when student changes\r\n  useEffect(() => {\r\n    if (currentStudent?.id) {\r\n      console.log('üîç Loading data for student:', currentStudent.name);\r\n\r\n      // Get the grade status for this student\r\n      const gradeStatus = getGradeStatus(currentStudent.id);\r\n      console.log('üìä Grade status:', gradeStatus);\r\n\r\n      let savedData = null;\r\n\r\n      if (gradeStatus === 'final') {\r\n        // Load final grade data\r\n        savedData = loadFinalGrade ? loadFinalGrade(currentStudent.id) : null;\r\n        console.log('üìã Loading final grade data:', savedData ? 'Found' : 'Not found');\r\n      } else if (gradeStatus === 'draft') {\r\n        // Load draft data\r\n        savedData = loadDraft(currentStudent.id);\r\n        console.log('üìù Loading draft data:', savedData ? 'Found' : 'Not found');\r\n      }\r\n\r\n      if (savedData) {\r\n        console.log('‚úÖ Successfully loaded saved grade data');\r\n        setLocalGradingData(savedData);\r\n        if (savedData.rubricGrading) {\r\n          setRubricGrading(savedData.rubricGrading);\r\n        }\r\n      } else {\r\n        console.log('üÜï No saved data found, initializing fresh form');\r\n        setLocalGradingData(prev => ({\r\n          ...prev,\r\n          student: {\r\n            name: currentStudent.name,\r\n            id: currentStudent.id,\r\n            email: currentStudent.email\r\n          },\r\n          feedback: { general: '', strengths: '', improvements: '' },\r\n          attachments: [],\r\n          videoLinks: [],\r\n          latePolicy: { level: 'none', penaltyApplied: false }\r\n        }));\r\n\r\n        // Reset rubric grading state\r\n        if (loadedRubric) {\r\n          const initialGrading = {};\r\n          loadedRubric.criteria.forEach(criterion => {\r\n            initialGrading[criterion.id] = {\r\n              criterionId: criterion.id,\r\n              selectedLevel: null,\r\n              customComments: ''\r\n            };\r\n          });\r\n          setRubricGrading(initialGrading);\r\n        }\r\n      }\r\n    }\r\n  }, [currentStudent, getGradeStatus, loadDraft, loadFinalGrade]);\r\n\r\n  // Sync local data with shared context\r\n  useEffect(() => {\r\n    setSharedGradingData(localGradingData);\r\n  }, [localGradingData, setSharedGradingData]);\r\n\r\n  // Update rubric grading in local data\r\n  useEffect(() => {\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      rubricGrading: rubricGrading\r\n    }));\r\n  }, [rubricGrading]);\r\n\r\n  // ENHANCED: New student navigation functions for draft/final system\r\n  const handleNextStudentAsDraft = () => {\r\n    // Save current student's work as draft\r\n    if (currentStudent?.id) {\r\n      console.log('üíæ Saving as draft for student:', currentStudent.name);\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n\r\n    const success = nextStudentInSession('draft');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      console.log('‚úÖ Draft saved, moved to next student');\r\n    }\r\n  };\r\n\r\n  const handleNextStudentAsFinal = () => {\r\n    // Save current student's work as final grade\r\n    if (currentStudent?.id) {\r\n      console.log('‚úÖ Finalizing grade for student:', currentStudent.name);\r\n      saveFinalGrade(currentStudent.id, localGradingData);\r\n    }\r\n\r\n    const success = nextStudentInSession('final');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      console.log('‚úÖ Final grade saved, moved to next student');\r\n    }\r\n  };\r\n\r\n  const handlePreviousStudent = () => {\r\n    // Auto-save current student's work before moving\r\n    if (currentStudent?.id) {\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n\r\n    const success = previousStudentInSession();\r\n    if (!success) {\r\n      console.log('Already at first student or no active session');\r\n    } else {\r\n      resetGradingForm();\r\n    }\r\n  };\r\n\r\n  const resetGradingForm = () => {\r\n    // Reset only the grading-specific data\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false }\r\n    }));\r\n\r\n    // Reset rubric grading state\r\n    if (loadedRubric) {\r\n      const initialGrading = {};\r\n      loadedRubric.criteria.forEach(criterion => {\r\n        initialGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n      setRubricGrading(initialGrading);\r\n    }\r\n  };\r\n\r\n  // Get current student info for navigation display\r\n  const getCurrentStudentInfo = () => {\r\n    if (!classList || !gradingSession?.active || !gradingSession.currentStudent) {\r\n      return null;\r\n    }\r\n\r\n    const currentIndex = gradingSession.currentStudentIndex;\r\n    const totalStudents = classList.students.length;\r\n    const student = gradingSession.currentStudent;\r\n\r\n    return {\r\n      student,\r\n      position: currentIndex + 1,\r\n      total: totalStudents,\r\n      isFirst: currentIndex === 0,\r\n      isLast: currentIndex === totalStudents - 1\r\n    };\r\n  };\r\n\r\n  const currentStudentInfo = getCurrentStudentInfo();\r\n\r\n  // Handle level selection for rubric criteria\r\n  const handleLevelSelect = (criterionId, level, pointRange) => {\r\n    setRubricGrading(prev => ({\r\n      ...prev,\r\n      [criterionId]: {\r\n        ...prev[criterionId],\r\n        selectedLevel: level,\r\n        pointRange: pointRange\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Handle custom comments\r\n  const handleCustomComments = (criterionId, comments) => {\r\n    setRubricGrading(prev => ({\r\n      ...prev,\r\n      [criterionId]: {\r\n        ...prev[criterionId],\r\n        customComments: comments\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Add quick feedback\r\n  const addQuickFeedback = (criterionId, feedback) => {\r\n    const currentComments = rubricGrading[criterionId]?.customComments || '';\r\n    const newComments = currentComments ? `${currentComments}\\n${feedback}` : feedback;\r\n    handleCustomComments(criterionId, newComments);\r\n  };\r\n\r\n  // Calculate total score\r\n  const calculateTotalScore = () => {\r\n    if (!loadedRubric) return { totalScore: 0, maxPoints: 100, penaltyApplied: false };\r\n\r\n    let totalScore = 0;\r\n    let maxPoints = 0;\r\n\r\n    loadedRubric.criteria.forEach(criterion => {\r\n      const grading = rubricGrading[criterion.id];\r\n      maxPoints += criterion.weight;\r\n\r\n      if (grading?.selectedLevel && grading?.pointRange) {\r\n        // Parse point range (e.g., \"36-40\" or \"10\")\r\n        const pointStr = grading.pointRange;\r\n        const pointValue = pointStr.includes('-')\r\n          ? parseInt(pointStr.split('-')[1]) // Take the high end of range\r\n          : parseInt(pointStr);\r\n\r\n        if (!isNaN(pointValue)) {\r\n          totalScore += pointValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Apply late penalty if applicable\r\n    const penaltyApplied = localGradingData.latePolicy?.penaltyApplied || false;\r\n    if (penaltyApplied) {\r\n      const penaltyPercent = {\r\n        'minor': 0.1,\r\n        'moderate': 0.2,\r\n        'significant': 0.3\r\n      }[localGradingData.latePolicy.level] || 0;\r\n\r\n      totalScore = Math.max(0, totalScore - (totalScore * penaltyPercent));\r\n    }\r\n\r\n    return { totalScore, maxPoints, penaltyApplied };\r\n  };\r\n\r\n  // File attachment handlers\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const newAttachment = {\r\n          id: Date.now() + Math.random(),\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          base64Data: e.target.result\r\n        };\r\n\r\n        setLocalGradingData(prev => ({\r\n          ...prev,\r\n          attachments: [...prev.attachments, newAttachment]\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const removeAttachment = (attachmentId) => {\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      attachments: prev.attachments.filter(att => att.id !== attachmentId)\r\n    }));\r\n  };\r\n\r\n  // Video link handlers\r\n  const addVideoLink = () => {\r\n    const title = prompt('Enter video title:');\r\n    const url = prompt('Enter video URL:');\r\n\r\n    if (title && url) {\r\n      const newVideoLink = {\r\n        id: Date.now(),\r\n        title,\r\n        url\r\n      };\r\n\r\n      setLocalGradingData(prev => ({\r\n        ...prev,\r\n        videoLinks: [...prev.videoLinks, newVideoLink]\r\n      }));\r\n    }\r\n  };\r\n\r\n  const removeVideoLink = (linkId) => {\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      videoLinks: prev.videoLinks.filter(link => link.id !== linkId)\r\n    }));\r\n  };\r\n\r\n  // Export to PDF functionality\r\n  const exportToPDF = () => {\r\n    const scoreCalculation = calculateTotalScore();\r\n    const totalScore = scoreCalculation.totalScore.toFixed(1);\r\n    const maxPoints = loadedRubric ? loadedRubric.assignmentInfo.totalPoints : localGradingData.assignment.maxPoints;\r\n    const percentage = ((totalScore / maxPoints) * 100).toFixed(1);\r\n    const penaltyApplied = scoreCalculation.penaltyApplied;\r\n    const currentDate = new Date().toLocaleDateString('en-US', {\r\n      weekday: 'long',\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n\r\n    // Build attachments HTML\r\n    const attachmentsHTML = localGradingData.attachments.map((att, index) => {\r\n      if (att.base64Data) {\r\n        return `\r\n          <div class=\"attachment-item\">\r\n            <img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"attachment-image\" />\r\n            <div class=\"attachment-info\">\r\n              <div class=\"attachment-name\">${att.name}</div>\r\n              <div class=\"attachment-size\">${(att.size / 1024).toFixed(1)} KB</div>\r\n            </div>\r\n          </div>\r\n        `;\r\n      } else {\r\n        return `\r\n          <div class=\"attachment-item\">\r\n            <div class=\"file-icon\">üìÑ</div>\r\n            <div class=\"attachment-info\">\r\n              <div class=\"attachment-name\">${att.name}</div>\r\n              <div class=\"attachment-size\">${(att.size / 1024).toFixed(1)} KB</div>\r\n            </div>\r\n          </div>\r\n        `;\r\n      }\r\n    }).join('');\r\n\r\n    // Build video links HTML\r\n    const videoLinksHTML = localGradingData.videoLinks.map(link => `\r\n      <div class=\"video-link-item\">\r\n        <span class=\"video-icon\">üé•</span>\r\n        <div class=\"video-info\">\r\n          <div class=\"video-title\">${link.title}</div>\r\n          <div class=\"video-url\">${link.url}</div>\r\n        </div>\r\n      </div>\r\n    `).join('');\r\n\r\n    // Enhanced rubric table for PDF\r\n    const rubricTableHTML = loadedRubric ? loadedRubric.criteria.map(criterion => {\r\n      const grading = rubricGrading[criterion.id] || {};\r\n      const selectedLevel = grading.selectedLevel;\r\n      const customComments = grading.customComments || '';\r\n\r\n      const levelsHTML = Object.entries(criterion.levels).map(([levelKey, levelInfo]) => {\r\n        const isSelected = selectedLevel === levelKey;\r\n        return `\r\n          <tr class=\"${isSelected ? 'selected-level' : ''}\">\r\n            <td class=\"level-name\">${levelKey}</td>\r\n            <td class=\"level-description\">${levelInfo.description}</td>\r\n            <td class=\"level-points\">${levelInfo.pointRange}</td>\r\n            <td class=\"level-selected\">${isSelected ? '‚úì' : ''}</td>\r\n          </tr>\r\n        `;\r\n      }).join('');\r\n\r\n      return `\r\n        <div class=\"criterion-section\">\r\n          <h3 class=\"criterion-title\">${criterion.name} (${criterion.weight} points)</h3>\r\n          <p class=\"criterion-description\">${criterion.description}</p>\r\n          <table class=\"levels-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Level</th>\r\n                <th>Description</th>\r\n                <th>Points</th>\r\n                <th>Selected</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${levelsHTML}\r\n            </tbody>\r\n          </table>\r\n          ${customComments ? `<div class=\"custom-comments\"><strong>Comments:</strong> ${customComments}</div>` : ''}\r\n        </div>\r\n      `;\r\n    }).join('') : '';\r\n\r\n    const htmlContent = `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Grade Report - ${localGradingData.student.name}</title>\r\n    <style>\r\n        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; color: #333; }\r\n        .header { text-align: center; border-bottom: 3px solid #2563eb; padding-bottom: 20px; margin-bottom: 30px; }\r\n        .title { color: #2563eb; font-size: 28px; font-weight: bold; margin: 0; }\r\n        .subtitle { color: #666; font-size: 14px; margin: 5px 0; }\r\n        .score-summary { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border: 2px solid #0284c7; border-radius: 12px; padding: 20px; margin: 20px 0; text-align: center; }\r\n        .total-score { font-size: 36px; font-weight: bold; color: #0284c7; margin: 10px 0; }\r\n        .percentage { font-size: 18px; color: #0369a1; }\r\n        .penalty-notice { background: #fef3c7; border: 1px solid #f59e0b; border-radius: 6px; padding: 10px; margin: 10px 0; color: #92400e; }\r\n        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }\r\n        .info-card { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; }\r\n        .info-title { font-weight: bold; color: #1e40af; margin-bottom: 10px; border-bottom: 1px solid #e2e8f0; padding-bottom: 5px; }\r\n        .criterion-section { margin: 30px 0; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; }\r\n        .criterion-title { color: #1f2937; font-size: 18px; margin: 0 0 10px 0; }\r\n        .criterion-description { color: #666; margin: 0 0 15px 0; font-style: italic; }\r\n        .levels-table { width: 100%; border-collapse: collapse; margin: 15px 0; }\r\n        .levels-table th, .levels-table td { border: 1px solid #d1d5db; padding: 8px; text-align: left; }\r\n        .levels-table th { background: #f3f4f6; font-weight: bold; }\r\n        .selected-level { background: #dcfce7 !important; font-weight: bold; }\r\n        .custom-comments { background: #fffbeb; border: 1px solid #fbbf24; border-radius: 6px; padding: 10px; margin: 10px 0; }\r\n        .feedback-section { background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px; padding: 20px; margin: 20px 0; }\r\n        .attachments-section, .videos-section { margin: 20px 0; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fafafa; }\r\n        .attachment-item, .video-link-item { display: flex; align-items: center; margin: 10px 0; padding: 10px; background: white; border-radius: 6px; border: 1px solid #e5e7eb; }\r\n        .attachment-image { max-width: 100px; max-height: 60px; margin-right: 10px; border-radius: 4px; }\r\n        .file-icon, .video-icon { font-size: 20px; margin-right: 10px; }\r\n        .attachment-info, .video-info { flex-grow: 1; }\r\n        .attachment-name, .video-title { font-weight: bold; color: #374151; }\r\n        .attachment-size, .video-url { color: #6b7280; font-size: 12px; }\r\n        .footer { margin-top: 40px; padding-top: 20px; border-top: 2px solid #e5e7eb; text-align: center; color: #666; font-size: 12px; }\r\n        @media print { .no-print { display: none; } }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1 class=\"title\">üìã Grade Report</h1>\r\n        <div class=\"subtitle\">Generated on ${currentDate}</div>\r\n    </div>\r\n\r\n    <div class=\"score-summary\">\r\n        <div class=\"total-score\">${totalScore} / ${maxPoints} points</div>\r\n        <div class=\"percentage\">${percentage}%</div>\r\n        ${penaltyApplied ? '<div class=\"penalty-notice\">‚ö†Ô∏è Late penalty applied</div>' : ''}\r\n    </div>\r\n\r\n    <div class=\"info-grid\">\r\n        <div class=\"info-card\">\r\n            <div class=\"info-title\">üë®‚Äçüéì Student Information</div>\r\n            <div><strong>Name:</strong> ${localGradingData.student.name}</div>\r\n            <div><strong>ID:</strong> ${localGradingData.student.id}</div>\r\n            <div><strong>Email:</strong> ${localGradingData.student.email}</div>\r\n        </div>\r\n        <div class=\"info-card\">\r\n            <div class=\"info-title\">üìö Course Information</div>\r\n            <div><strong>Course:</strong> ${localGradingData.course.code} - ${localGradingData.course.name}</div>\r\n            <div><strong>Instructor:</strong> ${localGradingData.course.instructor}</div>\r\n            <div><strong>Term:</strong> ${localGradingData.course.term}</div>\r\n        </div>\r\n        <div class=\"info-card\">\r\n            <div class=\"info-title\">üìù Assignment Details</div>\r\n            <div><strong>Assignment:</strong> ${localGradingData.assignment.name}</div>\r\n            <div><strong>Due Date:</strong> ${localGradingData.assignment.dueDate}</div>\r\n            <div><strong>Max Points:</strong> ${localGradingData.assignment.maxPoints}</div>\r\n        </div>\r\n        <div class=\"info-card\">\r\n            <div class=\"info-title\">‚è∞ Late Policy</div>\r\n            <div><strong>Level:</strong> ${localGradingData.latePolicy.level}</div>\r\n            <div><strong>Penalty Applied:</strong> ${localGradingData.latePolicy.penaltyApplied ? 'Yes' : 'No'}</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"rubric-section\">\r\n        <h2 style=\"color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;\">üìä Rubric Assessment</h2>\r\n        ${rubricTableHTML}\r\n    </div>\r\n\r\n    ${localGradingData.feedback.general || localGradingData.feedback.strengths || localGradingData.feedback.improvements ? `\r\n    <div class=\"feedback-section\">\r\n        <h2 style=\"color: #15803d; margin-top: 0;\">üí¨ Instructor Feedback</h2>\r\n        ${localGradingData.feedback.general ? `<div><strong>General Comments:</strong><br>${localGradingData.feedback.general}</div>` : ''}\r\n        ${localGradingData.feedback.strengths ? `<div style=\"margin-top: 15px;\"><strong>Strengths:</strong><br>${localGradingData.feedback.strengths}</div>` : ''}\r\n        ${localGradingData.feedback.improvements ? `<div style=\"margin-top: 15px;\"><strong>Areas for Improvement:</strong><br>${localGradingData.feedback.improvements}</div>` : ''}\r\n    </div>\r\n    ` : ''}\r\n\r\n    ${localGradingData.attachments.length > 0 ? `\r\n    <div class=\"attachments-section\">\r\n        <h3 style=\"margin-top: 0; color: #374151;\">üìé Attachments</h3>\r\n        ${attachmentsHTML}\r\n    </div>\r\n    ` : ''}\r\n\r\n    ${localGradingData.videoLinks.length > 0 ? `\r\n    <div class=\"videos-section\">\r\n        <h3 style=\"margin-top: 0; color: #374151;\">üé• Video Links</h3>\r\n        ${videoLinksHTML}\r\n    </div>\r\n    ` : ''}\r\n\r\n    <div class=\"footer\">\r\n        This grade report was generated using the Enhanced Rubric Grading System.<br>\r\n        For questions about this assessment, please contact your instructor.\r\n    </div>\r\n</body>\r\n</html>\r\n    `;\r\n\r\n    // Create and download PDF\r\n    const newWindow = window.open('', '_blank');\r\n    newWindow.document.write(htmlContent);\r\n    newWindow.document.close();\r\n\r\n    setTimeout(() => {\r\n      newWindow.print();\r\n    }, 250);\r\n  };\r\n\r\n  if (!loadedRubric) {\r\n    return (\r\n      <div style={{\r\n        padding: '2rem',\r\n        textAlign: 'center',\r\n        background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\r\n        minHeight: '400px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>üìã</div>\r\n        <h2 style={{ color: '#0369a1', marginBottom: '1rem' }}>No Rubric Loaded</h2>\r\n        <p style={{ color: '#0284c7', fontSize: '1.1rem', marginBottom: '2rem' }}>\r\n          Please create or load a rubric from the Rubric Creator to begin grading.\r\n        </p>\r\n        <button\r\n          onClick={() => setActiveTab('rubric-creator')}\r\n          style={{\r\n            background: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',\r\n            color: 'white',\r\n            padding: '0.75rem 2rem',\r\n            borderRadius: '0.5rem',\r\n            border: 'none',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 6px rgba(59, 130, 246, 0.3)'\r\n          }}\r\n        >\r\n          Go to Rubric Creator\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      maxWidth: '1200px',\r\n      margin: '0 auto',\r\n      padding: '2rem',\r\n      background: 'linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)',\r\n      minHeight: '100vh'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        background: 'linear-gradient(135deg, #1e40af 0%, #3730a3 100%)',\r\n        color: 'white',\r\n        padding: '2rem',\r\n        borderRadius: '1rem',\r\n        marginBottom: '2rem',\r\n        textAlign: 'center'\r\n      }}>\r\n        <h1 style={{ margin: '0 0 0.5rem 0', fontSize: '2.5rem' }}>üìù Grading Template</h1>\r\n        <p style={{ margin: 0, fontSize: '1.1rem', opacity: 0.9 }}>\r\n          {loadedRubric.courseInfo.courseCode} - {loadedRubric.assignmentInfo.name}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Current Student Info Display */}\r\n      {currentStudentInfo && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\r\n          border: '2px solid #10b981',\r\n          borderRadius: '0.75rem',\r\n          padding: '1rem',\r\n          marginBottom: '2rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ margin: '0 0 0.5rem 0', color: '#047857' }}>\r\n            üë®‚Äçüéì Currently Grading: {currentStudentInfo.student.name}\r\n          </h3>\r\n          <p style={{ margin: 0, color: '#065f46' }}>\r\n            Student {currentStudentInfo.position} of {currentStudentInfo.total} ‚Ä¢ ID: {currentStudentInfo.student.id}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Grading Form */}\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '1rem',\r\n        padding: '2rem',\r\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n        marginBottom: '2rem'\r\n      }}>\r\n        {/* Student Information */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üë®‚Äçüéì Student Information</h3>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                Student Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={localGradingData.student.name}\r\n                onChange={(e) => setLocalGradingData(prev => ({\r\n                  ...prev,\r\n                  student: { ...prev.student, name: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem'\r\n                }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                Student ID\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={localGradingData.student.id}\r\n                onChange={(e) => setLocalGradingData(prev => ({\r\n                  ...prev,\r\n                  student: { ...prev.student, id: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem'\r\n                }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={localGradingData.student.email}\r\n                onChange={(e) => setLocalGradingData(prev => ({\r\n                  ...prev,\r\n                  student: { ...prev.student, email: e.target.value }\r\n                }))}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem'\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rubric Grading Section */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üìä Rubric Assessment</h3>\r\n\r\n          {loadedRubric.criteria.map((criterion, index) => {\r\n            const currentGrading = rubricGrading[criterion.id] || {};\r\n\r\n            return (\r\n              <div key={criterion.id} style={{\r\n                border: '2px solid #e5e7eb',\r\n                borderRadius: '0.75rem',\r\n                padding: '1.5rem',\r\n                marginBottom: '1.5rem',\r\n                background: '#fafafa'\r\n              }}>\r\n                <h4 style={{\r\n                  color: '#1f2937',\r\n                  fontSize: '1.25rem',\r\n                  marginBottom: '0.5rem',\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center'\r\n                }}>\r\n                  {criterion.name}\r\n                  <span style={{\r\n                    background: '#3b82f6',\r\n                    color: 'white',\r\n                    padding: '0.25rem 0.75rem',\r\n                    borderRadius: '1rem',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    {criterion.weight} pts\r\n                  </span>\r\n                </h4>\r\n                <p style={{ color: '#6b7280', marginBottom: '1rem', fontStyle: 'italic' }}>\r\n                  {criterion.description}\r\n                </p>\r\n\r\n                {/* Performance Levels */}\r\n                <div style={{ display: 'grid', gap: '0.75rem', marginBottom: '1rem' }}>\r\n                  {Object.entries(criterion.levels).map(([levelKey, levelInfo]) => {\r\n                    const isSelected = currentGrading.selectedLevel === levelKey;\r\n\r\n                    return (\r\n                      <div\r\n                        key={levelKey}\r\n                        onClick={() => handleLevelSelect(criterion.id, levelKey, levelInfo.pointRange)}\r\n                        style={{\r\n                          border: `2px solid ${isSelected ? '#10b981' : '#d1d5db'}`,\r\n                          borderRadius: '0.5rem',\r\n                          padding: '1rem',\r\n                          cursor: 'pointer',\r\n                          background: isSelected ? '#ecfdf5' : 'white',\r\n                          transition: 'all 0.2s ease'\r\n                        }}\r\n                      >\r\n                        <div style={{\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          alignItems: 'center',\r\n                          marginBottom: '0.5rem'\r\n                        }}>\r\n                          <span style={{\r\n                            fontWeight: '600',\r\n                            color: isSelected ? '#047857' : '#374151',\r\n                            textTransform: 'capitalize'\r\n                          }}>\r\n                            {levelKey}\r\n                          </span>\r\n                          <span style={{\r\n                            background: isSelected ? '#10b981' : '#9ca3af',\r\n                            color: 'white',\r\n                            padding: '0.25rem 0.5rem',\r\n                            borderRadius: '0.25rem',\r\n                            fontSize: '0.75rem',\r\n                            fontWeight: '600'\r\n                          }}>\r\n                            {levelInfo.pointRange} pts\r\n                          </span>\r\n                        </div>\r\n                        <p style={{\r\n                          margin: 0,\r\n                          color: isSelected ? '#065f46' : '#6b7280',\r\n                          fontSize: '0.875rem'\r\n                        }}>\r\n                          {levelInfo.description}\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                {/* Custom Comments */}\r\n                <div style={{ marginBottom: '1rem' }}>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '0.5rem',\r\n                    fontWeight: '600',\r\n                    color: '#374151'\r\n                  }}>\r\n                    Custom Comments\r\n                  </label>\r\n                  <textarea\r\n                    value={currentGrading.customComments || ''}\r\n                    onChange={(e) => handleCustomComments(criterion.id, e.target.value)}\r\n                    rows={3}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '0.75rem',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '0.5rem',\r\n                      fontSize: '0.875rem',\r\n                      resize: 'vertical'\r\n                    }}\r\n                    placeholder=\"Add specific feedback for this criterion...\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Quick Feedback Buttons */}\r\n                {criterion.feedbackLibrary && (\r\n                  <div style={{ marginTop: '1rem' }}>\r\n                    <h5 style={{\r\n                      color: '#6b7280',\r\n                      fontSize: '0.875rem',\r\n                      marginBottom: '0.5rem',\r\n                      fontWeight: '600'\r\n                    }}>\r\n                      Quick Feedback:\r\n                    </h5>\r\n\r\n                    {Object.entries(criterion.feedbackLibrary).map(([category, feedbacks]) => (\r\n                      <div key={category} style={{ marginBottom: '0.5rem' }}>\r\n                        <span style={{\r\n                          fontSize: '0.75rem',\r\n                          fontWeight: '600',\r\n                          color: '#9ca3af',\r\n                          textTransform: 'capitalize'\r\n                        }}>\r\n                          {category}:\r\n                        </span>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.25rem', marginTop: '0.25rem' }}>\r\n                          {feedbacks.map((feedback, idx) => (\r\n                            <button\r\n                              key={idx}\r\n                              onClick={() => addQuickFeedback(criterion.id, feedback)}\r\n                              style={{\r\n                                fontSize: '0.75rem',\r\n                                padding: '0.25rem 0.5rem',\r\n                                margin: '0.125rem',\r\n                                background: '#e5e7eb',\r\n                                color: '#374151',\r\n                                border: 'none',\r\n                                borderRadius: '0.25rem',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                            >\r\n                              + {feedback}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* NEW: Enhanced Complete and Grade Next Section - PLACED AFTER RUBRIC */}\r\n        {currentStudentInfo && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\r\n            border: '2px solid #10b981',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem',\r\n            textAlign: 'center'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#047857', marginBottom: '1rem' }}>\r\n              Ready to move to the next student?\r\n            </h3>\r\n            <p style={{ color: '#065f46', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n              Choose how to save the current grading before proceeding.\r\n            </p>\r\n\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n              {/* Save as Draft Button */}\r\n              <button\r\n                onClick={handleNextStudentAsDraft}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\r\n                  color: 'white',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '0.5rem',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600',\r\n                  boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                  e.target.style.transform = 'translateY(-2px)';\r\n                  e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                  e.target.style.transform = 'translateY(0)';\r\n                  e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '1.1rem' }}>üìù</span>\r\n                Save & Grade Next Student\r\n              </button>\r\n\r\n              {/* Finalize & Grade Next Button */}\r\n              <button\r\n                onClick={handleNextStudentAsFinal}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                  color: 'white',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '0.5rem',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600',\r\n                  boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                  e.target.style.transform = 'translateY(-2px)';\r\n                  e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                  e.target.style.transform = 'translateY(0)';\r\n                  e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '1.1rem' }}>‚úÖ</span>\r\n                Finalize & Grade Next Student\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: 'rgba(255, 255, 255, 0.6)',\r\n              borderRadius: '0.375rem',\r\n              fontSize: '0.75rem',\r\n              color: '#065f46'\r\n            }}>\r\n              <strong>Draft:</strong> Save progress, can edit later ‚Ä¢ <strong>Finalize:</strong> Complete grading, ready for student/LMS\r\n            </div>\r\n\r\n            {currentStudentInfo.isLast && (\r\n              <div style={{\r\n                marginTop: '1rem',\r\n                padding: '0.75rem',\r\n                background: '#fef3c7',\r\n                borderRadius: '0.375rem',\r\n                fontSize: '0.875rem',\r\n                color: '#92400e',\r\n                fontWeight: '500'\r\n              }}>\r\n                üéâ This is the last student in your grading session!\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Score Summary */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üìä Score Summary</h3>\r\n          {(() => {\r\n            const scoreCalc = calculateTotalScore();\r\n            const percentage = ((scoreCalc.totalScore / scoreCalc.maxPoints) * 100).toFixed(1);\r\n\r\n            return (\r\n              <div style={{\r\n                background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',\r\n                border: '2px solid #0284c7',\r\n                borderRadius: '0.75rem',\r\n                padding: '1.5rem',\r\n                textAlign: 'center'\r\n              }}>\r\n                <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#0284c7', marginBottom: '0.5rem' }}>\r\n                  {scoreCalc.totalScore.toFixed(1)} / {scoreCalc.maxPoints} points\r\n                </div>\r\n                <div style={{ fontSize: '1.25rem', color: '#0369a1', marginBottom: '1rem' }}>\r\n                  {percentage}%\r\n                </div>\r\n                {scoreCalc.penaltyApplied && (\r\n                  <div style={{\r\n                    background: '#fef3c7',\r\n                    border: '1px solid #f59e0b',\r\n                    borderRadius: '0.375rem',\r\n                    padding: '0.5rem',\r\n                    color: '#92400e',\r\n                    fontSize: '0.875rem'\r\n                  }}>\r\n                    ‚ö†Ô∏è Late penalty applied\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n\r\n        {/* Late Policy */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>‚è∞ Late Policy</h3>\r\n          <div style={{ display: 'flex', gap: '1rem', alignItems: 'center', flexWrap: 'wrap' }}>\r\n            <select\r\n              value={localGradingData.latePolicy.level}\r\n              onChange={(e) => setLocalGradingData(prev => ({\r\n                ...prev,\r\n                latePolicy: { ...prev.latePolicy, level: e.target.value }\r\n              }))}\r\n              style={{\r\n                padding: '0.75rem',\r\n                border: '2px solid #e5e7eb',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '1rem',\r\n                minWidth: '150px'\r\n              }}\r\n            >\r\n              <option value=\"none\">No Late Penalty</option>\r\n              <option value=\"minor\">Minor (10%)</option>\r\n              <option value=\"moderate\">Moderate (20%)</option>\r\n              <option value=\"significant\">Significant (30%)</option>\r\n            </select>\r\n\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={localGradingData.latePolicy.penaltyApplied}\r\n                onChange={(e) => setLocalGradingData(prev => ({\r\n                  ...prev,\r\n                  latePolicy: { ...prev.latePolicy, penaltyApplied: e.target.checked }\r\n                }))}\r\n                style={{ transform: 'scale(1.2)' }}\r\n              />\r\n              <span style={{ fontWeight: '600', color: '#374151' }}>Apply Penalty</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* General Feedback */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üí¨ Instructor Feedback</h3>\r\n\r\n          <div style={{ display: 'grid', gap: '1rem' }}>\r\n            <div>\r\n              <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                General Comments\r\n              </label>\r\n              <textarea\r\n                value={localGradingData.feedback.general}\r\n                onChange={(e) => setLocalGradingData(prev => ({\r\n                  ...prev,\r\n                  feedback: { ...prev.feedback, general: e.target.value }\r\n                }))}\r\n                rows={4}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.75rem',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '1rem',\r\n                  resize: 'vertical'\r\n                }}\r\n                placeholder=\"Provide overall feedback about the student's work...\"\r\n              />\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                  Strengths\r\n                </label>\r\n                <textarea\r\n                  value={localGradingData.feedback.strengths}\r\n                  onChange={(e) => setLocalGradingData(prev => ({\r\n                    ...prev,\r\n                    feedback: { ...prev.feedback, strengths: e.target.value }\r\n                  }))}\r\n                  rows={3}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '1rem',\r\n                    resize: 'vertical'\r\n                  }}\r\n                  placeholder=\"What did the student do well?\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: '#374151' }}>\r\n                  Areas for Improvement\r\n                </label>\r\n                <textarea\r\n                  value={localGradingData.feedback.improvements}\r\n                  onChange={(e) => setLocalGradingData(prev => ({\r\n                    ...prev,\r\n                    feedback: { ...prev.feedback, improvements: e.target.value }\r\n                  }))}\r\n                  rows={3}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '1rem',\r\n                    resize: 'vertical'\r\n                  }}\r\n                  placeholder=\"What can be improved next time?\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* File Attachments */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üìé File Attachments</h3>\r\n\r\n          <div style={{ marginBottom: '1rem' }}>\r\n            <input\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              onChange={handleFileUpload}\r\n              multiple\r\n              style={{ display: 'none' }}\r\n            />\r\n            <button\r\n              onClick={() => fileInputRef.current?.click()}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)',\r\n                color: 'white',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '1rem',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              üìé Add Files\r\n            </button>\r\n          </div>\r\n\r\n          {localGradingData.attachments.length > 0 && (\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n              gap: '1rem'\r\n            }}>\r\n              {localGradingData.attachments.map((attachment) => (\r\n                <div key={attachment.id} style={{\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  padding: '1rem',\r\n                  background: '#fafafa',\r\n                  position: 'relative'\r\n                }}>\r\n                  {attachment.base64Data && attachment.type.startsWith('image/') ? (\r\n                    <img\r\n                      src={attachment.base64Data}\r\n                      alt={attachment.name}\r\n                      style={{\r\n                        width: '100%',\r\n                        maxHeight: '150px',\r\n                        objectFit: 'cover',\r\n                        borderRadius: '0.25rem',\r\n                        marginBottom: '0.5rem'\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    <div style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      height: '100px',\r\n                      background: '#e5e7eb',\r\n                      borderRadius: '0.25rem',\r\n                      marginBottom: '0.5rem',\r\n                      fontSize: '2rem'\r\n                    }}>\r\n                      üìÑ\r\n                    </div>\r\n                  )}\r\n\r\n                  <div style={{ fontSize: '0.875rem', fontWeight: '600', marginBottom: '0.25rem' }}>\r\n                    {attachment.name}\r\n                  </div>\r\n                  <div style={{ fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem' }}>\r\n                    {(attachment.size / 1024).toFixed(1)} KB\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={() => removeAttachment(attachment.id)}\r\n                    style={{\r\n                      position: 'absolute',\r\n                      top: '0.5rem',\r\n                      right: '0.5rem',\r\n                      background: '#ef4444',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '50%',\r\n                      width: '24px',\r\n                      height: '24px',\r\n                      cursor: 'pointer',\r\n                      fontSize: '0.75rem'\r\n                    }}\r\n                  >\r\n                    √ó\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Video Links */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ color: '#1f2937', fontSize: '1.5rem', marginBottom: '1rem' }}>üé• Video Links</h3>\r\n\r\n          <div style={{ marginBottom: '1rem' }}>\r\n            <button\r\n              onClick={addVideoLink}\r\n              style={{\r\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\r\n                color: 'white',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '1rem',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              üé• Add Video Link\r\n            </button>\r\n          </div>\r\n\r\n          {localGradingData.videoLinks.length > 0 && (\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n              {localGradingData.videoLinks.map((link) => (\r\n                <div key={link.id} style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '0.5rem',\r\n                  padding: '1rem',\r\n                  background: '#fafafa'\r\n                }}>\r\n                  <div>\r\n                    <div style={{ fontWeight: '600', marginBottom: '0.25rem' }}>{link.title}</div>\r\n                    <div style={{ fontSize: '0.875rem', color: '#6b7280' }}>{link.url}</div>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => removeVideoLink(link.id)}\r\n                    style={{\r\n                      background: '#ef4444',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '0.25rem',\r\n                      padding: '0.5rem',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Export Controls */}\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h3 style={{ color: '#374151', marginBottom: '1rem' }}>üìÑ Export Options</h3>\r\n          <button\r\n            onClick={exportToPDF}\r\n            style={{\r\n              background: 'linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)',\r\n              color: 'white',\r\n              padding: '0.75rem 2rem',\r\n              borderRadius: '0.5rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontSize: '1rem',\r\n              fontWeight: '600',\r\n              boxShadow: '0 4px 6px rgba(220, 38, 38, 0.3)'\r\n            }}\r\n          >\r\n            üìÑ Export Grade Report (PDF)\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradingTemplate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}