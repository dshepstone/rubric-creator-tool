{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\RubricCreator.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2 } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\n\n// Simple Rich Text Editor Component to replace the problematic ReactQuill\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimpleRichTextEditor = /*#__PURE__*/_s(/*#__PURE__*/React.forwardRef(_c = _s(({\n  value,\n  onChange,\n  placeholder\n}, ref) => {\n  _s();\n  const editorRef = useRef(null);\n  const [isEditorReady, setIsEditorReady] = useState(false);\n  useEffect(() => {\n    if (editorRef.current) {\n      setIsEditorReady(true);\n      // Set initial content\n      if (value && editorRef.current.innerHTML !== value) {\n        editorRef.current.innerHTML = value || '';\n      }\n    }\n  }, [value]);\n  const handlePaste = e => {\n    e.preventDefault();\n    const clipboard = e.clipboardData;\n    const htmlData = clipboard.getData('text/html');\n    const textData = clipboard.getData('text/plain');\n    let cleanContent;\n    if (htmlData) {\n      // Enhanced HTML sanitization - preserve more formatting including lists\n      cleanContent = sanitizeHtml(htmlData);\n    } else {\n      // Convert plain text to HTML, preserving line breaks\n      cleanContent = textData.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r\\n|\\r|\\n/g, '<br>');\n    }\n\n    // Focus the editor first\n    editorRef.current.focus();\n\n    // Insert the content\n    if (document.queryCommandSupported('insertHTML')) {\n      document.execCommand('insertHTML', false, cleanContent);\n    } else {\n      // Fallback for browsers that don't support insertHTML\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        range.deleteContents();\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = cleanContent;\n        const fragment = document.createDocumentFragment();\n        while (tempDiv.firstChild) {\n          fragment.appendChild(tempDiv.firstChild);\n        }\n        range.insertNode(fragment);\n      }\n    }\n\n    // Trigger onChange\n    if (onChange) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n  const sanitizeHtml = html => {\n    // First, remove all style blocks, comments, and Microsoft Word specific content\n    let cleanedHtml = html\n    // Remove HTML comments (including the massive style block from Word)\n    .replace(/<!--[\\s\\S]*?-->/g, '')\n    // Remove style tags and their content\n    .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\n    // Remove script tags and their content\n    .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\n    // Remove XML declarations and Office-specific tags\n    .replace(/<\\?xml[^>]*>/gi, '').replace(/<\\/?o:p[^>]*>/gi, '').replace(/<\\/?v:[^>]*>/gi, '').replace(/<\\/?w:[^>]*>/gi, '')\n    // Remove Microsoft Word conditional comments\n    .replace(/<!--\\[if[^>]*>[\\s\\S]*?<!\\[endif\\]-->/gi, '');\n\n    // Create a temporary container\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = cleanedHtml;\n\n    // Remove all style attributes and Microsoft Office attributes\n    const removeAttributes = element => {\n      if (element.nodeType === Node.ELEMENT_NODE) {\n        // Get all attributes to remove\n        const attributesToRemove = [];\n        for (let i = 0; i < element.attributes.length; i++) {\n          const attr = element.attributes[i];\n          // Remove style attributes, class attributes, and any mso-* attributes\n          if (attr.name === 'style' || attr.name === 'class' || attr.name.startsWith('mso-') || attr.name.startsWith('data-') || attr.name === 'lang' || attr.name === 'dir') {\n            attributesToRemove.push(attr.name);\n          }\n        }\n\n        // Remove the attributes\n        attributesToRemove.forEach(attrName => {\n          element.removeAttribute(attrName);\n        });\n\n        // Recursively clean child elements\n        Array.from(element.children).forEach(child => {\n          removeAttributes(child);\n        });\n      }\n    };\n    removeAttributes(tempDiv);\n\n    // Convert Microsoft Word's complex list structures to simple HTML lists\n    const convertWordLists = container => {\n      // Find paragraphs that are actually list items (they contain bullet symbols or are indented)\n      const paragraphs = container.querySelectorAll('p');\n      let currentList = null;\n      let currentListType = null;\n      paragraphs.forEach(p => {\n        var _p$className;\n        const text = p.textContent.trim();\n        const isListItem = text.startsWith('·') || text.startsWith('•') || text.startsWith('-') || text.match(/^\\d+\\./) || p.style.marginLeft || ((_p$className = p.className) === null || _p$className === void 0 ? void 0 : _p$className.includes('List'));\n        if (isListItem) {\n          // Determine if it's ordered or unordered\n          const isOrdered = text.match(/^\\d+\\./);\n          const listType = isOrdered ? 'ol' : 'ul';\n\n          // Create new list if needed\n          if (!currentList || currentListType !== listType) {\n            currentList = document.createElement(listType);\n            currentListType = listType;\n            p.parentNode.insertBefore(currentList, p);\n          }\n\n          // Create list item\n          const li = document.createElement('li');\n\n          // Clean the text (remove bullet symbols and extra spacing)\n          let cleanText = text.replace(/^[·•\\-]\\s*/, '') // Remove bullet symbols\n          .replace(/^\\d+\\.\\s*/, '') // Remove number prefix\n          .trim();\n\n          // Move the paragraph content to the list item\n          li.innerHTML = cleanText;\n          currentList.appendChild(li);\n\n          // Remove the original paragraph\n          p.remove();\n        } else {\n          // Reset list tracking for non-list content\n          currentList = null;\n          currentListType = null;\n        }\n      });\n    };\n    convertWordLists(tempDiv);\n\n    // Define allowed tags\n    const allowedTags = ['b', 'i', 'u', 'strong', 'em', 'p', 'br', 'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\n    // Function to recursively clean nodes and remove disallowed tags\n    const cleanNode = node => {\n      if (node.nodeType === Node.TEXT_NODE) {\n        // Clean up text content - remove extra whitespace\n        const cleanText = node.textContent.replace(/\\s+/g, ' ').trim();\n        return cleanText ? document.createTextNode(cleanText) : null;\n      }\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        const tagName = node.tagName.toLowerCase();\n        if (allowedTags.includes(tagName)) {\n          const newNode = document.createElement(tagName);\n\n          // Recursively clean children\n          Array.from(node.childNodes).forEach(child => {\n            const cleanedChild = cleanNode(child);\n            if (cleanedChild) {\n              newNode.appendChild(cleanedChild);\n            }\n          });\n\n          // Only return the node if it has content\n          return newNode.textContent.trim() || newNode.children.length > 0 ? newNode : null;\n        } else {\n          // For disallowed tags (like div, span), extract their children\n          const fragment = document.createDocumentFragment();\n          Array.from(node.childNodes).forEach(child => {\n            const cleanedChild = cleanNode(child);\n            if (cleanedChild) {\n              fragment.appendChild(cleanedChild);\n            }\n          });\n          return fragment.childNodes.length > 0 ? fragment : null;\n        }\n      }\n      return null;\n    };\n    const cleanedContainer = document.createElement('div');\n    Array.from(tempDiv.childNodes).forEach(child => {\n      const cleanedChild = cleanNode(child);\n      if (cleanedChild) {\n        cleanedContainer.appendChild(cleanedChild);\n      }\n    });\n\n    // Final cleanup - remove empty paragraphs and normalize spacing\n    const finalHtml = cleanedContainer.innerHTML.replace(/<p[^>]*>\\s*<\\/p>/g, '') // Remove empty paragraphs\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove multiple line breaks\n    .replace(/(<\\/[^>]+>)\\s+(<[^>]+>)/g, '$1$2') // Remove spaces between tags\n    .trim();\n    return finalHtml;\n  };\n  const handleInput = () => {\n    if (onChange && editorRef.current) {\n      onChange(editorRef.current.innerHTML);\n    }\n  };\n  const formatText = (command, value = null) => {\n    // Focus the editor first to ensure commands work\n    if (editorRef.current) {\n      editorRef.current.focus();\n\n      // Small delay to ensure focus is set\n      setTimeout(() => {\n        try {\n          const success = document.execCommand(command, false, value);\n          if (!success) {\n            console.warn(`Command ${command} not successful`);\n          }\n\n          // Trigger onChange after formatting\n          if (onChange && editorRef.current) {\n            onChange(editorRef.current.innerHTML);\n          }\n        } catch (error) {\n          console.error(`Error executing command ${command}:`, error);\n        }\n      }, 10);\n    }\n  };\n  const handleKeyDown = e => {\n    // Handle some common keyboard shortcuts\n    if (e.ctrlKey || e.metaKey) {\n      switch (e.key) {\n        case 'b':\n          e.preventDefault();\n          formatText('bold');\n          break;\n        case 'i':\n          e.preventDefault();\n          formatText('italic');\n          break;\n        case 'u':\n          e.preventDefault();\n          formatText('underline');\n          break;\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"simple-rich-text-editor border border-gray-300 rounded-lg overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 border-b border-gray-300 p-2 flex gap-2 flex-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault() // Prevent focus loss\n        ,\n        onClick: () => formatText('bold'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors\",\n        title: \"Bold (Ctrl+B)\",\n        children: \"B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('italic'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm italic transition-colors\",\n        title: \"Italic (Ctrl+I)\",\n        children: \"I\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('underline'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm underline transition-colors\",\n        title: \"Underline (Ctrl+U)\",\n        children: \"U\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('formatBlock', 'h3'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors\",\n        title: \"Heading 3\",\n        children: \"H3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('formatBlock', 'p'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\",\n        title: \"Paragraph\",\n        children: \"P\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('insertUnorderedList'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\",\n        title: \"Bullet List\",\n        children: \"\\u2022 List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('insertOrderedList'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\",\n        title: \"Numbered List\",\n        children: \"1. List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('outdent'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\",\n        title: \"Decrease Indent\",\n        children: \"\\u2190\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('indent'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\",\n        title: \"Increase Indent\",\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onMouseDown: e => e.preventDefault(),\n        onClick: () => formatText('removeFormat'),\n        className: \"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm text-red-600 transition-colors\",\n        title: \"Clear Formatting\",\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: editorRef,\n      contentEditable: true,\n      onInput: handleInput,\n      onPaste: handlePaste,\n      onKeyDown: handleKeyDown,\n      className: \"p-4 min-h-[200px] max-h-[400px] overflow-y-auto focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20\",\n      style: {\n        lineHeight: '1.5',\n        wordWrap: 'break-word',\n        overflowWrap: 'break-word'\n      },\n      dangerouslySetInnerHTML: {\n        __html: value || ''\n      },\n      suppressContentEditableWarning: true,\n      \"data-placeholder\": placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n                [contenteditable]:empty:before {\n                    content: attr(data-placeholder);\n                    color: #9ca3af;\n                    font-style: italic;\n                    pointer-events: none;\n                }\n                [contenteditable]:focus:before {\n                    content: none;\n                }\n                [contenteditable] ul {\n                    list-style-type: disc;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] ol {\n                    list-style-type: decimal;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] li {\n                    margin-bottom: 0.25em;\n                }\n                [contenteditable] h3 {\n                    font-size: 1.25em;\n                    font-weight: bold;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p {\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p:last-child {\n                    margin-bottom: 0;\n                }\n            `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 286,\n    columnNumber: 9\n  }, this);\n}, \"+QD7cRzU+zcRqjKIE3KlM5uGWGg=\")), \"+QD7cRzU+zcRqjKIE3KlM5uGWGg=\");\n_c2 = SimpleRichTextEditor;\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\n\n// Modal component for the rich text editor\nconst EditorModal = ({\n  isOpen,\n  onClose,\n  title,\n  content,\n  onChange,\n  placeholder\n}) => {\n  _s2();\n  const richTextContentRef = useRef('');\n  const editorRef = useRef(null);\n\n  // Handle escape key\n  useEffect(() => {\n    const handleEscape = e => {\n      if (e.key === 'Escape') {\n        onClose(false);\n      }\n    };\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape);\n      // Prevent body scroll when modal is open\n      document.body.style.overflow = 'hidden';\n    }\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, onClose]);\n\n  // Handle backdrop click\n  const handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      onClose(false);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\",\n    onClick: handleBackdropClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center p-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-t-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Maximize2, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 25\n          }, this), \"Rich Text Editor: \", title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onClose(false),\n          className: \"text-white hover:text-gray-200 transition-colors p-1 rounded\",\n          title: \"Close (Esc)\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6 overflow-y-auto\",\n        children: /*#__PURE__*/_jsxDEV(SimpleRichTextEditor, {\n          ref: editorRef,\n          value: content,\n          onChange: html => {\n            richTextContentRef.current = html;\n            onChange(html);\n          },\n          placeholder: placeholder || \"Enter your content here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gradient-to-r from-green-50 to-green-100 border-t border-green-200 rounded-b-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4 text-sm text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 33\n              }, this), \"Rich Text Editor Active\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Paste rich text from Word, web pages, or other sources\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onClose(true),\n              className: \"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-md\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 33\n              }, this), \"Save & Close\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onClose(false),\n              className: \"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-md\",\n              children: [/*#__PURE__*/_jsxDEV(X, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 33\n              }, this), \"Cancel\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-xs text-green-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Features:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 25\n          }, this), \" Bold, Italic, Underline, Headers, Lists, Indentation |\", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \" Shortcuts:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 25\n          }, this), \" Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Esc (Close)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 483,\n    columnNumber: 9\n  }, this), document.body);\n};\n_s2(EditorModal, \"IFTJKPX2Xn2RvShsTNiteFEcbUk=\");\n_c3 = EditorModal;\nconst RubricCreator = () => {\n  _s3();\n  // Get shared context functions and state\n  const {\n    sharedRubric,\n    setSharedRubric,\n    transferRubricToGradingWithDetails,\n    activeTab\n  } = useAssessment();\n\n  // Default rubric levels (7-level system)\n  const defaultLevels = [{\n    level: 'incomplete',\n    name: 'Incomplete',\n    description: 'No submission or unusable',\n    color: '#95a5a6',\n    multiplier: 0\n  }, {\n    level: 'unacceptable',\n    name: 'Unacceptable',\n    description: 'Below minimum standards',\n    color: '#e74c3c',\n    multiplier: 0.3\n  }, {\n    level: 'developing',\n    name: 'Developing',\n    description: 'Approaching standards',\n    color: '#f39c12',\n    multiplier: 0.55\n  }, {\n    level: 'acceptable',\n    name: 'Acceptable (PASS)',\n    description: 'Meets minimum standards',\n    color: '#27ae60',\n    multiplier: 0.7\n  }, {\n    level: 'emerging',\n    name: 'Emerging',\n    description: 'Above standard expectations',\n    color: '#2980b9',\n    multiplier: 0.82\n  }, {\n    level: 'accomplished',\n    name: 'Accomplished',\n    description: 'Strong professional quality',\n    color: '#16a085',\n    multiplier: 0.92\n  }, {\n    level: 'exceptional',\n    name: 'Exceptional',\n    description: 'Outstanding professional quality',\n    color: '#8e44ad',\n    multiplier: 1.0\n  }];\n\n  // Initialize state from shared context or defaults\n  const [rubricData, setRubricData] = useState(() => {\n    if (sharedRubric) {\n      return sharedRubric;\n    }\n    return {\n      assignmentInfo: {\n        title: '',\n        description: '',\n        weight: 25,\n        passingThreshold: 60,\n        totalPoints: 100\n      },\n      rubricLevels: [...defaultLevels],\n      criteria: [{\n        id: 'criterion-1',\n        name: '',\n        description: '',\n        maxPoints: 20,\n        weight: 20,\n        levels: {},\n        feedbackLibrary: {\n          strengths: [],\n          improvements: [],\n          general: []\n        }\n      }]\n    };\n  });\n  const [pointingSystem, setPointingSystem] = useState('multiplier');\n  const [reversedOrder, setReversedOrder] = useState(false);\n  const [showGuide, setShowGuide] = useState(false);\n  const [expandedFeedback, setExpandedFeedback] = useState({});\n  const [modalEditor, setModalEditor] = useState({\n    show: false,\n    title: '',\n    content: '',\n    onSave: null,\n    placeholder: ''\n  });\n  const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n  // Refs for file inputs\n  const importInputRef = useRef(null);\n\n  // Auto-save to shared context whenever rubricData changes\n  useEffect(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout);\n    }\n    const timeoutId = setTimeout(() => {\n      setSharedRubric(rubricData);\n    }, 1000); // Auto-save after 1 second of inactivity\n\n    setAutoSaveTimeout(timeoutId);\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [rubricData, setSharedRubric]);\n\n  // Load shared rubric when it changes externally\n  useEffect(() => {\n    if (sharedRubric && activeTab === 'rubric-creator') {\n      setRubricData(sharedRubric);\n    }\n  }, [sharedRubric, activeTab]);\n\n  // Toggle feedback section expansion\n  const toggleFeedbackExpansion = criterionId => {\n    setExpandedFeedback(prev => ({\n      ...prev,\n      [criterionId]: !prev[criterionId]\n    }));\n  };\n\n  // Launch the modal rich text editor\n  const openModalEditor = (content, title, onSave, placeholder = '') => {\n    setModalEditor({\n      show: true,\n      title,\n      content: content || '',\n      onSave,\n      placeholder\n    });\n  };\n\n  // Close modal editor\n  const closeModalEditor = (save = false) => {\n    if (save && modalEditor.onSave) {\n      modalEditor.onSave(modalEditor.content);\n    }\n    setModalEditor({\n      show: false,\n      title: '',\n      content: '',\n      onSave: null,\n      placeholder: ''\n    });\n  };\n\n  // Update modal content\n  const updateModalContent = content => {\n    setModalEditor(prev => ({\n      ...prev,\n      content\n    }));\n  };\n\n  // Helper function to safely render HTML content in textareas\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Create a temporary div to extract text while preserving some formatting\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlContent;\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // Helper function to convert formatted text back to HTML\n  const convertFormattedTextToHtml = text => {\n    if (!text) return '';\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>').replace(/_(.*?)_/g, '<u>$1</u>').replace(/### (.*?)\\n/g, '<h3>$1</h3>').replace(/• (.*?)\\n/g, '<li>$1</li>').replace(/\\n/g, '<br>').replace(/(<li>.*<\\/li>)/g, '<ul>$1</ul>');\n  };\n\n  // Reset textarea sizes to original dimensions\n  const resetTextareaSizes = () => {\n    const textareas = document.querySelectorAll('textarea');\n    textareas.forEach(textarea => {\n      // Reset to default sizes based on context\n      if (textarea.closest('.assignment-info')) {\n        textarea.style.height = '80px';\n        textarea.style.maxHeight = '200px';\n      } else if (textarea.closest('td')) {\n        // Criterion or level descriptions\n        if (textarea.rows <= 2) {\n          textarea.style.height = '48px';\n          textarea.style.maxHeight = '200px';\n        } else {\n          textarea.style.height = '80px';\n          textarea.style.maxHeight = '300px';\n        }\n      }\n      textarea.style.width = '100%';\n    });\n  };\n\n  // Calculate total points based on current settings\n  const calculateTotalPoints = () => {\n    return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n  };\n\n  // Update assignment info and recalculate total points\n  const updateAssignmentInfo = (field, value) => {\n    setRubricData(prev => {\n      const updated = {\n        ...prev,\n        assignmentInfo: {\n          ...prev.assignmentInfo,\n          [field]: value\n        }\n      };\n\n      // Auto-calculate total points\n      if (field !== 'totalPoints') {\n        updated.assignmentInfo.totalPoints = calculateTotalPoints();\n      }\n      return updated;\n    });\n  };\n\n  // Add new criterion\n  const addCriterion = () => {\n    const newCriterion = {\n      id: `criterion-${Date.now()}`,\n      name: '',\n      description: '',\n      maxPoints: 20,\n      weight: 20,\n      levels: {},\n      feedbackLibrary: {\n        strengths: [],\n        improvements: [],\n        general: []\n      }\n    };\n    setRubricData(prev => ({\n      ...prev,\n      criteria: [...prev.criteria, newCriterion]\n    }));\n  };\n\n  // Remove criterion\n  const removeCriterion = criterionId => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.filter(c => c.id !== criterionId)\n    }));\n  };\n\n  // Update criterion\n  const updateCriterion = (criterionId, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        [field]: value\n      } : criterion)\n    }));\n  };\n\n  // Update criterion level description\n  const updateCriterionLevel = (criterionId, level, field, value) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        levels: {\n          ...criterion.levels,\n          [level]: {\n            ...criterion.levels[level],\n            [field]: value\n          }\n        }\n      } : criterion)\n    }));\n  };\n\n  // Add feedback item to criterion\n  const addFeedbackItem = (criterionId, category, item) => {\n    if (!item || !item.trim()) return;\n    const htmlItem = convertFormattedTextToHtml(item.trim());\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: [...criterion.feedbackLibrary[category], htmlItem]\n        }\n      } : criterion)\n    }));\n  };\n\n  // Remove feedback item\n  const removeFeedbackItem = (criterionId, category, index) => {\n    setRubricData(prev => ({\n      ...prev,\n      criteria: prev.criteria.map(criterion => criterion.id === criterionId ? {\n        ...criterion,\n        feedbackLibrary: {\n          ...criterion.feedbackLibrary,\n          [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n        }\n      } : criterion)\n    }));\n  };\n\n  // Calculate point range for a level\n  const calculatePointRange = (criterion, level) => {\n    const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n    if (!rubricLevel) return '0';\n    if (pointingSystem === 'multiplier') {\n      const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n      return level === 'incomplete' ? '0' : points.toString();\n    } else {\n      var _criterion$levels$lev;\n      // Custom points would be entered directly\n      return ((_criterion$levels$lev = criterion.levels[level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange) || '0';\n    }\n  };\n\n  // Get display levels (potentially reversed)\n  const getDisplayLevels = () => {\n    return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n  };\n\n  // Save rubric to JSON\n  const saveRubric = () => {\n    const dataStr = JSON.stringify(rubricData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Export rubric for grading template\n  const exportForGrading = () => {\n    const exportData = prepareRubricForExport();\n\n    // Save to shared context for grading tool\n    setSharedRubric(exportData);\n\n    // Also download as backup\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Prepare rubric data for export/transfer\n  const prepareRubricForExport = () => {\n    const exportData = {\n      ...rubricData\n    };\n\n    // Ensure all criterion levels have proper point ranges\n    exportData.criteria = exportData.criteria.map(criterion => ({\n      ...criterion,\n      levels: Object.fromEntries(rubricData.rubricLevels.map(level => {\n        var _criterion$levels$lev2;\n        return [level.level, {\n          pointRange: calculatePointRange(criterion, level.level),\n          description: ((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description) || ''\n        }];\n      }))\n    }));\n\n    // Update total points\n    exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n    return exportData;\n  };\n\n  // Transfer to grading tool directly\n  const transferToGrading = () => {\n    const exportData = prepareRubricForExport();\n    transferRubricToGradingWithDetails(exportData);\n  };\n\n  // Import rubric data\n  const importRubric = event => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n\n          // Validate the imported data structure\n          if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n            setRubricData(importedData);\n          } else {\n            alert('Invalid rubric format. Please check the JSON structure.');\n          }\n        } catch (error) {\n          alert('Error loading rubric. Please check the JSON format.');\n          console.error('Import error:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n    // Reset file input\n    event.target.value = '';\n  };\n\n  // Reset to default rubric\n  const resetRubric = () => {\n    if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n      const defaultRubric = {\n        assignmentInfo: {\n          title: '',\n          description: '',\n          weight: 25,\n          passingThreshold: 60,\n          totalPoints: 100\n        },\n        rubricLevels: [...defaultLevels],\n        criteria: [{\n          id: 'criterion-1',\n          name: '',\n          description: '',\n          maxPoints: 20,\n          weight: 20,\n          levels: {},\n          feedbackLibrary: {\n            strengths: [],\n            improvements: [],\n            general: []\n          }\n        }]\n      };\n      setRubricData(defaultRubric);\n    }\n  };\n\n  // Export to HTML\n  const exportToHTML = () => {\n    const displayLevels = getDisplayLevels();\n    const totalPoints = calculateTotalPoints();\n    const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <p style=\"color: #64748b; font-size: 1.1em;\">${renderFormattedContent(rubricData.assignmentInfo.description) || 'No description provided'}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\n                            ${renderFormattedContent(criterion.description) || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => {\n      var _criterion$levels$lev3;\n      return `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${((_criterion$levels$lev3 = criterion.levels[level.level]) === null || _criterion$levels$lev3 === void 0 ? void 0 : _criterion$levels$lev3.description) || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `;\n    }).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-900 text-white p-6 rounded-t-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: \"Professional Rubric Builder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-200\",\n              children: \"Create comprehensive assessment rubrics with detailed criteria and feedback\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetRubric,\n              className: \"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Reset to blank rubric\",\n              children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1152,\n                columnNumber: 33\n              }, this), \"Reset\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1147,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _importInputRef$curre;\n                return (_importInputRef$curre = importInputRef.current) === null || _importInputRef$curre === void 0 ? void 0 : _importInputRef$curre.click();\n              },\n              className: \"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Import existing rubric JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1160,\n                columnNumber: 33\n              }, this), \"Import\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: transferToGrading,\n              className: \"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Transfer rubric directly to grading tool\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1168,\n                columnNumber: 33\n              }, this), \"Use for Grading\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveRubric,\n              className: \"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Save work in progress as JSON file\",\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1176,\n                columnNumber: 33\n              }, this), \"Save Draft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1171,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportForGrading,\n              className: \"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export final rubric for grading template\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1184,\n                columnNumber: 33\n              }, this), \"Export JSON\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1179,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: exportToHTML,\n              className: \"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\",\n              title: \"Export HTML version for distribution\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1192,\n                columnNumber: 33\n              }, this), \"Export HTML\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1187,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 text-green-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1204,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"Auto-saved - Ready for grading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1205,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1203,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1202,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 border border-gray-300 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowGuide(!showGuide),\n            className: \"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\",\n            children: [\"\\uD83D\\uDCD6 Quick Start Guide & Button Functions\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `transform transition-transform ${showGuide ? 'rotate-180' : ''}`,\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1217,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1212,\n            columnNumber: 25\n          }, this), showGuide && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-t border-gray-300 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDD27 Building Your Rubric\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1223,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1225,\n                      columnNumber: 49\n                    }, this), \" Clear all data and start fresh\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1225,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Reset Sizes:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1226,\n                      columnNumber: 49\n                    }, this), \" Return all text boxes to original size\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1226,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Import:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1227,\n                      columnNumber: 49\n                    }, this), \" Load AI-generated or existing rubric files\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1227,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Use for Grading:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1228,\n                      columnNumber: 49\n                    }, this), \" Send directly to grading tool\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1228,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Save Draft:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1229,\n                      columnNumber: 49\n                    }, this), \" Download work-in-progress (JSON)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1229,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export JSON:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1230,\n                      columnNumber: 49\n                    }, this), \" Final rubric for grading template\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1230,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Export HTML:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1231,\n                      columnNumber: 49\n                    }, this), \" Student-friendly display version\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1231,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1224,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1222,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-gray-800 mb-2\",\n                  children: \"\\uD83D\\uDCDD Step-by-Step Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1235,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"space-y-1 text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"1. Fill in assignment details and requirements\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1237,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"2. Add criteria using \\\"Add Criterion\\\" button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1238,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"3. Define level descriptions for each criterion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1239,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"4. Add feedback library items (optional but recommended)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1240,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"5. Use \\\"Use for Grading\\\" to switch to grading tool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1241,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"6. Export HTML for student distribution\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1242,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1236,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1234,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1221,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCA1 Tip:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1248,\n                  columnNumber: 41\n                }, this), \" Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1247,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-800 text-sm mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\uD83D\\uDCDD Rich Text Editing:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1251,\n                  columnNumber: 41\n                }, this), \" Type directly in any description box for quick edits, or click the blue expand button (\\u2922) to open the full editor. Paste formatting from Word or the web is preserved.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1250,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1246,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1220,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-blue-800 mb-4\",\n            children: \"Assignment Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1260,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Assignment Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1263,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: rubricData.assignmentInfo.title,\n                onChange: e => updateAssignmentInfo('title', e.target.value),\n                className: \"w-full p-3 border rounded-lg\",\n                placeholder: \"e.g., Digital Portfolio Project - Final Showcase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1264,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1262,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Weight (% of Final Grade)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1273,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.weight,\n                onChange: e => updateAssignmentInfo('weight', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1274,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1272,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1284,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: renderFormattedContent(rubricData.assignmentInfo.description),\n                  onChange: e => updateAssignmentInfo('description', convertFormattedTextToHtml(e.target.value)),\n                  className: \"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12\",\n                  rows: \"3\",\n                  placeholder: \"Detailed description of assignment requirements and expectations...\",\n                  title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                  style: {\n                    minHeight: '80px',\n                    maxHeight: '200px',\n                    resize: 'both'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1286,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: e => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    openModalEditor(rubricData.assignmentInfo.description, 'Assignment Description', newContent => updateAssignmentInfo('description', newContent), 'Enter detailed assignment description...');\n                  },\n                  className: \"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                  title: \"Open rich text editor\",\n                  children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                    size: 14\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1310,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1295,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1285,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1283,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Passing Threshold (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1315,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: rubricData.assignmentInfo.passingThreshold,\n                onChange: e => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0),\n                className: \"w-full p-3 border rounded-lg\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1316,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1314,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 mb-1\",\n                children: \"Total Points (Auto-calculated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1326,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: calculateTotalPoints(),\n                disabled: true,\n                className: \"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1327,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1325,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1261,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-800 mb-3\",\n            children: \"Point Calculation System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"multiplier\",\n                checked: pointingSystem === 'multiplier',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1342,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Automatic (Recommended):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 37\n                }, this), \" Points calculated using level multipliers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1350,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1341,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"pointSystem\",\n                value: \"custom\",\n                checked: pointingSystem === 'custom',\n                onChange: e => setPointingSystem(e.target.value),\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1355,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Custom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1364,\n                  columnNumber: 37\n                }, this), \" Manually set point ranges for each level\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1363,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1354,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1340,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1338,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border rounded-lg overflow-hidden mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 border-b flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Assessment Criteria Matrix\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1373,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReversedOrder(!reversedOrder),\n                className: \"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm text-white\",\n                title: \"Switch between ascending and descending level order\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1380,\n                  columnNumber: 37\n                }, this), reversedOrder ? 'High→Low' : 'Low→High']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1375,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: resetTextareaSizes,\n                className: \"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm text-white\",\n                title: \"Reset all textarea sizes to original dimensions\",\n                children: [/*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1388,\n                  columnNumber: 37\n                }, this), \"Reset Sizes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1383,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addCriterion,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1395,\n                  columnNumber: 37\n                }, this), \"Add Criterion\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1391,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1374,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1372,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full border-collapse\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-left font-semibold\",\n                    style: {\n                      width: '200px'\n                    },\n                    children: [\"Criterion (\", rubricData.criteria.length, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1405,\n                    columnNumber: 41\n                  }, this), getDisplayLevels().map(level => /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      backgroundColor: level.color + '20',\n                      color: level.color,\n                      minWidth: '150px',\n                      border: `2px solid ${level.color}`\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"font-bold\",\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1419,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs font-normal mt-1 opacity-75\",\n                      children: level.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1420,\n                      columnNumber: 49\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1409,\n                    columnNumber: 45\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-3 text-center font-semibold\",\n                    style: {\n                      width: '80px'\n                    },\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1425,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1404,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1403,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: rubricData.criteria.map((criterion, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 bg-gray-50\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        value: criterion.name,\n                        onChange: e => updateCriterion(criterion.id, 'name', e.target.value),\n                        className: \"w-full p-2 border rounded text-sm font-medium\",\n                        placeholder: `Criterion ${index + 1} name`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1436,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"relative\",\n                        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                          value: renderFormattedContent(criterion.description),\n                          onChange: e => updateCriterion(criterion.id, 'description', convertFormattedTextToHtml(e.target.value)),\n                          className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\",\n                          rows: \"2\",\n                          placeholder: \"Brief description of what this criterion measures\",\n                          title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                          style: {\n                            minHeight: '48px',\n                            maxHeight: '200px',\n                            resize: 'both'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1444,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          onClick: e => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            openModalEditor(criterion.description, `Criterion Description - ${criterion.name || 'Criterion'}`, newContent => updateCriterion(criterion.id, 'description', newContent), 'Enter criterion description...');\n                          },\n                          className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                          title: \"Open rich text editor\",\n                          children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1468,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1453,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1443,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex gap-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex-1\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            className: \"text-xs text-gray-600\",\n                            children: \"Max Points\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1473,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"number\",\n                            value: criterion.maxPoints,\n                            onChange: e => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0),\n                            className: \"w-full p-1 border rounded text-sm\",\n                            min: \"0\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1474,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1472,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1471,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1435,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1434,\n                    columnNumber: 45\n                  }, this), getDisplayLevels().map(level => {\n                    var _criterion$levels$lev4, _criterion$levels$lev6;\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-3 align-top\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-bold text-sm px-2 py-1 rounded\",\n                            style: {\n                              color: level.color,\n                              backgroundColor: level.color + '20'\n                            },\n                            children: [calculatePointRange(criterion, level.level), \" pts\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1491,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1490,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"relative\",\n                          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                            value: renderFormattedContent(((_criterion$levels$lev4 = criterion.levels[level.level]) === null || _criterion$levels$lev4 === void 0 ? void 0 : _criterion$levels$lev4.description) || ''),\n                            onChange: e => updateCriterionLevel(criterion.id, level.level, 'description', convertFormattedTextToHtml(e.target.value)),\n                            className: \"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\",\n                            rows: \"4\",\n                            placeholder: `Describe ${level.name.toLowerCase()} performance...`,\n                            title: \"Type here for quick editing, or click the expand button for rich text editor\",\n                            style: {\n                              minHeight: '80px',\n                              maxHeight: '300px',\n                              resize: 'both'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1502,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"button\",\n                            onClick: e => {\n                              var _criterion$levels$lev5;\n                              e.preventDefault();\n                              e.stopPropagation();\n                              openModalEditor(((_criterion$levels$lev5 = criterion.levels[level.level]) === null || _criterion$levels$lev5 === void 0 ? void 0 : _criterion$levels$lev5.description) || '', `${level.name} Level - ${criterion.name || 'Criterion'}`, newContent => updateCriterionLevel(criterion.id, level.level, 'description', newContent), `Enter ${level.name.toLowerCase()} level description...`);\n                            },\n                            className: \"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\",\n                            title: \"Open rich text editor\",\n                            children: /*#__PURE__*/_jsxDEV(Maximize2, {\n                              size: 12\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1526,\n                              columnNumber: 65\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1511,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1501,\n                          columnNumber: 57\n                        }, this), pointingSystem === 'custom' && /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: ((_criterion$levels$lev6 = criterion.levels[level.level]) === null || _criterion$levels$lev6 === void 0 ? void 0 : _criterion$levels$lev6.pointRange) || '',\n                          onChange: e => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value),\n                          className: \"w-full p-1 border rounded text-xs text-center\",\n                          placeholder: \"e.g., 18-20\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1530,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1489,\n                        columnNumber: 53\n                      }, this)\n                    }, level.level, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1488,\n                      columnNumber: 49\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-3 text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeCriterion(criterion.id),\n                      className: \"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\",\n                      disabled: rubricData.criteria.length === 1,\n                      title: rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1550,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1544,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1543,\n                    columnNumber: 45\n                  }, this)]\n                }, criterion.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1432,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1430,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1402,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1401,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1371,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-4\",\n            children: \"\\uD83D\\uDCDD Feedback Libraries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1562,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-4\",\n            children: \"Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1563,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: rubricData.criteria.map(criterion => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleFeedbackExpansion(criterion.id),\n                className: \"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-semibold text-gray-800\",\n                    children: [criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`, \" - Feedback Library\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1573,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 mt-1\",\n                    children: [criterion.feedbackLibrary.strengths.length + criterion.feedbackLibrary.improvements.length + criterion.feedbackLibrary.general.length, \" feedback items stored\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1576,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1572,\n                  columnNumber: 41\n                }, this), expandedFeedback[criterion.id] ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1583,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 20,\n                  className: \"text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1585,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1568,\n                columnNumber: 37\n              }, this), expandedFeedback[criterion.id] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n                  children: ['strengths', 'improvements', 'general'].map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"text-sm font-medium text-gray-700 capitalize\",\n                        children: [category === 'strengths' ? '👍 Strengths' : category === 'improvements' ? '🔧 Improvements' : '💬 General', \" Comments\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1595,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => {\n                          const newComment = prompt(`Add ${category} comment:`);\n                          if (newComment && newComment.trim()) {\n                            addFeedbackItem(criterion.id, category, newComment.trim());\n                          }\n                        },\n                        className: \"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\",\n                        children: \"+ Add\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1600,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1594,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-2 max-h-48 overflow-y-auto\",\n                      children: [criterion.feedbackLibrary[category].map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-start gap-2 text-xs\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\",\n                          onClick: () => {\n                            openModalEditor(item, `${category} Comment`, newContent => {\n                              const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                              updatedFeedback[index] = newContent;\n                              setRubricData(prev => ({\n                                ...prev,\n                                criteria: prev.criteria.map(c => c.id === criterion.id ? {\n                                  ...c,\n                                  feedbackLibrary: {\n                                    ...c.feedbackLibrary,\n                                    [category]: updatedFeedback\n                                  }\n                                } : c)\n                              }));\n                            }, `Enter ${category} feedback comment...`);\n                          },\n                          title: \"Click to edit\",\n                          style: {\n                            resize: 'both',\n                            minHeight: '40px'\n                          },\n                          children: renderFormattedContent(item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1615,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => removeFeedbackItem(criterion.id, category, index),\n                          className: \"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\",\n                          title: \"Remove this comment\",\n                          children: /*#__PURE__*/_jsxDEV(X, {\n                            size: 12\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1652,\n                            columnNumber: 73\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1647,\n                          columnNumber: 69\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1614,\n                        columnNumber: 65\n                      }, this)), criterion.feedbackLibrary[category].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\",\n                        children: [\"No \", category, \" comments yet - click \\\"Add\\\" to create some\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1657,\n                        columnNumber: 65\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1612,\n                      columnNumber: 57\n                    }, this)]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1593,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1591,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1590,\n                columnNumber: 41\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1567,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1565,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1561,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-3\",\n            children: \"\\uD83D\\uDCCA Achievement Level Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1674,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1675,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\",\n            children: getDisplayLevels().map(level => {\n              const totalPoints = calculateTotalPoints();\n              const pointsForLevel = Math.round(totalPoints * level.multiplier);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\",\n                style: {\n                  borderColor: level.color,\n                  backgroundColor: level.color + '15'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-sm\",\n                  style: {\n                    color: level.color\n                  },\n                  children: level.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1692,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-lg font-bold mt-1\",\n                  style: {\n                    color: level.color\n                  },\n                  children: [pointsForLevel, \"+\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1695,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-600\",\n                  children: totalPoints > 0 ? `${Math.round(pointsForLevel / totalPoints * 100)}%+` : '-%'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1698,\n                  columnNumber: 41\n                }, this)]\n              }, level.level, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1684,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1679,\n            columnNumber: 25\n          }, this), calculateTotalPoints() === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-yellow-800 text-sm\",\n              children: \"Add criteria with point values to see the achievement level breakdown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1708,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1707,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1673,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: importInputRef,\n        type: \"file\",\n        accept: \".json\",\n        onChange: importRubric,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1717,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(EditorModal, {\n      isOpen: modalEditor.show,\n      onClose: closeModalEditor,\n      title: modalEditor.title,\n      content: modalEditor.content,\n      onChange: updateModalContent,\n      placeholder: modalEditor.placeholder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1727,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1137,\n    columnNumber: 9\n  }, this);\n};\n_s3(RubricCreator, \"AwzQRaFe8eGpbdlpLfF0X4e+WTE=\", false, function () {\n  return [useAssessment];\n});\n_c4 = RubricCreator;\nexport default RubricCreator;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"SimpleRichTextEditor$React.forwardRef\");\n$RefreshReg$(_c2, \"SimpleRichTextEditor\");\n$RefreshReg$(_c3, \"EditorModal\");\n$RefreshReg$(_c4, \"RubricCreator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","createPortal","Plus","X","Upload","Download","Save","FileText","RotateCcw","ChevronDown","ChevronUp","Maximize2","ArrowRight","Minimize2","useAssessment","jsxDEV","_jsxDEV","SimpleRichTextEditor","_s","forwardRef","_c","value","onChange","placeholder","ref","editorRef","isEditorReady","setIsEditorReady","current","innerHTML","handlePaste","e","preventDefault","clipboard","clipboardData","htmlData","getData","textData","cleanContent","sanitizeHtml","replace","focus","document","queryCommandSupported","execCommand","selection","window","getSelection","rangeCount","range","getRangeAt","deleteContents","tempDiv","createElement","fragment","createDocumentFragment","firstChild","appendChild","insertNode","html","cleanedHtml","removeAttributes","element","nodeType","Node","ELEMENT_NODE","attributesToRemove","i","attributes","length","attr","name","startsWith","push","forEach","attrName","removeAttribute","Array","from","children","child","convertWordLists","container","paragraphs","querySelectorAll","currentList","currentListType","p","_p$className","text","textContent","trim","isListItem","match","style","marginLeft","className","includes","isOrdered","listType","parentNode","insertBefore","li","cleanText","remove","allowedTags","cleanNode","node","TEXT_NODE","createTextNode","tagName","toLowerCase","newNode","childNodes","cleanedChild","cleanedContainer","finalHtml","handleInput","formatText","command","setTimeout","success","console","warn","error","handleKeyDown","ctrlKey","metaKey","key","type","onMouseDown","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","contentEditable","onInput","onPaste","onKeyDown","lineHeight","wordWrap","overflowWrap","dangerouslySetInnerHTML","__html","suppressContentEditableWarning","jsx","_c2","displayName","EditorModal","isOpen","onClose","content","_s2","richTextContentRef","handleEscape","addEventListener","body","overflow","removeEventListener","handleBackdropClick","target","currentTarget","stopPropagation","size","_c3","RubricCreator","_s3","sharedRubric","setSharedRubric","transferRubricToGradingWithDetails","activeTab","defaultLevels","level","description","color","multiplier","rubricData","setRubricData","assignmentInfo","weight","passingThreshold","totalPoints","rubricLevels","criteria","id","maxPoints","levels","feedbackLibrary","strengths","improvements","general","pointingSystem","setPointingSystem","reversedOrder","setReversedOrder","showGuide","setShowGuide","expandedFeedback","setExpandedFeedback","modalEditor","setModalEditor","show","onSave","autoSaveTimeout","setAutoSaveTimeout","importInputRef","clearTimeout","timeoutId","toggleFeedbackExpansion","criterionId","prev","openModalEditor","closeModalEditor","save","updateModalContent","renderFormattedContent","htmlContent","convertFormattedTextToHtml","resetTextareaSizes","textareas","textarea","closest","height","maxHeight","rows","width","calculateTotalPoints","reduce","total","criterion","updateAssignmentInfo","field","updated","addCriterion","newCriterion","Date","now","removeCriterion","filter","c","updateCriterion","map","updateCriterionLevel","addFeedbackItem","category","item","htmlItem","removeFeedbackItem","index","_","calculatePointRange","rubricLevel","find","l","points","Math","round","toString","_criterion$levels$lev","pointRange","getDisplayLevels","reverse","saveRubric","dataStr","JSON","stringify","dataBlob","Blob","url","URL","createObjectURL","link","href","download","toISOString","split","click","revokeObjectURL","exportForGrading","exportData","prepareRubricForExport","Object","fromEntries","_criterion$levels$lev2","transferToGrading","importRubric","event","file","files","reader","FileReader","onload","importedData","parse","result","alert","readAsText","resetRubric","confirm","defaultRubric","exportToHTML","displayLevels","join","_criterion$levels$lev3","toFixed","toLocaleDateString","weekday","year","month","day","hour","minute","htmlBlob","_importInputRef$curre","parseInt","min","max","minHeight","resize","newContent","disabled","checked","backgroundColor","minWidth","border","_criterion$levels$lev4","_criterion$levels$lev6","_criterion$levels$lev5","indexOf","newComment","prompt","updatedFeedback","pointsForLevel","borderColor","accept","_c4","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/RubricCreator.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Plus, X, Upload, Download, Save, FileText, RotateCcw, ChevronDown, ChevronUp, Maximize2, ArrowRight, Minimize2 } from 'lucide-react';\nimport { useAssessment } from './SharedContext';\n\n// Simple Rich Text Editor Component to replace the problematic ReactQuill\nconst SimpleRichTextEditor = React.forwardRef(({ value, onChange, placeholder }, ref) => {\n    const editorRef = useRef(null);\n    const [isEditorReady, setIsEditorReady] = useState(false);\n\n    useEffect(() => {\n        if (editorRef.current) {\n            setIsEditorReady(true);\n            // Set initial content\n            if (value && editorRef.current.innerHTML !== value) {\n                editorRef.current.innerHTML = value || '';\n            }\n        }\n    }, [value]);\n\n    const handlePaste = (e) => {\n        e.preventDefault();\n        const clipboard = e.clipboardData;\n        const htmlData = clipboard.getData('text/html');\n        const textData = clipboard.getData('text/plain');\n\n        let cleanContent;\n        if (htmlData) {\n            // Enhanced HTML sanitization - preserve more formatting including lists\n            cleanContent = sanitizeHtml(htmlData);\n        } else {\n            // Convert plain text to HTML, preserving line breaks\n            cleanContent = textData\n                .replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\\r\\n|\\r|\\n/g, '<br>');\n        }\n\n        // Focus the editor first\n        editorRef.current.focus();\n        \n        // Insert the content\n        if (document.queryCommandSupported('insertHTML')) {\n            document.execCommand('insertHTML', false, cleanContent);\n        } else {\n            // Fallback for browsers that don't support insertHTML\n            const selection = window.getSelection();\n            if (selection.rangeCount > 0) {\n                const range = selection.getRangeAt(0);\n                range.deleteContents();\n                const tempDiv = document.createElement('div');\n                tempDiv.innerHTML = cleanContent;\n                const fragment = document.createDocumentFragment();\n                while (tempDiv.firstChild) {\n                    fragment.appendChild(tempDiv.firstChild);\n                }\n                range.insertNode(fragment);\n            }\n        }\n        \n        // Trigger onChange\n        if (onChange) {\n            onChange(editorRef.current.innerHTML);\n        }\n    };\n\n    const sanitizeHtml = (html) => {\n        // First, remove all style blocks, comments, and Microsoft Word specific content\n        let cleanedHtml = html\n            // Remove HTML comments (including the massive style block from Word)\n            .replace(/<!--[\\s\\S]*?-->/g, '')\n            // Remove style tags and their content\n            .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\n            // Remove script tags and their content\n            .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\n            // Remove XML declarations and Office-specific tags\n            .replace(/<\\?xml[^>]*>/gi, '')\n            .replace(/<\\/?o:p[^>]*>/gi, '')\n            .replace(/<\\/?v:[^>]*>/gi, '')\n            .replace(/<\\/?w:[^>]*>/gi, '')\n            // Remove Microsoft Word conditional comments\n            .replace(/<!--\\[if[^>]*>[\\s\\S]*?<!\\[endif\\]-->/gi, '');\n\n        // Create a temporary container\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = cleanedHtml;\n        \n        // Remove all style attributes and Microsoft Office attributes\n        const removeAttributes = (element) => {\n            if (element.nodeType === Node.ELEMENT_NODE) {\n                // Get all attributes to remove\n                const attributesToRemove = [];\n                for (let i = 0; i < element.attributes.length; i++) {\n                    const attr = element.attributes[i];\n                    // Remove style attributes, class attributes, and any mso-* attributes\n                    if (attr.name === 'style' || \n                        attr.name === 'class' || \n                        attr.name.startsWith('mso-') ||\n                        attr.name.startsWith('data-') ||\n                        attr.name === 'lang' ||\n                        attr.name === 'dir') {\n                        attributesToRemove.push(attr.name);\n                    }\n                }\n                \n                // Remove the attributes\n                attributesToRemove.forEach(attrName => {\n                    element.removeAttribute(attrName);\n                });\n                \n                // Recursively clean child elements\n                Array.from(element.children).forEach(child => {\n                    removeAttributes(child);\n                });\n            }\n        };\n        \n        removeAttributes(tempDiv);\n        \n        // Convert Microsoft Word's complex list structures to simple HTML lists\n        const convertWordLists = (container) => {\n            // Find paragraphs that are actually list items (they contain bullet symbols or are indented)\n            const paragraphs = container.querySelectorAll('p');\n            let currentList = null;\n            let currentListType = null;\n            \n            paragraphs.forEach(p => {\n                const text = p.textContent.trim();\n                const isListItem = text.startsWith('·') || \n                                 text.startsWith('•') || \n                                 text.startsWith('-') ||\n                                 text.match(/^\\d+\\./) ||\n                                 p.style.marginLeft ||\n                                 p.className?.includes('List');\n                \n                if (isListItem) {\n                    // Determine if it's ordered or unordered\n                    const isOrdered = text.match(/^\\d+\\./);\n                    const listType = isOrdered ? 'ol' : 'ul';\n                    \n                    // Create new list if needed\n                    if (!currentList || currentListType !== listType) {\n                        currentList = document.createElement(listType);\n                        currentListType = listType;\n                        p.parentNode.insertBefore(currentList, p);\n                    }\n                    \n                    // Create list item\n                    const li = document.createElement('li');\n                    \n                    // Clean the text (remove bullet symbols and extra spacing)\n                    let cleanText = text\n                        .replace(/^[·•\\-]\\s*/, '') // Remove bullet symbols\n                        .replace(/^\\d+\\.\\s*/, '') // Remove number prefix\n                        .trim();\n                    \n                    // Move the paragraph content to the list item\n                    li.innerHTML = cleanText;\n                    currentList.appendChild(li);\n                    \n                    // Remove the original paragraph\n                    p.remove();\n                } else {\n                    // Reset list tracking for non-list content\n                    currentList = null;\n                    currentListType = null;\n                }\n            });\n        };\n        \n        convertWordLists(tempDiv);\n        \n        // Define allowed tags\n        const allowedTags = ['b', 'i', 'u', 'strong', 'em', 'p', 'br', 'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n        \n        // Function to recursively clean nodes and remove disallowed tags\n        const cleanNode = (node) => {\n            if (node.nodeType === Node.TEXT_NODE) {\n                // Clean up text content - remove extra whitespace\n                const cleanText = node.textContent.replace(/\\s+/g, ' ').trim();\n                return cleanText ? document.createTextNode(cleanText) : null;\n            }\n            \n            if (node.nodeType === Node.ELEMENT_NODE) {\n                const tagName = node.tagName.toLowerCase();\n                \n                if (allowedTags.includes(tagName)) {\n                    const newNode = document.createElement(tagName);\n                    \n                    // Recursively clean children\n                    Array.from(node.childNodes).forEach(child => {\n                        const cleanedChild = cleanNode(child);\n                        if (cleanedChild) {\n                            newNode.appendChild(cleanedChild);\n                        }\n                    });\n                    \n                    // Only return the node if it has content\n                    return newNode.textContent.trim() || newNode.children.length > 0 ? newNode : null;\n                } else {\n                    // For disallowed tags (like div, span), extract their children\n                    const fragment = document.createDocumentFragment();\n                    Array.from(node.childNodes).forEach(child => {\n                        const cleanedChild = cleanNode(child);\n                        if (cleanedChild) {\n                            fragment.appendChild(cleanedChild);\n                        }\n                    });\n                    return fragment.childNodes.length > 0 ? fragment : null;\n                }\n            }\n            \n            return null;\n        };\n        \n        const cleanedContainer = document.createElement('div');\n        Array.from(tempDiv.childNodes).forEach(child => {\n            const cleanedChild = cleanNode(child);\n            if (cleanedChild) {\n                cleanedContainer.appendChild(cleanedChild);\n            }\n        });\n        \n        // Final cleanup - remove empty paragraphs and normalize spacing\n        const finalHtml = cleanedContainer.innerHTML\n            .replace(/<p[^>]*>\\s*<\\/p>/g, '') // Remove empty paragraphs\n            .replace(/\\n\\s*\\n/g, '\\n') // Remove multiple line breaks\n            .replace(/(<\\/[^>]+>)\\s+(<[^>]+>)/g, '$1$2') // Remove spaces between tags\n            .trim();\n        \n        return finalHtml;\n    };\n\n    const handleInput = () => {\n        if (onChange && editorRef.current) {\n            onChange(editorRef.current.innerHTML);\n        }\n    };\n\n    const formatText = (command, value = null) => {\n        // Focus the editor first to ensure commands work\n        if (editorRef.current) {\n            editorRef.current.focus();\n            \n            // Small delay to ensure focus is set\n            setTimeout(() => {\n                try {\n                    const success = document.execCommand(command, false, value);\n                    if (!success) {\n                        console.warn(`Command ${command} not successful`);\n                    }\n                    \n                    // Trigger onChange after formatting\n                    if (onChange && editorRef.current) {\n                        onChange(editorRef.current.innerHTML);\n                    }\n                } catch (error) {\n                    console.error(`Error executing command ${command}:`, error);\n                }\n            }, 10);\n        }\n    };\n\n    const handleKeyDown = (e) => {\n        // Handle some common keyboard shortcuts\n        if (e.ctrlKey || e.metaKey) {\n            switch (e.key) {\n                case 'b':\n                    e.preventDefault();\n                    formatText('bold');\n                    break;\n                case 'i':\n                    e.preventDefault();\n                    formatText('italic');\n                    break;\n                case 'u':\n                    e.preventDefault();\n                    formatText('underline');\n                    break;\n            }\n        }\n    };\n\n    return (\n        <div className=\"simple-rich-text-editor border border-gray-300 rounded-lg overflow-hidden\">\n            {/* Toolbar */}\n            <div className=\"bg-gray-50 border-b border-gray-300 p-2 flex gap-2 flex-wrap\">\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()} // Prevent focus loss\n                    onClick={() => formatText('bold')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors\"\n                    title=\"Bold (Ctrl+B)\"\n                >\n                    B\n                </button>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('italic')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm italic transition-colors\"\n                    title=\"Italic (Ctrl+I)\"\n                >\n                    I\n                </button>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('underline')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm underline transition-colors\"\n                    title=\"Underline (Ctrl+U)\"\n                >\n                    U\n                </button>\n                <div className=\"w-px bg-gray-300\"></div>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('formatBlock', 'h3')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm font-bold transition-colors\"\n                    title=\"Heading 3\"\n                >\n                    H3\n                </button>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('formatBlock', 'p')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\"\n                    title=\"Paragraph\"\n                >\n                    P\n                </button>\n                <div className=\"w-px bg-gray-300\"></div>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('insertUnorderedList')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\"\n                    title=\"Bullet List\"\n                >\n                    • List\n                </button>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('insertOrderedList')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\"\n                    title=\"Numbered List\"\n                >\n                    1. List\n                </button>\n                <div className=\"w-px bg-gray-300\"></div>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('outdent')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\"\n                    title=\"Decrease Indent\"\n                >\n                    ←\n                </button>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('indent')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm transition-colors\"\n                    title=\"Increase Indent\"\n                >\n                    →\n                </button>\n                <div className=\"w-px bg-gray-300\"></div>\n                <button\n                    type=\"button\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    onClick={() => formatText('removeFormat')}\n                    className=\"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm text-red-600 transition-colors\"\n                    title=\"Clear Formatting\"\n                >\n                    Clear\n                </button>\n            </div>\n\n            {/* Editor Content */}\n            <div\n                ref={editorRef}\n                contentEditable\n                onInput={handleInput}\n                onPaste={handlePaste}\n                onKeyDown={handleKeyDown}\n                className=\"p-4 min-h-[200px] max-h-[400px] overflow-y-auto focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20\"\n                style={{ \n                    lineHeight: '1.5',\n                    wordWrap: 'break-word',\n                    overflowWrap: 'break-word'\n                }}\n                dangerouslySetInnerHTML={{ __html: value || '' }}\n                suppressContentEditableWarning={true}\n                data-placeholder={placeholder}\n            />\n\n            {/* Enhanced styling for lists and editor */}\n            <style jsx>{`\n                [contenteditable]:empty:before {\n                    content: attr(data-placeholder);\n                    color: #9ca3af;\n                    font-style: italic;\n                    pointer-events: none;\n                }\n                [contenteditable]:focus:before {\n                    content: none;\n                }\n                [contenteditable] ul {\n                    list-style-type: disc;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] ol {\n                    list-style-type: decimal;\n                    margin-left: 1.5em;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] li {\n                    margin-bottom: 0.25em;\n                }\n                [contenteditable] h3 {\n                    font-size: 1.25em;\n                    font-weight: bold;\n                    margin-top: 0.5em;\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p {\n                    margin-bottom: 0.5em;\n                }\n                [contenteditable] p:last-child {\n                    margin-bottom: 0;\n                }\n            `}</style>\n        </div>\n    );\n});\n\nSimpleRichTextEditor.displayName = 'SimpleRichTextEditor';\n\n// Modal component for the rich text editor\nconst EditorModal = ({ isOpen, onClose, title, content, onChange, placeholder }) => {\n    const richTextContentRef = useRef('');\n    const editorRef = useRef(null);\n\n    // Handle escape key\n    useEffect(() => {\n        const handleEscape = (e) => {\n            if (e.key === 'Escape') {\n                onClose(false);\n            }\n        };\n\n        if (isOpen) {\n            document.addEventListener('keydown', handleEscape);\n            // Prevent body scroll when modal is open\n            document.body.style.overflow = 'hidden';\n        }\n\n        return () => {\n            document.removeEventListener('keydown', handleEscape);\n            document.body.style.overflow = 'unset';\n        };\n    }, [isOpen, onClose]);\n\n    // Handle backdrop click\n    const handleBackdropClick = (e) => {\n        if (e.target === e.currentTarget) {\n            onClose(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return createPortal(\n        <div \n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\"\n            onClick={handleBackdropClick}\n        >\n            <div \n                className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\"\n                onClick={(e) => e.stopPropagation()}\n            >\n                {/* Green Header */}\n                <div className=\"flex justify-between items-center p-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-t-lg\">\n                    <h2 className=\"text-xl font-semibold flex items-center gap-2\">\n                        <Maximize2 size={24} />\n                        Rich Text Editor: {title}\n                    </h2>\n                    <button\n                        onClick={() => onClose(false)}\n                        className=\"text-white hover:text-gray-200 transition-colors p-1 rounded\"\n                        title=\"Close (Esc)\"\n                    >\n                        <X size={24} />\n                    </button>\n                </div>\n\n                {/* Scrollable Content Area */}\n                <div className=\"flex-1 p-6 overflow-y-auto\">\n                    <SimpleRichTextEditor\n                        ref={editorRef}\n                        value={content}\n                        onChange={(html) => {\n                            richTextContentRef.current = html;\n                            onChange(html);\n                        }}\n                        placeholder={placeholder || \"Enter your content here...\"}\n                    />\n                </div>\n\n                {/* Green Footer */}\n                <div className=\"p-4 bg-gradient-to-r from-green-50 to-green-100 border-t border-green-200 rounded-b-lg\">\n                    <div className=\"flex justify-between items-center\">\n                        <div className=\"flex items-center gap-4 text-sm text-green-800\">\n                            <span className=\"flex items-center gap-2\">\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                                Rich Text Editor Active\n                            </span>\n                            <span>Paste rich text from Word, web pages, or other sources</span>\n                        </div>\n                        <div className=\"flex gap-2\">\n                            <button\n                                onClick={() => onClose(true)}\n                                className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-md\"\n                            >\n                                <Save size={16} />\n                                Save & Close\n                            </button>\n                            <button\n                                onClick={() => onClose(false)}\n                                className=\"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-md\"\n                            >\n                                <X size={16} />\n                                Cancel\n                            </button>\n                        </div>\n                    </div>\n                    <div className=\"mt-2 text-xs text-green-700\">\n                        <strong>Features:</strong> Bold, Italic, Underline, Headers, Lists, Indentation | \n                        <strong> Shortcuts:</strong> Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+U (Underline), Esc (Close)\n                    </div>\n                </div>\n            </div>\n        </div>,\n        document.body\n    );\n};\n\nconst RubricCreator = () => {\n    // Get shared context functions and state\n    const {\n        sharedRubric,\n        setSharedRubric,\n        transferRubricToGradingWithDetails,\n        activeTab\n    } = useAssessment();\n\n    // Default rubric levels (7-level system)\n    const defaultLevels = [\n        { level: 'incomplete', name: 'Incomplete', description: 'No submission or unusable', color: '#95a5a6', multiplier: 0 },\n        { level: 'unacceptable', name: 'Unacceptable', description: 'Below minimum standards', color: '#e74c3c', multiplier: 0.3 },\n        { level: 'developing', name: 'Developing', description: 'Approaching standards', color: '#f39c12', multiplier: 0.55 },\n        { level: 'acceptable', name: 'Acceptable (PASS)', description: 'Meets minimum standards', color: '#27ae60', multiplier: 0.7 },\n        { level: 'emerging', name: 'Emerging', description: 'Above standard expectations', color: '#2980b9', multiplier: 0.82 },\n        { level: 'accomplished', name: 'Accomplished', description: 'Strong professional quality', color: '#16a085', multiplier: 0.92 },\n        { level: 'exceptional', name: 'Exceptional', description: 'Outstanding professional quality', color: '#8e44ad', multiplier: 1.0 }\n    ];\n\n    // Initialize state from shared context or defaults\n    const [rubricData, setRubricData] = useState(() => {\n        if (sharedRubric) {\n            return sharedRubric;\n        }\n        return {\n            assignmentInfo: {\n                title: '',\n                description: '',\n                weight: 25,\n                passingThreshold: 60,\n                totalPoints: 100\n            },\n            rubricLevels: [...defaultLevels],\n            criteria: [\n                {\n                    id: 'criterion-1',\n                    name: '',\n                    description: '',\n                    maxPoints: 20,\n                    weight: 20,\n                    levels: {},\n                    feedbackLibrary: {\n                        strengths: [],\n                        improvements: [],\n                        general: []\n                    }\n                }\n            ]\n        };\n    });\n\n    const [pointingSystem, setPointingSystem] = useState('multiplier');\n    const [reversedOrder, setReversedOrder] = useState(false);\n    const [showGuide, setShowGuide] = useState(false);\n    const [expandedFeedback, setExpandedFeedback] = useState({});\n    const [modalEditor, setModalEditor] = useState({\n        show: false,\n        title: '',\n        content: '',\n        onSave: null,\n        placeholder: ''\n    });\n    const [autoSaveTimeout, setAutoSaveTimeout] = useState(null);\n\n    // Refs for file inputs\n    const importInputRef = useRef(null);\n\n    // Auto-save to shared context whenever rubricData changes\n    useEffect(() => {\n        if (autoSaveTimeout) {\n            clearTimeout(autoSaveTimeout);\n        }\n\n        const timeoutId = setTimeout(() => {\n            setSharedRubric(rubricData);\n        }, 1000); // Auto-save after 1 second of inactivity\n\n        setAutoSaveTimeout(timeoutId);\n\n        return () => {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n        };\n    }, [rubricData, setSharedRubric]);\n\n    // Load shared rubric when it changes externally\n    useEffect(() => {\n        if (sharedRubric && activeTab === 'rubric-creator') {\n            setRubricData(sharedRubric);\n        }\n    }, [sharedRubric, activeTab]);\n\n    // Toggle feedback section expansion\n    const toggleFeedbackExpansion = (criterionId) => {\n        setExpandedFeedback(prev => ({\n            ...prev,\n            [criterionId]: !prev[criterionId]\n        }));\n    };\n\n    // Launch the modal rich text editor\n    const openModalEditor = (content, title, onSave, placeholder = '') => {\n        setModalEditor({\n            show: true,\n            title,\n            content: content || '',\n            onSave,\n            placeholder\n        });\n    };\n\n    // Close modal editor\n    const closeModalEditor = (save = false) => {\n        if (save && modalEditor.onSave) {\n            modalEditor.onSave(modalEditor.content);\n        }\n\n        setModalEditor({\n            show: false,\n            title: '',\n            content: '',\n            onSave: null,\n            placeholder: ''\n        });\n    };\n\n    // Update modal content\n    const updateModalContent = (content) => {\n        setModalEditor(prev => ({ ...prev, content }));\n    };\n\n    // Helper function to safely render HTML content in textareas\n    const renderFormattedContent = (htmlContent) => {\n        if (!htmlContent) return '';\n        \n        // Create a temporary div to extract text while preserving some formatting\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = htmlContent;\n        \n        // Convert basic HTML to readable text format\n        let textContent = htmlContent\n            .replace(/<br\\s*\\/?>/gi, '\\n')\n            .replace(/<\\/p>/gi, '\\n')\n            .replace(/<p[^>]*>/gi, '')\n            .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\n            .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\n            .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\n            .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\n            .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\n            .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\n            .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\n            .replace(/<\\/ul>/gi, '\\n')\n            .replace(/<ul[^>]*>/gi, '')\n            .replace(/<\\/ol>/gi, '\\n')\n            .replace(/<ol[^>]*>/gi, '')\n            .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n            .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n            .trim();\n            \n        return textContent;\n    };\n\n    // Helper function to convert formatted text back to HTML\n    const convertFormattedTextToHtml = (text) => {\n        if (!text) return '';\n        \n        return text\n            .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n            .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n            .replace(/_(.*?)_/g, '<u>$1</u>')\n            .replace(/### (.*?)\\n/g, '<h3>$1</h3>')\n            .replace(/• (.*?)\\n/g, '<li>$1</li>')\n            .replace(/\\n/g, '<br>')\n            .replace(/(<li>.*<\\/li>)/g, '<ul>$1</ul>');\n    };\n\n    // Reset textarea sizes to original dimensions\n    const resetTextareaSizes = () => {\n        const textareas = document.querySelectorAll('textarea');\n        textareas.forEach(textarea => {\n            // Reset to default sizes based on context\n            if (textarea.closest('.assignment-info')) {\n                textarea.style.height = '80px';\n                textarea.style.maxHeight = '200px';\n            } else if (textarea.closest('td')) {\n                // Criterion or level descriptions\n                if (textarea.rows <= 2) {\n                    textarea.style.height = '48px';\n                    textarea.style.maxHeight = '200px';\n                } else {\n                    textarea.style.height = '80px';\n                    textarea.style.maxHeight = '300px';\n                }\n            }\n            textarea.style.width = '100%';\n        });\n    };\n\n    // Calculate total points based on current settings\n    const calculateTotalPoints = () => {\n        return rubricData.criteria.reduce((total, criterion) => total + criterion.maxPoints, 0);\n    };\n\n    // Update assignment info and recalculate total points\n    const updateAssignmentInfo = (field, value) => {\n        setRubricData(prev => {\n            const updated = {\n                ...prev,\n                assignmentInfo: { ...prev.assignmentInfo, [field]: value }\n            };\n\n            // Auto-calculate total points\n            if (field !== 'totalPoints') {\n                updated.assignmentInfo.totalPoints = calculateTotalPoints();\n            }\n\n            return updated;\n        });\n    };\n\n    // Add new criterion\n    const addCriterion = () => {\n        const newCriterion = {\n            id: `criterion-${Date.now()}`,\n            name: '',\n            description: '',\n            maxPoints: 20,\n            weight: 20,\n            levels: {},\n            feedbackLibrary: {\n                strengths: [],\n                improvements: [],\n                general: []\n            }\n        };\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: [...prev.criteria, newCriterion]\n        }));\n    };\n\n    // Remove criterion\n    const removeCriterion = (criterionId) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.filter(c => c.id !== criterionId)\n        }));\n    };\n\n    // Update criterion\n    const updateCriterion = (criterionId, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? { ...criterion, [field]: value }\n                    : criterion\n            )\n        }));\n    };\n\n    // Update criterion level description\n    const updateCriterionLevel = (criterionId, level, field, value) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        levels: {\n                            ...criterion.levels,\n                            [level]: {\n                                ...criterion.levels[level],\n                                [field]: value\n                            }\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Add feedback item to criterion\n    const addFeedbackItem = (criterionId, category, item) => {\n        if (!item || !item.trim()) return;\n\n        const htmlItem = convertFormattedTextToHtml(item.trim());\n\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: [...criterion.feedbackLibrary[category], htmlItem]\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Remove feedback item\n    const removeFeedbackItem = (criterionId, category, index) => {\n        setRubricData(prev => ({\n            ...prev,\n            criteria: prev.criteria.map(criterion =>\n                criterion.id === criterionId\n                    ? {\n                        ...criterion,\n                        feedbackLibrary: {\n                            ...criterion.feedbackLibrary,\n                            [category]: criterion.feedbackLibrary[category].filter((_, i) => i !== index)\n                        }\n                    }\n                    : criterion\n            )\n        }));\n    };\n\n    // Calculate point range for a level\n    const calculatePointRange = (criterion, level) => {\n        const rubricLevel = rubricData.rubricLevels.find(l => l.level === level);\n        if (!rubricLevel) return '0';\n\n        if (pointingSystem === 'multiplier') {\n            const points = Math.round(criterion.maxPoints * rubricLevel.multiplier);\n            return level === 'incomplete' ? '0' : points.toString();\n        } else {\n            // Custom points would be entered directly\n            return criterion.levels[level]?.pointRange || '0';\n        }\n    };\n\n    // Get display levels (potentially reversed)\n    const getDisplayLevels = () => {\n        return reversedOrder ? [...rubricData.rubricLevels].reverse() : rubricData.rubricLevels;\n    };\n\n    // Save rubric to JSON\n    const saveRubric = () => {\n        const dataStr = JSON.stringify(rubricData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'draft'}_${new Date().toISOString().split('T')[0]}.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Export rubric for grading template\n    const exportForGrading = () => {\n        const exportData = prepareRubricForExport();\n\n        // Save to shared context for grading tool\n        setSharedRubric(exportData);\n\n        // Also download as backup\n        const dataStr = JSON.stringify(exportData, null, 2);\n        const dataBlob = new Blob([dataStr], { type: 'application/json' });\n        const url = URL.createObjectURL(dataBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'export'}_final.json`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    // Prepare rubric data for export/transfer\n    const prepareRubricForExport = () => {\n        const exportData = { ...rubricData };\n\n        // Ensure all criterion levels have proper point ranges\n        exportData.criteria = exportData.criteria.map(criterion => ({\n            ...criterion,\n            levels: Object.fromEntries(\n                rubricData.rubricLevels.map(level => [\n                    level.level,\n                    {\n                        pointRange: calculatePointRange(criterion, level.level),\n                        description: criterion.levels[level.level]?.description || ''\n                    }\n                ])\n            )\n        }));\n\n        // Update total points\n        exportData.assignmentInfo.totalPoints = calculateTotalPoints();\n\n        return exportData;\n    };\n\n    // Transfer to grading tool directly\n    const transferToGrading = () => {\n        const exportData = prepareRubricForExport();\n        transferRubricToGradingWithDetails(exportData);\n    };\n\n    // Import rubric data\n    const importRubric = (event) => {\n        const file = event.target.files[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                try {\n                    const importedData = JSON.parse(e.target.result);\n\n                    // Validate the imported data structure\n                    if (importedData.assignmentInfo && importedData.criteria && importedData.rubricLevels) {\n                        setRubricData(importedData);\n                    } else {\n                        alert('Invalid rubric format. Please check the JSON structure.');\n                    }\n                } catch (error) {\n                    alert('Error loading rubric. Please check the JSON format.');\n                    console.error('Import error:', error);\n                }\n            };\n            reader.readAsText(file);\n        }\n        // Reset file input\n        event.target.value = '';\n    };\n\n    // Reset to default rubric\n    const resetRubric = () => {\n        if (window.confirm('Are you sure you want to reset to default rubric? This will lose all current work.')) {\n            const defaultRubric = {\n                assignmentInfo: {\n                    title: '',\n                    description: '',\n                    weight: 25,\n                    passingThreshold: 60,\n                    totalPoints: 100\n                },\n                rubricLevels: [...defaultLevels],\n                criteria: [\n                    {\n                        id: 'criterion-1',\n                        name: '',\n                        description: '',\n                        maxPoints: 20,\n                        weight: 20,\n                        levels: {},\n                        feedbackLibrary: {\n                            strengths: [],\n                            improvements: [],\n                            general: []\n                        }\n                    }\n                ]\n            };\n            setRubricData(defaultRubric);\n        }\n    };\n\n    // Export to HTML\n    const exportToHTML = () => {\n        const displayLevels = getDisplayLevels();\n        const totalPoints = calculateTotalPoints();\n\n        const htmlContent = `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>${rubricData.assignmentInfo.title || 'Assessment Rubric'} - Rubric</title>\n    <style>\n        body { font-family: 'Arial', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; line-height: 1.4; }\n        .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #1e40af; }\n        .header h1 { color: #1e40af; margin-bottom: 10px; }\n        .assignment-info { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }\n        .rubric-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 0.85rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n        .rubric-table th, .rubric-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }\n        .rubric-table th { background: #1e40af; color: white; text-align: center; font-weight: 600; }\n        .criterion-name { font-weight: bold; background: #f8fafc; padding: 15px; }\n        .point-range { text-align: center; font-weight: bold; color: #1e40af; font-size: 1.1em; }\n        .level-description { font-size: 0.9rem; line-height: 1.4; }\n        .overall-score { background: #eff6ff; padding: 25px; border-radius: 8px; margin-top: 30px; border: 2px solid #bfdbfe; }\n        .footer { margin-top: 40px; text-align: center; font-size: 0.9rem; color: #666; border-top: 1px solid #e2e8f0; padding-top: 20px; }\n        .level-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }\n        .level-card { text-align: center; padding: 15px; border-radius: 8px; border: 2px solid; }\n        @media print { body { margin: 0; padding: 15px; } .level-grid { break-inside: avoid; } }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>${rubricData.assignmentInfo.title || 'Assessment Rubric'}</h1>\n        <p style=\"color: #64748b; font-size: 1.1em;\">${renderFormattedContent(rubricData.assignmentInfo.description) || 'No description provided'}</p>\n    </div>\n    \n    <div class=\"assignment-info\">\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n            <p><strong>Assignment Weight:</strong> ${rubricData.assignmentInfo.weight}% of Final Grade</p>\n            <p><strong>Passing Threshold:</strong> ${rubricData.assignmentInfo.passingThreshold}%</p>\n            <p><strong>Total Points:</strong> ${totalPoints}</p>\n            <p><strong>Number of Criteria:</strong> ${rubricData.criteria.length}</p>\n        </div>\n    </div>\n    \n    <table class=\"rubric-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 20%\">Criterion</th>\n                ${displayLevels.map(level => `<th style=\"width: ${80 / displayLevels.length}%; background-color: ${level.color};\">${level.name}</th>`).join('')}\n            </tr>\n        </thead>\n        <tbody>\n            ${rubricData.criteria.map(criterion => `\n                <tr>\n                    <td class=\"criterion-name\">\n                        <strong style=\"color: #1e40af; font-size: 1.1em;\">${criterion.name || 'Unnamed Criterion'}</strong>\n                        <div style=\"font-weight: normal; color: #475569; margin-top: 8px; font-style: italic;\">\n                            ${renderFormattedContent(criterion.description) || 'No description provided'}\n                        </div>\n                        <div style=\"background: #1e40af; color: white; padding: 5px 10px; border-radius: 4px; margin-top: 10px; text-align: center; font-weight: bold;\">\n                            ${criterion.maxPoints} points\n                        </div>\n                    </td>\n                    ${displayLevels.map(level => `\n                        <td style=\"background-color: ${level.color}08;\">\n                            <div class=\"point-range\" style=\"color: ${level.color}; margin-bottom: 10px;\">\n                                ${calculatePointRange(criterion, level.level)} pts\n                            </div>\n                            <div class=\"level-description\">\n                                ${criterion.levels[level.level]?.description || '<em>Not defined</em>'}\n                            </div>\n                        </td>\n                    `).join('')}\n                </tr>\n            `).join('')}\n        </tbody>\n    </table>\n    \n    <div class=\"overall-score\">\n        <h3 style=\"color: #1e40af; margin-bottom: 15px;\">Overall Achievement Levels</h3>\n        <p style=\"color: #475569; margin-bottom: 20px;\">Each submission receives an overall achievement level based on total rubric score.</p>\n        <div class=\"level-grid\">\n            ${displayLevels.map(level => `\n                <div class=\"level-card\" style=\"border-color: ${level.color}; background-color: ${level.color}15;\">\n                    <div style=\"font-weight: bold; color: ${level.color}; margin-bottom: 5px;\">${level.name}</div>\n                    <div style=\"font-size: 1.2em; font-weight: bold; margin: 8px 0; color: ${level.color};\">\n                        ${Math.round(totalPoints * level.multiplier)}+ pts\n                    </div>\n                    <div style=\"font-size: 0.8em; color: #64748b;\">${(level.multiplier * 100).toFixed(0)}% or higher</div>\n                </div>\n            `).join('')}\n        </div>\n    </div>\n    \n    <div class=\"footer\">\n        <p><strong>Rubric Generated:</strong> ${new Date().toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        })}</p>\n        <p>Total Possible Points: <strong>${totalPoints}</strong> | Criteria: <strong>${rubricData.criteria.length}</strong> | Levels: <strong>${rubricData.rubricLevels.length}</strong></p>\n    </div>\n</body>\n</html>`;\n\n        const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\n        const url = URL.createObjectURL(htmlBlob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `rubric_${rubricData.assignmentInfo.title.replace(/\\s+/g, '_') || 'display'}_${new Date().toISOString().split('T')[0]}.html`;\n        link.click();\n        URL.revokeObjectURL(url);\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-6\">\n            <div className=\"max-w-7xl mx-auto bg-white rounded-lg shadow-lg\">\n                {/* Header */}\n                <div className=\"bg-blue-900 text-white p-6 rounded-t-lg\">\n                    <div className=\"flex justify-between items-center\">\n                        <div>\n                            <h1 className=\"text-2xl font-bold\">Professional Rubric Builder</h1>\n                            <p className=\"text-blue-200\">Create comprehensive assessment rubrics with detailed criteria and feedback</p>\n                        </div>\n                        <div className=\"flex gap-2 flex-wrap\">\n                            <button\n                                onClick={resetRubric}\n                                className=\"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Reset to blank rubric\"\n                            >\n                                <RotateCcw size={14} />\n                                Reset\n                            </button>\n                            <button\n                                onClick={() => importInputRef.current?.click()}\n                                className=\"bg-purple-700 hover:bg-purple-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Import existing rubric JSON file\"\n                            >\n                                <Upload size={14} />\n                                Import\n                            </button>\n                            <button\n                                onClick={transferToGrading}\n                                className=\"bg-blue-700 hover:bg-blue-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Transfer rubric directly to grading tool\"\n                            >\n                                <ArrowRight size={14} />\n                                Use for Grading\n                            </button>\n                            <button\n                                onClick={saveRubric}\n                                className=\"bg-teal-700 hover:bg-teal-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Save work in progress as JSON file\"\n                            >\n                                <Save size={14} />\n                                Save Draft\n                            </button>\n                            <button\n                                onClick={exportForGrading}\n                                className=\"bg-green-700 hover:bg-green-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Export final rubric for grading template\"\n                            >\n                                <Download size={14} />\n                                Export JSON\n                            </button>\n                            <button\n                                onClick={exportToHTML}\n                                className=\"bg-orange-700 hover:bg-orange-600 px-3 py-2 rounded flex items-center gap-1 text-sm\"\n                                title=\"Export HTML version for distribution\"\n                            >\n                                <FileText size={14} />\n                                Export HTML\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-6\">\n                    {/* Auto-save Indicator */}\n                    {sharedRubric && (\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-6\">\n                            <div className=\"flex items-center gap-2 text-green-800\">\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                                <span className=\"text-sm font-medium\">Auto-saved - Ready for grading tool</span>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Button Guide */}\n                    <div className=\"bg-gray-50 border border-gray-300 rounded-lg mb-6\">\n                        <button\n                            onClick={() => setShowGuide(!showGuide)}\n                            className=\"w-full p-3 text-left font-medium text-gray-700 hover:bg-gray-100 flex items-center justify-between\"\n                        >\n                            📖 Quick Start Guide & Button Functions\n                            <span className={`transform transition-transform ${showGuide ? 'rotate-180' : ''}`}>▼</span>\n                        </button>\n                        {showGuide && (\n                            <div className=\"p-4 border-t border-gray-300 text-sm\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">🔧 Building Your Rubric</h4>\n                                        <ul className=\"space-y-1 text-gray-700\">\n                                            <li><strong>Reset:</strong> Clear all data and start fresh</li>\n                                            <li><strong>Reset Sizes:</strong> Return all text boxes to original size</li>\n                                            <li><strong>Import:</strong> Load AI-generated or existing rubric files</li>\n                                            <li><strong>Use for Grading:</strong> Send directly to grading tool</li>\n                                            <li><strong>Save Draft:</strong> Download work-in-progress (JSON)</li>\n                                            <li><strong>Export JSON:</strong> Final rubric for grading template</li>\n                                            <li><strong>Export HTML:</strong> Student-friendly display version</li>\n                                        </ul>\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-semibold text-gray-800 mb-2\">📝 Step-by-Step Process</h4>\n                                        <ol className=\"space-y-1 text-gray-700\">\n                                            <li>1. Fill in assignment details and requirements</li>\n                                            <li>2. Add criteria using \"Add Criterion\" button</li>\n                                            <li>3. Define level descriptions for each criterion</li>\n                                            <li>4. Add feedback library items (optional but recommended)</li>\n                                            <li>5. Use \"Use for Grading\" to switch to grading tool</li>\n                                            <li>6. Export HTML for student distribution</li>\n                                        </ol>\n                                    </div>\n                                </div>\n                                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded\">\n                                    <p className=\"text-blue-800 text-sm\">\n                                        <strong>💡 Tip:</strong> Work is auto-saved every second. Switch between tabs freely - your progress is preserved.\n                                    </p>\n                                    <p className=\"text-blue-800 text-sm mt-2\">\n                                        <strong>📝 Rich Text Editing:</strong> Type directly in any description box for quick edits, or click the blue expand button (⤢) to open the full editor. Paste formatting from Word or the web is preserved.\n                                    </p>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Assignment Information */}\n                    <div className=\"assignment-info bg-blue-50 border border-blue-200 p-6 rounded-lg mb-6\">\n                        <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">Assignment Information</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Assignment Title *</label>\n                                <input\n                                    type=\"text\"\n                                    value={rubricData.assignmentInfo.title}\n                                    onChange={(e) => updateAssignmentInfo('title', e.target.value)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    placeholder=\"e.g., Digital Portfolio Project - Final Showcase\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Weight (% of Final Grade)</label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.weight}\n                                    onChange={(e) => updateAssignmentInfo('weight', parseInt(e.target.value) || 0)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min=\"0\"\n                                    max=\"100\"\n                                />\n                            </div>\n                            <div className=\"md:col-span-2\">\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                                <div className=\"relative\">\n                                    <textarea\n                                        value={renderFormattedContent(rubricData.assignmentInfo.description)}\n                                        onChange={(e) => updateAssignmentInfo('description', convertFormattedTextToHtml(e.target.value))}\n                                        className=\"w-full p-3 border rounded-lg resize-both hover:border-blue-400 transition-all duration-200 pr-12\"\n                                        rows=\"3\"\n                                        placeholder=\"Detailed description of assignment requirements and expectations...\"\n                                        title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                        style={{ minHeight: '80px', maxHeight: '200px', resize: 'both' }}\n                                    />\n                                    <button\n                                        type=\"button\"\n                                        onClick={(e) => {\n                                            e.preventDefault();\n                                            e.stopPropagation();\n                                            openModalEditor(\n                                                rubricData.assignmentInfo.description,\n                                                'Assignment Description',\n                                                (newContent) => updateAssignmentInfo('description', newContent),\n                                                'Enter detailed assignment description...'\n                                            );\n                                        }}\n                                        className=\"absolute top-2 right-2 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                        title=\"Open rich text editor\"\n                                    >\n                                        <Maximize2 size={14} />\n                                    </button>\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Passing Threshold (%)</label>\n                                <input\n                                    type=\"number\"\n                                    value={rubricData.assignmentInfo.passingThreshold}\n                                    onChange={(e) => updateAssignmentInfo('passingThreshold', parseInt(e.target.value) || 0)}\n                                    className=\"w-full p-3 border rounded-lg\"\n                                    min=\"0\"\n                                    max=\"100\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Points (Auto-calculated)</label>\n                                <input\n                                    type=\"number\"\n                                    value={calculateTotalPoints()}\n                                    disabled\n                                    className=\"w-full p-3 border rounded-lg bg-gray-100 font-semibold\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Point System Selection */}\n                    <div className=\"bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6\">\n                        <h4 className=\"font-semibold text-gray-800 mb-3\">Point Calculation System</h4>\n                        <div className=\"flex gap-6\">\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"multiplier\"\n                                    checked={pointingSystem === 'multiplier'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Automatic (Recommended):</strong> Points calculated using level multipliers\n                                </span>\n                            </label>\n                            <label className=\"flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    name=\"pointSystem\"\n                                    value=\"custom\"\n                                    checked={pointingSystem === 'custom'}\n                                    onChange={(e) => setPointingSystem(e.target.value)}\n                                    className=\"mr-2\"\n                                />\n                                <span className=\"text-sm\">\n                                    <strong>Custom:</strong> Manually set point ranges for each level\n                                </span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {/* Rubric Table */}\n                    <div className=\"bg-white border rounded-lg overflow-hidden mb-6\">\n                        <div className=\"bg-gray-50 p-4 border-b flex justify-between items-center\">\n                            <h3 className=\"text-lg font-semibold text-gray-800\">Assessment Criteria Matrix</h3>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setReversedOrder(!reversedOrder)}\n                                    className=\"bg-indigo-700 hover:bg-indigo-600 px-3 py-2 rounded flex items-center gap-1 text-sm text-white\"\n                                    title=\"Switch between ascending and descending level order\"\n                                >\n                                    <RotateCcw size={14} />\n                                    {reversedOrder ? 'High→Low' : 'Low→High'}\n                                </button>\n                                <button\n                                    onClick={resetTextareaSizes}\n                                    className=\"bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded flex items-center gap-1 text-sm text-white\"\n                                    title=\"Reset all textarea sizes to original dimensions\"\n                                >\n                                    <Minimize2 size={14} />\n                                    Reset Sizes\n                                </button>\n                                <button\n                                    onClick={addCriterion}\n                                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center gap-2\"\n                                >\n                                    <Plus size={16} />\n                                    Add Criterion\n                                </button>\n                            </div>\n                        </div>\n\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"w-full border-collapse\">\n                                <thead>\n                                    <tr className=\"bg-gray-100\">\n                                        <th className=\"border p-3 text-left font-semibold\" style={{ width: '200px' }}>\n                                            Criterion ({rubricData.criteria.length})\n                                        </th>\n                                        {getDisplayLevels().map((level) => (\n                                            <th\n                                                key={level.level}\n                                                className=\"border p-3 text-center font-semibold\"\n                                                style={{\n                                                    backgroundColor: level.color + '20',\n                                                    color: level.color,\n                                                    minWidth: '150px',\n                                                    border: `2px solid ${level.color}`\n                                                }}\n                                            >\n                                                <div className=\"font-bold\">{level.name}</div>\n                                                <div className=\"text-xs font-normal mt-1 opacity-75\">\n                                                    {level.description}\n                                                </div>\n                                            </th>\n                                        ))}\n                                        <th className=\"border p-3 text-center font-semibold\" style={{ width: '80px' }}>\n                                            Actions\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {rubricData.criteria.map((criterion, index) => (\n                                        <tr key={criterion.id}>\n                                            {/* Criterion Column */}\n                                            <td className=\"border p-3 bg-gray-50\">\n                                                <div className=\"space-y-2\">\n                                                    <input\n                                                        type=\"text\"\n                                                        value={criterion.name}\n                                                        onChange={(e) => updateCriterion(criterion.id, 'name', e.target.value)}\n                                                        className=\"w-full p-2 border rounded text-sm font-medium\"\n                                                        placeholder={`Criterion ${index + 1} name`}\n                                                    />\n                                                    <div className=\"relative\">\n                                                        <textarea\n                                                            value={renderFormattedContent(criterion.description)}\n                                                            onChange={(e) => updateCriterion(criterion.id, 'description', convertFormattedTextToHtml(e.target.value))}\n                                                            className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                            rows=\"2\"\n                                                            placeholder=\"Brief description of what this criterion measures\"\n                                                            title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                            style={{ minHeight: '48px', maxHeight: '200px', resize: 'both' }}\n                                                        />\n                                                        <button\n                                                            type=\"button\"\n                                                            onClick={(e) => {\n                                                                e.preventDefault();\n                                                                e.stopPropagation();\n                                                                openModalEditor(\n                                                                    criterion.description,\n                                                                    `Criterion Description - ${criterion.name || 'Criterion'}`,\n                                                                    (newContent) => updateCriterion(criterion.id, 'description', newContent),\n                                                                    'Enter criterion description...'\n                                                                );\n                                                            }}\n                                                            className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                                            title=\"Open rich text editor\"\n                                                        >\n                                                            <Maximize2 size={12} />\n                                                        </button>\n                                                    </div>\n                                                    <div className=\"flex gap-2\">\n                                                        <div className=\"flex-1\">\n                                                            <label className=\"text-xs text-gray-600\">Max Points</label>\n                                                            <input\n                                                                type=\"number\"\n                                                                value={criterion.maxPoints}\n                                                                onChange={(e) => updateCriterion(criterion.id, 'maxPoints', parseInt(e.target.value) || 0)}\n                                                                className=\"w-full p-1 border rounded text-sm\"\n                                                                min=\"0\"\n                                                            />\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </td>\n\n                                            {/* Level Columns */}\n                                            {getDisplayLevels().map((level) => (\n                                                <td key={level.level} className=\"border p-3 align-top\">\n                                                    <div className=\"space-y-2\">\n                                                        <div className=\"text-center\">\n                                                            <div\n                                                                className=\"font-bold text-sm px-2 py-1 rounded\"\n                                                                style={{\n                                                                    color: level.color,\n                                                                    backgroundColor: level.color + '20'\n                                                                }}\n                                                            >\n                                                                {calculatePointRange(criterion, level.level)} pts\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"relative\">\n                                                            <textarea\n                                                                value={renderFormattedContent(criterion.levels[level.level]?.description || '')}\n                                                                onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'description', convertFormattedTextToHtml(e.target.value))}\n                                                                className=\"w-full p-2 border rounded text-xs resize-both hover:border-blue-400 transition-all duration-200 pr-8\"\n                                                                rows=\"4\"\n                                                                placeholder={`Describe ${level.name.toLowerCase()} performance...`}\n                                                                title=\"Type here for quick editing, or click the expand button for rich text editor\"\n                                                                style={{ minHeight: '80px', maxHeight: '300px', resize: 'both' }}\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={(e) => {\n                                                                    e.preventDefault();\n                                                                    e.stopPropagation();\n                                                                    openModalEditor(\n                                                                        criterion.levels[level.level]?.description || '',\n                                                                        `${level.name} Level - ${criterion.name || 'Criterion'}`,\n                                                                        (newContent) => updateCriterionLevel(criterion.id, level.level, 'description', newContent),\n                                                                        `Enter ${level.name.toLowerCase()} level description...`\n                                                                    );\n                                                                }}\n                                                                className=\"absolute top-1 right-1 z-10 opacity-70 hover:opacity-100 transition-opacity bg-blue-500 text-white rounded p-1 hover:bg-blue-600 cursor-pointer\"\n                                                                title=\"Open rich text editor\"\n                                                            >\n                                                                <Maximize2 size={12} />\n                                                            </button>\n                                                        </div>\n                                                        {pointingSystem === 'custom' && (\n                                                            <input\n                                                                type=\"text\"\n                                                                value={criterion.levels[level.level]?.pointRange || ''}\n                                                                onChange={(e) => updateCriterionLevel(criterion.id, level.level, 'pointRange', e.target.value)}\n                                                                className=\"w-full p-1 border rounded text-xs text-center\"\n                                                                placeholder=\"e.g., 18-20\"\n                                                            />\n                                                        )}\n                                                    </div>\n                                                </td>\n                                            ))}\n\n                                            {/* Actions Column */}\n                                            <td className=\"border p-3 text-center\">\n                                                <button\n                                                    onClick={() => removeCriterion(criterion.id)}\n                                                    className=\"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50\"\n                                                    disabled={rubricData.criteria.length === 1}\n                                                    title={rubricData.criteria.length === 1 ? \"Cannot remove the last criterion\" : \"Remove this criterion\"}\n                                                >\n                                                    <X size={16} />\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n\n                    {/* Feedback Library Management */}\n                    <div className=\"mb-6\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">📝 Feedback Libraries</h3>\n                        <p className=\"text-sm text-gray-600 mb-4\">Build reusable feedback comments for quick grading. These will be available as dropdowns during assessment.</p>\n\n                        <div className=\"space-y-4\">\n                            {rubricData.criteria.map((criterion) => (\n                                <div key={criterion.id} className=\"bg-gray-50 border rounded-lg\">\n                                    <button\n                                        onClick={() => toggleFeedbackExpansion(criterion.id)}\n                                        className=\"w-full p-4 text-left flex justify-between items-center hover:bg-gray-100 rounded-lg transition-colors\"\n                                    >\n                                        <div>\n                                            <h4 className=\"font-semibold text-gray-800\">\n                                                {criterion.name || `Criterion ${rubricData.criteria.indexOf(criterion) + 1}`} - Feedback Library\n                                            </h4>\n                                            <p className=\"text-sm text-gray-600 mt-1\">\n                                                {criterion.feedbackLibrary.strengths.length +\n                                                    criterion.feedbackLibrary.improvements.length +\n                                                    criterion.feedbackLibrary.general.length} feedback items stored\n                                            </p>\n                                        </div>\n                                        {expandedFeedback[criterion.id] ? (\n                                            <ChevronUp size={20} className=\"text-gray-500\" />\n                                        ) : (\n                                            <ChevronDown size={20} className=\"text-gray-500\" />\n                                        )}\n                                    </button>\n\n                                    {expandedFeedback[criterion.id] && (\n                                        <div className=\"p-4 border-t border-gray-200 bg-white\">\n                                            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                                                {['strengths', 'improvements', 'general'].map((category) => (\n                                                    <div key={category} className=\"space-y-3\">\n                                                        <div className=\"flex justify-between items-center\">\n                                                            <label className=\"text-sm font-medium text-gray-700 capitalize\">\n                                                                {category === 'strengths' ? '👍 Strengths' :\n                                                                    category === 'improvements' ? '🔧 Improvements' :\n                                                                        '💬 General'} Comments\n                                                            </label>\n                                                            <button\n                                                                onClick={() => {\n                                                                    const newComment = prompt(`Add ${category} comment:`);\n                                                                    if (newComment && newComment.trim()) {\n                                                                        addFeedbackItem(criterion.id, category, newComment.trim());\n                                                                    }\n                                                                }}\n                                                                className=\"text-blue-600 hover:text-blue-800 text-xs font-medium bg-blue-50 px-2 py-1 rounded\"\n                                                            >\n                                                                + Add\n                                                            </button>\n                                                        </div>\n                                                        <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                                                            {criterion.feedbackLibrary[category].map((item, index) => (\n                                                                <div key={index} className=\"flex items-start gap-2 text-xs\">\n                                                                    <span\n                                                                        className=\"flex-1 p-2 bg-gray-50 rounded border cursor-pointer hover:bg-gray-100 transition-colors\"\n                                                                        onClick={() => {\n                                                                            openModalEditor(\n                                                                                item,\n                                                                                `${category} Comment`,\n                                                                                (newContent) => {\n                                                                                    const updatedFeedback = [...criterion.feedbackLibrary[category]];\n                                                                                    updatedFeedback[index] = newContent;\n                                                                                    setRubricData(prev => ({\n                                                                                        ...prev,\n                                                                                        criteria: prev.criteria.map(c =>\n                                                                                            c.id === criterion.id\n                                                                                                ? {\n                                                                                                    ...c,\n                                                                                                    feedbackLibrary: {\n                                                                                                        ...c.feedbackLibrary,\n                                                                                                        [category]: updatedFeedback\n                                                                                                    }\n                                                                                                }\n                                                                                                : c\n                                                                                        )\n                                                                                    }));\n                                                                                },\n                                                                                `Enter ${category} feedback comment...`\n                                                                            );\n                                                                        }}\n                                                                        title=\"Click to edit\"\n                                                                        style={{ resize: 'both', minHeight: '40px' }}\n                                                                    >\n                                                                        {renderFormattedContent(item)}\n                                                                    </span>\n                                                                    <button\n                                                                        onClick={() => removeFeedbackItem(criterion.id, category, index)}\n                                                                        className=\"text-red-600 hover:text-red-800 mt-1 p-1 hover:bg-red-50 rounded\"\n                                                                        title=\"Remove this comment\"\n                                                                    >\n                                                                        <X size={12} />\n                                                                    </button>\n                                                                </div>\n                                                            ))}\n                                                            {criterion.feedbackLibrary[category].length === 0 && (\n                                                                <div className=\"text-xs text-gray-500 italic text-center py-4 border border-dashed border-gray-300 rounded\">\n                                                                    No {category} comments yet - click \"Add\" to create some\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* Overall Score Preview */}\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 p-6 rounded-lg\">\n                        <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">📊 Achievement Level Preview</h3>\n                        <p className=\"text-gray-600 mb-4\">\n                            Shows how total rubric scores map to achievement levels. Each submission receives a level based on its total points.\n                        </p>\n\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3\">\n                            {getDisplayLevels().map((level) => {\n                                const totalPoints = calculateTotalPoints();\n                                const pointsForLevel = Math.round(totalPoints * level.multiplier);\n                                return (\n                                    <div\n                                        key={level.level}\n                                        className=\"text-center p-3 rounded-lg border-2 transition-all hover:transform hover:scale-105\"\n                                        style={{\n                                            borderColor: level.color,\n                                            backgroundColor: level.color + '15'\n                                        }}\n                                    >\n                                        <div className=\"font-semibold text-sm\" style={{ color: level.color }}>\n                                            {level.name}\n                                        </div>\n                                        <div className=\"text-lg font-bold mt-1\" style={{ color: level.color }}>\n                                            {pointsForLevel}+\n                                        </div>\n                                        <div className=\"text-xs text-gray-600\">\n                                            {totalPoints > 0 ? `${Math.round((pointsForLevel / totalPoints) * 100)}%+` : '-%'}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n\n                        {calculateTotalPoints() === 0 && (\n                            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-center\">\n                                <p className=\"text-yellow-800 text-sm\">\n                                    Add criteria with point values to see the achievement level breakdown\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Hidden file inputs */}\n                <input\n                    ref={importInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    onChange={importRubric}\n                    className=\"hidden\"\n                />\n            </div>\n\n            {/* Modal Rich Text Editor - Rendered via Portal */}\n            <EditorModal\n                isOpen={modalEditor.show}\n                onClose={closeModalEditor}\n                title={modalEditor.title}\n                content={modalEditor.content}\n                onChange={updateModalContent}\n                placeholder={modalEditor.placeholder}\n            />\n        </div>\n    );\n};\n\nexport default RubricCreator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}