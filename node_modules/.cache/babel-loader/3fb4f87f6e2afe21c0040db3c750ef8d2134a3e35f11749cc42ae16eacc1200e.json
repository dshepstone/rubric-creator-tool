{"ast":null,"code":"var _jsxFileName = \"C:\\\\local clones\\\\rubric-creation-app\\\\src\\\\components\\\\GradingTemplate.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\n\n// lucide‑react icons\nimport { ArrowLeft, ArrowRight, Bot, CheckCircle, Download, FileDown, FileText, Pause, Plus, Save, Settings, SkipBack, SkipForward, Upload, Users, Video, X, AlertTriangle, Shield, Timer, Lock } from 'lucide-react';\n\n// app‑specific hooks / helpers\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\nimport { ensureUniqueCriterionIds } from '../utils/ensureUniqueCriterionIds';\nimport { getSchoolLogo, generateReportHeader, getReportStyles } from './logoIntegrationUtility';\n\n/**\r\n * PRIVACY-FOCUSED GradingTemplate - Session-Only Storage\r\n * PRESERVES ALL ORIGINAL FUNCTIONALITY while implementing privacy controls\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GradingTemplate = () => {\n  _s();\n  var _sharedRubric$assignm9, _sharedRubric$assignm0, _sharedRubric$assignm1, _sharedRubric$criteri, _gradingSession$class2, _gradingSession$class3, _levels$gradingData$l, _gradingData$student, _gradingSession$class4;\n  // Get shared context - ENHANCED with session management\n  const {\n    sharedRubric,\n    setSharedRubric,\n    sharedCourseDetails,\n    setSharedCourseDetails,\n    gradingData: sharedGradingData,\n    setGradingData: setSharedGradingData,\n    classList,\n    gradingSession,\n    nextStudentInSession,\n    previousStudentInSession,\n    updateGradingSession,\n    setActiveTab,\n    currentStudent,\n    saveDraft,\n    loadDraft,\n    saveFinalGrade,\n    loadFinalGrade,\n    getGradeStatus,\n    currentLatePolicy,\n    customLatePolicies,\n    // PRIVACY: Session management\n    sessionActive,\n    sessionManager,\n    extendSession\n  } = useAssessment();\n\n  // PRIVACY: Session monitoring state\n  const [sessionWarning, setSessionWarning] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(null);\n\n  // Helper function to convert HTML content to readable text format\n  const renderFormattedContent = htmlContent => {\n    if (!htmlContent) return '';\n\n    // Convert basic HTML to readable text format\n    let textContent = htmlContent.replace(/<br\\s*\\/?>/gi, '\\n').replace(/<\\/p>/gi, '\\n').replace(/<p[^>]*>/gi, '').replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**').replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**').replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*').replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*').replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_').replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n').replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n').replace(/<\\/ul>/gi, '\\n').replace(/<ul[^>]*>/gi, '').replace(/<\\/ol>/gi, '\\n').replace(/<ol[^>]*>/gi, '').replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\n    .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\n    .trim();\n    return textContent;\n  };\n\n  // State for all grading data - initialize from shared context or defaults\n  const [localGradingData, setLocalGradingData] = useState(() => {\n    // 1) Try loading a saved draft first\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      const draft = loadDraft(currentStudent.id);\n      if (draft) {\n        return draft;\n      }\n    }\n    // 2) If rubric was just transferred, use that\n    if (sharedGradingData) {\n      return {\n        ...sharedGradingData,\n        student: currentStudent || sharedGradingData.student || {\n          name: '',\n          id: '',\n          email: ''\n        }\n      };\n    }\n    // 3) Otherwise, start fresh for this student\n    return {\n      student: currentStudent || {\n        name: '',\n        id: '',\n        email: ''\n      },\n      course: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) || {\n        code: '',\n        name: '',\n        instructor: '',\n        term: ''\n      },\n      assignment: (sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) || {\n        name: '',\n        dueDate: '',\n        maxPoints: 100\n      },\n      feedback: {\n        general: '',\n        strengths: '',\n        improvements: ''\n      },\n      attachments: [],\n      videoLinks: [],\n      latePolicy: {\n        level: 'none',\n        penaltyApplied: false\n      },\n      metadata: {\n        gradedBy: '',\n        gradedDate: '',\n        aiAssisted: false,\n        rubricIntegrated: false\n      },\n      rubricGrading: {}\n    };\n  });\n\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\n  const gradingData = localGradingData;\n  const setGradingData = setLocalGradingData;\n\n  // Rubric-specific state\n  const [showRubricComments, setShowRubricComments] = useState({});\n  const fileInputRef = useRef(null);\n  const rubricInputRef = useRef(null);\n\n  // Video link management\n  const [videoLinkInput, setVideoLinkInput] = useState('');\n  const [videoTitle, setVideoTitle] = useState('');\n\n  // PRIVACY: Session monitoring effect\n  useEffect(() => {\n    if (!sessionActive) {\n      setSessionWarning(true);\n      return;\n    }\n    if (sessionManager) {\n      // Update time remaining every minute\n      const interval = setInterval(() => {\n        const remaining = sessionManager.getTimeRemaining();\n        setTimeRemaining(remaining);\n\n        // Show warning at 5 minutes\n        if (remaining <= 5 * 60 * 1000 && remaining > 0) {\n          setSessionWarning(true);\n        }\n      }, 60000);\n\n      // Initial check\n      const remaining = sessionManager.getTimeRemaining();\n      setTimeRemaining(remaining);\n      if (remaining <= 5 * 60 * 1000 && remaining > 0) {\n        setSessionWarning(true);\n      }\n      return () => clearInterval(interval);\n    }\n  }, [sessionActive, sessionManager]);\n\n  // Safely access the active late policy levels\n  const getPolicyById = policyId => {\n    if (!policyId) return null;\n    if (policyId === DEFAULT_LATE_POLICY.id) return DEFAULT_LATE_POLICY;\n    return customLatePolicies.find(p => p.id === policyId) || null;\n  };\n  const getSafeLatePolicy = (level, policyId) => {\n    const policy = getPolicyById(policyId) || currentLatePolicy || DEFAULT_LATE_POLICY;\n    const activeLevels = policy.levels || DEFAULT_LATE_POLICY.levels;\n    if (!level || typeof level !== \"string\" || !activeLevels[level]) {\n      return activeLevels.none;\n    }\n    return activeLevels[level];\n  };\n\n  // Enhanced shared data synchronization\n  useEffect(() => {\n    if (!sharedGradingData) return;\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\n\n    // Only update course info if it's not empty and different from current\n    if (sharedGradingData.course && (sharedGradingData.course.code || sharedGradingData.course.name || sharedGradingData.course.instructor || sharedGradingData.course.term)) {\n      const needsSync = sharedGradingData.course.code !== localGradingData.course.code || sharedGradingData.course.name !== localGradingData.course.name || sharedGradingData.course.instructor !== localGradingData.course.instructor || sharedGradingData.course.term !== localGradingData.course.term;\n      if (needsSync) {\n        console.log('✅ Syncing course data from shared context to local state');\n        setLocalGradingData(prev => ({\n          ...prev,\n          course: {\n            code: sharedGradingData.course.code || prev.course.code,\n            name: sharedGradingData.course.name || prev.course.name,\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\n            term: sharedGradingData.course.term || prev.course.term\n          }\n        }));\n      }\n    }\n  }, [sharedGradingData, localGradingData.course.code, localGradingData.course.name, localGradingData.course.instructor, localGradingData.course.term]);\n\n  // Auto-populate assignment info when rubric is loaded\n  useEffect(() => {\n    if (sharedRubric) {\n      const initialGrading = {};\n      sharedRubric.criteria.forEach(criterion => {\n        initialGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n      setLocalGradingData(prevData => {\n        var _sharedRubric$assignm, _sharedRubric$assignm2;\n        return {\n          ...prevData,\n          assignment: {\n            ...prevData.assignment,\n            name: ((_sharedRubric$assignm = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm === void 0 ? void 0 : _sharedRubric$assignm.title) || prevData.assignment.name,\n            maxPoints: ((_sharedRubric$assignm2 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm2 === void 0 ? void 0 : _sharedRubric$assignm2.totalPoints) || prevData.assignment.maxPoints\n          },\n          rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\n          metadata: {\n            ...prevData.metadata,\n            rubricIntegrated: true\n          }\n        };\n      });\n    }\n  }, [sharedRubric]);\n\n  // PRIVACY: Auto-save to shared context whenever gradingData changes (with debounce) - SESSION ONLY\n  useEffect(() => {\n    if (!sessionActive) return; // Don't save if session is expired\n\n    const timeoutId = setTimeout(() => {\n      setSharedGradingData(gradingData);\n      setSharedCourseDetails({\n        student: gradingData.student,\n        course: gradingData.course,\n        assignment: gradingData.assignment\n      });\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails, sessionActive]);\n\n  // When student changes, load any saved draft/final but keep course+assignment\n  useEffect(() => {\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) return;\n    const status = getGradeStatus(currentStudent.id);\n    let saved = null;\n    if (status === 'final' && loadFinalGrade) {\n      saved = loadFinalGrade(currentStudent.id);\n    } else if (status === 'draft') {\n      saved = loadDraft(currentStudent.id);\n    }\n    if (saved) {\n      setLocalGradingData(prev => ({\n        ...saved,\n        // Use saved data\n        course: prev.course,\n        // Keep current course info\n        assignment: prev.assignment // Keep current assignment info\n      }));\n    } else {\n      // Fresh slate for this student, but keep course/assignment\n      setLocalGradingData(prev => ({\n        ...prev,\n        student: currentStudent,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: {}\n      }));\n    }\n  }, [currentStudent === null || currentStudent === void 0 ? void 0 : currentStudent.id, getGradeStatus, loadFinalGrade, loadDraft, currentStudent]);\n\n  // Enhanced calculation function\n  const calculateTotalScore = () => {\n    if (!sharedRubric || !sharedRubric.criteria) return {\n      rawScore: 0,\n      finalScore: 0,\n      penaltyApplied: false,\n      latePolicyDescription: ''\n    };\n    let totalRawScore = 0;\n    let maxPossiblePoints = 0;\n\n    // Calculate raw score from rubric grading\n    sharedRubric.criteria.forEach(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      if (grading && grading.selectedLevel && sharedRubric.rubricLevels) {\n        const selectedLevel = sharedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\n        if (selectedLevel) {\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\n        }\n      }\n      maxPossiblePoints += criterion.maxPoints;\n    });\n\n    // Apply late policy penalty\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\n    return {\n      rawScore: totalRawScore,\n      finalScore: finalScore,\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\n      latePolicyDescription: latePolicyLevel.description\n    };\n  };\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\n  useEffect(() => {\n    setScoreSummary(calculateTotalScore());\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, sharedRubric]);\n  const updateLatePolicy = level => {\n    setGradingData(prevData => ({\n      ...prevData,\n      latePolicy: {\n        level: level,\n        penaltyApplied: level !== 'none',\n        policyId: (currentLatePolicy === null || currentLatePolicy === void 0 ? void 0 : currentLatePolicy.id) || DEFAULT_LATE_POLICY.id\n      }\n    }));\n  };\n  const updateRubricGrading = (criterionId, level, comments = null) => {\n    if (!sharedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const existingGrading = prevData.rubricGrading[criterionId];\n      const existingComments = (existingGrading === null || existingGrading === void 0 ? void 0 : existingGrading.customComments) || '';\n      const newRubricState = {\n        ...prevData.rubricGrading,\n        [criterionId]: {\n          criterionId,\n          selectedLevel: level,\n          customComments: comments !== null ? comments : existingComments\n        }\n      };\n      return {\n        ...prevData,\n        rubricGrading: newRubricState\n      };\n    });\n  };\n  const addCriterionFeedback = (criterionId, comment) => {\n    if (!sharedRubric) return; // Guard against null rubric\n\n    setLocalGradingData(prevData => {\n      const currentGrading = prevData.rubricGrading[criterionId];\n      const currentComments = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '';\n      const newComments = currentComments ? `${currentComments}\\n${comment}` : comment;\n      return {\n        ...prevData,\n        rubricGrading: {\n          ...prevData.rubricGrading,\n          [criterionId]: {\n            ...currentGrading,\n            customComments: newComments\n          }\n        }\n      };\n    });\n  };\n\n  // HELPER FUNCTIONS FOR COURSE INFO\n  const getEffectiveCourseData = () => {\n    const course = (gradingData === null || gradingData === void 0 ? void 0 : gradingData.course) || {};\n    const metadata = classList === null || classList === void 0 ? void 0 : classList.courseMetadata;\n    return {\n      code: course.code || (metadata === null || metadata === void 0 ? void 0 : metadata.courseCode) || '',\n      name: course.name || (metadata === null || metadata === void 0 ? void 0 : metadata.courseName) || '',\n      instructor: course.instructor || (metadata === null || metadata === void 0 ? void 0 : metadata.instructor) || (metadata === null || metadata === void 0 ? void 0 : metadata.professors) || '',\n      term: course.term || (metadata === null || metadata === void 0 ? void 0 : metadata.term) || ''\n    };\n  };\n  const pullCourseDataFromClassList = () => {\n    if (!(classList !== null && classList !== void 0 && classList.courseMetadata)) {\n      alert('No class list course metadata available to pull from.');\n      return;\n    }\n    const metadata = classList.courseMetadata;\n    setGradingData(prevData => ({\n      ...prevData,\n      course: {\n        code: metadata.courseCode || prevData.course.code,\n        name: metadata.courseName || prevData.course.name,\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\n        term: metadata.term || prevData.course.term\n      }\n    }));\n    alert('Course information has been pulled from the class list!');\n  };\n\n  // LETTER GRADE CALCULATION\n  const getLetterGrade = percentage => {\n    if (percentage >= 97) return 'A+';\n    if (percentage >= 93) return 'A';\n    if (percentage >= 90) return 'A-';\n    if (percentage >= 87) return 'B+';\n    if (percentage >= 83) return 'B';\n    if (percentage >= 80) return 'B-';\n    if (percentage >= 77) return 'C+';\n    if (percentage >= 73) return 'C';\n    if (percentage >= 70) return 'C-';\n    if (percentage >= 67) return 'D+';\n    if (percentage >= 63) return 'D';\n    if (percentage >= 60) return 'D-';\n    return 'F';\n  };\n\n  // Enhanced version of your existing generateStudentReportHTML function (from GradingTemplate.js)\n  const generateStudentReportHTML = () => {\n    var _gradingData$attachme, _gradingData$videoLin, _sharedRubric$assignm3;\n    const currentDate = new Date().toLocaleDateString('en-CA');\n    const currentTime = new Date().toLocaleTimeString('en-CA');\n\n    // Calculate scores\n    const scoreCalculation = calculateTotalScore();\n    const totalScore = scoreCalculation.finalScore;\n    const rawScore = scoreCalculation.rawScore;\n    const maxPoints = sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = (totalScore / (maxPoints || 1) * 100).toFixed(1);\n    const penaltyApplied = scoreCalculation.penaltyApplied;\n\n    // Generate attachments HTML\n    const attachmentsHTML = ((_gradingData$attachme = gradingData.attachments) === null || _gradingData$attachme === void 0 ? void 0 : _gradingData$attachme.map((att, index) => {\n      if (att.base64Data) {\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\n      } else {\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\n      }\n    }).join('')) || '';\n\n    // Generate video links HTML\n    const videoLinksHTML = ((_gradingData$videoLin = gradingData.videoLinks) === null || _gradingData$videoLin === void 0 ? void 0 : _gradingData$videoLin.map(link => `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`).join('')) || '';\n\n    // Generate rubric table HTML\n    const rubricTableHTML = sharedRubric ? `\n        <div style=\"margin: 30px 0;\">\n            <h3>📊 Detailed Rubric Assessment</h3>\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem;\">\n                <thead>\n                    <tr style=\"background: #f8f9fa;\">\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th>\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: center; width: 120px;\">Level Achieved</th>\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: center; width: 80px;\">Points</th>\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Details & Comments</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${sharedRubric.criteria.map(criterion => {\n      var _gradingData$rubricGr, _criterion$levels, _criterion$levels$sel;\n      const rubricGrading = (_gradingData$rubricGr = gradingData.rubricGrading) === null || _gradingData$rubricGr === void 0 ? void 0 : _gradingData$rubricGr[criterion.id];\n      const selectedLevel = rubricGrading === null || rubricGrading === void 0 ? void 0 : rubricGrading.selectedLevel;\n      const level = selectedLevel ? sharedRubric.rubricLevels.find(l => l.level === selectedLevel) : null;\n      const points = level ? Math.round(criterion.maxPoints * level.multiplier * 10) / 10 : 0;\n      const levelDescription = level && (_criterion$levels = criterion.levels) !== null && _criterion$levels !== void 0 && (_criterion$levels$sel = _criterion$levels[selectedLevel]) !== null && _criterion$levels$sel !== void 0 && _criterion$levels$sel.description ? criterion.levels[selectedLevel].description : '';\n      const additionalComments = (rubricGrading === null || rubricGrading === void 0 ? void 0 : rubricGrading.customComments) || '';\n      return `<tr>\n                            <td style=\"border: 1px solid #ddd; padding: 12px; vertical-align: top;\">\n                                <strong>${criterion.name}</strong><br>\n                                <small style=\"color: #666;\">${criterion.description || ''}</small><br>\n                                <small style=\"color: #888;\">Max Points: ${criterion.maxPoints}</small>\n                            </td>\n                            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; vertical-align: top;\">\n                                <span style=\"display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; background: ${(level === null || level === void 0 ? void 0 : level.color) || '#f0f0f0'}; color: white;\">\n                                    ${(level === null || level === void 0 ? void 0 : level.name) || 'Not Assessed'}\n                                </span>\n                            </td>\n                            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td>\n                            <td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">\n                                ${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}\n                                ${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}\n                                ${!levelDescription && !additionalComments ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}\n                            </td>\n                        </tr>`;\n    }).join('')}\n                </tbody>\n            </table>\n            <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\">\n                <h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4>\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n                    <div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div>\n                    <div><strong>Grade Status:</strong><span style=\"color: ${percentage >= (sharedRubric.assignmentInfo.passingThreshold || 60) ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= (sharedRubric.assignmentInfo.passingThreshold || 60) ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>\n                    ${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}\n                </div>\n            </div>\n        </div>` : '';\n\n    // Use the logo utility to generate header\n    const reportData = {\n      title: `📋 Individual Grade Report - ${gradingData.student.name}`,\n      courseCode: gradingData.course.code || '',\n      courseName: gradingData.course.name || '',\n      section: gradingData.course.section || '',\n      rubricTitle: (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm3 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm3 === void 0 ? void 0 : _sharedRubric$assignm3.title) || 'Assessment'\n    };\n\n    // Complete HTML document with logo integration\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Grade Report - ${gradingData.student.name}</title>\n    ${getReportStyles()}\n    <style>\n        .score-summary { background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center; }\n        .late-policy-section { margin: 30px 0; background: #fff5f5; border: 1px solid #f87171; border-radius: 8px; padding: 20px; }\n        .feedback-section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px; }\n        .attachments { margin: 30px 0; }\n        .attachment-item { display: inline-block; text-align: center; margin: 1rem; padding: 1rem; background: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,.1); max-width: 250px; vertical-align: top; }\n    </style>\n</head>\n<body>\n    ${generateReportHeader(reportData)}\n\n    <div class=\"score-summary\">\n        <h2>📊 Final Score</h2>\n        <div style=\"font-size: 2rem; font-weight: 700; color: #2e7d32; margin: 15px 0;\">\n            ${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)\n        </div>\n        <p style=\"margin: 10px 0; color: #555;\">\n            ${sharedRubric ? `Rubric: ${sharedRubric.assignmentInfo.title}` : \"\"}\n            ${penaltyApplied ? ` | Late Policy Applied` : \"\"}\n        </p>\n    </div>\n\n    ${penaltyApplied ? `\n        <div class=\"late-policy-section\">\n            <h3 style=\"color: #dc2626;\">📅 Late Submission Policy Applied</h3>\n            <p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p>\n        </div>\n    ` : \"\"}\n\n    ${rubricTableHTML}\n\n    ${Object.entries(gradingData.feedback || {}).filter(([key, text]) => text).map(([key, text]) => `\n        <div class=\"feedback-section\">\n            <h3>${key.charAt(0).toUpperCase() + key.slice(1)} Feedback</h3>\n            <p>${text.replace(/\\n/g, \"<br>\")}</p>\n        </div>\n    `).join(\"\")}\n\n    ${attachmentsHTML ? `\n        <div class=\"attachments\">\n            <h3>📎 File Attachments</h3>\n            <div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">\n                ${attachmentsHTML}\n            </div>\n        </div>\n    ` : \"\"}\n\n    ${videoLinksHTML ? `\n        <div class=\"video-links\">\n            <h3>🎥 Video Review Links</h3>\n            ${videoLinksHTML}\n        </div>\n    ` : \"\"}\n\n    <div class=\"footer\">\n        <p>Generated on ${currentDate} at ${currentTime}</p>\n        <p>Instructor: ${gradingData.course.instructor || 'Course Instructor'}</p>\n    </div>\n</body>\n</html>`;\n  };\n\n  // AI FEEDBACK EXPORT FUNCTIONS\n  const exportAIFeedbackData = () => {\n    var _localGradingData$stu, _sharedRubric$assignm4, _sharedRubric$assignm5, _sharedRubric$assignm6, _sharedRubric$assignm7, _sharedRubric$assignm8;\n    if (!((_localGradingData$stu = localGradingData.student) !== null && _localGradingData$stu !== void 0 && _localGradingData$stu.name)) {\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\n      return;\n    }\n\n    // Calculate scores\n    const maxPoints = sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\n\n    // Build criteria performance data\n    const criteriaPerformance = sharedRubric && sharedRubric.criteria ? sharedRubric.criteria.map(criterion => {\n      const grading = gradingData.rubricGrading[criterion.id];\n      const selectedLevel = grading !== null && grading !== void 0 && grading.selectedLevel && sharedRubric.rubricLevels ? sharedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\n      return {\n        name: criterion.name,\n        maxPoints: criterion.maxPoints,\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\n        levelDescription: selectedLevel ? selectedLevel.description : '',\n        customComments: (grading === null || grading === void 0 ? void 0 : grading.customComments) || '',\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\n      };\n    }) : [];\n    const aiGradeData = {\n      student: {\n        firstName: localGradingData.student.name.split(' ')[0] || '',\n        fullName: localGradingData.student.name,\n        id: localGradingData.student.id,\n        email: localGradingData.student.email\n      },\n      course: {\n        code: localGradingData.course.code,\n        name: localGradingData.course.name,\n        instructor: localGradingData.course.instructor,\n        term: localGradingData.course.term\n      },\n      assignment: {\n        title: localGradingData.assignment.name || (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm4 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm4 === void 0 ? void 0 : _sharedRubric$assignm4.title),\n        description: (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm5 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm5 === void 0 ? void 0 : _sharedRubric$assignm5.description) || '',\n        totalPoints: maxPoints,\n        passingThreshold: (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm6 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm6 === void 0 ? void 0 : _sharedRubric$assignm6.passingThreshold) || 60,\n        dueDate: localGradingData.assignment.dueDate\n      },\n      gradeData: {\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\n        overallPercentage: percentage,\n        letterGrade: getLetterGrade(percentage),\n        passed: percentage >= ((sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm7 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm7 === void 0 ? void 0 : _sharedRubric$assignm7.passingThreshold) || 60),\n        latePenaltyApplied: scoreSummary.penaltyApplied,\n        latePolicyDescription: scoreSummary.latePolicyDescription,\n        criteria: criteriaPerformance\n      },\n      existingFeedback: {\n        general: localGradingData.feedback.general || '',\n        strengths: localGradingData.feedback.strengths || '',\n        improvements: localGradingData.feedback.improvements || ''\n      },\n      metadata: {\n        gradedDate: new Date().toISOString(),\n        rubricUsed: (sharedRubric === null || sharedRubric === void 0 ? void 0 : (_sharedRubric$assignm8 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm8 === void 0 ? void 0 : _sharedRubric$assignm8.title) || 'Custom Rubric',\n        totalCriteria: criteriaPerformance.length,\n        exportedForAI: true\n      }\n    };\n\n    // Export as JSON file\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\n    link.click();\n    URL.revokeObjectURL(url);\n    return aiGradeData;\n  };\n  const generateAIFeedbackPrompt = () => {\n    const gradeData = exportAIFeedbackData();\n    if (!gradeData) return;\n    const studentFirstName = gradeData.student.firstName;\n    const courseName = gradeData.course.name || 'this course';\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\n\n    // Determine student level context\n    const getStudentLevel = () => {\n      const courseCode = gradeData.course.code.toUpperCase();\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\n      return 'undergraduate';\n    };\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\n\nSTUDENT GRADE DATA:\n${JSON.stringify(gradeData, null, 2)}\n\nWrite feedback in this exact structure:\n\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\n\n**Key Observations:**\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\n• Their strongest performance area (mention specific criteria that scored highest)\n• One area showing good progress or solid competency  \n• One specific area for improvement with a concrete suggestion\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\n• One forward-looking suggestion for growth in ${courseName}\n\n**Conclusion:**\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\n\n**Final Note:**\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\n\n**WRITING STYLE:**\n- Conversational and personal, like speaking directly to ${studentFirstName}\n- Specific to their actual performance levels and criteria\n- Encouraging but honest\n- Professional yet warm\n- Use their actual criterion names and performance levels from the data\n- Keep each bullet point to 1-2 sentences maximum\n\n**Context:**\n- Student: ${gradeData.student.fullName}\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\n- Assignment: ${assignmentTitle}\n- Instructor: ${gradeData.course.instructor}\n\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\n\n    // Export prompt as text file\n    const promptBlob = new Blob([prompt], {\n      type: 'text/plain'\n    });\n    const url = URL.createObjectURL(promptBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n    console.log('AI Feedback Prompt Generated:', prompt);\n    return prompt;\n  };\n  const exportForAIFeedback = () => {\n    try {\n      // First export the grade data\n      const gradeData = exportAIFeedbackData();\n      if (!gradeData) return;\n\n      // Then generate and export the prompt\n      setTimeout(() => {\n        generateAIFeedbackPrompt();\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\n      }, 500); // Small delay to ensure first download completes\n    } catch (error) {\n      console.error('Error exporting AI feedback data:', error);\n      alert('Error exporting AI feedback data. Please check the console for details.');\n    }\n  };\n\n  // FILE UPLOAD HANDLERS\n  const handleFileUpload = event => {\n    const files = Array.from(event.target.files);\n    const processFiles = files.map(file => {\n      return new Promise(resolve => {\n        const newAttachment = {\n          id: Date.now() + Math.random(),\n          name: file.name,\n          size: file.size,\n          type: file.type,\n          file: file\n        };\n\n        // If it's an image, convert to base64 for display\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            newAttachment.base64Data = e.target.result;\n            resolve(newAttachment);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          resolve(newAttachment);\n        }\n      });\n    });\n    Promise.all(processFiles).then(newAttachments => {\n      setGradingData(prevData => ({\n        ...prevData,\n        attachments: [...prevData.attachments, ...newAttachments]\n      }));\n    });\n  };\n  const removeAttachment = attachmentId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\n    }));\n  };\n\n  // VIDEO LINK HANDLERS\n  const addVideoLink = () => {\n    if (!videoLinkInput.trim()) return;\n    const newVideoLink = {\n      id: Date.now(),\n      url: videoLinkInput,\n      title: videoTitle || 'Video Link',\n      addedDate: new Date().toLocaleDateString()\n    };\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: [...prevData.videoLinks, newVideoLink]\n    }));\n    setVideoLinkInput('');\n    setVideoTitle('');\n  };\n  const removeVideoLink = linkId => {\n    setGradingData(prevData => ({\n      ...prevData,\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\n    }));\n  };\n\n  // RUBRIC LOADING\n  const handleRubricUpload = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      try {\n        const rubricData = JSON.parse(e.target.result);\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\n          return;\n        }\n        setSharedRubric(rubricData); // This is the only state update needed now\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\n        setGradingData(prevData => ({\n          ...prevData,\n          rubricGrading: {}\n        }));\n      } catch (error) {\n        alert('Error loading rubric: Invalid JSON format');\n        console.error('Rubric loading error:', error);\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  // Enhanced total score calculation with grade percentage\n  const getTotalScore = () => {\n    const score = calculateTotalScore();\n    const percentage = sharedRubric ? (score.finalScore / sharedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\n    return {\n      ...score,\n      percentage\n    };\n  };\n\n  // EXPORT FUNCTIONS\n  const exportToHTML = () => {\n    const htmlContent = generateStudentReportHTML();\n    const htmlBlob = new Blob([htmlContent], {\n      type: 'text/html'\n    });\n    const url = URL.createObjectURL(htmlBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n  const exportToPDF = () => {\n    const html = generateStudentReportHTML();\n    const printWindow = window.open('', '_blank');\n    printWindow.document.open();\n    printWindow.document.write(html);\n    printWindow.document.close();\n    printWindow.focus();\n    printWindow.print();\n  };\n  const exportGradingData = () => {\n    var _gradingData$student$;\n    const exportData = {\n      ...gradingData,\n      rubric: sharedRubric,\n      totalScore: getTotalScore(),\n      exportDate: new Date().toISOString()\n    };\n    const dataStr = JSON.stringify(exportData, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    const exportFileDefaultName = `grading-${((_gradingData$student$ = gradingData.student.name) === null || _gradingData$student$ === void 0 ? void 0 : _gradingData$student$.replace(/\\s+/g, '-')) || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n  };\n\n  // GRADING SESSION HANDLERS\n  const handlePreviousStudent = () => {\n    if (!sessionActive) {\n      alert('Session has expired. Please refresh the page to start a new session.');\n      return;\n    }\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = previousStudentInSession();\n    if (!success) {\n      console.log('Already at first student or no active session');\n    }\n  };\n  const handleNextStudent = () => {\n    if (!sessionActive) {\n      alert('Session has expired. Please refresh the page to start a new session.');\n      return;\n    }\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession();\n    if (!success) {\n      console.log('Already at last student or no active session');\n    }\n  };\n\n  // PRIVACY: Enhanced saving handlers with session checks\n  const handleSaveDraft = () => {\n    if (!sessionActive) {\n      alert('Session has expired. Cannot save data. Please refresh the page to start a new session.');\n      return;\n    }\n    if (!(currentStudent !== null && currentStudent !== void 0 && currentStudent.id)) {\n      alert('No student selected for saving draft');\n      return;\n    }\n    saveDraft(currentStudent.id, gradingData);\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\n  };\n  const handleNextStudentAsDraft = () => {\n    if (!sessionActive) {\n      alert('Session has expired. Please refresh the page to start a new session.');\n      return;\n    }\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('💾 Saving as draft for student:', currentStudent.name);\n      saveDraft(currentStudent.id, localGradingData);\n    }\n    const success = nextStudentInSession('draft');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Draft saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const getCurrentStudentInfo = () => {\n    var _gradingSession$class;\n    if (!(gradingSession !== null && gradingSession !== void 0 && gradingSession.active) || !((_gradingSession$class = gradingSession.classListData) !== null && _gradingSession$class !== void 0 && _gradingSession$class.students) || !currentStudent) {\n      return null;\n    }\n    const totalStudents = gradingSession.classListData.students.length;\n    const currentIndex = gradingSession.currentStudentIndex || 0;\n    return {\n      student: currentStudent,\n      position: currentIndex + 1,\n      total: totalStudents,\n      isFirst: currentIndex === 0,\n      isLast: currentIndex >= totalStudents - 1\n    };\n  };\n  const currentStudentInfo = getCurrentStudentInfo();\n  const handleNextStudentAsFinal = () => {\n    if (!sessionActive) {\n      alert('Session has expired. Please refresh the page to start a new session.');\n      return;\n    }\n    if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id) {\n      console.log('✅ Finalizing grade for student:', currentStudent.name);\n      const finalGradeData = {\n        ...localGradingData,\n        totalScore: getTotalScore(),\n        metadata: {\n          ...localGradingData.metadata,\n          gradedDate: new Date().toISOString(),\n          rubricIntegrated: !!sharedRubric\n        }\n      };\n      saveFinalGrade(currentStudent.id, finalGradeData);\n    }\n    const success = nextStudentInSession('final');\n    if (!success) {\n      alert('Grading session completed! All students have been graded.');\n      setActiveTab('class-manager');\n    } else {\n      resetGradingForm();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n      console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\n    }\n  };\n  const resetGradingForm = () => {\n    const initialRubricGrading = {};\n    if (sharedRubric) {\n      sharedRubric.criteria.forEach(criterion => {\n        initialRubricGrading[criterion.id] = {\n          criterionId: criterion.id,\n          selectedLevel: null,\n          customComments: ''\n        };\n      });\n    }\n    setLocalGradingData(prev => {\n      var _sharedCourseDetails$, _sharedCourseDetails$2;\n      return {\n        ...prev,\n        course: (_sharedCourseDetails$ = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.course) !== null && _sharedCourseDetails$ !== void 0 ? _sharedCourseDetails$ : prev.course,\n        assignment: (_sharedCourseDetails$2 = sharedCourseDetails === null || sharedCourseDetails === void 0 ? void 0 : sharedCourseDetails.assignment) !== null && _sharedCourseDetails$2 !== void 0 ? _sharedCourseDetails$2 : prev.assignment,\n        feedback: {\n          general: '',\n          strengths: '',\n          improvements: ''\n        },\n        attachments: [],\n        videoLinks: [],\n        latePolicy: {\n          level: 'none',\n          penaltyApplied: false\n        },\n        rubricGrading: initialRubricGrading\n      };\n    });\n  };\n\n  // PRIVACY: Session warning modal component\n  const SessionWarningModal = () => {\n    if (!sessionWarning) return null;\n    const formatTime = ms => {\n      const minutes = Math.floor(ms / 60000);\n      const seconds = Math.floor(ms % 60000 / 1000);\n      return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 max-w-md w-mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(Timer, {\n            className: \"w-6 h-6 text-orange-500 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1075,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: \"Session Warning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1076,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1074,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700 mb-2\",\n            children: sessionActive ? `Your session will expire in ${timeRemaining ? formatTime(timeRemaining) : 'less than 5 minutes'}.` : 'Your session has expired for privacy protection.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1082,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: sessionActive ? 'All data will be automatically cleared when the session expires. Export any work you want to keep.' : 'All data has been cleared. Please refresh the page to start a new session.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1081,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: sessionActive ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                extendSession();\n                setSessionWarning(false);\n              },\n              className: \"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",\n              children: \"Extend Session\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1099,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSessionWarning(false),\n              className: \"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400\",\n              children: \"Continue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.reload(),\n            className: \"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",\n            children: \"Start New Session\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1096,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1072,\n      columnNumber: 7\n    }, this);\n  };\n\n  // NEW: No Rubric UI Component with privacy awareness\n  const NoRubricUI = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '60vh',\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\n      borderRadius: '1rem',\n      border: '2px dashed #f59e0b',\n      padding: '3rem',\n      margin: '2rem 0',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n      size: 80,\n      style: {\n        color: '#d97706',\n        marginBottom: '1.5rem',\n        filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '2rem',\n        fontWeight: '700',\n        color: '#92400e',\n        marginBottom: '1rem',\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\n      },\n      children: \"No Rubric Loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: '1.1rem',\n        color: '#a16207',\n        marginBottom: '2rem',\n        maxWidth: '600px',\n        lineHeight: '1.6'\n      },\n      children: \"A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '1rem',\n        flexWrap: 'wrap',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab('rubric-creator'),\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 11\n        }, this), \"Create New Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          var _rubricInputRef$curre;\n          return (_rubricInputRef$curre = rubricInputRef.current) === null || _rubricInputRef$curre === void 0 ? void 0 : _rubricInputRef$curre.click();\n        },\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          padding: '1rem 2rem',\n          background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '0.75rem',\n          fontSize: '1rem',\n          fontWeight: '600',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\n          transition: 'all 0.2s ease'\n        },\n        onMouseOver: e => {\n          e.target.style.transform = 'translateY(-2px)';\n          e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\n        },\n        onMouseOut: e => {\n          e.target.style.transform = 'translateY(0)';\n          e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\n        },\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1235,\n          columnNumber: 11\n        }, this), \"Load Existing Rubric\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem',\n        padding: '1rem',\n        background: 'rgba(255, 255, 255, 0.7)',\n        borderRadius: '0.5rem',\n        fontSize: '0.9rem',\n        color: '#78350f',\n        maxWidth: '500px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uD83D\\uDCA1 Tip:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1249,\n        columnNumber: 9\n      }, this), \" You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1240,\n      columnNumber: 7\n    }, this), !sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1rem',\n        padding: '1rem',\n        background: 'rgba(248, 113, 113, 0.1)',\n        border: '1px solid #f87171',\n        borderRadius: '0.5rem',\n        fontSize: '0.9rem',\n        color: '#dc2626',\n        maxWidth: '500px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\u26A0\\uFE0F Session Expired:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1264,\n        columnNumber: 11\n      }, this), \" Your privacy session has ended. Please refresh the page to start a new session.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1254,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: rubricInputRef,\n      type: \"file\",\n      accept: \".json\",\n      style: {\n        display: 'none'\n      },\n      onChange: handleRubricUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1268,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1131,\n    columnNumber: 5\n  }, this);\n\n  // If no rubric is loaded, show the No Rubric UI\n  if (!sharedRubric) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(SessionWarningModal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '2rem',\n          maxWidth: '1440px',\n          margin: '0 auto',\n          fontFamily: 'system-ui, -apple-system, sans-serif'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem',\n            marginBottom: '2rem',\n            padding: '1rem',\n            background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n            borderRadius: '0.75rem',\n            border: '1px solid #d1d5db'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Settings, {\n            size: 32,\n            style: {\n              color: '#6b7280'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                fontSize: '2rem',\n                fontWeight: '700',\n                color: '#1f2937',\n                margin: 0\n              },\n              children: \"\\uD83C\\uDFAF Grading Tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1301,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#6b7280',\n                margin: 0,\n                fontSize: '1rem'\n              },\n              children: \"Assessment and feedback management system\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                fontSize: '0.875rem',\n                color: sessionActive ? '#10b981' : '#ef4444',\n                fontWeight: '600'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1327,\n                columnNumber: 17\n              }, this), sessionActive ? 'Privacy Session Active' : 'Session Expired']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1319,\n              columnNumber: 15\n            }, this), timeRemaining && sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.75rem',\n                color: '#6b7280'\n              },\n              children: [Math.floor(timeRemaining / 60000), \"min remaining\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1331,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NoRubricUI, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1338,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  // Regular grading interface when rubric is loaded\n  const totalScore = getTotalScore();\n  const gradeStatus = currentStudent !== null && currentStudent !== void 0 && currentStudent.id ? getGradeStatus(currentStudent.id) : 'none';\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SessionWarningModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1351,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        maxWidth: '1340px',\n        margin: '0 auto',\n        fontFamily: 'system-ui, -apple-system, sans-serif'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem',\n          marginBottom: '2rem',\n          padding: '1rem',\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\n          borderRadius: '0.75rem',\n          border: '1px solid #d1d5db'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          size: 32,\n          style: {\n            color: '#6b7280'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              fontSize: '2rem',\n              fontWeight: '700',\n              color: '#1f2937',\n              margin: 0\n            },\n            children: \"\\uD83C\\uDFAF Grading Tool\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#6b7280',\n              margin: 0,\n              fontSize: '1rem'\n            },\n            children: \"Assessment and feedback management system\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '0.5rem',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '1rem',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.25rem',\n                color: sessionActive ? '#10b981' : '#ef4444'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1401,\n                columnNumber: 17\n              }, this), sessionActive ? 'Privacy Session Active' : 'Session Expired']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1395,\n              columnNumber: 15\n            }, this), timeRemaining && sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.25rem',\n                color: '#f59e0b'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Timer, {\n                size: 14\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1411,\n                columnNumber: 19\n              }, this), Math.floor(timeRemaining / 60000), \"min remaining\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1405,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1388,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportToHTML,\n            disabled: !sessionActive,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: sessionActive ? '#16a34a' : '#9ca3af',\n              color: 'white',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: sessionActive ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FileDown, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1435,\n              columnNumber: 15\n            }, this), \"Export HTML\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: exportToPDF,\n            disabled: !sessionActive,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              backgroundColor: sessionActive ? '#dc2626' : '#9ca3af',\n              color: '#ffffff',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: sessionActive ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1455,\n              columnNumber: 15\n            }, this), \"Export PDF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1438,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportForAIFeedback,\n            disabled: !sessionActive,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: sessionActive ? '#7c3aed' : '#9ca3af',\n              color: 'white',\n              padding: '0.5rem 1rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: sessionActive ? 'pointer' : 'not-allowed',\n              fontSize: '0.875rem'\n            },\n            title: \"Export grade data and AI prompt for generating personalized feedback\",\n            children: [/*#__PURE__*/_jsxDEV(Bot, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 15\n            }, this), \"Export for AI Feedback\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1458,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1418,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: rubricInputRef,\n        type: \"file\",\n        accept: \".json\",\n        style: {\n          display: 'none'\n        },\n        onChange: handleRubricUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1481,\n        columnNumber: 9\n      }, this), sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\n          border: '1px solid #93c5fd',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            color: '#1e40af',\n            margin: '0 0 0.5rem 0',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1507,\n            columnNumber: 15\n          }, this), \"Current Rubric: \", sharedRubric.assignmentInfo.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#1e40af',\n            margin: 0,\n            fontSize: '0.9rem'\n          },\n          children: sharedRubric.assignmentInfo.description || 'No description provided'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1510,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '2rem',\n            marginTop: '0.75rem',\n            fontSize: '0.875rem',\n            color: '#1d4ed8'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Weight:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1520,\n              columnNumber: 21\n            }, this), \" \", ((_sharedRubric$assignm9 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm9 === void 0 ? void 0 : _sharedRubric$assignm9.weight) || 0, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1520,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Total Points:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1521,\n              columnNumber: 21\n            }, this), \" \", ((_sharedRubric$assignm0 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm0 === void 0 ? void 0 : _sharedRubric$assignm0.totalPoints) || 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1521,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Passing:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1522,\n              columnNumber: 21\n            }, this), \" \", ((_sharedRubric$assignm1 = sharedRubric.assignmentInfo) === null || _sharedRubric$assignm1 === void 0 ? void 0 : _sharedRubric$assignm1.passingThreshold) || 0, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1522,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Criteria:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1523,\n              columnNumber: 21\n            }, this), \" \", ((_sharedRubric$criteri = sharedRubric.criteria) === null || _sharedRubric$criteri === void 0 ? void 0 : _sharedRubric$criteri.length) || 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1523,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1491,\n        columnNumber: 11\n      }, this), gradingSession && ((_gradingSession$class2 = gradingSession.classListData) === null || _gradingSession$class2 === void 0 ? void 0 : _gradingSession$class2.students) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\n          border: '1px solid #6ee7b7',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#047857',\n                margin: '0 0 0.5rem 0',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1548,\n                columnNumber: 19\n              }, this), \"Batch Grading Session Active\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1539,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#047857',\n                margin: 0,\n                fontSize: '0.9rem'\n              },\n              children: [\"Student \", gradingSession.currentStudentIndex + 1, \" of \", gradingSession.classListData.students.length || 0, \":\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\" \", ((_gradingSession$class3 = gradingSession.classListData.students[gradingSession.currentStudentIndex]) === null || _gradingSession$class3 === void 0 ? void 0 : _gradingSession$class3.name) || 'Unknown']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1553,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1551,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1538,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePreviousStudent,\n              disabled: gradingSession.currentStudentIndex === 0 || !sessionActive,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.25rem',\n                padding: '0.5rem 1rem',\n                background: gradingSession.currentStudentIndex === 0 || !sessionActive ? '#f3f4f6' : '#10b981',\n                color: gradingSession.currentStudentIndex === 0 || !sessionActive ? '#9ca3af' : 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                cursor: gradingSession.currentStudentIndex === 0 || !sessionActive ? 'not-allowed' : 'pointer',\n                fontWeight: '500'\n              },\n              children: [/*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1575,\n                columnNumber: 19\n              }, this), \"Previous\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1558,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                updateGradingSession({\n                  active: false\n                });\n                setActiveTab('class-manager');\n              },\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.25rem',\n                padding: '0.5rem 1rem',\n                background: '#f59e0b',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                cursor: 'pointer',\n                fontWeight: '500'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Pause, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1598,\n                columnNumber: 19\n              }, this), \"Pause Session\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleNextStudent,\n              disabled: gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.25rem',\n                padding: '0.5rem 1rem',\n                background: gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive ? '#f3f4f6' : '#10b981',\n                color: gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive ? '#9ca3af' : 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                cursor: gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive ? 'not-allowed' : 'pointer',\n                fontWeight: '500'\n              },\n              children: [\"Next\", /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1620,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1602,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1557,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1537,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1530,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\uD83D\\uDC64 Student Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1630,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Student Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1641,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.student.name,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  student: {\n                    ...prevData.student,\n                    name: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"Enter student name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1650,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1640,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Student ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1672,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.student.id,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  student: {\n                    ...prevData.student,\n                    id: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"Enter student ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1681,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1671,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1703,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                value: gradingData.student.email,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  student: {\n                    ...prevData.student,\n                    email: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"Enter email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1712,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1702,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1639,\n            columnNumber: 13\n          }, this), gradeStatus !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem',\n              padding: '0.75rem',\n              background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\n              border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              color: gradeStatus === 'final' ? '#047857' : '#a16207'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1744,\n              columnNumber: 17\n            }, this), gradeStatus === 'final' && ' - This student has been fully graded', gradeStatus === 'draft' && ' - You can continue editing this draft']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1735,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1633,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1629,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              margin: 0,\n              color: '#374151'\n            },\n            children: \"\\uD83C\\uDFEB Course Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1757,\n            columnNumber: 13\n          }, this), classList && classList.courseMetadata && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: pullCourseDataFromClassList,\n            disabled: !sessionActive,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.25rem',\n              padding: '0.375rem 0.75rem',\n              background: sessionActive ? '#3b82f6' : '#9ca3af',\n              color: 'white',\n              border: 'none',\n              borderRadius: '0.375rem',\n              fontSize: '0.75rem',\n              cursor: sessionActive ? 'pointer' : 'not-allowed',\n              fontWeight: '500'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Download, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1778,\n              columnNumber: 17\n            }, this), \"Pull Course Data\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1761,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1756,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Course Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1792,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.course.code,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  course: {\n                    ...prevData.course,\n                    code: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"e.g., CS 101\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1801,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1791,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Course Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1823,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.course.name,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  course: {\n                    ...prevData.course,\n                    name: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"e.g., Introduction to Computer Science\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1832,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1822,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Instructor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1854,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.course.instructor,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  course: {\n                    ...prevData.course,\n                    instructor: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"Instructor name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1863,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1853,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Term\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1885,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.course.term,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  course: {\n                    ...prevData.course,\n                    term: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"e.g., Fall 2024\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1894,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1884,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1790,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1784,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1755,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\uD83D\\uDCCB Assignment Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1920,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n              gap: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Assignment Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1931,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: gradingData.assignment.name,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  assignment: {\n                    ...prevData.assignment,\n                    name: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                placeholder: \"Assignment title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1940,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1930,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Due Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1962,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: gradingData.assignment.dueDate,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  assignment: {\n                    ...prevData.assignment,\n                    dueDate: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1971,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1961,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Max Points\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1992,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: gradingData.assignment.maxPoints,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  assignment: {\n                    ...prevData.assignment,\n                    maxPoints: parseInt(e.target.value) || 100\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                min: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2001,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1991,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1929,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1923,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1919,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\u23F0 Late Policy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2027,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              flexWrap: 'wrap'\n            },\n            children: Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem 1rem',\n                background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\n                color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\n                borderRadius: '0.5rem',\n                cursor: sessionActive ? 'pointer' : 'not-allowed',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\n                transition: 'all 0.2s ease',\n                opacity: sessionActive ? 1 : 0.6\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"latePolicy\",\n                value: levelKey,\n                checked: gradingData.latePolicy.level === levelKey,\n                onChange: e => updateLatePolicy(e.target.value),\n                disabled: !sessionActive,\n                style: {\n                  margin: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2056,\n                columnNumber: 19\n              }, this), levelData.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '0.75rem',\n                  opacity: 0.8\n                },\n                children: [\"(\", Math.round(levelData.multiplier * 100), \"%)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2066,\n                columnNumber: 19\n              }, this)]\n            }, levelKey, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2038,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2036,\n            columnNumber: 13\n          }, this), gradingData.latePolicy.level !== 'none' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem',\n              padding: '0.75rem',\n              background: '#fef3c7',\n              border: '1px solid #fde047',\n              borderRadius: '0.5rem',\n              fontSize: '0.875rem',\n              color: '#a16207'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Late Policy Applied:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2083,\n              columnNumber: 17\n            }, this), \" \", (_levels$gradingData$l = (currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]) === null || _levels$gradingData$l === void 0 ? void 0 : _levels$gradingData$l.description]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2074,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2030,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2026,\n        columnNumber: 9\n      }, this), sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n          border: '1px solid #bbf7d0',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-start',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                fontSize: '1.25rem',\n                fontWeight: '700',\n                color: '#15803d',\n                marginBottom: '0.5rem'\n              },\n              children: \"\\uD83D\\uDCCB Active Assignment Rubric\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: '#16a34a',\n                fontWeight: '600',\n                fontSize: '1.1rem'\n              },\n              children: sharedRubric.assignmentInfo.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2103,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#059669'\n              },\n              children: renderFormattedContent(sharedRubric.assignmentInfo.description)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2106,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2099,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.875rem',\n                color: '#059669'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0.25rem 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Weight:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2113,\n                  columnNumber: 21\n                }, this), \" \", sharedRubric.assignmentInfo.weight, \"% of Final Grade\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2112,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0.25rem 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Passing:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2116,\n                  columnNumber: 21\n                }, this), \" \", sharedRubric.assignmentInfo.passingThreshold, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2115,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  margin: '0.25rem 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Total Points:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2119,\n                  columnNumber: 21\n                }, this), \" \", sharedRubric.assignmentInfo.totalPoints]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2118,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2111,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2110,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2098,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '1.5rem'\n          },\n          children: sharedRubric.criteria.map(criterion => {\n            var _sharedRubric$rubricL, _criterion$levels$cur, _criterion$levels$cur2;\n            const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\n            const showComments = showRubricComments[criterion.id];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: 'white',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                padding: '1.25rem',\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n                opacity: sessionActive ? 1 : 0.6\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  marginBottom: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    style: {\n                      fontSize: '1.125rem',\n                      fontWeight: '600',\n                      color: '#374151'\n                    },\n                    children: [criterion.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        color: '#3b82f6',\n                        marginLeft: '0.5rem'\n                      },\n                      children: [\"(\", criterion.maxPoints, \" pts)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2144,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2142,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      fontSize: '0.875rem',\n                      color: '#6b7280',\n                      marginTop: '0.25rem'\n                    },\n                    children: renderFormattedContent(criterion.description)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2148,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2141,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setShowRubricComments(prev => ({\n                    ...prev,\n                    [criterion.id]: !prev[criterion.id]\n                  })),\n                  disabled: !sessionActive,\n                  style: {\n                    color: sessionActive ? '#3b82f6' : '#9ca3af',\n                    background: 'none',\n                    border: 'none',\n                    fontSize: '0.875rem',\n                    textDecoration: 'underline',\n                    cursor: sessionActive ? 'pointer' : 'not-allowed',\n                    marginLeft: '1rem'\n                  },\n                  children: [showComments ? 'Hide' : 'Show', \" Level Details\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2152,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2140,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n                  gap: '0.5rem',\n                  marginBottom: '1rem'\n                },\n                children: sharedRubric.rubricLevels.map(level => {\n                  const isSelected = (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) === level.level;\n                  const points = Math.round(criterion.maxPoints * level.multiplier);\n                  return /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => updateRubricGrading(criterion.id, level.level),\n                    disabled: !sessionActive,\n                    style: {\n                      padding: '0.75rem',\n                      borderRadius: '0.5rem',\n                      border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      cursor: sessionActive ? 'pointer' : 'not-allowed',\n                      transition: 'all 0.2s ease',\n                      backgroundColor: isSelected ? level.color : 'white',\n                      color: isSelected ? 'white' : '#374151',\n                      transform: isSelected ? 'scale(1.05)' : 'none',\n                      textAlign: 'center',\n                      opacity: sessionActive ? 1 : 0.6\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontWeight: '600'\n                      },\n                      children: level.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2203,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '0.75rem',\n                        marginTop: '0.25rem'\n                      },\n                      children: [level.level === 'incomplete' ? '0' : points, \" pts\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2204,\n                      columnNumber: 29\n                    }, this)]\n                  }, level.level, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2184,\n                    columnNumber: 27\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2173,\n                columnNumber: 21\n              }, this), showComments && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  background: '#f9fafb',\n                  borderRadius: '0.5rem',\n                  padding: '1rem',\n                  marginBottom: '1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  style: {\n                    fontWeight: '600',\n                    color: '#374151',\n                    marginBottom: '0.75rem'\n                  },\n                  children: \"Level Descriptions:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2220,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\n                    gap: '0.75rem'\n                  },\n                  children: sharedRubric.rubricLevels.map(level => {\n                    var _criterion$levels$lev, _criterion$levels$lev2;\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        background: 'white',\n                        borderRadius: '0.25rem',\n                        border: '1px solid #d1d5db',\n                        borderLeft: `4px solid ${level.color}`,\n                        padding: '0.75rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontWeight: '500',\n                          fontSize: '0.875rem',\n                          color: level.color\n                        },\n                        children: level.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2239,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontSize: '0.75rem',\n                          color: '#6b7280',\n                          marginBottom: '0.5rem'\n                        },\n                        children: [(_criterion$levels$lev = criterion.levels[level.level]) === null || _criterion$levels$lev === void 0 ? void 0 : _criterion$levels$lev.pointRange, \" pts\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2242,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontSize: '0.75rem',\n                          color: '#374151'\n                        },\n                        children: renderFormattedContent((_criterion$levels$lev2 = criterion.levels[level.level]) === null || _criterion$levels$lev2 === void 0 ? void 0 : _criterion$levels$lev2.description)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2245,\n                        columnNumber: 31\n                      }, this)]\n                    }, level.level, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2229,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2223,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2214,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '0.875rem',\n                    fontWeight: '500',\n                    color: '#374151',\n                    marginBottom: '0.5rem'\n                  },\n                  children: \"Additional Comments:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2256,\n                  columnNumber: 23\n                }, this), criterion.feedbackLibrary && sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: '0.5rem',\n                    marginBottom: '0.75rem',\n                    flexWrap: 'wrap'\n                  },\n                  children: Object.entries(criterion.feedbackLibrary).map(([category, comments]) => /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: e => {\n                      if (e.target.value) {\n                        addCriterionFeedback(criterion.id, e.target.value);\n                        e.target.value = '';\n                      }\n                    },\n                    defaultValue: \"\",\n                    style: {\n                      padding: '0.5rem',\n                      border: '1px solid #d1d5db',\n                      borderRadius: '0.25rem',\n                      fontSize: '0.75rem',\n                      cursor: 'pointer'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: [\"Add \", category, \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2287,\n                      columnNumber: 31\n                    }, this), comments.map((comment, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: comment,\n                      children: renderFormattedContent(comment)\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2289,\n                      columnNumber: 33\n                    }, this))]\n                  }, category, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2270,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2268,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.customComments) || '',\n                  onChange: e => updateRubricGrading(criterion.id, currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel, e.target.value),\n                  disabled: !sessionActive,\n                  style: {\n                    width: '100%',\n                    padding: '0.75rem',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    fontSize: '0.875rem',\n                    resize: 'none',\n                    minHeight: '80px',\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                    cursor: sessionActive ? 'text' : 'not-allowed'\n                  },\n                  rows: \"3\",\n                  placeholder: \"Add specific feedback for this criterion...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2296,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2255,\n                columnNumber: 21\n              }, this), (currentGrading === null || currentGrading === void 0 ? void 0 : currentGrading.selectedLevel) && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '0.75rem',\n                  padding: '0.75rem',\n                  background: '#eff6ff',\n                  borderRadius: '0.25rem',\n                  border: '1px solid #bfdbfe'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.875rem'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Selected Level:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2326,\n                    columnNumber: 27\n                  }, this), \" \", (_sharedRubric$rubricL = sharedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)) === null || _sharedRubric$rubricL === void 0 ? void 0 : _sharedRubric$rubricL.name, ' ', \"(\", (_criterion$levels$cur = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur === void 0 ? void 0 : _criterion$levels$cur.pointRange, \" pts)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2325,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.875rem',\n                    color: '#374151',\n                    marginTop: '0.25rem'\n                  },\n                  children: renderFormattedContent((_criterion$levels$cur2 = criterion.levels[currentGrading.selectedLevel]) === null || _criterion$levels$cur2 === void 0 ? void 0 : _criterion$levels$cur2.description)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2329,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2318,\n                columnNumber: 23\n              }, this)]\n            }, criterion.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2132,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1.5rem',\n            background: 'white',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.5rem',\n            padding: '1rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#374151'\n                },\n                children: \"Rubric Score Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#6b7280'\n                },\n                children: \"Based on selected levels across all criteria\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2352,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2348,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'right'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '1.5rem',\n                  fontWeight: '700',\n                  color: '#3b82f6'\n                },\n                children: [Math.round(scoreSummary.finalScore * 10) / 10, \"/\", sharedRubric.assignmentInfo.totalPoints]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '1.125rem',\n                  color: '#6b7280'\n                },\n                children: [\"(\", Math.round(scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1) * 1000) / 10, \"%)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2360,\n                columnNumber: 19\n              }, this), scoreSummary.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  color: '#dc2626',\n                  marginTop: '0.25rem'\n                },\n                children: [\"Raw: \", Math.round(scoreSummary.rawScore * 10) / 10, \" (Late Penalty Applied)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2364,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1) * 100 >= sharedRubric.assignmentInfo.passingThreshold ? '#16a34a' : '#dc2626'\n                },\n                children: scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1) * 100 >= sharedRubric.assignmentInfo.passingThreshold ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2368,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2347,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2091,\n        columnNumber: 11\n      }, this), sharedRubric && (((_gradingData$student = gradingData.student) === null || _gradingData$student === void 0 ? void 0 : _gradingData$student.name) || currentStudent) && sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\n          border: '2px solid #10b981',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            color: '#047857',\n            marginBottom: '1rem'\n          },\n          children: \"Ready to move to the next student?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2393,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#065f46',\n            marginBottom: '1.5rem',\n            fontSize: '0.875rem'\n          },\n          children: \"Choose how to save the current grading before proceeding.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            justifyContent: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudentAsDraft,\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\n              transition: 'all 0.2s ease'\n            },\n            onMouseOver: e => {\n              e.target.style.transform = 'translateY(-2px)';\n              e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n            },\n            onMouseOut: e => {\n              e.target.style.transform = 'translateY(0)';\n              e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '1.1rem'\n              },\n              children: \"\\uD83D\\uDCDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2428,\n              columnNumber: 17\n            }, this), \"Save & Grade Next Student\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2402,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextStudentAsFinal,\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: '0.875rem',\n              fontWeight: '600',\n              boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\n              transition: 'all 0.2s ease'\n            },\n            onMouseOver: e => {\n              e.target.style.transform = 'translateY(-2px)';\n              e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\n            },\n            onMouseOut: e => {\n              e.target.style.transform = 'translateY(0)';\n              e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '1.1rem'\n              },\n              children: \"\\u2705\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2459,\n              columnNumber: 17\n            }, this), \"Finalize & Grade Next Student\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2400,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem',\n            padding: '0.75rem',\n            background: 'rgba(255, 255, 255, 0.6)',\n            borderRadius: '0.375rem',\n            fontSize: '0.75rem',\n            color: '#065f46'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Draft:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2472,\n            columnNumber: 15\n          }, this), \" Save progress, can edit later \\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Finalize:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2472,\n            columnNumber: 71\n          }, this), \" Complete grading, ready for student/LMS\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2464,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2385,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\n          border: '1px solid #bbf7d0',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: '1.5rem',\n            fontWeight: '700',\n            color: '#15803d',\n            marginBottom: '1rem'\n          },\n          children: \"\\uD83D\\uDCCA Final Score\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2486,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '3rem',\n            fontWeight: '700',\n            color: '#16a34a',\n            marginBottom: '1rem'\n          },\n          children: [Math.round(scoreSummary.finalScore * 10) / 10, /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '1.5rem',\n              color: '#6b7280'\n            },\n            children: [\"/ \", sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2491,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '1.25rem',\n            color: '#6b7280',\n            marginBottom: '1rem'\n          },\n          children: [\"(\", Math.round(scoreSummary.finalScore / (sharedRubric ? sharedRubric.assignmentInfo.totalPoints || 1 : gradingData.assignment.maxPoints || 1) * 1000) / 10, \"%)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            gap: '1rem',\n            flexWrap: 'wrap'\n          },\n          children: [sharedRubric && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              background: '#dcfce7',\n              color: '#15803d',\n              padding: '0.25rem 0.75rem',\n              borderRadius: '1rem'\n            },\n            children: \"\\uD83D\\uDCCB Rubric Assessment Active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2500,\n            columnNumber: 15\n          }, this), scoreSummary.penaltyApplied && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              background: '#fee2e2',\n              color: '#dc2626',\n              padding: '0.25rem 0.75rem',\n              borderRadius: '1rem'\n            },\n            children: \"\\u23F0 Late Penalty Applied\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2511,\n            columnNumber: 15\n          }, this), gradingSession && ((_gradingSession$class4 = gradingSession.classListData) === null || _gradingSession$class4 === void 0 ? void 0 : _gradingSession$class4.students) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              background: '#dbeafe',\n              color: '#2563eb',\n              padding: '0.25rem 0.75rem',\n              borderRadius: '1rem'\n            },\n            children: \"\\uD83D\\uDC65 Batch Session Active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2522,\n            columnNumber: 15\n          }, this), !sessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.875rem',\n              background: '#fee2e2',\n              color: '#dc2626',\n              padding: '0.25rem 0.75rem',\n              borderRadius: '1rem'\n            },\n            children: \"\\u26A0\\uFE0F Session Expired\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2533,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2498,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2478,\n        columnNumber: 9\n      }, this), currentStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\n          border: '1px solid #f59e0b',\n          borderRadius: '0.75rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            color: '#92400e',\n            marginBottom: '0.75rem'\n          },\n          children: \"\\uD83D\\uDCBE Save Your Progress\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#a16207',\n            marginBottom: '1.5rem',\n            fontSize: '0.875rem'\n          },\n          children: \"Saves your work on the current student without navigating away from the page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2559,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive) {\n              saveDraft(currentStudent.id, localGradingData);\n              // Show success feedback\n              const button = document.activeElement;\n              const originalText = button.innerHTML;\n              const originalBg = button.style.background;\n              button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\n              button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\n              setTimeout(() => {\n                button.innerHTML = originalText;\n                button.style.background = originalBg;\n              }, 2000);\n            } else if (!sessionActive) {\n              alert('Session has expired. Cannot save data. Please refresh the page to start a new session.');\n            }\n          },\n          disabled: !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id) || !sessionActive,\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center',\n            gap: '0.75rem',\n            background: currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\n            color: 'white',\n            padding: '1rem 2rem',\n            borderRadius: '0.75rem',\n            border: 'none',\n            cursor: currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive ? 'pointer' : 'not-allowed',\n            fontSize: '1rem',\n            fontWeight: '600',\n            boxShadow: currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\n            transform: 'translateY(0)',\n            transition: 'all 0.2s ease'\n          },\n          onMouseOver: e => {\n            if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive) {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\n            }\n          },\n          onMouseOut: e => {\n            if (currentStudent !== null && currentStudent !== void 0 && currentStudent.id && sessionActive) {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\n            }\n          },\n          title: !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id) ? 'No student selected to save' : !sessionActive ? 'Session expired - cannot save' : 'Save current grading progress',\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2615,\n            columnNumber: 15\n          }, this), \"Save Draft\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2562,\n          columnNumber: 13\n        }, this), !(currentStudent !== null && currentStudent !== void 0 && currentStudent.id) && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: '0.75rem',\n            fontSize: '0.75rem',\n            color: '#6b7280'\n          },\n          children: \"Select a student from the Class Manager to enable draft saving\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2619,\n          columnNumber: 15\n        }, this), !sessionActive && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: '0.75rem',\n            fontSize: '0.75rem',\n            color: '#dc2626'\n          },\n          children: \"Session expired - refresh page to start new session\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2624,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2548,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\uD83D\\uDCDD General Feedback\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2633,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem',\n            opacity: sessionActive ? 1 : 0.6\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: '1fr',\n              gap: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Overall Comments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2645,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: gradingData.feedback.general,\n                onChange: e => setGradingData(prevData => ({\n                  ...prevData,\n                  feedback: {\n                    ...prevData.feedback,\n                    general: e.target.value\n                  }\n                })),\n                disabled: !sessionActive,\n                style: {\n                  width: '100%',\n                  padding: '0.75rem',\n                  border: '1px solid #d1d5db',\n                  borderRadius: '0.5rem',\n                  fontSize: '0.875rem',\n                  resize: 'none',\n                  minHeight: '100px',\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                  cursor: sessionActive ? 'text' : 'not-allowed'\n                },\n                rows: \"4\",\n                placeholder: \"General comments about the assignment...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2654,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2644,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: '1fr 1fr',\n                gap: '1rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '0.875rem',\n                    fontWeight: '500',\n                    color: '#374151',\n                    marginBottom: '0.5rem'\n                  },\n                  children: \"Strengths\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2679,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: gradingData.feedback.strengths,\n                  onChange: e => setGradingData(prevData => ({\n                    ...prevData,\n                    feedback: {\n                      ...prevData.feedback,\n                      strengths: e.target.value\n                    }\n                  })),\n                  disabled: !sessionActive,\n                  style: {\n                    width: '100%',\n                    padding: '0.75rem',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    fontSize: '0.875rem',\n                    resize: 'none',\n                    minHeight: '100px',\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                    cursor: sessionActive ? 'text' : 'not-allowed'\n                  },\n                  rows: \"4\",\n                  placeholder: \"What the student did well...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2688,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2678,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: 'block',\n                    fontSize: '0.875rem',\n                    fontWeight: '500',\n                    color: '#374151',\n                    marginBottom: '0.5rem'\n                  },\n                  children: \"Areas for Improvement\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2712,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: gradingData.feedback.improvements,\n                  onChange: e => setGradingData(prevData => ({\n                    ...prevData,\n                    feedback: {\n                      ...prevData.feedback,\n                      improvements: e.target.value\n                    }\n                  })),\n                  disabled: !sessionActive,\n                  style: {\n                    width: '100%',\n                    padding: '0.75rem',\n                    border: '1px solid #d1d5db',\n                    borderRadius: '0.5rem',\n                    fontSize: '0.875rem',\n                    resize: 'none',\n                    minHeight: '100px',\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                    cursor: sessionActive ? 'text' : 'not-allowed'\n                  },\n                  rows: \"4\",\n                  placeholder: \"Suggestions for improvement...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2721,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2711,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2677,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2643,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2636,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2632,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\uD83D\\uDCCE File Attachments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2750,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: '2px dashed #d1d5db',\n            borderRadius: '0.5rem',\n            padding: '1.5rem',\n            textAlign: 'center',\n            opacity: sessionActive ? 1 : 0.6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            multiple: true,\n            onChange: handleFileUpload,\n            disabled: !sessionActive,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2760,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              var _fileInputRef$current;\n              return sessionActive && ((_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click());\n            },\n            disabled: !sessionActive,\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              background: sessionActive ? '#3b82f6' : '#9ca3af',\n              color: 'white',\n              padding: '0.75rem 1.5rem',\n              borderRadius: '0.5rem',\n              border: 'none',\n              cursor: sessionActive ? 'pointer' : 'not-allowed',\n              margin: '0 auto'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2784,\n              columnNumber: 15\n            }, this), \"Add Files\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2768,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#6b7280',\n              marginTop: '0.5rem',\n              fontSize: '0.875rem'\n            },\n            children: [\"Upload images, documents, or other files relevant to the assignment\", !sessionActive && ' (Session expired - refresh to enable)']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2787,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2753,\n          columnNumber: 11\n        }, this), gradingData.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontWeight: '600',\n              color: '#374151',\n              marginBottom: '0.75rem'\n            },\n            children: [\"Uploaded Files (\", gradingData.attachments.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2795,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\n              gap: '1rem'\n            },\n            children: gradingData.attachments.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                overflow: 'hidden',\n                background: 'white'\n              },\n              children: [file.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  position: 'relative'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: file.base64Data || URL.createObjectURL(file.file),\n                  alt: file.name,\n                  style: {\n                    width: '100%',\n                    height: '150px',\n                    objectFit: 'cover'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2812,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeAttachment(file.id),\n                  disabled: !sessionActive,\n                  style: {\n                    position: 'absolute',\n                    top: '0.5rem',\n                    right: '0.5rem',\n                    background: sessionActive ? '#dc2626' : '#9ca3af',\n                    color: 'white',\n                    borderRadius: '50%',\n                    width: '24px',\n                    height: '24px',\n                    border: 'none',\n                    cursor: sessionActive ? 'pointer' : 'not-allowed',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    size: 12\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2840,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2821,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2811,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '1rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(FileText, {\n                  size: 40,\n                  style: {\n                    color: '#6b7280',\n                    margin: '0 auto 0.5rem auto',\n                    display: 'block'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2845,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2844,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '0.75rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontWeight: '500',\n                    fontSize: '0.875rem',\n                    marginBottom: '0.25rem'\n                  },\n                  children: file.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2849,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: '#6b7280'\n                  },\n                  children: [(file.size / 1024).toFixed(1), \" KB\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2852,\n                  columnNumber: 23\n                }, this), !file.type.startsWith('image/') && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeAttachment(file.id),\n                  disabled: !sessionActive,\n                  style: {\n                    marginTop: '0.5rem',\n                    color: sessionActive ? '#dc2626' : '#9ca3af',\n                    background: 'none',\n                    border: 'none',\n                    fontSize: '0.75rem',\n                    cursor: sessionActive ? 'pointer' : 'not-allowed'\n                  },\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2856,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2848,\n                columnNumber: 21\n              }, this)]\n            }, file.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2804,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2798,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2794,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2749,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            marginBottom: '1rem',\n            color: '#374151'\n          },\n          children: \"\\uD83C\\uDFA5 Video Links\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2881,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\n            border: '1px solid #d1d5db',\n            borderRadius: '0.75rem',\n            padding: '1.5rem',\n            opacity: sessionActive ? 1 : 0.6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              value: videoLinkInput,\n              onChange: e => setVideoLinkInput(e.target.value),\n              disabled: !sessionActive,\n              placeholder: \"Enter video URL (YouTube, Vimeo, etc.)\",\n              style: {\n                flex: 1,\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                cursor: sessionActive ? 'text' : 'not-allowed'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2892,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: videoTitle,\n              onChange: e => setVideoTitle(e.target.value),\n              disabled: !sessionActive,\n              placeholder: \"Video title (optional)\",\n              style: {\n                width: '200px',\n                padding: '0.75rem',\n                border: '1px solid #d1d5db',\n                borderRadius: '0.5rem',\n                fontSize: '0.875rem',\n                backgroundColor: sessionActive ? 'white' : '#f3f4f6',\n                cursor: sessionActive ? 'text' : 'not-allowed'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2908,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addVideoLink,\n              disabled: !videoLinkInput.trim() || !sessionActive,\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.75rem 1rem',\n                background: videoLinkInput.trim() && sessionActive ? '#10b981' : '#d1d5db',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.5rem',\n                cursor: videoLinkInput.trim() && sessionActive ? 'pointer' : 'not-allowed',\n                fontSize: '0.875rem',\n                fontWeight: '600'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2941,\n                columnNumber: 17\n              }, this), \"Add\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2924,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2891,\n            columnNumber: 13\n          }, this), gradingData.videoLinks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                marginBottom: '0.5rem',\n                color: '#374151'\n              },\n              children: \"Video Links:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2948,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '0.5rem'\n              },\n              children: gradingData.videoLinks.map(link => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  padding: '0.75rem',\n                  background: '#ffffff',\n                  border: '1px solid #e5e7eb',\n                  borderRadius: '0.5rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 16,\n                  style: {\n                    color: '#6b7280'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2965,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: '500',\n                      fontSize: '0.875rem',\n                      color: '#374151'\n                    },\n                    children: link.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2967,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: link.url,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      fontSize: '0.75rem',\n                      color: '#3b82f6',\n                      textDecoration: 'none'\n                    },\n                    children: link.url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2970,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2966,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: '#6b7280'\n                  },\n                  children: link.addedDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2983,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeVideoLink(link.id),\n                  disabled: !sessionActive,\n                  style: {\n                    background: 'none',\n                    border: 'none',\n                    color: sessionActive ? '#ef4444' : '#9ca3af',\n                    cursor: sessionActive ? 'pointer' : 'not-allowed',\n                    padding: '0.25rem'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2997,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2986,\n                  columnNumber: 23\n                }, this)]\n              }, link.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2953,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2951,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2947,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2884,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2880,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1353,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(GradingTemplate, \"Sune8Tx8yKWK+SxcPwWiugLjOGI=\", false, function () {\n  return [useAssessment];\n});\n_c = GradingTemplate;\nexport default GradingTemplate;\nvar _c;\n$RefreshReg$(_c, \"GradingTemplate\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ArrowLeft","ArrowRight","Bot","CheckCircle","Download","FileDown","FileText","Pause","Plus","Save","Settings","SkipBack","SkipForward","Upload","Users","Video","X","AlertTriangle","Shield","Timer","Lock","useAssessment","DEFAULT_LATE_POLICY","ensureUniqueCriterionIds","getSchoolLogo","generateReportHeader","getReportStyles","jsxDEV","_jsxDEV","Fragment","_Fragment","GradingTemplate","_s","_sharedRubric$assignm9","_sharedRubric$assignm0","_sharedRubric$assignm1","_sharedRubric$criteri","_gradingSession$class2","_gradingSession$class3","_levels$gradingData$l","_gradingData$student","_gradingSession$class4","sharedRubric","setSharedRubric","sharedCourseDetails","setSharedCourseDetails","gradingData","sharedGradingData","setGradingData","setSharedGradingData","classList","gradingSession","nextStudentInSession","previousStudentInSession","updateGradingSession","setActiveTab","currentStudent","saveDraft","loadDraft","saveFinalGrade","loadFinalGrade","getGradeStatus","currentLatePolicy","customLatePolicies","sessionActive","sessionManager","extendSession","sessionWarning","setSessionWarning","timeRemaining","setTimeRemaining","renderFormattedContent","htmlContent","textContent","replace","trim","localGradingData","setLocalGradingData","id","draft","student","name","email","course","code","instructor","term","assignment","dueDate","maxPoints","feedback","general","strengths","improvements","attachments","videoLinks","latePolicy","level","penaltyApplied","metadata","gradedBy","gradedDate","aiAssisted","rubricIntegrated","rubricGrading","showRubricComments","setShowRubricComments","fileInputRef","rubricInputRef","videoLinkInput","setVideoLinkInput","videoTitle","setVideoTitle","interval","setInterval","remaining","getTimeRemaining","clearInterval","getPolicyById","policyId","find","p","getSafeLatePolicy","policy","activeLevels","levels","none","console","log","needsSync","prev","initialGrading","criteria","forEach","criterion","criterionId","selectedLevel","customComments","prevData","_sharedRubric$assignm","_sharedRubric$assignm2","assignmentInfo","title","totalPoints","Object","keys","length","timeoutId","setTimeout","clearTimeout","status","saved","calculateTotalScore","rawScore","finalScore","latePolicyDescription","totalRawScore","maxPossiblePoints","grading","rubricLevels","multiplier","activeLatePolicy","latePolicyLevel","description","scoreSummary","setScoreSummary","updateLatePolicy","updateRubricGrading","comments","existingGrading","existingComments","newRubricState","addCriterionFeedback","comment","currentGrading","currentComments","newComments","getEffectiveCourseData","courseMetadata","courseCode","courseName","professors","pullCourseDataFromClassList","alert","getLetterGrade","percentage","generateStudentReportHTML","_gradingData$attachme","_gradingData$videoLin","_sharedRubric$assignm3","currentDate","Date","toLocaleDateString","currentTime","toLocaleTimeString","scoreCalculation","totalScore","toFixed","attachmentsHTML","map","att","index","base64Data","size","join","videoLinksHTML","link","url","rubricTableHTML","_gradingData$rubricGr","_criterion$levels","_criterion$levels$sel","l","points","Math","round","levelDescription","additionalComments","color","passingThreshold","reportData","section","rubricTitle","entries","filter","key","text","charAt","toUpperCase","slice","exportAIFeedbackData","_localGradingData$stu","_sharedRubric$assignm4","_sharedRubric$assignm5","_sharedRubric$assignm6","_sharedRubric$assignm7","_sharedRubric$assignm8","criteriaPerformance","earnedPoints","aiGradeData","firstName","split","fullName","gradeData","overallScore","overallPercentage","letterGrade","passed","latePenaltyApplied","existingFeedback","toISOString","rubricUsed","totalCriteria","exportedForAI","dataStr","JSON","stringify","dataBlob","Blob","type","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","generateAIFeedbackPrompt","studentFirstName","assignmentTitle","getStudentLevel","includes","prompt","promptBlob","exportForAIFeedback","error","handleFileUpload","event","files","Array","from","target","processFiles","file","Promise","resolve","newAttachment","now","random","startsWith","reader","FileReader","onload","e","result","readAsDataURL","all","then","newAttachments","removeAttachment","attachmentId","addVideoLink","newVideoLink","addedDate","removeVideoLink","linkId","handleRubricUpload","rubricData","parse","readAsText","getTotalScore","score","exportToHTML","htmlBlob","exportToPDF","html","printWindow","window","open","write","close","focus","print","exportGradingData","_gradingData$student$","exportData","rubric","exportDate","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","setAttribute","handlePreviousStudent","success","handleNextStudent","handleSaveDraft","handleNextStudentAsDraft","resetGradingForm","scrollTo","top","behavior","getCurrentStudentInfo","_gradingSession$class","active","classListData","students","totalStudents","currentIndex","currentStudentIndex","position","total","isFirst","isLast","currentStudentInfo","handleNextStudentAsFinal","finalGradeData","initialRubricGrading","_sharedCourseDetails$","_sharedCourseDetails$2","SessionWarningModal","formatTime","ms","minutes","floor","seconds","toString","padStart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","location","reload","NoRubricUI","style","display","flexDirection","alignItems","justifyContent","minHeight","background","borderRadius","border","padding","margin","textAlign","marginBottom","fontSize","fontWeight","textShadow","maxWidth","lineHeight","gap","flexWrap","cursor","boxShadow","transition","onMouseOver","transform","onMouseOut","_rubricInputRef$curre","current","marginTop","ref","accept","onChange","fontFamily","flex","gradeStatus","disabled","backgroundColor","weight","gridTemplateColumns","value","width","placeholder","parseInt","min","levelKey","levelData","opacity","checked","_sharedRubric$rubricL","_criterion$levels$cur","_criterion$levels$cur2","showComments","marginLeft","textDecoration","isSelected","_criterion$levels$lev","_criterion$levels$lev2","borderLeft","pointRange","feedbackLibrary","category","defaultValue","idx","resize","rows","button","activeElement","originalText","innerHTML","originalBg","currentTarget","multiple","_fileInputRef$current","overflow","src","alt","height","objectFit","right","rel","_c","$RefreshReg$"],"sources":["C:/local clones/rubric-creation-app/src/components/GradingTemplate.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\n\r\n// lucide‑react icons\r\nimport {\r\n  ArrowLeft,\r\n  ArrowRight,\r\n  Bot,\r\n  CheckCircle,\r\n  Download,\r\n  FileDown,\r\n  FileText,\r\n  Pause,\r\n  Plus,\r\n  Save,\r\n  Settings,\r\n  SkipBack,\r\n  SkipForward,\r\n  Upload,\r\n  Users,\r\n  Video,\r\n  X,\r\n  AlertTriangle,\r\n  Shield,\r\n  Timer,\r\n  Lock\r\n} from 'lucide-react';\r\n\r\n// app‑specific hooks / helpers\r\nimport { useAssessment, DEFAULT_LATE_POLICY } from './SharedContext';\r\nimport { ensureUniqueCriterionIds } from '../utils/ensureUniqueCriterionIds';\r\nimport { getSchoolLogo, generateReportHeader, getReportStyles } from './logoIntegrationUtility';\r\n\r\n/**\r\n * PRIVACY-FOCUSED GradingTemplate - Session-Only Storage\r\n * PRESERVES ALL ORIGINAL FUNCTIONALITY while implementing privacy controls\r\n */\r\n\r\nconst GradingTemplate = () => {\r\n  // Get shared context - ENHANCED with session management\r\n  const {\r\n    sharedRubric,\r\n    setSharedRubric,\r\n    sharedCourseDetails,\r\n    setSharedCourseDetails,\r\n    gradingData: sharedGradingData,\r\n    setGradingData: setSharedGradingData,\r\n    classList,\r\n    gradingSession,\r\n    nextStudentInSession,\r\n    previousStudentInSession,\r\n    updateGradingSession,\r\n    setActiveTab,\r\n    currentStudent,\r\n    saveDraft,\r\n    loadDraft,\r\n    saveFinalGrade,\r\n    loadFinalGrade,\r\n    getGradeStatus,\r\n    currentLatePolicy,\r\n    customLatePolicies,\r\n    // PRIVACY: Session management\r\n    sessionActive,\r\n    sessionManager,\r\n    extendSession\r\n  } = useAssessment();\r\n\r\n  // PRIVACY: Session monitoring state\r\n  const [sessionWarning, setSessionWarning] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n\r\n  // Helper function to convert HTML content to readable text format\r\n  const renderFormattedContent = (htmlContent) => {\r\n    if (!htmlContent) return '';\r\n\r\n    // Convert basic HTML to readable text format\r\n    let textContent = htmlContent\r\n      .replace(/<br\\s*\\/?>/gi, '\\n')\r\n      .replace(/<\\/p>/gi, '\\n')\r\n      .replace(/<p[^>]*>/gi, '')\r\n      .replace(/<strong[^>]*>(.*?)<\\/strong>/gi, '**$1**')\r\n      .replace(/<b[^>]*>(.*?)<\\/b>/gi, '**$1**')\r\n      .replace(/<em[^>]*>(.*?)<\\/em>/gi, '*$1*')\r\n      .replace(/<i[^>]*>(.*?)<\\/i>/gi, '*$1*')\r\n      .replace(/<u[^>]*>(.*?)<\\/u>/gi, '_$1_')\r\n      .replace(/<h3[^>]*>(.*?)<\\/h3>/gi, '### $1\\n')\r\n      .replace(/<li[^>]*>(.*?)<\\/li>/gi, '• $1\\n')\r\n      .replace(/<\\/ul>/gi, '\\n')\r\n      .replace(/<ul[^>]*>/gi, '')\r\n      .replace(/<\\/ol>/gi, '\\n')\r\n      .replace(/<ol[^>]*>/gi, '')\r\n      .replace(/<[^>]*>/g, '') // Remove any remaining HTML tags\r\n      .replace(/\\n\\s*\\n/g, '\\n') // Remove extra line breaks\r\n      .trim();\r\n\r\n    return textContent;\r\n  };\r\n\r\n  // State for all grading data - initialize from shared context or defaults\r\n  const [localGradingData, setLocalGradingData] = useState(() => {\r\n    // 1) Try loading a saved draft first\r\n    if (currentStudent?.id) {\r\n      const draft = loadDraft(currentStudent.id);\r\n      if (draft) {\r\n        return draft;\r\n      }\r\n    }\r\n    // 2) If rubric was just transferred, use that\r\n    if (sharedGradingData) {\r\n      return {\r\n        ...sharedGradingData,\r\n        student: currentStudent || sharedGradingData.student || { name: '', id: '', email: '' }\r\n      };\r\n    }\r\n    // 3) Otherwise, start fresh for this student\r\n    return {\r\n      student: currentStudent || { name: '', id: '', email: '' },\r\n      course: sharedCourseDetails?.course || { code: '', name: '', instructor: '', term: '' },\r\n      assignment: sharedCourseDetails?.assignment || { name: '', dueDate: '', maxPoints: 100 },\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false },\r\n      metadata: {\r\n        gradedBy: '',\r\n        gradedDate: '',\r\n        aiAssisted: false,\r\n        rubricIntegrated: false\r\n      },\r\n      rubricGrading: {}\r\n    };\r\n  });\r\n\r\n  // Use local grading data as the main state - THIS IS NOW THE SINGLE SOURCE OF TRUTH\r\n  const gradingData = localGradingData;\r\n  const setGradingData = setLocalGradingData;\r\n\r\n  // Rubric-specific state\r\n  const [showRubricComments, setShowRubricComments] = useState({});\r\n\r\n  const fileInputRef = useRef(null);\r\n  const rubricInputRef = useRef(null);\r\n\r\n  // Video link management\r\n  const [videoLinkInput, setVideoLinkInput] = useState('');\r\n  const [videoTitle, setVideoTitle] = useState('');\r\n\r\n  // PRIVACY: Session monitoring effect\r\n  useEffect(() => {\r\n    if (!sessionActive) {\r\n      setSessionWarning(true);\r\n      return;\r\n    }\r\n\r\n    if (sessionManager) {\r\n      // Update time remaining every minute\r\n      const interval = setInterval(() => {\r\n        const remaining = sessionManager.getTimeRemaining();\r\n        setTimeRemaining(remaining);\r\n\r\n        // Show warning at 5 minutes\r\n        if (remaining <= 5 * 60 * 1000 && remaining > 0) {\r\n          setSessionWarning(true);\r\n        }\r\n      }, 60000);\r\n\r\n      // Initial check\r\n      const remaining = sessionManager.getTimeRemaining();\r\n      setTimeRemaining(remaining);\r\n      if (remaining <= 5 * 60 * 1000 && remaining > 0) {\r\n        setSessionWarning(true);\r\n      }\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [sessionActive, sessionManager]);\r\n\r\n  // Safely access the active late policy levels\r\n  const getPolicyById = (policyId) => {\r\n    if (!policyId) return null;\r\n    if (policyId === DEFAULT_LATE_POLICY.id) return DEFAULT_LATE_POLICY;\r\n    return customLatePolicies.find(p => p.id === policyId) || null;\r\n  };\r\n\r\n  const getSafeLatePolicy = (level, policyId) => {\r\n    const policy = getPolicyById(policyId) || currentLatePolicy || DEFAULT_LATE_POLICY;\r\n    const activeLevels = policy.levels || DEFAULT_LATE_POLICY.levels;\r\n    if (!level || typeof level !== \"string\" || !activeLevels[level]) {\r\n      return activeLevels.none;\r\n    }\r\n    return activeLevels[level];\r\n  };\r\n\r\n  // Enhanced shared data synchronization\r\n  useEffect(() => {\r\n    if (!sharedGradingData) return;\r\n\r\n    console.log('🔄 Checking shared grading data for course info:', sharedGradingData.course);\r\n\r\n    // Only update course info if it's not empty and different from current\r\n    if (sharedGradingData.course &&\r\n      (sharedGradingData.course.code || sharedGradingData.course.name ||\r\n        sharedGradingData.course.instructor || sharedGradingData.course.term)) {\r\n\r\n      const needsSync =\r\n        sharedGradingData.course.code !== localGradingData.course.code ||\r\n        sharedGradingData.course.name !== localGradingData.course.name ||\r\n        sharedGradingData.course.instructor !== localGradingData.course.instructor ||\r\n        sharedGradingData.course.term !== localGradingData.course.term;\r\n\r\n      if (needsSync) {\r\n        console.log('✅ Syncing course data from shared context to local state');\r\n        setLocalGradingData(prev => ({\r\n          ...prev,\r\n          course: {\r\n            code: sharedGradingData.course.code || prev.course.code,\r\n            name: sharedGradingData.course.name || prev.course.name,\r\n            instructor: sharedGradingData.course.instructor || prev.course.instructor,\r\n            term: sharedGradingData.course.term || prev.course.term\r\n          }\r\n        }));\r\n      }\r\n    }\r\n  }, [sharedGradingData, localGradingData.course.code, localGradingData.course.name, localGradingData.course.instructor, localGradingData.course.term]);\r\n\r\n  // Auto-populate assignment info when rubric is loaded\r\n  useEffect(() => {\r\n    if (sharedRubric) {\r\n      const initialGrading = {};\r\n      sharedRubric.criteria.forEach(criterion => {\r\n        initialGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n\r\n      setLocalGradingData(prevData => ({\r\n        ...prevData,\r\n        assignment: {\r\n          ...prevData.assignment,\r\n          name: sharedRubric.assignmentInfo?.title || prevData.assignment.name,\r\n          maxPoints: sharedRubric.assignmentInfo?.totalPoints || prevData.assignment.maxPoints\r\n        },\r\n        rubricGrading: prevData.rubricGrading && Object.keys(prevData.rubricGrading).length > 0 ? prevData.rubricGrading : initialGrading,\r\n        metadata: {\r\n          ...prevData.metadata,\r\n          rubricIntegrated: true\r\n        }\r\n      }));\r\n    }\r\n  }, [sharedRubric]);\r\n\r\n  // PRIVACY: Auto-save to shared context whenever gradingData changes (with debounce) - SESSION ONLY\r\n  useEffect(() => {\r\n    if (!sessionActive) return; // Don't save if session is expired\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      setSharedGradingData(gradingData);\r\n      setSharedCourseDetails({\r\n        student: gradingData.student,\r\n        course: gradingData.course,\r\n        assignment: gradingData.assignment\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [gradingData, setSharedGradingData, setSharedCourseDetails, sessionActive]);\r\n\r\n  // When student changes, load any saved draft/final but keep course+assignment\r\n  useEffect(() => {\r\n    if (!currentStudent?.id) return;\r\n\r\n    const status = getGradeStatus(currentStudent.id);\r\n    let saved = null;\r\n    if (status === 'final' && loadFinalGrade) {\r\n      saved = loadFinalGrade(currentStudent.id);\r\n    } else if (status === 'draft') {\r\n      saved = loadDraft(currentStudent.id);\r\n    }\r\n\r\n    if (saved) {\r\n      setLocalGradingData(prev => ({\r\n        ...saved, // Use saved data\r\n        course: prev.course, // Keep current course info\r\n        assignment: prev.assignment // Keep current assignment info\r\n      }));\r\n    } else {\r\n      // Fresh slate for this student, but keep course/assignment\r\n      setLocalGradingData(prev => ({\r\n        ...prev,\r\n        student: currentStudent,\r\n        feedback: { general: '', strengths: '', improvements: '' },\r\n        attachments: [],\r\n        videoLinks: [],\r\n        latePolicy: { level: 'none', penaltyApplied: false },\r\n        rubricGrading: {}\r\n      }));\r\n    }\r\n  }, [currentStudent?.id, getGradeStatus, loadFinalGrade, loadDraft, currentStudent]);\r\n\r\n  // Enhanced calculation function\r\n  const calculateTotalScore = () => {\r\n    if (!sharedRubric || !sharedRubric.criteria) return { rawScore: 0, finalScore: 0, penaltyApplied: false, latePolicyDescription: '' };\r\n\r\n    let totalRawScore = 0;\r\n    let maxPossiblePoints = 0;\r\n\r\n    // Calculate raw score from rubric grading\r\n    sharedRubric.criteria.forEach(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      if (grading && grading.selectedLevel && sharedRubric.rubricLevels) {\r\n        const selectedLevel = sharedRubric.rubricLevels.find(level => level.level === grading.selectedLevel);\r\n        if (selectedLevel) {\r\n          totalRawScore += criterion.maxPoints * selectedLevel.multiplier;\r\n        }\r\n      }\r\n      maxPossiblePoints += criterion.maxPoints;\r\n    });\r\n\r\n    // Apply late policy penalty\r\n    const activeLatePolicy = currentLatePolicy || DEFAULT_LATE_POLICY;\r\n    const latePolicyLevel = activeLatePolicy.levels[gradingData.latePolicy.level] || activeLatePolicy.levels.none;\r\n    const finalScore = totalRawScore * latePolicyLevel.multiplier;\r\n\r\n    return {\r\n      rawScore: totalRawScore,\r\n      finalScore: finalScore,\r\n      penaltyApplied: gradingData.latePolicy.level !== 'none',\r\n      latePolicyDescription: latePolicyLevel.description\r\n    };\r\n  };\r\n\r\n  const [scoreSummary, setScoreSummary] = useState(calculateTotalScore());\r\n\r\n  useEffect(() => {\r\n    setScoreSummary(calculateTotalScore());\r\n  }, [gradingData.rubricGrading, gradingData.latePolicy, currentLatePolicy, customLatePolicies, sharedRubric]);\r\n\r\n  const updateLatePolicy = (level) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      latePolicy: {\r\n        level: level,\r\n        penaltyApplied: level !== 'none',\r\n        policyId: currentLatePolicy?.id || DEFAULT_LATE_POLICY.id\r\n      }\r\n    }));\r\n  };\r\n\r\n  const updateRubricGrading = (criterionId, level, comments = null) => {\r\n    if (!sharedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const existingGrading = prevData.rubricGrading[criterionId];\r\n      const existingComments = existingGrading?.customComments || '';\r\n      const newRubricState = {\r\n        ...prevData.rubricGrading,\r\n        [criterionId]: {\r\n          criterionId,\r\n          selectedLevel: level,\r\n          customComments: comments !== null ? comments : existingComments\r\n        }\r\n      };\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: newRubricState\r\n      };\r\n    });\r\n  };\r\n\r\n  const addCriterionFeedback = (criterionId, comment) => {\r\n    if (!sharedRubric) return; // Guard against null rubric\r\n\r\n    setLocalGradingData(prevData => {\r\n      const currentGrading = prevData.rubricGrading[criterionId];\r\n      const currentComments = currentGrading?.customComments || '';\r\n      const newComments = currentComments ?\r\n        `${currentComments}\\n${comment}` : comment;\r\n\r\n      return {\r\n        ...prevData,\r\n        rubricGrading: {\r\n          ...prevData.rubricGrading,\r\n          [criterionId]: {\r\n            ...currentGrading,\r\n            customComments: newComments\r\n          }\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  // HELPER FUNCTIONS FOR COURSE INFO\r\n  const getEffectiveCourseData = () => {\r\n    const course = gradingData?.course || {};\r\n    const metadata = classList?.courseMetadata;\r\n\r\n    return {\r\n      code: course.code || metadata?.courseCode || '',\r\n      name: course.name || metadata?.courseName || '',\r\n      instructor: course.instructor || metadata?.instructor || metadata?.professors || '',\r\n      term: course.term || metadata?.term || ''\r\n    };\r\n  };\r\n\r\n  const pullCourseDataFromClassList = () => {\r\n    if (!classList?.courseMetadata) {\r\n      alert('No class list course metadata available to pull from.');\r\n      return;\r\n    }\r\n\r\n    const metadata = classList.courseMetadata;\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      course: {\r\n        code: metadata.courseCode || prevData.course.code,\r\n        name: metadata.courseName || prevData.course.name,\r\n        instructor: metadata.instructor || metadata.professors || prevData.course.instructor,\r\n        term: metadata.term || prevData.course.term\r\n      }\r\n    }));\r\n\r\n    alert('Course information has been pulled from the class list!');\r\n  };\r\n\r\n  // LETTER GRADE CALCULATION\r\n  const getLetterGrade = (percentage) => {\r\n    if (percentage >= 97) return 'A+';\r\n    if (percentage >= 93) return 'A';\r\n    if (percentage >= 90) return 'A-';\r\n    if (percentage >= 87) return 'B+';\r\n    if (percentage >= 83) return 'B';\r\n    if (percentage >= 80) return 'B-';\r\n    if (percentage >= 77) return 'C+';\r\n    if (percentage >= 73) return 'C';\r\n    if (percentage >= 70) return 'C-';\r\n    if (percentage >= 67) return 'D+';\r\n    if (percentage >= 63) return 'D';\r\n    if (percentage >= 60) return 'D-';\r\n    return 'F';\r\n  };\r\n\r\n  // Enhanced version of your existing generateStudentReportHTML function (from GradingTemplate.js)\r\n  const generateStudentReportHTML = () => {\r\n    const currentDate = new Date().toLocaleDateString('en-CA');\r\n    const currentTime = new Date().toLocaleTimeString('en-CA');\r\n\r\n    // Calculate scores\r\n    const scoreCalculation = calculateTotalScore();\r\n    const totalScore = scoreCalculation.finalScore;\r\n    const rawScore = scoreCalculation.rawScore;\r\n    const maxPoints = sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n    const percentage = ((totalScore / (maxPoints || 1)) * 100).toFixed(1);\r\n    const penaltyApplied = scoreCalculation.penaltyApplied;\r\n\r\n    // Generate attachments HTML\r\n    const attachmentsHTML = gradingData.attachments?.map((att, index) => {\r\n      if (att.base64Data) {\r\n        return `<div class=\"attachment-item\"><img src=\"${att.base64Data}\" alt=\"${att.name}\" class=\"clickable-image\" data-index=\"${index}\" style=\"max-width: 200px; max-height: 200px; object-fit: contain; display: block; margin-bottom: 0.5rem; border: 1px solid #ddd; border-radius: 4px;\" /><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div><div style=\"font-size: 0.75rem; color: #007bff; margin-top: 4px;\">Click to enlarge</div></div>`;\r\n      } else {\r\n        return `<div class=\"attachment-item\"><div style=\"width: 40px; height: 40px; background: #f3f4f6; border-radius: 4px; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem auto;\">📄</div><div style=\"font-size: 0.875rem; font-weight: 500; word-break: break-word;\">${att.name}</div><div style=\"font-size: 0.75rem; color: #666;\">${(att.size / 1024).toFixed(1)} KB</div></div>`;\r\n      }\r\n    }).join('') || '';\r\n\r\n    // Generate video links HTML\r\n    const videoLinksHTML = gradingData.videoLinks?.map(link =>\r\n      `<div class=\"video-link-item\" style=\"background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;\"><div style=\"display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;\"><span style=\"font-size: 1.25rem;\">🎥</span><strong style=\"color: #495057;\">${link.title}</strong></div><a href=\"${link.url}\" target=\"_blank\" rel=\"noopener noreferrer\" style=\"color: #007bff; text-decoration: none; word-break: break-all;\">${link.url}</a></div>`\r\n    ).join('') || '';\r\n\r\n    // Generate rubric table HTML\r\n    const rubricTableHTML = sharedRubric ? `\r\n        <div style=\"margin: 30px 0;\">\r\n            <h3>📊 Detailed Rubric Assessment</h3>\r\n            <table style=\"width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem;\">\r\n                <thead>\r\n                    <tr style=\"background: #f8f9fa;\">\r\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Criterion</th>\r\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: center; width: 120px;\">Level Achieved</th>\r\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: center; width: 80px;\">Points</th>\r\n                        <th style=\"border: 1px solid #ddd; padding: 12px; text-align: left;\">Details & Comments</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${sharedRubric.criteria.map(criterion => {\r\n      const rubricGrading = gradingData.rubricGrading?.[criterion.id];\r\n      const selectedLevel = rubricGrading?.selectedLevel;\r\n      const level = selectedLevel ? sharedRubric.rubricLevels.find(l => l.level === selectedLevel) : null;\r\n      const points = level ? Math.round(criterion.maxPoints * level.multiplier * 10) / 10 : 0;\r\n      const levelDescription = level && criterion.levels?.[selectedLevel]?.description ? criterion.levels[selectedLevel].description : '';\r\n      const additionalComments = rubricGrading?.customComments || '';\r\n\r\n      return `<tr>\r\n                            <td style=\"border: 1px solid #ddd; padding: 12px; vertical-align: top;\">\r\n                                <strong>${criterion.name}</strong><br>\r\n                                <small style=\"color: #666;\">${criterion.description || ''}</small><br>\r\n                                <small style=\"color: #888;\">Max Points: ${criterion.maxPoints}</small>\r\n                            </td>\r\n                            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; vertical-align: top;\">\r\n                                <span style=\"display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; background: ${level?.color || '#f0f0f0'}; color: white;\">\r\n                                    ${level?.name || 'Not Assessed'}\r\n                                </span>\r\n                            </td>\r\n                            <td style=\"border: 1px solid #ddd; padding: 8px; text-align: center; font-weight: bold; font-size: 1.1em; color: #2c3e50;\">${points}</td>\r\n                            <td style=\"border: 1px solid #ddd; padding: 8px; vertical-align: top;\">\r\n                                ${levelDescription ? `<div style=\"margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-left: 4px solid ${level.color}; border-radius: 4px;\"><strong style=\"color: ${level.color};\">Level Description:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4;\">${levelDescription}</span></div>` : ''}\r\n                                ${additionalComments ? `<div style=\"margin-top: 8px; padding: 8px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px;\"><strong style=\"color: #856404;\">Additional Comments:</strong><br><span style=\"font-size: 0.85em; line-height: 1.4; white-space: pre-wrap;\">${additionalComments}</span></div>` : ''}\r\n                                ${(!levelDescription && !additionalComments) ? '<em style=\"color: #999;\">No assessment provided</em>' : ''}\r\n                            </td>\r\n                        </tr>`;\r\n    }).join('')}\r\n                </tbody>\r\n            </table>\r\n            <div style=\"background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-top: 20px;\">\r\n                <h4 style=\"color: #2e7d32; margin-bottom: 10px;\">📊 Rubric Score Summary</h4>\r\n                <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\r\n                    <div><strong>Total Score:</strong> ${Math.round(totalScore * 10) / 10} / ${maxPoints}<br><strong>Percentage:</strong> ${percentage}%</div>\r\n                    <div><strong>Grade Status:</strong><span style=\"color: ${percentage >= (sharedRubric.assignmentInfo.passingThreshold || 60) ? '#4caf50' : '#f44336'}; font-weight: bold;\">${percentage >= (sharedRubric.assignmentInfo.passingThreshold || 60) ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}</span></div>\r\n                    ${penaltyApplied ? `<div style=\"color: #ff9800;\"><strong>Late Penalty Applied:</strong><br>Raw Score: ${Math.round(rawScore * 10) / 10}</div>` : ''}\r\n                </div>\r\n            </div>\r\n        </div>` : '';\r\n\r\n    // Use the logo utility to generate header\r\n    const reportData = {\r\n      title: `📋 Individual Grade Report - ${gradingData.student.name}`,\r\n      courseCode: gradingData.course.code || '',\r\n      courseName: gradingData.course.name || '',\r\n      section: gradingData.course.section || '',\r\n      rubricTitle: sharedRubric?.assignmentInfo?.title || 'Assessment'\r\n    };\r\n\r\n    // Complete HTML document with logo integration\r\n    return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Grade Report - ${gradingData.student.name}</title>\r\n    ${getReportStyles()}\r\n    <style>\r\n        .score-summary { background: #e8f5e8; border: 2px solid #4caf50; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center; }\r\n        .late-policy-section { margin: 30px 0; background: #fff5f5; border: 1px solid #f87171; border-radius: 8px; padding: 20px; }\r\n        .feedback-section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px; }\r\n        .attachments { margin: 30px 0; }\r\n        .attachment-item { display: inline-block; text-align: center; margin: 1rem; padding: 1rem; background: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,.1); max-width: 250px; vertical-align: top; }\r\n    </style>\r\n</head>\r\n<body>\r\n    ${generateReportHeader(reportData)}\r\n\r\n    <div class=\"score-summary\">\r\n        <h2>📊 Final Score</h2>\r\n        <div style=\"font-size: 2rem; font-weight: 700; color: #2e7d32; margin: 15px 0;\">\r\n            ${totalScore.toFixed(1)} / ${maxPoints} (${percentage}%)\r\n        </div>\r\n        <p style=\"margin: 10px 0; color: #555;\">\r\n            ${sharedRubric ? `Rubric: ${sharedRubric.assignmentInfo.title}` : \"\"}\r\n            ${penaltyApplied ? ` | Late Policy Applied` : \"\"}\r\n        </p>\r\n    </div>\r\n\r\n    ${penaltyApplied ? `\r\n        <div class=\"late-policy-section\">\r\n            <h3 style=\"color: #dc2626;\">📅 Late Submission Policy Applied</h3>\r\n            <p><strong>Raw Score:</strong> ${Math.round(rawScore * 10) / 10}/${maxPoints} → <strong>Final Score:</strong> ${Math.round(totalScore * 10) / 10}/${maxPoints}</p>\r\n        </div>\r\n    ` : \"\"}\r\n\r\n    ${rubricTableHTML}\r\n\r\n    ${Object.entries(gradingData.feedback || {}).filter(([key, text]) => text).map(([key, text]) => `\r\n        <div class=\"feedback-section\">\r\n            <h3>${key.charAt(0).toUpperCase() + key.slice(1)} Feedback</h3>\r\n            <p>${text.replace(/\\n/g, \"<br>\")}</p>\r\n        </div>\r\n    `).join(\"\")}\r\n\r\n    ${attachmentsHTML ? `\r\n        <div class=\"attachments\">\r\n            <h3>📎 File Attachments</h3>\r\n            <div style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\">\r\n                ${attachmentsHTML}\r\n            </div>\r\n        </div>\r\n    ` : \"\"}\r\n\r\n    ${videoLinksHTML ? `\r\n        <div class=\"video-links\">\r\n            <h3>🎥 Video Review Links</h3>\r\n            ${videoLinksHTML}\r\n        </div>\r\n    ` : \"\"}\r\n\r\n    <div class=\"footer\">\r\n        <p>Generated on ${currentDate} at ${currentTime}</p>\r\n        <p>Instructor: ${gradingData.course.instructor || 'Course Instructor'}</p>\r\n    </div>\r\n</body>\r\n</html>`;\r\n  };\r\n\r\n  // AI FEEDBACK EXPORT FUNCTIONS\r\n  const exportAIFeedbackData = () => {\r\n    if (!localGradingData.student?.name) {\r\n      alert('Please ensure student information is loaded before exporting for AI feedback.');\r\n      return;\r\n    }\r\n\r\n    // Calculate scores\r\n    const maxPoints = sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints;\r\n    const percentage = maxPoints > 0 ? (scoreSummary.finalScore / maxPoints * 100).toFixed(1) : 0;\r\n\r\n    // Build criteria performance data\r\n    const criteriaPerformance = (sharedRubric && sharedRubric.criteria) ? sharedRubric.criteria.map(criterion => {\r\n      const grading = gradingData.rubricGrading[criterion.id];\r\n      const selectedLevel = (grading?.selectedLevel && sharedRubric.rubricLevels) ?\r\n        sharedRubric.rubricLevels.find(level => level.level === grading.selectedLevel) : null;\r\n\r\n      return {\r\n        name: criterion.name,\r\n        maxPoints: criterion.maxPoints,\r\n        earnedPoints: selectedLevel ? (criterion.maxPoints * selectedLevel.multiplier).toFixed(1) : 0,\r\n        level: selectedLevel ? selectedLevel.name : 'Not Assessed',\r\n        levelDescription: selectedLevel ? selectedLevel.description : '',\r\n        customComments: grading?.customComments || '',\r\n        percentage: selectedLevel ? Math.round(selectedLevel.multiplier * 100) : 0\r\n      };\r\n    }) : [];\r\n\r\n    const aiGradeData = {\r\n      student: {\r\n        firstName: localGradingData.student.name.split(' ')[0] || '',\r\n        fullName: localGradingData.student.name,\r\n        id: localGradingData.student.id,\r\n        email: localGradingData.student.email\r\n      },\r\n      course: {\r\n        code: localGradingData.course.code,\r\n        name: localGradingData.course.name,\r\n        instructor: localGradingData.course.instructor,\r\n        term: localGradingData.course.term\r\n      },\r\n      assignment: {\r\n        title: localGradingData.assignment.name || (sharedRubric?.assignmentInfo?.title),\r\n        description: sharedRubric?.assignmentInfo?.description || '',\r\n        totalPoints: maxPoints,\r\n        passingThreshold: sharedRubric?.assignmentInfo?.passingThreshold || 60,\r\n        dueDate: localGradingData.assignment.dueDate\r\n      },\r\n      gradeData: {\r\n        overallScore: Math.round(scoreSummary.finalScore * 10) / 10,\r\n        rawScore: Math.round(scoreSummary.rawScore * 10) / 10,\r\n        overallPercentage: percentage,\r\n        letterGrade: getLetterGrade(percentage),\r\n        passed: percentage >= (sharedRubric?.assignmentInfo?.passingThreshold || 60),\r\n        latePenaltyApplied: scoreSummary.penaltyApplied,\r\n        latePolicyDescription: scoreSummary.latePolicyDescription,\r\n        criteria: criteriaPerformance\r\n      },\r\n      existingFeedback: {\r\n        general: localGradingData.feedback.general || '',\r\n        strengths: localGradingData.feedback.strengths || '',\r\n        improvements: localGradingData.feedback.improvements || ''\r\n      },\r\n      metadata: {\r\n        gradedDate: new Date().toISOString(),\r\n        rubricUsed: sharedRubric?.assignmentInfo?.title || 'Custom Rubric',\r\n        totalCriteria: criteriaPerformance.length,\r\n        exportedForAI: true\r\n      }\r\n    };\r\n\r\n    // Export as JSON file\r\n    const dataStr = JSON.stringify(aiGradeData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Data_${localGradingData.student.name.replace(/\\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.json`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    return aiGradeData;\r\n  };\r\n\r\n  const generateAIFeedbackPrompt = () => {\r\n    const gradeData = exportAIFeedbackData();\r\n    if (!gradeData) return;\r\n\r\n    const studentFirstName = gradeData.student.firstName;\r\n    const courseName = gradeData.course.name || 'this course';\r\n    const assignmentTitle = gradeData.assignment.title || 'assignment';\r\n\r\n    // Determine student level context\r\n    const getStudentLevel = () => {\r\n      const courseCode = gradeData.course.code.toUpperCase();\r\n      if (courseCode.includes('100') || courseCode.includes('1')) return 'first-year undergraduate';\r\n      if (courseCode.includes('200') || courseCode.includes('2')) return 'second-year undergraduate';\r\n      if (courseCode.includes('300') || courseCode.includes('3')) return 'third-year undergraduate';\r\n      if (courseCode.includes('400') || courseCode.includes('4')) return 'senior undergraduate';\r\n      if (courseCode.includes('500') || courseCode.includes('6') || courseCode.includes('8')) return 'graduate';\r\n      return 'undergraduate';\r\n    };\r\n\r\n    const prompt = `You are an experienced instructor writing concise, personal feedback for a student. Write feedback that sounds natural and conversational, but keep it brief and focused.\r\n\r\nSTUDENT GRADE DATA:\r\n${JSON.stringify(gradeData, null, 2)}\r\n\r\nWrite feedback in this exact structure:\r\n\r\n**Opening Paragraph:** Start with \"${studentFirstName}\" and write 2-3 sentences giving your overall impression of their ${assignmentTitle}. Mention their ${gradeData.gradeData.overallPercentage}% (${gradeData.gradeData.letterGrade}) performance and whether they ${gradeData.gradeData.passed ? 'met' : 'did not meet'} course standards. ${gradeData.gradeData.latePenaltyApplied ? 'Briefly acknowledge the late submission but focus on work quality.' : ''} Keep it warm but honest, appropriate for a ${getStudentLevel()} student.\r\n\r\n**Key Observations:**\r\nWrite 3-5 concise bullet points (use actual bullet points •) covering:\r\n• Their strongest performance area (mention specific criteria that scored highest)\r\n• One area showing good progress or solid competency  \r\n• One specific area for improvement with a concrete suggestion\r\n• ${gradeData.gradeData.latePenaltyApplied ? 'A brief note about time management for future assignments' : 'An encouragement about their overall skill development'}\r\n• One forward-looking suggestion for growth in ${courseName}\r\n\r\n**Conclusion:**\r\nWrite 1-2 sentences encouraging ${studentFirstName}'s continued development and expressing confidence in their potential.\r\n\r\n**Final Note:**\r\nAdd: \"Your complete grade report with detailed rubric assessment is attached for download.\"\r\n\r\n**WRITING STYLE:**\r\n- Conversational and personal, like speaking directly to ${studentFirstName}\r\n- Specific to their actual performance levels and criteria\r\n- Encouraging but honest\r\n- Professional yet warm\r\n- Use their actual criterion names and performance levels from the data\r\n- Keep each bullet point to 1-2 sentences maximum\r\n\r\n**Context:**\r\n- Student: ${gradeData.student.fullName}\r\n- Course: ${gradeData.course.code} - ${gradeData.course.name}\r\n- Assignment: ${assignmentTitle}\r\n- Instructor: ${gradeData.course.instructor}\r\n\r\nWrite the feedback now, making it sound personal and genuine while keeping it concise and well-structured.`;\r\n\r\n    // Export prompt as text file\r\n    const promptBlob = new Blob([prompt], { type: 'text/plain' });\r\n    const url = URL.createObjectURL(promptBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `AI_Feedback_Prompt_${gradeData.student.firstName}_${new Date().toISOString().slice(0, 10)}.txt`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n\r\n    console.log('AI Feedback Prompt Generated:', prompt);\r\n    return prompt;\r\n  };\r\n\r\n  const exportForAIFeedback = () => {\r\n    try {\r\n      // First export the grade data\r\n      const gradeData = exportAIFeedbackData();\r\n      if (!gradeData) return;\r\n\r\n      // Then generate and export the prompt\r\n      setTimeout(() => {\r\n        generateAIFeedbackPrompt();\r\n        alert(`AI feedback files exported successfully for ${gradeData.student.fullName}!\\n\\nFiles created:\\n1. Grade data JSON\\n2. AI prompt text file\\n\\nUse these files with your preferred AI service to generate personalized feedback.`);\r\n      }, 500); // Small delay to ensure first download completes\r\n\r\n    } catch (error) {\r\n      console.error('Error exporting AI feedback data:', error);\r\n      alert('Error exporting AI feedback data. Please check the console for details.');\r\n    }\r\n  };\r\n\r\n  // FILE UPLOAD HANDLERS\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    const processFiles = files.map(file => {\r\n      return new Promise((resolve) => {\r\n        const newAttachment = {\r\n          id: Date.now() + Math.random(),\r\n          name: file.name,\r\n          size: file.size,\r\n          type: file.type,\r\n          file: file\r\n        };\r\n\r\n        // If it's an image, convert to base64 for display\r\n        if (file.type.startsWith('image/')) {\r\n          const reader = new FileReader();\r\n          reader.onload = (e) => {\r\n            newAttachment.base64Data = e.target.result;\r\n            resolve(newAttachment);\r\n          };\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          resolve(newAttachment);\r\n        }\r\n      });\r\n    });\r\n\r\n    Promise.all(processFiles).then(newAttachments => {\r\n      setGradingData(prevData => ({\r\n        ...prevData,\r\n        attachments: [...prevData.attachments, ...newAttachments]\r\n      }));\r\n    });\r\n  };\r\n\r\n  const removeAttachment = (attachmentId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      attachments: prevData.attachments.filter(att => att.id !== attachmentId)\r\n    }));\r\n  };\r\n\r\n  // VIDEO LINK HANDLERS\r\n  const addVideoLink = () => {\r\n    if (!videoLinkInput.trim()) return;\r\n\r\n    const newVideoLink = {\r\n      id: Date.now(),\r\n      url: videoLinkInput,\r\n      title: videoTitle || 'Video Link',\r\n      addedDate: new Date().toLocaleDateString()\r\n    };\r\n\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: [...prevData.videoLinks, newVideoLink]\r\n    }));\r\n\r\n    setVideoLinkInput('');\r\n    setVideoTitle('');\r\n  };\r\n\r\n  const removeVideoLink = (linkId) => {\r\n    setGradingData(prevData => ({\r\n      ...prevData,\r\n      videoLinks: prevData.videoLinks.filter(link => link.id !== linkId)\r\n    }));\r\n  };\r\n\r\n  // RUBRIC LOADING\r\n  const handleRubricUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const rubricData = JSON.parse(e.target.result);\r\n\r\n        if (!rubricData.assignmentInfo || !rubricData.criteria || !rubricData.rubricLevels) {\r\n          alert('Invalid rubric format. Please ensure the rubric contains assignmentInfo, criteria, and rubricLevels.');\r\n          return;\r\n        }\r\n\r\n        setSharedRubric(rubricData); // This is the only state update needed now\r\n        alert(`Rubric \"${rubricData.assignmentInfo.title}\" loaded successfully!`);\r\n\r\n        setGradingData(prevData => ({\r\n          ...prevData,\r\n          rubricGrading: {}\r\n        }));\r\n      } catch (error) {\r\n        alert('Error loading rubric: Invalid JSON format');\r\n        console.error('Rubric loading error:', error);\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  // Enhanced total score calculation with grade percentage\r\n  const getTotalScore = () => {\r\n    const score = calculateTotalScore();\r\n    const percentage = sharedRubric ?\r\n      (score.finalScore / sharedRubric.assignmentInfo.totalPoints * 100).toFixed(1) : 0;\r\n    return { ...score, percentage };\r\n  };\r\n\r\n  // EXPORT FUNCTIONS\r\n  const exportToHTML = () => {\r\n    const htmlContent = generateStudentReportHTML();\r\n    const htmlBlob = new Blob([htmlContent], { type: 'text/html' });\r\n    const url = URL.createObjectURL(htmlBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `grade_report_${gradingData.student.name || 'student'}_${gradingData.assignment.name || 'assignment'}.html`;\r\n    link.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToPDF = () => {\r\n    const html = generateStudentReportHTML();\r\n    const printWindow = window.open('', '_blank');\r\n    printWindow.document.open();\r\n    printWindow.document.write(html);\r\n    printWindow.document.close();\r\n    printWindow.focus();\r\n    printWindow.print();\r\n  };\r\n\r\n  const exportGradingData = () => {\r\n    const exportData = {\r\n      ...gradingData,\r\n      rubric: sharedRubric,\r\n      totalScore: getTotalScore(),\r\n      exportDate: new Date().toISOString()\r\n    };\r\n\r\n    const dataStr = JSON.stringify(exportData, null, 2);\r\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\r\n\r\n    const exportFileDefaultName = `grading-${gradingData.student.name?.replace(/\\s+/g, '-') || 'student'}-${new Date().toISOString().split('T')[0]}.json`;\r\n\r\n    const linkElement = document.createElement('a');\r\n    linkElement.setAttribute('href', dataUri);\r\n    linkElement.setAttribute('download', exportFileDefaultName);\r\n    linkElement.click();\r\n  };\r\n\r\n  // GRADING SESSION HANDLERS\r\n  const handlePreviousStudent = () => {\r\n    if (!sessionActive) {\r\n      alert('Session has expired. Please refresh the page to start a new session.');\r\n      return;\r\n    }\r\n\r\n    if (currentStudent?.id) {\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n    const success = previousStudentInSession();\r\n    if (!success) {\r\n      console.log('Already at first student or no active session');\r\n    }\r\n  };\r\n\r\n  const handleNextStudent = () => {\r\n    if (!sessionActive) {\r\n      alert('Session has expired. Please refresh the page to start a new session.');\r\n      return;\r\n    }\r\n\r\n    if (currentStudent?.id) {\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n    const success = nextStudentInSession();\r\n    if (!success) {\r\n      console.log('Already at last student or no active session');\r\n    }\r\n  };\r\n\r\n  // PRIVACY: Enhanced saving handlers with session checks\r\n  const handleSaveDraft = () => {\r\n    if (!sessionActive) {\r\n      alert('Session has expired. Cannot save data. Please refresh the page to start a new session.');\r\n      return;\r\n    }\r\n\r\n    if (!currentStudent?.id) {\r\n      alert('No student selected for saving draft');\r\n      return;\r\n    }\r\n\r\n    saveDraft(currentStudent.id, gradingData);\r\n    alert(`Draft saved for ${currentStudent.name || 'current student'}`);\r\n  };\r\n\r\n  const handleNextStudentAsDraft = () => {\r\n    if (!sessionActive) {\r\n      alert('Session has expired. Please refresh the page to start a new session.');\r\n      return;\r\n    }\r\n\r\n    if (currentStudent?.id) {\r\n      console.log('💾 Saving as draft for student:', currentStudent.name);\r\n      saveDraft(currentStudent.id, localGradingData);\r\n    }\r\n    const success = nextStudentInSession('draft');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      console.log('✅ Draft saved, moved to next student (and scrolled to top)');\r\n    }\r\n  };\r\n\r\n  const getCurrentStudentInfo = () => {\r\n    if (!gradingSession?.active || !gradingSession.classListData?.students || !currentStudent) {\r\n      return null;\r\n    }\r\n    const totalStudents = gradingSession.classListData.students.length;\r\n    const currentIndex = gradingSession.currentStudentIndex || 0;\r\n    return {\r\n      student: currentStudent,\r\n      position: currentIndex + 1,\r\n      total: totalStudents,\r\n      isFirst: currentIndex === 0,\r\n      isLast: currentIndex >= totalStudents - 1\r\n    };\r\n  };\r\n\r\n  const currentStudentInfo = getCurrentStudentInfo();\r\n\r\n  const handleNextStudentAsFinal = () => {\r\n    if (!sessionActive) {\r\n      alert('Session has expired. Please refresh the page to start a new session.');\r\n      return;\r\n    }\r\n\r\n    if (currentStudent?.id) {\r\n      console.log('✅ Finalizing grade for student:', currentStudent.name);\r\n      const finalGradeData = {\r\n        ...localGradingData,\r\n        totalScore: getTotalScore(),\r\n        metadata: {\r\n          ...localGradingData.metadata,\r\n          gradedDate: new Date().toISOString(),\r\n          rubricIntegrated: !!sharedRubric\r\n        }\r\n      };\r\n      saveFinalGrade(currentStudent.id, finalGradeData);\r\n    }\r\n    const success = nextStudentInSession('final');\r\n    if (!success) {\r\n      alert('Grading session completed! All students have been graded.');\r\n      setActiveTab('class-manager');\r\n    } else {\r\n      resetGradingForm();\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      console.log('✅ Final grade saved, moved to next student (and scrolled to top)');\r\n    }\r\n  };\r\n\r\n  const resetGradingForm = () => {\r\n    const initialRubricGrading = {};\r\n    if (sharedRubric) {\r\n      sharedRubric.criteria.forEach(criterion => {\r\n        initialRubricGrading[criterion.id] = {\r\n          criterionId: criterion.id,\r\n          selectedLevel: null,\r\n          customComments: ''\r\n        };\r\n      });\r\n    }\r\n    setLocalGradingData(prev => ({\r\n      ...prev,\r\n      course: sharedCourseDetails?.course ?? prev.course,\r\n      assignment: sharedCourseDetails?.assignment ?? prev.assignment,\r\n      feedback: { general: '', strengths: '', improvements: '' },\r\n      attachments: [],\r\n      videoLinks: [],\r\n      latePolicy: { level: 'none', penaltyApplied: false },\r\n      rubricGrading: initialRubricGrading\r\n    }));\r\n  };\r\n\r\n  // PRIVACY: Session warning modal component\r\n  const SessionWarningModal = () => {\r\n    if (!sessionWarning) return null;\r\n\r\n    const formatTime = (ms) => {\r\n      const minutes = Math.floor(ms / 60000);\r\n      const seconds = Math.floor((ms % 60000) / 1000);\r\n      return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n        <div className=\"bg-white rounded-lg p-6 max-w-md w-mx-4\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <Timer className=\"w-6 h-6 text-orange-500 mr-2\" />\r\n            <h3 className=\"text-lg font-semibold text-gray-900\">\r\n              Session Warning\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <p className=\"text-gray-700 mb-2\">\r\n              {sessionActive\r\n                ? `Your session will expire in ${timeRemaining ? formatTime(timeRemaining) : 'less than 5 minutes'}.`\r\n                : 'Your session has expired for privacy protection.'\r\n              }\r\n            </p>\r\n            <p className=\"text-sm text-gray-600\">\r\n              {sessionActive\r\n                ? 'All data will be automatically cleared when the session expires. Export any work you want to keep.'\r\n                : 'All data has been cleared. Please refresh the page to start a new session.'\r\n              }\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex gap-2\">\r\n            {sessionActive ? (\r\n              <>\r\n                <button\r\n                  onClick={() => {\r\n                    extendSession();\r\n                    setSessionWarning(false);\r\n                  }}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                >\r\n                  Extend Session\r\n                </button>\r\n                <button\r\n                  onClick={() => setSessionWarning(false)}\r\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400\"\r\n                >\r\n                  Continue\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <button\r\n                onClick={() => window.location.reload()}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n              >\r\n                Start New Session\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // NEW: No Rubric UI Component with privacy awareness\r\n  const NoRubricUI = () => (\r\n    <div style={{\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      minHeight: '60vh',\r\n      background: 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fde68a 100%)',\r\n      borderRadius: '1rem',\r\n      border: '2px dashed #f59e0b',\r\n      padding: '3rem',\r\n      margin: '2rem 0',\r\n      textAlign: 'center'\r\n    }}>\r\n      <AlertTriangle\r\n        size={80}\r\n        style={{\r\n          color: '#d97706',\r\n          marginBottom: '1.5rem',\r\n          filter: 'drop-shadow(0 2px 4px rgba(217, 119, 6, 0.3))'\r\n        }}\r\n      />\r\n\r\n      <h2 style={{\r\n        fontSize: '2rem',\r\n        fontWeight: '700',\r\n        color: '#92400e',\r\n        marginBottom: '1rem',\r\n        textShadow: '0 1px 2px rgba(146, 64, 14, 0.1)'\r\n      }}>\r\n        No Rubric Loaded\r\n      </h2>\r\n\r\n      <p style={{\r\n        fontSize: '1.1rem',\r\n        color: '#a16207',\r\n        marginBottom: '2rem',\r\n        maxWidth: '600px',\r\n        lineHeight: '1.6'\r\n      }}>\r\n        A rubric is required before you can begin grading students. Please create a new rubric or load an existing one to get started.\r\n      </p>\r\n\r\n      <div style={{\r\n        display: 'flex',\r\n        gap: '1rem',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'center'\r\n      }}>\r\n        <button\r\n          onClick={() => setActiveTab('rubric-creator')}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(16, 185, 129, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(16, 185, 129, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.4)';\r\n          }}\r\n        >\r\n          <FileText size={20} />\r\n          Create New Rubric\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => rubricInputRef.current?.click()}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '1rem 2rem',\r\n            background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '0.75rem',\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.target.style.transform = 'translateY(-2px)';\r\n            e.target.style.boxShadow = '0 6px 16px rgba(59, 130, 246, 0.5)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.target.style.transform = 'translateY(0)';\r\n            e.target.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\r\n          }}\r\n        >\r\n          <Upload size={20} />\r\n          Load Existing Rubric\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{\r\n        marginTop: '2rem',\r\n        padding: '1rem',\r\n        background: 'rgba(255, 255, 255, 0.7)',\r\n        borderRadius: '0.5rem',\r\n        fontSize: '0.9rem',\r\n        color: '#78350f',\r\n        maxWidth: '500px'\r\n      }}>\r\n        <strong>💡 Tip:</strong> You can also use the AI Rubric Prompt Generator to create rubric prompts for AI tools, or generate assignment prompts before creating your rubric.\r\n      </div>\r\n\r\n      {/* PRIVACY: Session notice */}\r\n      {!sessionActive && (\r\n        <div style={{\r\n          marginTop: '1rem',\r\n          padding: '1rem',\r\n          background: 'rgba(248, 113, 113, 0.1)',\r\n          border: '1px solid #f87171',\r\n          borderRadius: '0.5rem',\r\n          fontSize: '0.9rem',\r\n          color: '#dc2626',\r\n          maxWidth: '500px'\r\n        }}>\r\n          <strong>⚠️ Session Expired:</strong> Your privacy session has ended. Please refresh the page to start a new session.\r\n        </div>\r\n      )}\r\n\r\n      <input\r\n        ref={rubricInputRef}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        style={{ display: 'none' }}\r\n        onChange={handleRubricUpload}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  // If no rubric is loaded, show the No Rubric UI\r\n  if (!sharedRubric) {\r\n    return (\r\n      <>\r\n        <SessionWarningModal />\r\n        <div style={{\r\n          padding: '2rem',\r\n          maxWidth: '1440px',\r\n          margin: '0 auto',\r\n          fontFamily: 'system-ui, -apple-system, sans-serif'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem',\r\n            marginBottom: '2rem',\r\n            padding: '1rem',\r\n            background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n            borderRadius: '0.75rem',\r\n            border: '1px solid #d1d5db'\r\n          }}>\r\n            <Settings size={32} style={{ color: '#6b7280' }} />\r\n            <div style={{ flex: 1 }}>\r\n              <h1 style={{\r\n                fontSize: '2rem',\r\n                fontWeight: '700',\r\n                color: '#1f2937',\r\n                margin: 0\r\n              }}>\r\n                🎯 Grading Tool\r\n              </h1>\r\n              <p style={{\r\n                color: '#6b7280',\r\n                margin: 0,\r\n                fontSize: '1rem'\r\n              }}>\r\n                Assessment and feedback management system\r\n              </p>\r\n            </div>\r\n            {/* PRIVACY: Session indicator */}\r\n            <div style={{ textAlign: 'right' }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                fontSize: '0.875rem',\r\n                color: sessionActive ? '#10b981' : '#ef4444',\r\n                fontWeight: '600'\r\n              }}>\r\n                <Shield size={16} />\r\n                {sessionActive ? 'Privacy Session Active' : 'Session Expired'}\r\n              </div>\r\n              {timeRemaining && sessionActive && (\r\n                <div style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                  {Math.floor(timeRemaining / 60000)}min remaining\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <NoRubricUI />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Regular grading interface when rubric is loaded\r\n  const totalScore = getTotalScore();\r\n  const gradeStatus = currentStudent?.id ? getGradeStatus(currentStudent.id) : 'none';\r\n\r\n  return (\r\n    <>\r\n      {/* PRIVACY: Session warning modal */}\r\n      <SessionWarningModal />\r\n\r\n      <div style={{\r\n        padding: '2rem',\r\n        maxWidth: '1340px',\r\n        margin: '0 auto',\r\n        fontFamily: 'system-ui, -apple-system, sans-serif'\r\n      }}>\r\n        {/* Header with session status */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem',\r\n          marginBottom: '2rem',\r\n          padding: '1rem',\r\n          background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n          borderRadius: '0.75rem',\r\n          border: '1px solid #d1d5db'\r\n        }}>\r\n          <Settings size={32} style={{ color: '#6b7280' }} />\r\n          <div style={{ flex: 1 }}>\r\n            <h1 style={{\r\n              fontSize: '2rem',\r\n              fontWeight: '700',\r\n              color: '#1f2937',\r\n              margin: 0\r\n            }}>\r\n              🎯 Grading Tool\r\n            </h1>\r\n            <p style={{\r\n              color: '#6b7280',\r\n              margin: 0,\r\n              fontSize: '1rem'\r\n            }}>\r\n              Assessment and feedback management system\r\n            </p>\r\n            {/* PRIVACY: Session status display */}\r\n            <div style={{\r\n              marginTop: '0.5rem',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '1rem',\r\n              fontSize: '0.875rem'\r\n            }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.25rem',\r\n                color: sessionActive ? '#10b981' : '#ef4444'\r\n              }}>\r\n                <Shield size={14} />\r\n                {sessionActive ? 'Privacy Session Active' : 'Session Expired'}\r\n              </div>\r\n              {timeRemaining && sessionActive && (\r\n                <div style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  color: '#f59e0b'\r\n                }}>\r\n                  <Timer size={14} />\r\n                  {Math.floor(timeRemaining / 60000)}min remaining\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: '0.75rem' }}>\r\n            <button\r\n              onClick={exportToHTML}\r\n              disabled={!sessionActive}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: sessionActive ? '#16a34a' : '#9ca3af',\r\n                color: 'white',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <FileDown size={16} />\r\n              Export HTML\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={exportToPDF}\r\n              disabled={!sessionActive}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                backgroundColor: sessionActive ? '#dc2626' : '#9ca3af',\r\n                color: '#ffffff',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <FileText size={16} />\r\n              Export PDF\r\n            </button>\r\n            <button\r\n              onClick={exportForAIFeedback}\r\n              disabled={!sessionActive}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: sessionActive ? '#7c3aed' : '#9ca3af',\r\n                color: 'white',\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.875rem'\r\n              }}\r\n              title=\"Export grade data and AI prompt for generating personalized feedback\"\r\n            >\r\n              <Bot size={16} />\r\n              Export for AI Feedback\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <input\r\n          ref={rubricInputRef}\r\n          type=\"file\"\r\n          accept=\".json\"\r\n          style={{ display: 'none' }}\r\n          onChange={handleRubricUpload}\r\n        />\r\n\r\n        {/* Current Rubric Info */}\r\n        {sharedRubric && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\r\n            border: '1px solid #93c5fd',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem'\r\n          }}>\r\n            <h2 style={{\r\n              fontSize: '1.25rem',\r\n              fontWeight: '600',\r\n              color: '#1e40af',\r\n              margin: '0 0 0.5rem 0',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem'\r\n            }}>\r\n              <FileText size={20} />\r\n              Current Rubric: {sharedRubric.assignmentInfo.title}\r\n            </h2>\r\n            <p style={{ color: '#1e40af', margin: 0, fontSize: '0.9rem' }}>\r\n              {sharedRubric.assignmentInfo.description || 'No description provided'}\r\n            </p>\r\n            <div style={{\r\n              display: 'flex',\r\n              gap: '2rem',\r\n              marginTop: '0.75rem',\r\n              fontSize: '0.875rem',\r\n              color: '#1d4ed8'\r\n            }}>\r\n              <span><strong>Weight:</strong> {sharedRubric.assignmentInfo?.weight || 0}%</span>\r\n              <span><strong>Total Points:</strong> {sharedRubric.assignmentInfo?.totalPoints || 0}</span>\r\n              <span><strong>Passing:</strong> {sharedRubric.assignmentInfo?.passingThreshold || 0}%</span>\r\n              <span><strong>Criteria:</strong> {sharedRubric.criteria?.length || 0}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Grading Session Status */}\r\n        {gradingSession && gradingSession.classListData?.students && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',\r\n            border: '1px solid #6ee7b7',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <div>\r\n                <h3 style={{\r\n                  fontSize: '1.125rem',\r\n                  fontWeight: '600',\r\n                  color: '#047857',\r\n                  margin: '0 0 0.5rem 0',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem'\r\n                }}>\r\n                  <Users size={18} />\r\n                  Batch Grading Session Active\r\n                </h3>\r\n                <p style={{ color: '#047857', margin: 0, fontSize: '0.9rem' }}>\r\n                  Student {gradingSession.currentStudentIndex + 1} of {gradingSession.classListData.students.length || 0}:\r\n                  <strong> {gradingSession.classListData.students[gradingSession.currentStudentIndex]?.name || 'Unknown'}</strong>\r\n                </p>\r\n              </div>\r\n\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                <button\r\n                  onClick={handlePreviousStudent}\r\n                  disabled={gradingSession.currentStudentIndex === 0 || !sessionActive}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.25rem',\r\n                    padding: '0.5rem 1rem',\r\n                    background: (gradingSession.currentStudentIndex === 0 || !sessionActive) ? '#f3f4f6' : '#10b981',\r\n                    color: (gradingSession.currentStudentIndex === 0 || !sessionActive) ? '#9ca3af' : 'white',\r\n                    border: 'none',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    cursor: (gradingSession.currentStudentIndex === 0 || !sessionActive) ? 'not-allowed' : 'pointer',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  <SkipBack size={16} />\r\n                  Previous\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => {\r\n                    updateGradingSession({ active: false });\r\n                    setActiveTab('class-manager');\r\n                  }}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.25rem',\r\n                    padding: '0.5rem 1rem',\r\n                    background: '#f59e0b',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  <Pause size={16} />\r\n                  Pause Session\r\n                </button>\r\n\r\n                <button\r\n                  onClick={handleNextStudent}\r\n                  disabled={gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.25rem',\r\n                    padding: '0.5rem 1rem',\r\n                    background: (gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive) ? '#f3f4f6' : '#10b981',\r\n                    color: (gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive) ? '#9ca3af' : 'white',\r\n                    border: 'none',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    cursor: (gradingSession.currentStudentIndex >= (gradingSession.classListData.students.length || 0) - 1 || !sessionActive) ? 'not-allowed' : 'pointer',\r\n                    fontWeight: '500'\r\n                  }}\r\n                >\r\n                  Next\r\n                  <SkipForward size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Continue with rest of the grading interface... */}\r\n        {/* Student Information */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            👤 Student Information\r\n          </h3>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Student Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.student.name}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    student: { ...prevData.student, name: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"Enter student name\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Student ID\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.student.id}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    student: { ...prevData.student, id: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"Enter student ID\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={gradingData.student.email}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    student: { ...prevData.student, email: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"Enter email address\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {gradeStatus !== 'none' && (\r\n              <div style={{\r\n                marginTop: '1rem',\r\n                padding: '0.75rem',\r\n                background: gradeStatus === 'final' ? '#dcfce7' : '#fef3c7',\r\n                border: `1px solid ${gradeStatus === 'final' ? '#86efac' : '#fde047'}`,\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem',\r\n                color: gradeStatus === 'final' ? '#047857' : '#a16207'\r\n              }}>\r\n                <strong>\r\n                  {gradeStatus === 'final' ? '✅ Final Grade Saved' : '📝 Draft Saved'}\r\n                </strong>\r\n                {gradeStatus === 'final' && ' - This student has been fully graded'}\r\n                {gradeStatus === 'draft' && ' - You can continue editing this draft'}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Course Information */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', margin: 0, color: '#374151' }}>\r\n              🏫 Course Information\r\n            </h3>\r\n            {classList && classList.courseMetadata && (\r\n              <button\r\n                onClick={pullCourseDataFromClassList}\r\n                disabled={!sessionActive}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.25rem',\r\n                  padding: '0.375rem 0.75rem',\r\n                  background: sessionActive ? '#3b82f6' : '#9ca3af',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.75rem',\r\n                  cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                <Download size={14} />\r\n                Pull Course Data\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Course Code\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.course.code}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    course: { ...prevData.course, code: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"e.g., CS 101\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Course Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.course.name}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    course: { ...prevData.course, name: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"e.g., Introduction to Computer Science\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Instructor\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.course.instructor}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    course: { ...prevData.course, instructor: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"Instructor name\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Term\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.course.term}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    course: { ...prevData.course, term: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"e.g., Fall 2024\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Assignment Information */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            📋 Assignment Information\r\n          </h3>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Assignment Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={gradingData.assignment.name}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    assignment: { ...prevData.assignment, name: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  placeholder=\"Assignment title\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Due Date\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={gradingData.assignment.dueDate}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    assignment: { ...prevData.assignment, dueDate: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Max Points\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={gradingData.assignment.maxPoints}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    assignment: { ...prevData.assignment, maxPoints: parseInt(e.target.value) || 100 }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  min=\"1\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Late Policy */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            ⏰ Late Policy\r\n          </h3>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem'\r\n          }}>\r\n            <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n              {Object.entries((currentLatePolicy || DEFAULT_LATE_POLICY).levels).map(([levelKey, levelData]) => (\r\n                <label\r\n                  key={levelKey}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.75rem 1rem',\r\n                    background: gradingData.latePolicy.level === levelKey ? levelData.color : '#f9fafb',\r\n                    color: gradingData.latePolicy.level === levelKey ? 'white' : '#374151',\r\n                    borderRadius: '0.5rem',\r\n                    cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    border: `2px solid ${gradingData.latePolicy.level === levelKey ? levelData.color : '#e5e7eb'}`,\r\n                    transition: 'all 0.2s ease',\r\n                    opacity: sessionActive ? 1 : 0.6\r\n                  }}\r\n                >\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"latePolicy\"\r\n                    value={levelKey}\r\n                    checked={gradingData.latePolicy.level === levelKey}\r\n                    onChange={(e) => updateLatePolicy(e.target.value)}\r\n                    disabled={!sessionActive}\r\n                    style={{ margin: 0 }}\r\n                  />\r\n                  {levelData.name}\r\n                  <span style={{ fontSize: '0.75rem', opacity: 0.8 }}>\r\n                    ({Math.round(levelData.multiplier * 100)}%)\r\n                  </span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n\r\n            {gradingData.latePolicy.level !== 'none' && (\r\n              <div style={{\r\n                marginTop: '1rem',\r\n                padding: '0.75rem',\r\n                background: '#fef3c7',\r\n                border: '1px solid #fde047',\r\n                borderRadius: '0.5rem',\r\n                fontSize: '0.875rem',\r\n                color: '#a16207'\r\n              }}>\r\n                <strong>Late Policy Applied:</strong> {(currentLatePolicy || DEFAULT_LATE_POLICY).levels[gradingData.latePolicy.level]?.description}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rubric Grading */}\r\n        {sharedRubric && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n            border: '1px solid #bbf7d0',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n              <div>\r\n                <h3 style={{ fontSize: '1.25rem', fontWeight: '700', color: '#15803d', marginBottom: '0.5rem' }}>\r\n                  📋 Active Assignment Rubric\r\n                </h3>\r\n                <p style={{ color: '#16a34a', fontWeight: '600', fontSize: '1.1rem' }}>\r\n                  {sharedRubric.assignmentInfo.title}\r\n                </p>\r\n                <p style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                  {renderFormattedContent(sharedRubric.assignmentInfo.description)}\r\n                </p>\r\n              </div>\r\n              <div style={{ textAlign: 'right' }}>\r\n                <div style={{ fontSize: '0.875rem', color: '#059669' }}>\r\n                  <p style={{ margin: '0.25rem 0' }}>\r\n                    <strong>Weight:</strong> {sharedRubric.assignmentInfo.weight}% of Final Grade\r\n                  </p>\r\n                  <p style={{ margin: '0.25rem 0' }}>\r\n                    <strong>Passing:</strong> {sharedRubric.assignmentInfo.passingThreshold}%\r\n                  </p>\r\n                  <p style={{ margin: '0.25rem 0' }}>\r\n                    <strong>Total Points:</strong> {sharedRubric.assignmentInfo.totalPoints}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Rubric Grading Interface */}\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5rem' }}>\r\n              {sharedRubric.criteria.map((criterion) => {\r\n                const currentGrading = gradingData.rubricGrading && gradingData.rubricGrading[criterion.id];\r\n                const showComments = showRubricComments[criterion.id];\r\n\r\n                return (\r\n                  <div key={criterion.id} style={{\r\n                    background: 'white',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    padding: '1.25rem',\r\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                    opacity: sessionActive ? 1 : 0.6\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                      <div style={{ flex: 1 }}>\r\n                        <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                          {criterion.name}\r\n                          <span style={{ color: '#3b82f6', marginLeft: '0.5rem' }}>\r\n                            ({criterion.maxPoints} pts)\r\n                          </span>\r\n                        </h4>\r\n                        <p style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.25rem' }}>\r\n                          {renderFormattedContent(criterion.description)}\r\n                        </p>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => setShowRubricComments(prev => ({\r\n                          ...prev,\r\n                          [criterion.id]: !prev[criterion.id]\r\n                        }))}\r\n                        disabled={!sessionActive}\r\n                        style={{\r\n                          color: sessionActive ? '#3b82f6' : '#9ca3af',\r\n                          background: 'none',\r\n                          border: 'none',\r\n                          fontSize: '0.875rem',\r\n                          textDecoration: 'underline',\r\n                          cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                          marginLeft: '1rem'\r\n                        }}\r\n                      >\r\n                        {showComments ? 'Hide' : 'Show'} Level Details\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Level Selection */}\r\n                    <div style={{\r\n                      display: 'grid',\r\n                      gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\r\n                      gap: '0.5rem',\r\n                      marginBottom: '1rem'\r\n                    }}>\r\n                      {sharedRubric.rubricLevels.map((level) => {\r\n                        const isSelected = currentGrading?.selectedLevel === level.level;\r\n                        const points = Math.round(criterion.maxPoints * level.multiplier);\r\n\r\n                        return (\r\n                          <button\r\n                            key={level.level}\r\n                            onClick={() => updateRubricGrading(criterion.id, level.level)}\r\n                            disabled={!sessionActive}\r\n                            style={{\r\n                              padding: '0.75rem',\r\n                              borderRadius: '0.5rem',\r\n                              border: `2px solid ${isSelected ? level.color : '#d1d5db'}`,\r\n                              fontSize: '0.875rem',\r\n                              fontWeight: '500',\r\n                              cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                              transition: 'all 0.2s ease',\r\n                              backgroundColor: isSelected ? level.color : 'white',\r\n                              color: isSelected ? 'white' : '#374151',\r\n                              transform: isSelected ? 'scale(1.05)' : 'none',\r\n                              textAlign: 'center',\r\n                              opacity: sessionActive ? 1 : 0.6\r\n                            }}\r\n                          >\r\n                            <div style={{ fontWeight: '600' }}>{level.name}</div>\r\n                            <div style={{ fontSize: '0.75rem', marginTop: '0.25rem' }}>\r\n                              {level.level === 'incomplete' ? '0' : points} pts\r\n                            </div>\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </div>\r\n\r\n                    {/* Level Descriptions */}\r\n                    {showComments && (\r\n                      <div style={{\r\n                        background: '#f9fafb',\r\n                        borderRadius: '0.5rem',\r\n                        padding: '1rem',\r\n                        marginBottom: '1rem'\r\n                      }}>\r\n                        <h5 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                          Level Descriptions:\r\n                        </h5>\r\n                        <div style={{\r\n                          display: 'grid',\r\n                          gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',\r\n                          gap: '0.75rem'\r\n                        }}>\r\n                          {sharedRubric.rubricLevels.map((level) => (\r\n                            <div\r\n                              key={level.level}\r\n                              style={{\r\n                                background: 'white',\r\n                                borderRadius: '0.25rem',\r\n                                border: '1px solid #d1d5db',\r\n                                borderLeft: `4px solid ${level.color}`,\r\n                                padding: '0.75rem'\r\n                              }}\r\n                            >\r\n                              <div style={{ fontWeight: '500', fontSize: '0.875rem', color: level.color }}>\r\n                                {level.name}\r\n                              </div>\r\n                              <div style={{ fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem' }}>\r\n                                {criterion.levels[level.level]?.pointRange} pts\r\n                              </div>\r\n                              <div style={{ fontSize: '0.75rem', color: '#374151' }}>\r\n                                {renderFormattedContent(criterion.levels[level.level]?.description)}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Custom Comments */}\r\n                    <div>\r\n                      <label style={{\r\n                        display: 'block',\r\n                        fontSize: '0.875rem',\r\n                        fontWeight: '500',\r\n                        color: '#374151',\r\n                        marginBottom: '0.5rem'\r\n                      }}>\r\n                        Additional Comments:\r\n                      </label>\r\n\r\n                      {/* Quick Feedback Dropdowns */}\r\n                      {criterion.feedbackLibrary && sessionActive && (\r\n                        <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.75rem', flexWrap: 'wrap' }}>\r\n                          {Object.entries(criterion.feedbackLibrary).map(([category, comments]) => (\r\n                            <select\r\n                              key={category}\r\n                              onChange={(e) => {\r\n                                if (e.target.value) {\r\n                                  addCriterionFeedback(criterion.id, e.target.value);\r\n                                  e.target.value = '';\r\n                                }\r\n                              }}\r\n                              defaultValue=\"\"\r\n                              style={{\r\n                                padding: '0.5rem',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '0.25rem',\r\n                                fontSize: '0.75rem',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                            >\r\n                              <option value=\"\">Add {category}...</option>\r\n                              {comments.map((comment, idx) => (\r\n                                <option key={idx} value={comment}>{renderFormattedContent(comment)}</option>\r\n                              ))}\r\n                            </select>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n\r\n                      <textarea\r\n                        value={currentGrading?.customComments || ''}\r\n                        onChange={(e) => updateRubricGrading(criterion.id, currentGrading?.selectedLevel, e.target.value)}\r\n                        disabled={!sessionActive}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '0.75rem',\r\n                          border: '1px solid #d1d5db',\r\n                          borderRadius: '0.5rem',\r\n                          fontSize: '0.875rem',\r\n                          resize: 'none',\r\n                          minHeight: '80px',\r\n                          backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                          cursor: sessionActive ? 'text' : 'not-allowed'\r\n                        }}\r\n                        rows=\"3\"\r\n                        placeholder=\"Add specific feedback for this criterion...\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Selected Level Feedback */}\r\n                    {currentGrading?.selectedLevel && (\r\n                      <div style={{\r\n                        marginTop: '0.75rem',\r\n                        padding: '0.75rem',\r\n                        background: '#eff6ff',\r\n                        borderRadius: '0.25rem',\r\n                        border: '1px solid #bfdbfe'\r\n                      }}>\r\n                        <div style={{ fontSize: '0.875rem' }}>\r\n                          <strong>Selected Level:</strong> {sharedRubric.rubricLevels.find(l => l.level === currentGrading.selectedLevel)?.name}\r\n                          {' '}({criterion.levels[currentGrading.selectedLevel]?.pointRange} pts)\r\n                        </div>\r\n                        <div style={{ fontSize: '0.875rem', color: '#374151', marginTop: '0.25rem' }}>\r\n                          {renderFormattedContent(criterion.levels[currentGrading.selectedLevel]?.description)}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Rubric Summary */}\r\n            <div style={{\r\n              marginTop: '1.5rem',\r\n              background: 'white',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '0.5rem',\r\n              padding: '1rem'\r\n            }}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <h4 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#374151' }}>\r\n                    Rubric Score Summary\r\n                  </h4>\r\n                  <p style={{ fontSize: '0.875rem', color: '#6b7280' }}>\r\n                    Based on selected levels across all criteria\r\n                  </p>\r\n                </div>\r\n                <div style={{ textAlign: 'right' }}>\r\n                  <div style={{ fontSize: '1.5rem', fontWeight: '700', color: '#3b82f6' }}>\r\n                    {Math.round(scoreSummary.finalScore * 10) / 10}/{sharedRubric.assignmentInfo.totalPoints}\r\n                  </div>\r\n                  <div style={{ fontSize: '1.125rem', color: '#6b7280' }}>\r\n                    ({Math.round((scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1)) * 1000) / 10}%)\r\n                  </div>\r\n                  {scoreSummary.penaltyApplied && (\r\n                    <div style={{ fontSize: '0.875rem', color: '#dc2626', marginTop: '0.25rem' }}>\r\n                      Raw: {Math.round(scoreSummary.rawScore * 10) / 10} (Late Penalty Applied)\r\n                    </div>\r\n                  )}\r\n                  <div style={{\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    color: (scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1)) * 100 >= sharedRubric.assignmentInfo.passingThreshold\r\n                      ? '#16a34a' : '#dc2626'\r\n                  }}>\r\n                    {(scoreSummary.finalScore / (sharedRubric.assignmentInfo.totalPoints || 1)) * 100 >= sharedRubric.assignmentInfo.passingThreshold\r\n                      ? '✓ PASSING' : '✗ NEEDS IMPROVEMENT'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Enhanced Complete and Grade Next Section */}\r\n        {sharedRubric && (gradingData.student?.name || currentStudent) && sessionActive && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)',\r\n            border: '2px solid #10b981',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem',\r\n            textAlign: 'center'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.25rem', fontWeight: '600', color: '#047857', marginBottom: '1rem' }}>\r\n              Ready to move to the next student?\r\n            </h3>\r\n            <p style={{ color: '#065f46', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n              Choose how to save the current grading before proceeding.\r\n            </p>\r\n\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n              {/* Save as Draft Button */}\r\n              <button\r\n                onClick={handleNextStudentAsDraft}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',\r\n                  color: 'white',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '0.5rem',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600',\r\n                  boxShadow: '0 2px 8px rgba(251, 191, 36, 0.4)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                  e.target.style.transform = 'translateY(-2px)';\r\n                  e.target.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                  e.target.style.transform = 'translateY(0)';\r\n                  e.target.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.4)';\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '1.1rem' }}>📝</span>\r\n                Save & Grade Next Student\r\n              </button>\r\n\r\n              {/* Finalize & Grade Next Button */}\r\n              <button\r\n                onClick={handleNextStudentAsFinal}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                  color: 'white',\r\n                  padding: '0.75rem 1.5rem',\r\n                  borderRadius: '0.5rem',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600',\r\n                  boxShadow: '0 2px 8px rgba(16, 185, 129, 0.4)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                  e.target.style.transform = 'translateY(-2px)';\r\n                  e.target.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.5)';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                  e.target.style.transform = 'translateY(0)';\r\n                  e.target.style.boxShadow = '0 2px 8px rgba(16, 185, 129, 0.4)';\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '1.1rem' }}>✅</span>\r\n                Finalize & Grade Next Student\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{\r\n              marginTop: '1rem',\r\n              padding: '0.75rem',\r\n              background: 'rgba(255, 255, 255, 0.6)',\r\n              borderRadius: '0.375rem',\r\n              fontSize: '0.75rem',\r\n              color: '#065f46'\r\n            }}>\r\n              <strong>Draft:</strong> Save progress, can edit later • <strong>Finalize:</strong> Complete grading, ready for student/LMS\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Score Summary */}\r\n        <div style={{\r\n          textAlign: 'center',\r\n          background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',\r\n          border: '1px solid #bbf7d0',\r\n          borderRadius: '0.75rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <h2 style={{ fontSize: '1.5rem', fontWeight: '700', color: '#15803d', marginBottom: '1rem' }}>\r\n            📊 Final Score\r\n          </h2>\r\n          <div style={{ fontSize: '3rem', fontWeight: '700', color: '#16a34a', marginBottom: '1rem' }}>\r\n            {Math.round(scoreSummary.finalScore * 10) / 10}\r\n            <span style={{ fontSize: '1.5rem', color: '#6b7280' }}>\r\n              / {sharedRubric ? sharedRubric.assignmentInfo.totalPoints : gradingData.assignment.maxPoints}\r\n            </span>\r\n          </div>\r\n          <div style={{ fontSize: '1.25rem', color: '#6b7280', marginBottom: '1rem' }}>\r\n            ({Math.round((scoreSummary.finalScore / (sharedRubric ? (sharedRubric.assignmentInfo.totalPoints || 1) : (gradingData.assignment.maxPoints || 1))) * 1000) / 10}%)\r\n          </div>\r\n          <div style={{ display: 'flex', justifyContent: 'center', gap: '1rem', flexWrap: 'wrap' }}>\r\n            {sharedRubric && (\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                background: '#dcfce7',\r\n                color: '#15803d',\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '1rem'\r\n              }}>\r\n                📋 Rubric Assessment Active\r\n              </div>\r\n            )}\r\n            {scoreSummary.penaltyApplied && (\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                background: '#fee2e2',\r\n                color: '#dc2626',\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '1rem'\r\n              }}>\r\n                ⏰ Late Penalty Applied\r\n              </div>\r\n            )}\r\n            {gradingSession && gradingSession.classListData?.students && (\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                background: '#dbeafe',\r\n                color: '#2563eb',\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '1rem'\r\n              }}>\r\n                👥 Batch Session Active\r\n              </div>\r\n            )}\r\n            {!sessionActive && (\r\n              <div style={{\r\n                fontSize: '0.875rem',\r\n                background: '#fee2e2',\r\n                color: '#dc2626',\r\n                padding: '0.25rem 0.75rem',\r\n                borderRadius: '1rem'\r\n              }}>\r\n                ⚠️ Session Expired\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Save Draft Section */}\r\n        {currentStudent && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\r\n            border: '1px solid #f59e0b',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            marginBottom: '2rem',\r\n            textAlign: 'center'\r\n          }}>\r\n            <h3 style={{ fontSize: '1.125rem', fontWeight: '600', color: '#92400e', marginBottom: '0.75rem' }}>\r\n              💾 Save Your Progress\r\n            </h3>\r\n            <p style={{ color: '#a16207', marginBottom: '1.5rem', fontSize: '0.875rem' }}>\r\n              Saves your work on the current student without navigating away from the page.\r\n            </p>\r\n            <button\r\n              onClick={() => {\r\n                if (currentStudent?.id && sessionActive) {\r\n                  saveDraft(currentStudent.id, localGradingData);\r\n                  // Show success feedback\r\n                  const button = document.activeElement;\r\n                  const originalText = button.innerHTML;\r\n                  const originalBg = button.style.background;\r\n                  button.innerHTML = '<span style=\"display: flex; align-items: center; gap: 0.5rem;\"><svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\"/></svg>Draft Saved!</span>';\r\n                  button.style.background = 'linear-gradient(135deg, #059669 0%, #047857 100%)';\r\n                  setTimeout(() => {\r\n                    button.innerHTML = originalText;\r\n                    button.style.background = originalBg;\r\n                  }, 2000);\r\n                } else if (!sessionActive) {\r\n                  alert('Session has expired. Cannot save data. Please refresh the page to start a new session.');\r\n                }\r\n              }}\r\n              disabled={!currentStudent?.id || !sessionActive}\r\n              style={{\r\n                display: 'inline-flex',\r\n                alignItems: 'center',\r\n                gap: '0.75rem',\r\n                background: (currentStudent?.id && sessionActive) ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' : '#9ca3af',\r\n                color: 'white',\r\n                padding: '1rem 2rem',\r\n                borderRadius: '0.75rem',\r\n                border: 'none',\r\n                cursor: (currentStudent?.id && sessionActive) ? 'pointer' : 'not-allowed',\r\n                fontSize: '1rem',\r\n                fontWeight: '600',\r\n                boxShadow: (currentStudent?.id && sessionActive) ? '0 4px 12px rgba(245, 158, 11, 0.4)' : 'none',\r\n                transform: 'translateY(0)',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                if (currentStudent?.id && sessionActive) {\r\n                  e.currentTarget.style.transform = 'translateY(-2px)';\r\n                  e.currentTarget.style.boxShadow = '0 8px 20px rgba(245, 158, 11, 0.5)';\r\n                }\r\n              }}\r\n              onMouseOut={(e) => {\r\n                if (currentStudent?.id && sessionActive) {\r\n                  e.currentTarget.style.transform = 'translateY(0)';\r\n                  e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\r\n                }\r\n              }}\r\n              title={\r\n                !currentStudent?.id ? 'No student selected to save' :\r\n                  !sessionActive ? 'Session expired - cannot save' :\r\n                    'Save current grading progress'\r\n              }\r\n            >\r\n              <Save size={20} />\r\n              Save Draft\r\n            </button>\r\n            {!currentStudent?.id && (\r\n              <p style={{ marginTop: '0.75rem', fontSize: '0.75rem', color: '#6b7280' }}>\r\n                Select a student from the Class Manager to enable draft saving\r\n              </p>\r\n            )}\r\n            {!sessionActive && (\r\n              <p style={{ marginTop: '0.75rem', fontSize: '0.75rem', color: '#dc2626' }}>\r\n                Session expired - refresh page to start new session\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* General Feedback Section */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            📝 General Feedback\r\n          </h3>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            opacity: sessionActive ? 1 : 0.6\r\n          }}>\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1.5rem' }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Overall Comments\r\n                </label>\r\n                <textarea\r\n                  value={gradingData.feedback.general}\r\n                  onChange={(e) => setGradingData(prevData => ({\r\n                    ...prevData,\r\n                    feedback: { ...prevData.feedback, general: e.target.value }\r\n                  }))}\r\n                  disabled={!sessionActive}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.75rem',\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    fontSize: '0.875rem',\r\n                    resize: 'none',\r\n                    minHeight: '100px',\r\n                    backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                    cursor: sessionActive ? 'text' : 'not-allowed'\r\n                  }}\r\n                  rows=\"4\"\r\n                  placeholder=\"General comments about the assignment...\"\r\n                />\r\n              </div>\r\n\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    color: '#374151',\r\n                    marginBottom: '0.5rem'\r\n                  }}>\r\n                    Strengths\r\n                  </label>\r\n                  <textarea\r\n                    value={gradingData.feedback.strengths}\r\n                    onChange={(e) => setGradingData(prevData => ({\r\n                      ...prevData,\r\n                      feedback: { ...prevData.feedback, strengths: e.target.value }\r\n                    }))}\r\n                    disabled={!sessionActive}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '0.75rem',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '0.5rem',\r\n                      fontSize: '0.875rem',\r\n                      resize: 'none',\r\n                      minHeight: '100px',\r\n                      backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                      cursor: sessionActive ? 'text' : 'not-allowed'\r\n                    }}\r\n                    rows=\"4\"\r\n                    placeholder=\"What the student did well...\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    fontSize: '0.875rem',\r\n                    fontWeight: '500',\r\n                    color: '#374151',\r\n                    marginBottom: '0.5rem'\r\n                  }}>\r\n                    Areas for Improvement\r\n                  </label>\r\n                  <textarea\r\n                    value={gradingData.feedback.improvements}\r\n                    onChange={(e) => setGradingData(prevData => ({\r\n                      ...prevData,\r\n                      feedback: { ...prevData.feedback, improvements: e.target.value }\r\n                    }))}\r\n                    disabled={!sessionActive}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '0.75rem',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '0.5rem',\r\n                      fontSize: '0.875rem',\r\n                      resize: 'none',\r\n                      minHeight: '100px',\r\n                      backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                      cursor: sessionActive ? 'text' : 'not-allowed'\r\n                    }}\r\n                    rows=\"4\"\r\n                    placeholder=\"Suggestions for improvement...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* File Attachments */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            📎 File Attachments\r\n          </h3>\r\n          <div style={{\r\n            border: '2px dashed #d1d5db',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            textAlign: 'center',\r\n            opacity: sessionActive ? 1 : 0.6\r\n          }}>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              multiple\r\n              onChange={handleFileUpload}\r\n              disabled={!sessionActive}\r\n              style={{ display: 'none' }}\r\n            />\r\n            <button\r\n              onClick={() => sessionActive && fileInputRef.current?.click()}\r\n              disabled={!sessionActive}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                background: sessionActive ? '#3b82f6' : '#9ca3af',\r\n                color: 'white',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '0.5rem',\r\n                border: 'none',\r\n                cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                margin: '0 auto'\r\n              }}\r\n            >\r\n              <Plus size={20} />\r\n              Add Files\r\n            </button>\r\n            <p style={{ color: '#6b7280', marginTop: '0.5rem', fontSize: '0.875rem' }}>\r\n              Upload images, documents, or other files relevant to the assignment\r\n              {!sessionActive && ' (Session expired - refresh to enable)'}\r\n            </p>\r\n          </div>\r\n\r\n          {gradingData.attachments.length > 0 && (\r\n            <div style={{ marginTop: '1rem' }}>\r\n              <h4 style={{ fontWeight: '600', color: '#374151', marginBottom: '0.75rem' }}>\r\n                Uploaded Files ({gradingData.attachments.length})\r\n              </h4>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',\r\n                gap: '1rem'\r\n              }}>\r\n                {gradingData.attachments.map((file) => (\r\n                  <div key={file.id} style={{\r\n                    border: '1px solid #d1d5db',\r\n                    borderRadius: '0.5rem',\r\n                    overflow: 'hidden',\r\n                    background: 'white'\r\n                  }}>\r\n                    {file.type.startsWith('image/') ? (\r\n                      <div style={{ position: 'relative' }}>\r\n                        <img\r\n                          src={file.base64Data || URL.createObjectURL(file.file)}\r\n                          alt={file.name}\r\n                          style={{\r\n                            width: '100%',\r\n                            height: '150px',\r\n                            objectFit: 'cover'\r\n                          }}\r\n                        />\r\n                        <button\r\n                          onClick={() => removeAttachment(file.id)}\r\n                          disabled={!sessionActive}\r\n                          style={{\r\n                            position: 'absolute',\r\n                            top: '0.5rem',\r\n                            right: '0.5rem',\r\n                            background: sessionActive ? '#dc2626' : '#9ca3af',\r\n                            color: 'white',\r\n                            borderRadius: '50%',\r\n                            width: '24px',\r\n                            height: '24px',\r\n                            border: 'none',\r\n                            cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center'\r\n                          }}\r\n                        >\r\n                          <X size={12} />\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <div style={{ padding: '1rem' }}>\r\n                        <FileText size={40} style={{ color: '#6b7280', margin: '0 auto 0.5rem auto', display: 'block' }} />\r\n                      </div>\r\n                    )}\r\n                    <div style={{ padding: '0.75rem' }}>\r\n                      <p style={{ fontWeight: '500', fontSize: '0.875rem', marginBottom: '0.25rem' }}>\r\n                        {file.name}\r\n                      </p>\r\n                      <p style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                        {(file.size / 1024).toFixed(1)} KB\r\n                      </p>\r\n                      {!file.type.startsWith('image/') && (\r\n                        <button\r\n                          onClick={() => removeAttachment(file.id)}\r\n                          disabled={!sessionActive}\r\n                          style={{\r\n                            marginTop: '0.5rem',\r\n                            color: sessionActive ? '#dc2626' : '#9ca3af',\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            fontSize: '0.75rem',\r\n                            cursor: sessionActive ? 'pointer' : 'not-allowed'\r\n                          }}\r\n                        >\r\n                          Remove\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Video Links */}\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <h3 style={{ fontSize: '1.125rem', fontWeight: '600', marginBottom: '1rem', color: '#374151' }}>\r\n            🎥 Video Links\r\n          </h3>\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #fafaff 0%, #f3f4f6 100%)',\r\n            border: '1px solid #d1d5db',\r\n            borderRadius: '0.75rem',\r\n            padding: '1.5rem',\r\n            opacity: sessionActive ? 1 : 0.6\r\n          }}>\r\n            <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n              <input\r\n                type=\"url\"\r\n                value={videoLinkInput}\r\n                onChange={(e) => setVideoLinkInput(e.target.value)}\r\n                disabled={!sessionActive}\r\n                placeholder=\"Enter video URL (YouTube, Vimeo, etc.)\"\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                  cursor: sessionActive ? 'text' : 'not-allowed'\r\n                }}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={videoTitle}\r\n                onChange={(e) => setVideoTitle(e.target.value)}\r\n                disabled={!sessionActive}\r\n                placeholder=\"Video title (optional)\"\r\n                style={{\r\n                  width: '200px',\r\n                  padding: '0.75rem',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '0.5rem',\r\n                  fontSize: '0.875rem',\r\n                  backgroundColor: sessionActive ? 'white' : '#f3f4f6',\r\n                  cursor: sessionActive ? 'text' : 'not-allowed'\r\n                }}\r\n              />\r\n              <button\r\n                onClick={addVideoLink}\r\n                disabled={!videoLinkInput.trim() || !sessionActive}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.75rem 1rem',\r\n                  background: (videoLinkInput.trim() && sessionActive) ? '#10b981' : '#d1d5db',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.5rem',\r\n                  cursor: (videoLinkInput.trim() && sessionActive) ? 'pointer' : 'not-allowed',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '600'\r\n                }}\r\n              >\r\n                <Video size={16} />\r\n                Add\r\n              </button>\r\n            </div>\r\n\r\n            {gradingData.videoLinks.length > 0 && (\r\n              <div>\r\n                <h4 style={{ fontSize: '0.875rem', fontWeight: '600', marginBottom: '0.5rem', color: '#374151' }}>\r\n                  Video Links:\r\n                </h4>\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                  {gradingData.videoLinks.map((link) => (\r\n                    <div\r\n                      key={link.id}\r\n                      style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '0.5rem',\r\n                        padding: '0.75rem',\r\n                        background: '#ffffff',\r\n                        border: '1px solid #e5e7eb',\r\n                        borderRadius: '0.5rem'\r\n                      }}\r\n                    >\r\n                      <Video size={16} style={{ color: '#6b7280' }} />\r\n                      <div style={{ flex: 1 }}>\r\n                        <div style={{ fontWeight: '500', fontSize: '0.875rem', color: '#374151' }}>\r\n                          {link.title}\r\n                        </div>\r\n                        <a\r\n                          href={link.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          style={{\r\n                            fontSize: '0.75rem',\r\n                            color: '#3b82f6',\r\n                            textDecoration: 'none'\r\n                          }}\r\n                        >\r\n                          {link.url}\r\n                        </a>\r\n                      </div>\r\n                      <span style={{ fontSize: '0.75rem', color: '#6b7280' }}>\r\n                        {link.addedDate}\r\n                      </span>\r\n                      <button\r\n                        onClick={() => removeVideoLink(link.id)}\r\n                        disabled={!sessionActive}\r\n                        style={{\r\n                          background: 'none',\r\n                          border: 'none',\r\n                          color: sessionActive ? '#ef4444' : '#9ca3af',\r\n                          cursor: sessionActive ? 'pointer' : 'not-allowed',\r\n                          padding: '0.25rem'\r\n                        }}\r\n                      >\r\n                        <X size={16} />\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GradingTemplate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}